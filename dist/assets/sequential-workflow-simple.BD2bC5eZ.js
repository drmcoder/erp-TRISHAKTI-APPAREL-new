const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.B3OoR7j1.js","assets/query-vendor.DpsghfSz.js","assets/react-vendor.CfKEcsXX.js","assets/ui-vendor.D5U9TC-3.js","assets/firebase-vendor.D8xw0AXf.js","assets/utils-vendor.B0NEtgzl.js","assets/index.CZ3Rcx0c.css"])))=>i.map(i=>d[i]);
import{_ as p,a as o,C as h}from"./index.B3OoR7j1.js";import{j as e}from"./query-vendor.DpsghfSz.js";import{r as d}from"./react-vendor.CfKEcsXX.js";import{L as _}from"./LoadingSpinner.rP8tyFue.js";import{f as a}from"./firebase-data-display.B6MPT4-A.js";import"./ui-vendor.D5U9TC-3.js";import"./firebase-vendor.D8xw0AXf.js";import"./utils-vendor.B0NEtgzl.js";const W=({userRole:w})=>{const[l,c]=d.useState([]),[u,m]=d.useState(!0);d.useEffect(()=>{j()},[]);const j=async()=>{m(!0);try{const{collection:s,getDocs:r,query:n,orderBy:g}=await p(async()=>{const{collection:i,getDocs:t,query:v,orderBy:b}=await import("./firebase-vendor.D8xw0AXf.js").then(E=>E.al);return{collection:i,getDocs:t,query:v,orderBy:b}},[]),{db:f}=await p(async()=>{const{db:i}=await import("./index.B3OoR7j1.js").then(t=>t.O);return{db:i}},__vite__mapDeps([0,1,2,3,4,5,6])),y=s(f,"production_bundles"),N=n(y,g("createdAt","desc")),x=await r(N);if(x.empty)c([]);else{const i=x.docs.map(t=>({id:t.id,...t.data(),bundleNumber:t.data().bundleNumber||`BND-${t.id.slice(-8)}`,createdAt:t.data().createdAt?.toDate?.()||new Date}));c(i)}}catch(s){console.error("Error loading bundles:",s),c([])}m(!1)};return u?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(_,{}),e.jsx("p",{className:"ml-3",children:"Loading your WIP Entry data..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"ðŸ”„ Your WIP Entries"}),e.jsxs(o,{variant:"outline",children:[l.length," bundles found"]})]}),l.length===0?e.jsxs(h,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No WIP Entry Data Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't created any production bundles via WIP Entry yet."}),e.jsxs("p",{className:"text-sm text-blue-600",children:["ðŸ’¡ Go to ",e.jsx("strong",{children:"WIP Entry"})," to create your first production bundle, then it will appear here!"]})]}):e.jsx("div",{className:"grid gap-4",children:l.map(s=>e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.bundleNumber}),e.jsxs("p",{className:"text-gray-600",children:[s.articleStyle||s.style||"Article"," - ",s.targetPieces||s.quantity||0," pieces"]})]}),e.jsx(o,{variant:"outline",className:"bg-green-50 text-green-700",children:"From WIP Entry"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Article:"}),e.jsx("p",{className:"font-medium",children:a(s.articleNumber||s.articleId)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Priority:"}),e.jsx("p",{className:"font-medium",children:a(s.priority,{fallbackValue:"normal"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Created:"}),e.jsx("p",{className:"font-medium",children:s.createdAt?s.createdAt.toLocaleDateString():a(null)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("p",{className:"font-medium",children:a(s.status,{fallbackValue:"created"})})]})]}),s.operations&&s.operations.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Operations (",s.operations.length,"):"]}),e.jsxs("div",{className:"grid gap-2",children:[s.operations.slice(0,3).map((r,n)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:a(r.name||r.operationName,{fallbackValue:`Operation ${n+1}`})}),e.jsx(o,{variant:"outline",size:"sm",children:a(r.status,{fallbackValue:"pending"})})]},n)),s.operations.length>3&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",s.operations.length-3," more operations"]})]})]})]},s.id))})]})};export{W as SimpleSequentialWorkflow,W as default};
