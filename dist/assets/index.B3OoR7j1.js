const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/id-generation-service.DIFbM1n0.js","assets/firebase-vendor.D8xw0AXf.js","assets/query-vendor.DpsghfSz.js","assets/react-vendor.CfKEcsXX.js","assets/ui-vendor.D5U9TC-3.js","assets/utils-vendor.B0NEtgzl.js","assets/OperatorDashboard.RLqm5wTP.js","assets/index.B5rkzNbK.js","assets/operator-types.IC8C56sJ.js","assets/notification-service.BcdBUkr2.js","assets/damage-report-service.C8gWTqWl.js","assets/operator-wallet-service.C2Xc7u6i.js","assets/permission-service.CVeWCLPn.js","assets/work-assignment-service.LzjhYera.js","assets/LoadingSpinner.rP8tyFue.js","assets/SupervisorDashboard.CuDD3wb5.js","assets/assignment-dashboard.DU5Td5Vb.js","assets/empty-state.n-hYHaS-.js","assets/ClockIcon.B0z2Gpg3.js","assets/ChartBarIcon.CTULyxD7.js","assets/CalendarDaysIcon.DrGkQZXF.js","assets/UserIcon.BzFG2rMW.js","assets/CurrencyRupeeIcon.7xrTRvUQ.js","assets/use-work-assignments.CevcF46Y.js","assets/index.DNGanYzG.js","assets/MagnifyingGlassIcon.BY4e_13K.js","assets/FunnelIcon.CvqkinxJ.js","assets/bundle-lifecycle-manager.DLZx403w.js","assets/label.0cKEA8rL.js","assets/select.BS0-IYhb.js","assets/separator.QxR5zLdD.js","assets/calendar.G5_2MqK4.js","assets/utils.k9sMftog.js","assets/popover.CRDvc5ga.js","assets/index.CgqrbJCd.js","assets/bundle-service.NsTvV1td.js","assets/index.LBReXyrD.js","assets/production-dashboard.D2HTz5IY.js","assets/chart-vendor.5EaSH9G6.js","assets/quality-management-dashboard.CxsV81jm.js","assets/ShieldCheckIcon.7Wn9Ltzi.js","assets/earnings-dashboard.DlLwNSm9.js","assets/progress.gceU5Vz_.js","assets/operator-management-dashboard.B34CemnU.js","assets/PencilIcon.8W3cwjlG.js","assets/StarIcon.WwJcLCr3.js","assets/form-vendor.YPfcWTfe.js","assets/self-assignment-interface.Dpt77rcx.js","assets/production-timer.-OhC5c-T.js","assets/workflow-sequencer.DJk3b5QH.js","assets/PlayIcon.C6pbtimh.js","assets/ArrowRightIcon.DKQtkxcN.js","assets/mobile-friendly-layout.CIZa2fIt.js","assets/useI18n.Cd33OMab.js","assets/BellIcon.V4BrsRiS.js","assets/AdjustmentsHorizontalIcon.CLlydtd6.js","assets/WrenchIcon.W7PykwaY.js","assets/DocumentChartBarIcon.DSPE-w7K.js","assets/TvIcon.Cz9yvviN.js","assets/HandRaisedIcon.Cfns5nHo.js","assets/mobile-friendly-layout.Bi0zJJMe.css","assets/mobile-test.CZfHslKS.js","assets/live-production-dashboard.BNzp2kZL.js","assets/ArrowTrendingUpIcon.DCVA9ozU.js","assets/CuttingDropletManager.CxgG1FSo.js","assets/ProductionLotManager.BJTh0AIT.js","assets/production-lot-service.C--VBhuG.js","assets/ProcessPricingManager.By1URqVf.js","assets/tabs.Bt9VKIUG.js","assets/EnhancedOperatorDashboard.CP5lPkvu.js","assets/enhanced-production-service.wGJJVQvq.js","assets/OperatorPieceTracker.DfTBwggh.js","assets/BundleAssignmentManager.D7OD1GHu.js","assets/sewing-template-manager.CEK5SiGB.js","assets/bundle-assignment-dashboard.BfaLa2Q6.js","assets/CurrencyDollarIcon.n5hpspjn.js","assets/operator-work-dashboard.DAD6m0Pu.js","assets/TrophyIcon.6rCjTYDC.js","assets/operator-self-assignment.CZUp7zO2.js","assets/supervisor-parts-dashboard.BJvquMcg.js","assets/multi-strategy-assignment-dashboard.B_of-VLo.js","assets/CalendarIcon.sECmwVM6.js","assets/bundle-batch-tracking-dashboard.DfCuW2U9.js","assets/LightBulbIcon.CK1_Ki40.js","assets/drag-drop-assignment-dashboard.DOTsVlVq.js","assets/enhanced-bundle-service.CeWC5GFY.js","assets/kanban-assignment-board.DWLFGd6R.js","assets/supervisor-operator-buckets.BGIfeo4K.js","assets/smart-work-assignment-dashboard.BdqUzUiz.js","assets/HashtagIcon.BDWlCnOX.js","assets/operator-profile-assignment.DetiEd0e.js","assets/sequential-workflow-simple.BD2bC5eZ.js","assets/firebase-data-display.B6MPT4-A.js","assets/wip-entry-manager.D7HeMXAa.js","assets/LoginAnalyticsDashboard.DbBuasm-.js","assets/TrustedDeviceManager.C825MYdc.js","assets/WorkflowNotificationDemo.exj1b0d_.js","assets/AdminUserManagement.CUSWzFwi.js"])))=>i.map(i=>d[i]);
import{j as g,Q as SS,d as TS}from"./query-vendor.DpsghfSz.js";import{b as NS,f as AS,r as U,c as de,g as C1,B as CS}from"./react-vendor.CfKEcsXX.js";import{l as OS,af as RS,t as DS,ag as O1,ah as MS,E as jS}from"./ui-vendor.D5U9TC-3.js";import{L as R1,v as X,_ as Hr,C as Fr,x as Pn,y as st,z as Qh,A as Rn,B as bi,D as Ic,E as kS,S as IS,F as LS,G as pl,H as Ra,I as D1,J as US,K as Bn,M as BS,N as PS,O as zS,P as Oh,Q as M1,R as qS,U as zt,V as HS,W as eu,X as FS,Y as VS,Z as tu,$ as Ni,a0 as j1,a1 as k1,a2 as I1,a3 as Kh,a4 as L1,a5 as U1,a6 as B1,a7 as Xh,a8 as Wh,a9 as Zh,aa as Lf,ab as P1,ac as z1,ad as q1,ae as GS,af as Iy,ag as $S,ah as YS,ai as QS,e as Ir,h as Lr,q as Et,f as Js,g as Ut,u as Aa,d as tn,T as Tn,s as lr,c as KS,k as H1,m as XS,j as Zs,l as Uf,w as Rh,o as Ly,r as WS,i as Ps,a as ZS,b as JS,aj as eT,ak as tT}from"./firebase-vendor.D8xw0AXf.js";import{t as nT,c as rT}from"./utils-vendor.B0NEtgzl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Bf={exports:{}},zs={},Pf={exports:{}},zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function iT(){return Uy||(Uy=1,(function(i){function e(B,te){var re=B.length;B.push(te);e:for(;0<re;){var Se=re-1>>>1,Ae=B[Se];if(0<l(Ae,te))B[Se]=te,B[re]=Ae,re=Se;else break e}}function r(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var te=B[0],re=B.pop();if(re!==te){B[0]=re;e:for(var Se=0,Ae=B.length,Ke=Ae>>>1;Se<Ke;){var Me=2*(Se+1)-1,A=B[Me],D=Me+1,K=B[D];if(0>l(A,re))D<Ae&&0>l(K,A)?(B[Se]=K,B[D]=re,Se=D):(B[Se]=A,B[Me]=re,Se=Me);else if(D<Ae&&0>l(K,re))B[Se]=K,B[D]=re,Se=D;else break e}}return te}function l(B,te){var re=B.sortIndex-te.sortIndex;return re!==0?re:B.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var y=[],f=[],h=1,_=null,v=3,b=!1,w=!1,S=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Q(B){for(var te=r(f);te!==null;){if(te.callback===null)a(f);else if(te.startTime<=B)a(f),te.sortIndex=te.expirationTime,e(y,te);else break;te=r(f)}}function ae(B){if(S=!1,Q(B),!w)if(r(y)!==null)w=!0,W||(W=!0,Y());else{var te=r(f);te!==null&&pe(ae,te.startTime-B)}}var W=!1,ee=-1,J=5,V=-1;function F(){return C?!0:!(i.unstable_now()-V<J)}function $(){if(C=!1,W){var B=i.unstable_now();V=B;var te=!0;try{e:{w=!1,S&&(S=!1,L(ee),ee=-1),b=!0;var re=v;try{t:{for(Q(B),_=r(y);_!==null&&!(_.expirationTime>B&&F());){var Se=_.callback;if(typeof Se=="function"){_.callback=null,v=_.priorityLevel;var Ae=Se(_.expirationTime<=B);if(B=i.unstable_now(),typeof Ae=="function"){_.callback=Ae,Q(B),te=!0;break t}_===r(y)&&a(y),Q(B)}else a(y);_=r(y)}if(_!==null)te=!0;else{var Ke=r(f);Ke!==null&&pe(ae,Ke.startTime-B),te=!1}}break e}finally{_=null,v=re,b=!1}te=void 0}}finally{te?Y():W=!1}}}var Y;if(typeof G=="function")Y=function(){G($)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=$,Y=function(){q.postMessage(null)}}else Y=function(){j($,0)};function pe(B,te){ee=j(function(){B(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(B){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var re=v;v=te;try{return B()}finally{v=re}},i.unstable_requestPaint=function(){C=!0},i.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=v;v=B;try{return te()}finally{v=re}},i.unstable_scheduleCallback=function(B,te,re){var Se=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Se+re:Se):re=Se,B){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=re+Ae,B={id:h++,callback:te,priorityLevel:B,startTime:re,expirationTime:Ae,sortIndex:-1},re>Se?(B.sortIndex=re,e(f,B),r(y)===null&&B===r(f)&&(S?(L(ee),ee=-1):S=!0,pe(ae,re-Se))):(B.sortIndex=Ae,e(y,B),w||b||(w=!0,W||(W=!0,Y()))),B},i.unstable_shouldYield=F,i.unstable_wrapCallback=function(B){var te=v;return function(){var re=v;v=te;try{return B.apply(this,arguments)}finally{v=re}}}})(zf)),zf}var By;function aT(){return By||(By=1,Pf.exports=iT()),Pf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function sT(){if(Py)return zs;Py=1;var i=aT(),e=NS(),r=AS();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function y(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,o=n;;){var u=s.return;if(u===null)break;var p=u.alternate;if(p===null){if(o=u.return,o!==null){s=o;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===s)return m(u),t;if(p===o)return m(u),n;p=p.sibling}throw Error(a(188))}if(s.return!==o.return)s=u,o=p;else{for(var x=!1,E=u.child;E;){if(E===s){x=!0,s=u,o=p;break}if(E===o){x=!0,o=u,s=p;break}E=E.sibling}if(!x){for(E=p.child;E;){if(E===s){x=!0,s=p,o=u;break}if(E===o){x=!0,o=p,s=u;break}E=E.sibling}if(!x)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function f(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=f(t),n!==null)return n;t=t.sibling}return null}var h=Object.assign,_=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=$&&t[$]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case ae:return"Suspense";case W:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case b:return"Portal";case G:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case Q:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ee:return n=t.displayName||null,n!==null?n:q(t.type)||"Memo";case J:n=t._payload,t=t._init;try{return q(t(n))}catch{}}return null}var pe=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Se=[],Ae=-1;function Ke(t){return{current:t}}function Me(t){0>Ae||(t.current=Se[Ae],Se[Ae]=null,Ae--)}function A(t,n){Ae++,Se[Ae]=t.current,t.current=n}var D=Ke(null),K=Ke(null),fe=Ke(null),Ee=Ke(null);function Pe(t,n){switch(A(fe,n),A(K,t),A(D,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?cy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=cy(n),t=uy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Me(D),A(D,t)}function je(){Me(D),Me(K),Me(fe)}function lt(t){t.memoizedState!==null&&A(Ee,t);var n=D.current,s=uy(n,t.type);n!==s&&(A(K,t),A(D,s))}function Mi(t){K.current===t&&(Me(D),Me(K)),Ee.current===t&&(Me(Ee),ks._currentValue=re)}var qa=Object.prototype.hasOwnProperty,He=i.unstable_scheduleCallback,Kr=i.unstable_cancelCallback,wu=i.unstable_shouldYield,Eu=i.unstable_requestPaint,Dn=i.unstable_now,iw=i.unstable_getCurrentPriorityLevel,Fm=i.unstable_ImmediatePriority,Vm=i.unstable_UserBlockingPriority,Ol=i.unstable_NormalPriority,aw=i.unstable_LowPriority,Gm=i.unstable_IdlePriority,sw=i.log,lw=i.unstable_setDisableYieldValue,Ha=null,qt=null;function ur(t){if(typeof sw=="function"&&lw(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Ha,t)}catch{}}var Ht=Math.clz32?Math.clz32:uw,ow=Math.log,cw=Math.LN2;function uw(t){return t>>>=0,t===0?32:31-(ow(t)/cw|0)|0}var Rl=256,Dl=4194304;function Xr(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ml(t,n,s){var o=t.pendingLanes;if(o===0)return 0;var u=0,p=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~p,o!==0?u=Xr(o):(x&=E,x!==0?u=Xr(x):s||(s=E&~t,s!==0&&(u=Xr(s))))):(E=o&~p,E!==0?u=Xr(E):x!==0?u=Xr(x):s||(s=o&~t,s!==0&&(u=Xr(s)))),u===0?0:n!==0&&n!==u&&(n&p)===0&&(p=u&-u,s=n&-n,p>=s||p===32&&(s&4194048)!==0)?n:u}function Fa(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function dw(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $m(){var t=Rl;return Rl<<=1,(Rl&4194048)===0&&(Rl=256),t}function Ym(){var t=Dl;return Dl<<=1,(Dl&62914560)===0&&(Dl=4194304),t}function Su(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Va(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fw(t,n,s,o,u,p){var x=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var E=t.entanglements,T=t.expirationTimes,M=t.hiddenUpdates;for(s=x&~s;0<s;){var P=31-Ht(s),H=1<<P;E[P]=0,T[P]=-1;var k=M[P];if(k!==null)for(M[P]=null,P=0;P<k.length;P++){var I=k[P];I!==null&&(I.lane&=-536870913)}s&=~H}o!==0&&Qm(t,o,0),p!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=p&~(x&~n))}function Qm(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-Ht(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|s&4194090}function Km(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var o=31-Ht(s),u=1<<o;u&n|t[o]&n&&(t[o]|=n),s&=~u}}function Tu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Nu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xm(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:Oy(t.type))}function hw(t,n){var s=te.p;try{return te.p=t,n()}finally{te.p=s}}var dr=Math.random().toString(36).slice(2),xt="__reactFiber$"+dr,Mt="__reactProps$"+dr,ji="__reactContainer$"+dr,Au="__reactEvents$"+dr,mw="__reactListeners$"+dr,gw="__reactHandles$"+dr,Wm="__reactResources$"+dr,Ga="__reactMarker$"+dr;function Cu(t){delete t[xt],delete t[Mt],delete t[Au],delete t[mw],delete t[gw]}function ki(t){var n=t[xt];if(n)return n;for(var s=t.parentNode;s;){if(n=s[ji]||s[xt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=my(t);t!==null;){if(s=t[xt])return s;t=my(t)}return n}t=s,s=t.parentNode}return null}function Ii(t){if(t=t[xt]||t[ji]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function $a(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Li(t){var n=t[Wm];return n||(n=t[Wm]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ot(t){t[Ga]=!0}var Zm=new Set,Jm={};function Wr(t,n){Ui(t,n),Ui(t+"Capture",n)}function Ui(t,n){for(Jm[t]=n,t=0;t<n.length;t++)Zm.add(n[t])}var pw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eg={},tg={};function yw(t){return qa.call(tg,t)?!0:qa.call(eg,t)?!1:pw.test(t)?tg[t]=!0:(eg[t]=!0,!1)}function jl(t,n,s){if(yw(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function kl(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Hn(t,n,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+o)}}var Ou,ng;function Bi(t){if(Ou===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Ou=n&&n[1]||"",ng=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ou+t+ng}var Ru=!1;function Du(t,n){if(!t||Ru)return"";Ru=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(I){var k=I}Reflect.construct(t,[],H)}else{try{H.call()}catch(I){k=I}t.call(H.prototype)}}else{try{throw Error()}catch(I){k=I}(H=t())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(I){if(I&&k&&typeof I.stack=="string")return[I.stack,k.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),x=p[0],E=p[1];if(x&&E){var T=x.split(`
`),M=E.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===M.length)for(o=T.length-1,u=M.length-1;1<=o&&0<=u&&T[o]!==M[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==M[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==M[u]){var P=`
`+T[o].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=o&&0<=u);break}}}finally{Ru=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Bi(s):""}function vw(t){switch(t.tag){case 26:case 27:case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Du(t.type,!1);case 11:return Du(t.type.render,!1);case 1:return Du(t.type,!0);case 31:return Bi("Activity");default:return""}}function rg(t){try{var n="";do n+=vw(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ig(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function _w(t){var n=ig(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,p=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(x){o=""+x,p.call(this,x)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Il(t){t._valueTracker||(t._valueTracker=_w(t))}function ag(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return t&&(o=ig(t)?t.checked?"true":"false":t.value),t=o,t!==s?(n.setValue(t),!0):!1}function Ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var bw=/[\n"\\]/g;function ln(t){return t.replace(bw,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Mu(t,n,s,o,u,p,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+sn(n)):t.value!==""+sn(n)&&(t.value=""+sn(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?ju(t,x,sn(n)):s!=null?ju(t,x,sn(s)):o!=null&&t.removeAttribute("value"),u==null&&p!=null&&(t.defaultChecked=!!p),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+sn(E):t.removeAttribute("name")}function sg(t,n,s,o,u,p,x,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),n!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||n!=null))return;s=s!=null?""+sn(s):"",n=n!=null?""+sn(n):s,E||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function ju(t,n,s){n==="number"&&Ll(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Pi(t,n,s,o){if(t=t.options,n){n={};for(var u=0;u<s.length;u++)n["$"+s[u]]=!0;for(s=0;s<t.length;s++)u=n.hasOwnProperty("$"+t[s].value),t[s].selected!==u&&(t[s].selected=u),u&&o&&(t[s].defaultSelected=!0)}else{for(s=""+sn(s),n=null,u=0;u<t.length;u++){if(t[u].value===s){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function lg(t,n,s){if(n!=null&&(n=""+sn(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+sn(s):""}function og(t,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(pe(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=sn(n),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o)}function zi(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var xw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cg(t,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,s):typeof s!="number"||s===0||xw.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function ug(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&s[u]!==o&&cg(t,u,o)}else for(var p in n)n.hasOwnProperty(p)&&cg(t,p,n[p])}function ku(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ww=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ew=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ul(t){return Ew.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Iu=null;function Lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,Hi=null;function dg(t){var n=Ii(t);if(n&&(t=n.stateNode)){var s=t[Mt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Mu(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ln(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==t&&o.form===t.form){var u=o[Mt]||null;if(!u)throw Error(a(90));Mu(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===t.form&&ag(o)}break e;case"textarea":lg(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Pi(t,!!s.multiple,n,!1)}}}var Uu=!1;function fg(t,n,s){if(Uu)return t(n,s);Uu=!0;try{var o=t(n);return o}finally{if(Uu=!1,(qi!==null||Hi!==null)&&(Eo(),qi&&(n=qi,t=Hi,Hi=qi=null,dg(n),t)))for(n=0;n<t.length;n++)dg(t[n])}}function Ya(t,n){var s=t.stateNode;if(s===null)return null;var o=s[Mt]||null;if(o===null)return null;s=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(Fn)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Bu=!1}var fr=null,Pu=null,Bl=null;function hg(){if(Bl)return Bl;var t,n=Pu,s=n.length,o,u="value"in fr?fr.value:fr.textContent,p=u.length;for(t=0;t<s&&n[t]===u[t];t++);var x=s-t;for(o=1;o<=x&&n[s-o]===u[p-o];o++);return Bl=u.slice(t,1<o?1-o:void 0)}function Pl(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function zl(){return!0}function mg(){return!1}function jt(t){function n(s,o,u,p,x){this._reactName=s,this._targetInst=u,this.type=o,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(s=t[E],this[E]=s?s(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zl:mg,this.isPropagationStopped=mg,this}return h(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),n}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=jt(Zr),Ka=h({},Zr,{view:0,detail:0}),Sw=jt(Ka),zu,qu,Xa,Hl=h({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xa&&(Xa&&t.type==="mousemove"?(zu=t.screenX-Xa.screenX,qu=t.screenY-Xa.screenY):qu=zu=0,Xa=t),zu)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),gg=jt(Hl),Tw=h({},Hl,{dataTransfer:0}),Nw=jt(Tw),Aw=h({},Ka,{relatedTarget:0}),Hu=jt(Aw),Cw=h({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ow=jt(Cw),Rw=h({},Zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dw=jt(Rw),Mw=h({},Zr,{data:0}),pg=jt(Mw),jw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lw(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Iw[t])?!!n[t]:!1}function Fu(){return Lw}var Uw=h({},Ka,{key:function(t){if(t.key){var n=jw[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bw=jt(Uw),Pw=h({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yg=jt(Pw),zw=h({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),qw=jt(zw),Hw=h({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fw=jt(Hw),Vw=h({},Hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gw=jt(Vw),$w=h({},Zr,{newState:0,oldState:0}),Yw=jt($w),Qw=[9,13,27,32],Vu=Fn&&"CompositionEvent"in window,Wa=null;Fn&&"documentMode"in document&&(Wa=document.documentMode);var Kw=Fn&&"TextEvent"in window&&!Wa,vg=Fn&&(!Vu||Wa&&8<Wa&&11>=Wa),_g=" ",bg=!1;function xg(t,n){switch(t){case"keyup":return Qw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function Xw(t,n){switch(t){case"compositionend":return wg(n);case"keypress":return n.which!==32?null:(bg=!0,_g);case"textInput":return t=n.data,t===_g&&bg?null:t;default:return null}}function Ww(t,n){if(Fi)return t==="compositionend"||!Vu&&xg(t,n)?(t=hg(),Bl=Pu=fr=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return vg&&n.locale!=="ko"?null:n.data;default:return null}}var Zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Zw[t.type]:n==="textarea"}function Sg(t,n,s,o){qi?Hi?Hi.push(o):Hi=[o]:qi=o,n=Oo(n,"onChange"),0<n.length&&(s=new ql("onChange","change",null,s,o),t.push({event:s,listeners:n}))}var Za=null,Ja=null;function Jw(t){iy(t,0)}function Fl(t){var n=$a(t);if(ag(n))return t}function Tg(t,n){if(t==="change")return n}var Ng=!1;if(Fn){var Gu;if(Fn){var $u="oninput"in document;if(!$u){var Ag=document.createElement("div");Ag.setAttribute("oninput","return;"),$u=typeof Ag.oninput=="function"}Gu=$u}else Gu=!1;Ng=Gu&&(!document.documentMode||9<document.documentMode)}function Cg(){Za&&(Za.detachEvent("onpropertychange",Og),Ja=Za=null)}function Og(t){if(t.propertyName==="value"&&Fl(Ja)){var n=[];Sg(n,Ja,t,Lu(t)),fg(Jw,n)}}function eE(t,n,s){t==="focusin"?(Cg(),Za=n,Ja=s,Za.attachEvent("onpropertychange",Og)):t==="focusout"&&Cg()}function tE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fl(Ja)}function nE(t,n){if(t==="click")return Fl(n)}function rE(t,n){if(t==="input"||t==="change")return Fl(n)}function iE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ft=typeof Object.is=="function"?Object.is:iE;function es(t,n){if(Ft(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var u=s[o];if(!qa.call(n,u)||!Ft(t[u],n[u]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dg(t,n){var s=Rg(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=n&&o>=n)return{node:s,offset:n-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Rg(s)}}function Mg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Mg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ll(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Ll(t.document)}return n}function Yu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var aE=Fn&&"documentMode"in document&&11>=document.documentMode,Vi=null,Qu=null,ts=null,Ku=!1;function kg(t,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ku||Vi==null||Vi!==Ll(o)||(o=Vi,"selectionStart"in o&&Yu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ts&&es(ts,o)||(ts=o,o=Oo(Qu,"onSelect"),0<o.length&&(n=new ql("onSelect","select",null,n,s),t.push({event:n,listeners:o}),n.target=Vi)))}function Jr(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Gi={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Xu={},Ig={};Fn&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function ei(t){if(Xu[t])return Xu[t];if(!Gi[t])return t;var n=Gi[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Ig)return Xu[t]=n[s];return t}var Lg=ei("animationend"),Ug=ei("animationiteration"),Bg=ei("animationstart"),sE=ei("transitionrun"),lE=ei("transitionstart"),oE=ei("transitioncancel"),Pg=ei("transitionend"),zg=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function bn(t,n){zg.set(t,n),Wr(n,[t])}var qg=new WeakMap;function on(t,n){if(typeof t=="object"&&t!==null){var s=qg.get(t);return s!==void 0?s:(n={value:t,source:n,stack:rg(n)},qg.set(t,n),n)}return{value:t,source:n,stack:rg(n)}}var cn=[],$i=0,Zu=0;function Vl(){for(var t=$i,n=Zu=$i=0;n<t;){var s=cn[n];cn[n++]=null;var o=cn[n];cn[n++]=null;var u=cn[n];cn[n++]=null;var p=cn[n];if(cn[n++]=null,o!==null&&u!==null){var x=o.pending;x===null?u.next=u:(u.next=x.next,x.next=u),o.pending=u}p!==0&&Hg(s,u,p)}}function Gl(t,n,s,o){cn[$i++]=t,cn[$i++]=n,cn[$i++]=s,cn[$i++]=o,Zu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Ju(t,n,s,o){return Gl(t,n,s,o),$l(t)}function Yi(t,n){return Gl(t,null,null,n),$l(t)}function Hg(t,n,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var u=!1,p=t.return;p!==null;)p.childLanes|=s,o=p.alternate,o!==null&&(o.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(u=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,u&&n!==null&&(u=31-Ht(s),t=p.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=s|536870912),p):null}function $l(t){if(50<Ns)throw Ns=0,sf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Qi={};function cE(t,n,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,n,s,o){return new cE(t,n,s,o)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vn(t,n){var s=t.alternate;return s===null?(s=Vt(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Fg(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Yl(t,n,s,o,u,p){var x=0;if(o=t,typeof t=="function")ed(t)&&(x=1);else if(typeof t=="string")x=dS(t,s,D.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=Vt(31,s,n,u),t.elementType=V,t.lanes=p,t;case w:return ti(s.children,u,p,n);case S:x=8,u|=24;break;case C:return t=Vt(12,s,n,u|2),t.elementType=C,t.lanes=p,t;case ae:return t=Vt(13,s,n,u),t.elementType=ae,t.lanes=p,t;case W:return t=Vt(19,s,n,u),t.elementType=W,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j:case G:x=10;break e;case L:x=9;break e;case Q:x=11;break e;case ee:x=14;break e;case J:x=16,o=null;break e}x=29,s=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=Vt(x,s,n,u),n.elementType=t,n.type=o,n.lanes=p,n}function ti(t,n,s,o){return t=Vt(7,t,o,n),t.lanes=s,t}function td(t,n,s){return t=Vt(6,t,null,n),t.lanes=s,t}function nd(t,n,s){return n=Vt(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Ki=[],Xi=0,Ql=null,Kl=0,un=[],dn=0,ni=null,Gn=1,$n="";function ri(t,n){Ki[Xi++]=Kl,Ki[Xi++]=Ql,Ql=t,Kl=n}function Vg(t,n,s){un[dn++]=Gn,un[dn++]=$n,un[dn++]=ni,ni=t;var o=Gn;t=$n;var u=32-Ht(o)-1;o&=~(1<<u),s+=1;var p=32-Ht(n)+u;if(30<p){var x=u-u%5;p=(o&(1<<x)-1).toString(32),o>>=x,u-=x,Gn=1<<32-Ht(n)+u|s<<u|o,$n=p+t}else Gn=1<<p|s<<u|o,$n=t}function rd(t){t.return!==null&&(ri(t,1),Vg(t,1,0))}function id(t){for(;t===Ql;)Ql=Ki[--Xi],Ki[Xi]=null,Kl=Ki[--Xi],Ki[Xi]=null;for(;t===ni;)ni=un[--dn],un[dn]=null,$n=un[--dn],un[dn]=null,Gn=un[--dn],un[dn]=null}var Tt=null,Xe=null,Ce=!1,ii=null,Mn=!1,ad=Error(a(519));function ai(t){var n=Error(a(418,""));throw is(on(n,t)),ad}function Gg(t){var n=t.stateNode,s=t.type,o=t.memoizedProps;switch(n[xt]=t,n[Mt]=o,s){case"dialog":xe("cancel",n),xe("close",n);break;case"iframe":case"object":case"embed":xe("load",n);break;case"video":case"audio":for(s=0;s<Cs.length;s++)xe(Cs[s],n);break;case"source":xe("error",n);break;case"img":case"image":case"link":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"input":xe("invalid",n),sg(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Il(n);break;case"select":xe("invalid",n);break;case"textarea":xe("invalid",n),og(n,o.value,o.defaultValue,o.children),Il(n)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||oy(n.textContent,s)?(o.popover!=null&&(xe("beforetoggle",n),xe("toggle",n)),o.onScroll!=null&&xe("scroll",n),o.onScrollEnd!=null&&xe("scrollend",n),o.onClick!=null&&(n.onclick=Ro),n=!0):n=!1,n||ai(t)}function $g(t){for(Tt=t.return;Tt;)switch(Tt.tag){case 5:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Tt=Tt.return}}function ns(t){if(t!==Tt)return!1;if(!Ce)return $g(t),Ce=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||wf(t.type,t.memoizedProps)),s=!s),s&&Xe&&ai(t),$g(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){Xe=wn(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}Xe=null}}else n===27?(n=Xe,Cr(t.type)?(t=Nf,Nf=null,Xe=t):Xe=n):Xe=Tt?wn(t.stateNode.nextSibling):null;return!0}function rs(){Xe=Tt=null,Ce=!1}function Yg(){var t=ii;return t!==null&&(Lt===null?Lt=t:Lt.push.apply(Lt,t),ii=null),t}function is(t){ii===null?ii=[t]:ii.push(t)}var sd=Ke(null),si=null,Yn=null;function hr(t,n,s){A(sd,n._currentValue),n._currentValue=s}function Qn(t){t._currentValue=sd.current,Me(sd)}function ld(t,n,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===s)break;t=t.return}}function od(t,n,s,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var p=u.dependencies;if(p!==null){var x=u.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=u;for(var T=0;T<n.length;T++)if(E.context===n[T]){p.lanes|=s,E=p.alternate,E!==null&&(E.lanes|=s),ld(p.return,s,t),o||(x=null);break e}p=E.next}}else if(u.tag===18){if(x=u.return,x===null)throw Error(a(341));x.lanes|=s,p=x.alternate,p!==null&&(p.lanes|=s),ld(x,s,t),x=null}else x=u.child;if(x!==null)x.return=u;else for(x=u;x!==null;){if(x===t){x=null;break}if(u=x.sibling,u!==null){u.return=x.return,x=u;break}x=x.return}u=x}}function as(t,n,s,o){t=null;for(var u=n,p=!1;u!==null;){if(!p){if((u.flags&524288)!==0)p=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var x=u.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var E=u.type;Ft(u.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(u===Ee.current){if(x=u.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(ks):t=[ks])}u=u.return}t!==null&&od(n,t,s,o),n.flags|=262144}function Xl(t){for(t=t.firstContext;t!==null;){if(!Ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function li(t){si=t,Yn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wt(t){return Qg(si,t)}function Wl(t,n){return si===null&&li(t),Qg(t,n)}function Qg(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Yn===null){if(t===null)throw Error(a(308));Yn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Yn=Yn.next=n;return s}var uE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},dE=i.unstable_scheduleCallback,fE=i.unstable_NormalPriority,it={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cd(){return{controller:new uE,data:new Map,refCount:0}}function ss(t){t.refCount--,t.refCount===0&&dE(fE,function(){t.controller.abort()})}var ls=null,ud=0,Wi=0,Zi=null;function hE(t,n){if(ls===null){var s=ls=[];ud=0,Wi=hf(),Zi={status:"pending",value:void 0,then:function(o){s.push(o)}}}return ud++,n.then(Kg,Kg),n}function Kg(){if(--ud===0&&ls!==null){Zi!==null&&(Zi.status="fulfilled");var t=ls;ls=null,Wi=0,Zi=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function mE(t,n){var s=[],o={status:"pending",value:null,reason:null,then:function(u){s.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<s.length;u++)(0,s[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<s.length;u++)(0,s[u])(void 0)}),o}var Xg=B.S;B.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&hE(t,n),Xg!==null&&Xg(t,n)};var oi=Ke(null);function dd(){var t=oi.current;return t!==null?t:ze.pooledCache}function Zl(t,n){n===null?A(oi,oi.current):A(oi,n.pool)}function Wg(){var t=dd();return t===null?null:{parent:it._currentValue,pool:t}}var os=Error(a(460)),Zg=Error(a(474)),Jl=Error(a(542)),fd={then:function(){}};function Jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eo(){}function e0(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(eo,eo),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,n0(t),t;default:if(typeof n.status=="string")n.then(eo,eo);else{if(t=ze,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,n0(t),t}throw cs=n,os}}var cs=null;function t0(){if(cs===null)throw Error(a(459));var t=cs;return cs=null,t}function n0(t){if(t===os||t===Jl)throw Error(a(483))}var mr=!1;function hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function md(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,n,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Oe&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=$l(t),Hg(t,null,s),n}return Gl(t,o,n,s),$l(t)}function us(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Km(t,s)}}function gd(t,n){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var u=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var x={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?u=p=x:p=p.next=x,s=s.next}while(s!==null);p===null?u=p=n:p=p.next=n}else u=p=n;s={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var pd=!1;function ds(){if(pd){var t=Zi;if(t!==null)throw t}}function fs(t,n,s,o){pd=!1;var u=t.updateQueue;mr=!1;var p=u.firstBaseUpdate,x=u.lastBaseUpdate,E=u.shared.pending;if(E!==null){u.shared.pending=null;var T=E,M=T.next;T.next=null,x===null?p=M:x.next=M,x=T;var P=t.alternate;P!==null&&(P=P.updateQueue,E=P.lastBaseUpdate,E!==x&&(E===null?P.firstBaseUpdate=M:E.next=M,P.lastBaseUpdate=T))}if(p!==null){var H=u.baseState;x=0,P=M=T=null,E=p;do{var k=E.lane&-536870913,I=k!==E.lane;if(I?(we&k)===k:(o&k)===k){k!==0&&k===Wi&&(pd=!0),P!==null&&(P=P.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ce=t,se=E;k=n;var Le=s;switch(se.tag){case 1:if(ce=se.payload,typeof ce=="function"){H=ce.call(Le,H,k);break e}H=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=se.payload,k=typeof ce=="function"?ce.call(Le,H,k):ce,k==null)break e;H=h({},H,k);break e;case 2:mr=!0}}k=E.callback,k!==null&&(t.flags|=64,I&&(t.flags|=8192),I=u.callbacks,I===null?u.callbacks=[k]:I.push(k))}else I={lane:k,tag:E.tag,payload:E.payload,callback:E.callback,next:null},P===null?(M=P=I,T=H):P=P.next=I,x|=k;if(E=E.next,E===null){if(E=u.shared.pending,E===null)break;I=E,E=I.next,I.next=null,u.lastBaseUpdate=I,u.shared.pending=null}}while(!0);P===null&&(T=H),u.baseState=T,u.firstBaseUpdate=M,u.lastBaseUpdate=P,p===null&&(u.shared.lanes=0),Sr|=x,t.lanes=x,t.memoizedState=H}}function r0(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function i0(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)r0(s[t],n)}var Ji=Ke(null),to=Ke(0);function a0(t,n){t=tr,A(to,t),A(Ji,n),tr=t|n.baseLanes}function yd(){A(to,tr),A(Ji,Ji.current)}function vd(){tr=to.current,Me(Ji),Me(to)}var yr=0,he=null,ke=null,nt=null,no=!1,ea=!1,ci=!1,ro=0,hs=0,ta=null,gE=0;function et(){throw Error(a(321))}function _d(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Ft(t[s],n[s]))return!1;return!0}function bd(t,n,s,o,u,p){return yr=p,he=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=t===null||t.memoizedState===null?H0:F0,ci=!1,p=s(o,u),ci=!1,ea&&(p=l0(n,s,o,u)),s0(t),p}function s0(t){B.H=co;var n=ke!==null&&ke.next!==null;if(yr=0,nt=ke=he=null,no=!1,hs=0,ta=null,n)throw Error(a(300));t===null||ct||(t=t.dependencies,t!==null&&Xl(t)&&(ct=!0))}function l0(t,n,s,o){he=t;var u=0;do{if(ea&&(ta=null),hs=0,ea=!1,25<=u)throw Error(a(301));if(u+=1,nt=ke=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}B.H=wE,p=n(s,o)}while(ea);return p}function pE(){var t=B.H,n=t.useState()[0];return n=typeof n.then=="function"?ms(n):n,t=t.useState()[0],(ke!==null?ke.memoizedState:null)!==t&&(he.flags|=1024),n}function xd(){var t=ro!==0;return ro=0,t}function wd(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Ed(t){if(no){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}no=!1}yr=0,nt=ke=he=null,ea=!1,hs=ro=0,ta=null}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?he.memoizedState=nt=t:nt=nt.next=t,nt}function rt(){if(ke===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var n=nt===null?he.memoizedState:nt.next;if(n!==null)nt=n,ke=t;else{if(t===null)throw he.alternate===null?Error(a(467)):Error(a(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},nt===null?he.memoizedState=nt=t:nt=nt.next=t}return nt}function Sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ms(t){var n=hs;return hs+=1,ta===null&&(ta=[]),t=e0(ta,t,n),n=he,(nt===null?n.memoizedState:nt.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?H0:F0),t}function io(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ms(t);if(t.$$typeof===G)return wt(t)}throw Error(a(438,String(t)))}function Td(t){var n=null,s=he.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=he.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Sd(),he.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),o=0;o<t;o++)s[o]=F;return n.index++,s}function Kn(t,n){return typeof n=="function"?n(t):n}function ao(t){var n=rt();return Nd(n,ke,t)}function Nd(t,n,s){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var u=t.baseQueue,p=o.pending;if(p!==null){if(u!==null){var x=u.next;u.next=p.next,p.next=x}n.baseQueue=u=p,o.pending=null}if(p=t.baseState,u===null)t.memoizedState=p;else{n=u.next;var E=x=null,T=null,M=n,P=!1;do{var H=M.lane&-536870913;if(H!==M.lane?(we&H)===H:(yr&H)===H){var k=M.revertLane;if(k===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),H===Wi&&(P=!0);else if((yr&k)===k){M=M.next,k===Wi&&(P=!0);continue}else H={lane:0,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},T===null?(E=T=H,x=p):T=T.next=H,he.lanes|=k,Sr|=k;H=M.action,ci&&s(p,H),p=M.hasEagerState?M.eagerState:s(p,H)}else k={lane:H,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},T===null?(E=T=k,x=p):T=T.next=k,he.lanes|=H,Sr|=H;M=M.next}while(M!==null&&M!==n);if(T===null?x=p:T.next=E,!Ft(p,t.memoizedState)&&(ct=!0,P&&(s=Zi,s!==null)))throw s;t.memoizedState=p,t.baseState=x,t.baseQueue=T,o.lastRenderedState=p}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Ad(t){var n=rt(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var o=s.dispatch,u=s.pending,p=n.memoizedState;if(u!==null){s.pending=null;var x=u=u.next;do p=t(p,x.action),x=x.next;while(x!==u);Ft(p,n.memoizedState)||(ct=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),s.lastRenderedState=p}return[p,o]}function o0(t,n,s){var o=he,u=rt(),p=Ce;if(p){if(s===void 0)throw Error(a(407));s=s()}else s=n();var x=!Ft((ke||u).memoizedState,s);x&&(u.memoizedState=s,ct=!0),u=u.queue;var E=d0.bind(null,o,u,t);if(gs(2048,8,E,[t]),u.getSnapshot!==n||x||nt!==null&&nt.memoizedState.tag&1){if(o.flags|=2048,na(9,so(),u0.bind(null,o,u,s,n),null),ze===null)throw Error(a(349));p||(yr&124)!==0||c0(o,n,s)}return s}function c0(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=he.updateQueue,n===null?(n=Sd(),he.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function u0(t,n,s,o){n.value=s,n.getSnapshot=o,f0(n)&&h0(t)}function d0(t,n,s){return s(function(){f0(n)&&h0(t)})}function f0(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Ft(t,s)}catch{return!0}}function h0(t){var n=Yi(t,2);n!==null&&Kt(n,t,2)}function Cd(t){var n=kt();if(typeof t=="function"){var s=t;if(t=s(),ci){ur(!0);try{s()}finally{ur(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:t},n}function m0(t,n,s,o){return t.baseState=s,Nd(t,ke,typeof o=="function"?o:Kn)}function yE(t,n,s,o,u){if(oo(t))throw Error(a(485));if(t=n.action,t!==null){var p={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){p.listeners.push(x)}};B.T!==null?s(!0):p.isTransition=!1,o(p),s=n.pending,s===null?(p.next=n.pending=p,g0(n,p)):(p.next=s.next,n.pending=s.next=p)}}function g0(t,n){var s=n.action,o=n.payload,u=t.state;if(n.isTransition){var p=B.T,x={};B.T=x;try{var E=s(u,o),T=B.S;T!==null&&T(x,E),p0(t,n,E)}catch(M){Od(t,n,M)}finally{B.T=p}}else try{p=s(u,o),p0(t,n,p)}catch(M){Od(t,n,M)}}function p0(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){y0(t,n,o)},function(o){return Od(t,n,o)}):y0(t,n,s)}function y0(t,n,s){n.status="fulfilled",n.value=s,v0(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,g0(t,s)))}function Od(t,n,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,v0(n),n=n.next;while(n!==o)}t.action=null}function v0(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function _0(t,n){return n}function b0(t,n){if(Ce){var s=ze.formState;if(s!==null){e:{var o=he;if(Ce){if(Xe){t:{for(var u=Xe,p=Mn;u.nodeType!==8;){if(!p){u=null;break t}if(u=wn(u.nextSibling),u===null){u=null;break t}}p=u.data,u=p==="F!"||p==="F"?u:null}if(u){Xe=wn(u.nextSibling),o=u.data==="F!";break e}}ai(o)}o=!1}o&&(n=s[0])}}return s=kt(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_0,lastRenderedState:n},s.queue=o,s=P0.bind(null,he,o),o.dispatch=s,o=Cd(!1),p=kd.bind(null,he,!1,o.queue),o=kt(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,s=yE.bind(null,he,u,p,s),u.dispatch=s,o.memoizedState=t,[n,s,!1]}function x0(t){var n=rt();return w0(n,ke,t)}function w0(t,n,s){if(n=Nd(t,n,_0)[0],t=ao(Kn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ms(n)}catch(x){throw x===os?Jl:x}else o=n;n=rt();var u=n.queue,p=u.dispatch;return s!==n.memoizedState&&(he.flags|=2048,na(9,so(),vE.bind(null,u,s),null)),[o,p,t]}function vE(t,n){t.action=n}function E0(t){var n=rt(),s=ke;if(s!==null)return w0(n,s,t);rt(),n=n.memoizedState,s=rt();var o=s.queue.dispatch;return s.memoizedState=t,[n,o,!1]}function na(t,n,s,o){return t={tag:t,create:s,deps:o,inst:n,next:null},n=he.updateQueue,n===null&&(n=Sd(),he.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,n.lastEffect=t),t}function so(){return{destroy:void 0,resource:void 0}}function S0(){return rt().memoizedState}function lo(t,n,s,o){var u=kt();o=o===void 0?null:o,he.flags|=t,u.memoizedState=na(1|n,so(),s,o)}function gs(t,n,s,o){var u=rt();o=o===void 0?null:o;var p=u.memoizedState.inst;ke!==null&&o!==null&&_d(o,ke.memoizedState.deps)?u.memoizedState=na(n,p,s,o):(he.flags|=t,u.memoizedState=na(1|n,p,s,o))}function T0(t,n){lo(8390656,8,t,n)}function N0(t,n){gs(2048,8,t,n)}function A0(t,n){return gs(4,2,t,n)}function C0(t,n){return gs(4,4,t,n)}function O0(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function R0(t,n,s){s=s!=null?s.concat([t]):null,gs(4,4,O0.bind(null,n,t),s)}function Rd(){}function D0(t,n){var s=rt();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&_d(n,o[1])?o[0]:(s.memoizedState=[t,n],t)}function M0(t,n){var s=rt();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&_d(n,o[1]))return o[0];if(o=t(),ci){ur(!0);try{t()}finally{ur(!1)}}return s.memoizedState=[o,n],o}function Dd(t,n,s){return s===void 0||(yr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=Ip(),he.lanes|=t,Sr|=t,s)}function j0(t,n,s,o){return Ft(s,n)?s:Ji.current!==null?(t=Dd(t,s,o),Ft(t,n)||(ct=!0),t):(yr&42)===0?(ct=!0,t.memoizedState=s):(t=Ip(),he.lanes|=t,Sr|=t,n)}function k0(t,n,s,o,u){var p=te.p;te.p=p!==0&&8>p?p:8;var x=B.T,E={};B.T=E,kd(t,!1,n,s);try{var T=u(),M=B.S;if(M!==null&&M(E,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var P=mE(T,o);ps(t,n,P,Qt(t))}else ps(t,n,o,Qt(t))}catch(H){ps(t,n,{then:function(){},status:"rejected",reason:H},Qt())}finally{te.p=p,B.T=x}}function _E(){}function Md(t,n,s,o){if(t.tag!==5)throw Error(a(476));var u=I0(t).queue;k0(t,u,n,re,s===null?_E:function(){return L0(t),s(o)})}function I0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:re},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function L0(t){var n=I0(t).next.queue;ps(t,n,{},Qt())}function jd(){return wt(ks)}function U0(){return rt().memoizedState}function B0(){return rt().memoizedState}function bE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Qt();t=gr(s);var o=pr(n,t,s);o!==null&&(Kt(o,n,s),us(o,n,s)),n={cache:cd()},t.payload=n;return}n=n.return}}function xE(t,n,s){var o=Qt();s={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},oo(t)?z0(n,s):(s=Ju(t,n,s,o),s!==null&&(Kt(s,t,o),q0(s,n,o)))}function P0(t,n,s){var o=Qt();ps(t,n,s,o)}function ps(t,n,s,o){var u={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(oo(t))z0(n,u);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var x=n.lastRenderedState,E=p(x,s);if(u.hasEagerState=!0,u.eagerState=E,Ft(E,x))return Gl(t,n,u,0),ze===null&&Vl(),!1}catch{}finally{}if(s=Ju(t,n,u,o),s!==null)return Kt(s,t,o),q0(s,n,o),!0}return!1}function kd(t,n,s,o){if(o={lane:2,revertLane:hf(),action:o,hasEagerState:!1,eagerState:null,next:null},oo(t)){if(n)throw Error(a(479))}else n=Ju(t,s,o,2),n!==null&&Kt(n,t,2)}function oo(t){var n=t.alternate;return t===he||n!==null&&n===he}function z0(t,n){ea=no=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function q0(t,n,s){if((s&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Km(t,s)}}var co={readContext:wt,use:io,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et},H0={readContext:wt,use:io,useCallback:function(t,n){return kt().memoizedState=[t,n===void 0?null:n],t},useContext:wt,useEffect:T0,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,lo(4194308,4,O0.bind(null,n,t),s)},useLayoutEffect:function(t,n){return lo(4194308,4,t,n)},useInsertionEffect:function(t,n){lo(4,2,t,n)},useMemo:function(t,n){var s=kt();n=n===void 0?null:n;var o=t();if(ci){ur(!0);try{t()}finally{ur(!1)}}return s.memoizedState=[o,n],o},useReducer:function(t,n,s){var o=kt();if(s!==void 0){var u=s(n);if(ci){ur(!0);try{s(n)}finally{ur(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=xE.bind(null,he,t),[o.memoizedState,t]},useRef:function(t){var n=kt();return t={current:t},n.memoizedState=t},useState:function(t){t=Cd(t);var n=t.queue,s=P0.bind(null,he,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Rd,useDeferredValue:function(t,n){var s=kt();return Dd(s,t,n)},useTransition:function(){var t=Cd(!1);return t=k0.bind(null,he,t.queue,!0,!1),kt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var o=he,u=kt();if(Ce){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),ze===null)throw Error(a(349));(we&124)!==0||c0(o,n,s)}u.memoizedState=s;var p={value:s,getSnapshot:n};return u.queue=p,T0(d0.bind(null,o,p,t),[t]),o.flags|=2048,na(9,so(),u0.bind(null,o,p,s,n),null),s},useId:function(){var t=kt(),n=ze.identifierPrefix;if(Ce){var s=$n,o=Gn;s=(o&~(1<<32-Ht(o)-1)).toString(32)+s,n="«"+n+"R"+s,s=ro++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=gE++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:jd,useFormState:b0,useActionState:b0,useOptimistic:function(t){var n=kt();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=kd.bind(null,he,!0,s),s.dispatch=n,[t,n]},useMemoCache:Td,useCacheRefresh:function(){return kt().memoizedState=bE.bind(null,he)}},F0={readContext:wt,use:io,useCallback:D0,useContext:wt,useEffect:N0,useImperativeHandle:R0,useInsertionEffect:A0,useLayoutEffect:C0,useMemo:M0,useReducer:ao,useRef:S0,useState:function(){return ao(Kn)},useDebugValue:Rd,useDeferredValue:function(t,n){var s=rt();return j0(s,ke.memoizedState,t,n)},useTransition:function(){var t=ao(Kn)[0],n=rt().memoizedState;return[typeof t=="boolean"?t:ms(t),n]},useSyncExternalStore:o0,useId:U0,useHostTransitionStatus:jd,useFormState:x0,useActionState:x0,useOptimistic:function(t,n){var s=rt();return m0(s,ke,t,n)},useMemoCache:Td,useCacheRefresh:B0},wE={readContext:wt,use:io,useCallback:D0,useContext:wt,useEffect:N0,useImperativeHandle:R0,useInsertionEffect:A0,useLayoutEffect:C0,useMemo:M0,useReducer:Ad,useRef:S0,useState:function(){return Ad(Kn)},useDebugValue:Rd,useDeferredValue:function(t,n){var s=rt();return ke===null?Dd(s,t,n):j0(s,ke.memoizedState,t,n)},useTransition:function(){var t=Ad(Kn)[0],n=rt().memoizedState;return[typeof t=="boolean"?t:ms(t),n]},useSyncExternalStore:o0,useId:U0,useHostTransitionStatus:jd,useFormState:E0,useActionState:E0,useOptimistic:function(t,n){var s=rt();return ke!==null?m0(s,ke,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Td,useCacheRefresh:B0},ra=null,ys=0;function uo(t){var n=ys;return ys+=1,ra===null&&(ra=[]),e0(ra,t,n)}function vs(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function fo(t,n){throw n.$$typeof===_?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function V0(t){var n=t._init;return n(t._payload)}function G0(t){function n(O,N){if(t){var R=O.deletions;R===null?(O.deletions=[N],O.flags|=16):R.push(N)}}function s(O,N){if(!t)return null;for(;N!==null;)n(O,N),N=N.sibling;return null}function o(O){for(var N=new Map;O!==null;)O.key!==null?N.set(O.key,O):N.set(O.index,O),O=O.sibling;return N}function u(O,N){return O=Vn(O,N),O.index=0,O.sibling=null,O}function p(O,N,R){return O.index=R,t?(R=O.alternate,R!==null?(R=R.index,R<N?(O.flags|=67108866,N):R):(O.flags|=67108866,N)):(O.flags|=1048576,N)}function x(O){return t&&O.alternate===null&&(O.flags|=67108866),O}function E(O,N,R,z){return N===null||N.tag!==6?(N=td(R,O.mode,z),N.return=O,N):(N=u(N,R),N.return=O,N)}function T(O,N,R,z){var ne=R.type;return ne===w?P(O,N,R.props.children,z,R.key):N!==null&&(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&V0(ne)===N.type)?(N=u(N,R.props),vs(N,R),N.return=O,N):(N=Yl(R.type,R.key,R.props,null,O.mode,z),vs(N,R),N.return=O,N)}function M(O,N,R,z){return N===null||N.tag!==4||N.stateNode.containerInfo!==R.containerInfo||N.stateNode.implementation!==R.implementation?(N=nd(R,O.mode,z),N.return=O,N):(N=u(N,R.children||[]),N.return=O,N)}function P(O,N,R,z,ne){return N===null||N.tag!==7?(N=ti(R,O.mode,z,ne),N.return=O,N):(N=u(N,R),N.return=O,N)}function H(O,N,R){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=td(""+N,O.mode,R),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case v:return R=Yl(N.type,N.key,N.props,null,O.mode,R),vs(R,N),R.return=O,R;case b:return N=nd(N,O.mode,R),N.return=O,N;case J:var z=N._init;return N=z(N._payload),H(O,N,R)}if(pe(N)||Y(N))return N=ti(N,O.mode,R,null),N.return=O,N;if(typeof N.then=="function")return H(O,uo(N),R);if(N.$$typeof===G)return H(O,Wl(O,N),R);fo(O,N)}return null}function k(O,N,R,z){var ne=N!==null?N.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ne!==null?null:E(O,N,""+R,z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case v:return R.key===ne?T(O,N,R,z):null;case b:return R.key===ne?M(O,N,R,z):null;case J:return ne=R._init,R=ne(R._payload),k(O,N,R,z)}if(pe(R)||Y(R))return ne!==null?null:P(O,N,R,z,null);if(typeof R.then=="function")return k(O,N,uo(R),z);if(R.$$typeof===G)return k(O,N,Wl(O,R),z);fo(O,R)}return null}function I(O,N,R,z,ne){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return O=O.get(R)||null,E(N,O,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return O=O.get(z.key===null?R:z.key)||null,T(N,O,z,ne);case b:return O=O.get(z.key===null?R:z.key)||null,M(N,O,z,ne);case J:var ye=z._init;return z=ye(z._payload),I(O,N,R,z,ne)}if(pe(z)||Y(z))return O=O.get(R)||null,P(N,O,z,ne,null);if(typeof z.then=="function")return I(O,N,R,uo(z),ne);if(z.$$typeof===G)return I(O,N,R,Wl(N,z),ne);fo(N,z)}return null}function ce(O,N,R,z){for(var ne=null,ye=null,ie=N,le=N=0,dt=null;ie!==null&&le<R.length;le++){ie.index>le?(dt=ie,ie=null):dt=ie.sibling;var Te=k(O,ie,R[le],z);if(Te===null){ie===null&&(ie=dt);break}t&&ie&&Te.alternate===null&&n(O,ie),N=p(Te,N,le),ye===null?ne=Te:ye.sibling=Te,ye=Te,ie=dt}if(le===R.length)return s(O,ie),Ce&&ri(O,le),ne;if(ie===null){for(;le<R.length;le++)ie=H(O,R[le],z),ie!==null&&(N=p(ie,N,le),ye===null?ne=ie:ye.sibling=ie,ye=ie);return Ce&&ri(O,le),ne}for(ie=o(ie);le<R.length;le++)dt=I(ie,O,le,R[le],z),dt!==null&&(t&&dt.alternate!==null&&ie.delete(dt.key===null?le:dt.key),N=p(dt,N,le),ye===null?ne=dt:ye.sibling=dt,ye=dt);return t&&ie.forEach(function(jr){return n(O,jr)}),Ce&&ri(O,le),ne}function se(O,N,R,z){if(R==null)throw Error(a(151));for(var ne=null,ye=null,ie=N,le=N=0,dt=null,Te=R.next();ie!==null&&!Te.done;le++,Te=R.next()){ie.index>le?(dt=ie,ie=null):dt=ie.sibling;var jr=k(O,ie,Te.value,z);if(jr===null){ie===null&&(ie=dt);break}t&&ie&&jr.alternate===null&&n(O,ie),N=p(jr,N,le),ye===null?ne=jr:ye.sibling=jr,ye=jr,ie=dt}if(Te.done)return s(O,ie),Ce&&ri(O,le),ne;if(ie===null){for(;!Te.done;le++,Te=R.next())Te=H(O,Te.value,z),Te!==null&&(N=p(Te,N,le),ye===null?ne=Te:ye.sibling=Te,ye=Te);return Ce&&ri(O,le),ne}for(ie=o(ie);!Te.done;le++,Te=R.next())Te=I(ie,O,le,Te.value,z),Te!==null&&(t&&Te.alternate!==null&&ie.delete(Te.key===null?le:Te.key),N=p(Te,N,le),ye===null?ne=Te:ye.sibling=Te,ye=Te);return t&&ie.forEach(function(ES){return n(O,ES)}),Ce&&ri(O,le),ne}function Le(O,N,R,z){if(typeof R=="object"&&R!==null&&R.type===w&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case v:e:{for(var ne=R.key;N!==null;){if(N.key===ne){if(ne=R.type,ne===w){if(N.tag===7){s(O,N.sibling),z=u(N,R.props.children),z.return=O,O=z;break e}}else if(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&V0(ne)===N.type){s(O,N.sibling),z=u(N,R.props),vs(z,R),z.return=O,O=z;break e}s(O,N);break}else n(O,N);N=N.sibling}R.type===w?(z=ti(R.props.children,O.mode,z,R.key),z.return=O,O=z):(z=Yl(R.type,R.key,R.props,null,O.mode,z),vs(z,R),z.return=O,O=z)}return x(O);case b:e:{for(ne=R.key;N!==null;){if(N.key===ne)if(N.tag===4&&N.stateNode.containerInfo===R.containerInfo&&N.stateNode.implementation===R.implementation){s(O,N.sibling),z=u(N,R.children||[]),z.return=O,O=z;break e}else{s(O,N);break}else n(O,N);N=N.sibling}z=nd(R,O.mode,z),z.return=O,O=z}return x(O);case J:return ne=R._init,R=ne(R._payload),Le(O,N,R,z)}if(pe(R))return ce(O,N,R,z);if(Y(R)){if(ne=Y(R),typeof ne!="function")throw Error(a(150));return R=ne.call(R),se(O,N,R,z)}if(typeof R.then=="function")return Le(O,N,uo(R),z);if(R.$$typeof===G)return Le(O,N,Wl(O,R),z);fo(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,N!==null&&N.tag===6?(s(O,N.sibling),z=u(N,R),z.return=O,O=z):(s(O,N),z=td(R,O.mode,z),z.return=O,O=z),x(O)):s(O,N)}return function(O,N,R,z){try{ys=0;var ne=Le(O,N,R,z);return ra=null,ne}catch(ie){if(ie===os||ie===Jl)throw ie;var ye=Vt(29,ie,null,O.mode);return ye.lanes=z,ye.return=O,ye}finally{}}}var ia=G0(!0),$0=G0(!1),fn=Ke(null),jn=null;function vr(t){var n=t.alternate;A(at,at.current&1),A(fn,t),jn===null&&(n===null||Ji.current!==null||n.memoizedState!==null)&&(jn=t)}function Y0(t){if(t.tag===22){if(A(at,at.current),A(fn,t),jn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(jn=t)}}else _r()}function _r(){A(at,at.current),A(fn,fn.current)}function Xn(t){Me(fn),jn===t&&(jn=null),Me(at)}var at=Ke(0);function ho(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Tf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Id(t,n,s,o){n=t.memoizedState,s=s(o,n),s=s==null?n:h({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ld={enqueueSetState:function(t,n,s){t=t._reactInternals;var o=Qt(),u=gr(o);u.payload=n,s!=null&&(u.callback=s),n=pr(t,u,o),n!==null&&(Kt(n,t,o),us(n,t,o))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var o=Qt(),u=gr(o);u.tag=1,u.payload=n,s!=null&&(u.callback=s),n=pr(t,u,o),n!==null&&(Kt(n,t,o),us(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Qt(),o=gr(s);o.tag=2,n!=null&&(o.callback=n),n=pr(t,o,s),n!==null&&(Kt(n,t,s),us(n,t,s))}};function Q0(t,n,s,o,u,p,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,p,x):n.prototype&&n.prototype.isPureReactComponent?!es(s,o)||!es(u,p):!0}function K0(t,n,s,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==t&&Ld.enqueueReplaceState(n,n.state,null)}function ui(t,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(t=t.defaultProps){s===n&&(s=h({},s));for(var u in t)s[u]===void 0&&(s[u]=t[u])}return s}var mo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function X0(t){mo(t)}function W0(t){console.error(t)}function Z0(t){mo(t)}function go(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function J0(t,n,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Ud(t,n,s){return s=gr(s),s.tag=3,s.payload={element:null},s.callback=function(){go(t,n)},s}function ep(t){return t=gr(t),t.tag=3,t}function tp(t,n,s,o){var u=s.type.getDerivedStateFromError;if(typeof u=="function"){var p=o.value;t.payload=function(){return u(p)},t.callback=function(){J0(n,s,o)}}var x=s.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){J0(n,s,o),typeof u!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function EE(t,n,s,o,u){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&as(n,s,u,!0),s=fn.current,s!==null){switch(s.tag){case 13:return jn===null?of():s.alternate===null&&We===0&&(We=3),s.flags&=-257,s.flags|=65536,s.lanes=u,o===fd?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),uf(t,o,u)),!1;case 22:return s.flags|=65536,o===fd?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),uf(t,o,u)),!1}throw Error(a(435,s.tag))}return uf(t,o,u),of(),!1}if(Ce)return n=fn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==ad&&(t=Error(a(422),{cause:o}),is(on(t,s)))):(o!==ad&&(n=Error(a(423),{cause:o}),is(on(n,s))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=on(o,s),u=Ud(t.stateNode,o,u),gd(t,u),We!==4&&(We=2)),!1;var p=Error(a(520),{cause:o});if(p=on(p,s),Ts===null?Ts=[p]:Ts.push(p),We!==4&&(We=2),n===null)return!0;o=on(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=u&-u,s.lanes|=t,t=Ud(s.stateNode,o,t),gd(s,t),!1;case 1:if(n=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Tr===null||!Tr.has(p))))return s.flags|=65536,u&=-u,s.lanes|=u,u=ep(u),tp(u,t,s,o),gd(s,u),!1}s=s.return}while(s!==null);return!1}var np=Error(a(461)),ct=!1;function pt(t,n,s,o){n.child=t===null?$0(n,null,s,o):ia(n,t.child,s,o)}function rp(t,n,s,o,u){s=s.render;var p=n.ref;if("ref"in o){var x={};for(var E in o)E!=="ref"&&(x[E]=o[E])}else x=o;return li(n),o=bd(t,n,s,x,p,u),E=xd(),t!==null&&!ct?(wd(t,n,u),Wn(t,n,u)):(Ce&&E&&rd(n),n.flags|=1,pt(t,n,o,u),n.child)}function ip(t,n,s,o,u){if(t===null){var p=s.type;return typeof p=="function"&&!ed(p)&&p.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=p,ap(t,n,p,o,u)):(t=Yl(s.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,!Gd(t,u)){var x=p.memoizedProps;if(s=s.compare,s=s!==null?s:es,s(x,o)&&t.ref===n.ref)return Wn(t,n,u)}return n.flags|=1,t=Vn(p,o),t.ref=n.ref,t.return=n,n.child=t}function ap(t,n,s,o,u){if(t!==null){var p=t.memoizedProps;if(es(p,o)&&t.ref===n.ref)if(ct=!1,n.pendingProps=o=p,Gd(t,u))(t.flags&131072)!==0&&(ct=!0);else return n.lanes=t.lanes,Wn(t,n,u)}return Bd(t,n,s,o,u)}function sp(t,n,s){var o=n.pendingProps,u=o.children,p=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=p!==null?p.baseLanes|s:s,t!==null){for(u=n.child=t.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;n.childLanes=p&~o}else n.childLanes=0,n.child=null;return lp(t,n,o,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zl(n,p!==null?p.cachePool:null),p!==null?a0(n,p):yd(),Y0(n);else return n.lanes=n.childLanes=536870912,lp(t,n,p!==null?p.baseLanes|s:s,s)}else p!==null?(Zl(n,p.cachePool),a0(n,p),_r(),n.memoizedState=null):(t!==null&&Zl(n,null),yd(),_r());return pt(t,n,u,s),n.child}function lp(t,n,s,o){var u=dd();return u=u===null?null:{parent:it._currentValue,pool:u},n.memoizedState={baseLanes:s,cachePool:u},t!==null&&Zl(n,null),yd(),Y0(n),t!==null&&as(t,n,o,!0),null}function po(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Bd(t,n,s,o,u){return li(n),s=bd(t,n,s,o,void 0,u),o=xd(),t!==null&&!ct?(wd(t,n,u),Wn(t,n,u)):(Ce&&o&&rd(n),n.flags|=1,pt(t,n,s,u),n.child)}function op(t,n,s,o,u,p){return li(n),n.updateQueue=null,s=l0(n,o,s,u),s0(t),o=xd(),t!==null&&!ct?(wd(t,n,p),Wn(t,n,p)):(Ce&&o&&rd(n),n.flags|=1,pt(t,n,s,p),n.child)}function cp(t,n,s,o,u){if(li(n),n.stateNode===null){var p=Qi,x=s.contextType;typeof x=="object"&&x!==null&&(p=wt(x)),p=new s(o,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ld,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=o,p.state=n.memoizedState,p.refs={},hd(n),x=s.contextType,p.context=typeof x=="object"&&x!==null?wt(x):Qi,p.state=n.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(Id(n,s,x,o),p.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(x=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),x!==p.state&&Ld.enqueueReplaceState(p,p.state,null),fs(n,o,p,u),ds(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){p=n.stateNode;var E=n.memoizedProps,T=ui(s,E);p.props=T;var M=p.context,P=s.contextType;x=Qi,typeof P=="object"&&P!==null&&(x=wt(P));var H=s.getDerivedStateFromProps;P=typeof H=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,P||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||M!==x)&&K0(n,p,o,x),mr=!1;var k=n.memoizedState;p.state=k,fs(n,o,p,u),ds(),M=n.memoizedState,E||k!==M||mr?(typeof H=="function"&&(Id(n,s,H,o),M=n.memoizedState),(T=mr||Q0(n,s,T,o,k,M,x))?(P||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=M),p.props=o,p.state=M,p.context=x,o=T):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{p=n.stateNode,md(t,n),x=n.memoizedProps,P=ui(s,x),p.props=P,H=n.pendingProps,k=p.context,M=s.contextType,T=Qi,typeof M=="object"&&M!==null&&(T=wt(M)),E=s.getDerivedStateFromProps,(M=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==H||k!==T)&&K0(n,p,o,T),mr=!1,k=n.memoizedState,p.state=k,fs(n,o,p,u),ds();var I=n.memoizedState;x!==H||k!==I||mr||t!==null&&t.dependencies!==null&&Xl(t.dependencies)?(typeof E=="function"&&(Id(n,s,E,o),I=n.memoizedState),(P=mr||Q0(n,s,P,o,k,I,T)||t!==null&&t.dependencies!==null&&Xl(t.dependencies))?(M||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,I,T),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,I,T)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&k===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&k===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=I),p.props=o,p.state=I,p.context=T,o=P):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&k===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&k===t.memoizedState||(n.flags|=1024),o=!1)}return p=o,po(t,n),o=(n.flags&128)!==0,p||o?(p=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,t!==null&&o?(n.child=ia(n,t.child,null,u),n.child=ia(n,null,s,u)):pt(t,n,s,u),n.memoizedState=p.state,t=n.child):t=Wn(t,n,u),t}function up(t,n,s,o){return rs(),n.flags|=256,pt(t,n,s,o),n.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zd(t){return{baseLanes:t,cachePool:Wg()}}function qd(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=hn),t}function dp(t,n,s){var o=n.pendingProps,u=!1,p=(n.flags&128)!==0,x;if((x=p)||(x=t!==null&&t.memoizedState===null?!1:(at.current&2)!==0),x&&(u=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ce){if(u?vr(n):_r(),Ce){var E=Xe,T;if(T=E){e:{for(T=E,E=Mn;T.nodeType!==8;){if(!E){E=null;break e}if(T=wn(T.nextSibling),T===null){E=null;break e}}E=T}E!==null?(n.memoizedState={dehydrated:E,treeContext:ni!==null?{id:Gn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},T=Vt(18,null,null,0),T.stateNode=E,T.return=n,n.child=T,Tt=n,Xe=null,T=!0):T=!1}T||ai(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Tf(E)?n.lanes=32:n.lanes=536870912,null;Xn(n)}return E=o.children,o=o.fallback,u?(_r(),u=n.mode,E=yo({mode:"hidden",children:E},u),o=ti(o,u,s,null),E.return=n,o.return=n,E.sibling=o,n.child=E,u=n.child,u.memoizedState=zd(s),u.childLanes=qd(t,x,s),n.memoizedState=Pd,o):(vr(n),Hd(n,E))}if(T=t.memoizedState,T!==null&&(E=T.dehydrated,E!==null)){if(p)n.flags&256?(vr(n),n.flags&=-257,n=Fd(t,n,s)):n.memoizedState!==null?(_r(),n.child=t.child,n.flags|=128,n=null):(_r(),u=o.fallback,E=n.mode,o=yo({mode:"visible",children:o.children},E),u=ti(u,E,s,null),u.flags|=2,o.return=n,u.return=n,o.sibling=u,n.child=o,ia(n,t.child,null,s),o=n.child,o.memoizedState=zd(s),o.childLanes=qd(t,x,s),n.memoizedState=Pd,n=u);else if(vr(n),Tf(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var M=x.dgst;x=M,o=Error(a(419)),o.stack="",o.digest=x,is({value:o,source:null,stack:null}),n=Fd(t,n,s)}else if(ct||as(t,n,s,!1),x=(s&t.childLanes)!==0,ct||x){if(x=ze,x!==null&&(o=s&-s,o=(o&42)!==0?1:Tu(o),o=(o&(x.suspendedLanes|s))!==0?0:o,o!==0&&o!==T.retryLane))throw T.retryLane=o,Yi(t,o),Kt(x,t,o),np;E.data==="$?"||of(),n=Fd(t,n,s)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=T.treeContext,Xe=wn(E.nextSibling),Tt=n,Ce=!0,ii=null,Mn=!1,t!==null&&(un[dn++]=Gn,un[dn++]=$n,un[dn++]=ni,Gn=t.id,$n=t.overflow,ni=n),n=Hd(n,o.children),n.flags|=4096);return n}return u?(_r(),u=o.fallback,E=n.mode,T=t.child,M=T.sibling,o=Vn(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,M!==null?u=Vn(M,u):(u=ti(u,E,s,null),u.flags|=2),u.return=n,o.return=n,o.sibling=u,n.child=o,o=u,u=n.child,E=t.child.memoizedState,E===null?E=zd(s):(T=E.cachePool,T!==null?(M=it._currentValue,T=T.parent!==M?{parent:M,pool:M}:T):T=Wg(),E={baseLanes:E.baseLanes|s,cachePool:T}),u.memoizedState=E,u.childLanes=qd(t,x,s),n.memoizedState=Pd,o):(vr(n),s=t.child,t=s.sibling,s=Vn(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=s,n.memoizedState=null,s)}function Hd(t,n){return n=yo({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function yo(t,n){return t=Vt(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Fd(t,n,s){return ia(n,t.child,null,s),t=Hd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function fp(t,n,s){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),ld(t.return,n,s)}function Vd(t,n,s,o,u){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:u}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=s,p.tailMode=u)}function hp(t,n,s){var o=n.pendingProps,u=o.revealOrder,p=o.tail;if(pt(t,n,o.children,s),o=at.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,s,n);else if(t.tag===19)fp(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(A(at,o),u){case"forwards":for(s=n.child,u=null;s!==null;)t=s.alternate,t!==null&&ho(t)===null&&(u=s),s=s.sibling;s=u,s===null?(u=n.child,n.child=null):(u=s.sibling,s.sibling=null),Vd(n,!1,u,s,p);break;case"backwards":for(s=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&ho(t)===null){n.child=u;break}t=u.sibling,u.sibling=s,s=u,u=t}Vd(n,!0,s,null,p);break;case"together":Vd(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wn(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Sr|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(as(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Vn(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Vn(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Gd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Xl(t)))}function SE(t,n,s){switch(n.tag){case 3:Pe(n,n.stateNode.containerInfo),hr(n,it,t.memoizedState.cache),rs();break;case 27:case 5:lt(n);break;case 4:Pe(n,n.stateNode.containerInfo);break;case 10:hr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(vr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?dp(t,n,s):(vr(n),t=Wn(t,n,s),t!==null?t.sibling:null);vr(n);break;case 19:var u=(t.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(as(t,n,s,!1),o=(s&n.childLanes)!==0),u){if(o)return hp(t,n,s);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),A(at,at.current),o)break;return null;case 22:case 23:return n.lanes=0,sp(t,n,s);case 24:hr(n,it,t.memoizedState.cache)}return Wn(t,n,s)}function mp(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)ct=!0;else{if(!Gd(t,s)&&(n.flags&128)===0)return ct=!1,SE(t,n,s);ct=(t.flags&131072)!==0}else ct=!1,Ce&&(n.flags&1048576)!==0&&Vg(n,Kl,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var o=n.elementType,u=o._init;if(o=u(o._payload),n.type=o,typeof o=="function")ed(o)?(t=ui(o,t),n.tag=1,n=cp(null,n,o,t,s)):(n.tag=0,n=Bd(null,n,o,t,s));else{if(o!=null){if(u=o.$$typeof,u===Q){n.tag=11,n=rp(null,n,o,t,s);break e}else if(u===ee){n.tag=14,n=ip(null,n,o,t,s);break e}}throw n=q(o)||o,Error(a(306,n,""))}}return n;case 0:return Bd(t,n,n.type,n.pendingProps,s);case 1:return o=n.type,u=ui(o,n.pendingProps),cp(t,n,o,u,s);case 3:e:{if(Pe(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var p=n.memoizedState;u=p.element,md(t,n),fs(n,o,null,s);var x=n.memoizedState;if(o=x.cache,hr(n,it,o),o!==p.cache&&od(n,[it],s,!0),ds(),o=x.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=up(t,n,o,s);break e}else if(o!==u){u=on(Error(a(424)),n),is(u),n=up(t,n,o,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Xe=wn(t.firstChild),Tt=n,Ce=!0,ii=null,Mn=!0,s=$0(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(rs(),o===u){n=Wn(t,n,s);break e}pt(t,n,o,s)}n=n.child}return n;case 26:return po(t,n),t===null?(s=vy(n.type,null,n.pendingProps,null))?n.memoizedState=s:Ce||(s=n.type,t=n.pendingProps,o=Do(fe.current).createElement(s),o[xt]=n,o[Mt]=t,vt(o,s,t),ot(o),n.stateNode=o):n.memoizedState=vy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return lt(n),t===null&&Ce&&(o=n.stateNode=gy(n.type,n.pendingProps,fe.current),Tt=n,Mn=!0,u=Xe,Cr(n.type)?(Nf=u,Xe=wn(o.firstChild)):Xe=u),pt(t,n,n.pendingProps.children,s),po(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ce&&((u=o=Xe)&&(o=ZE(o,n.type,n.pendingProps,Mn),o!==null?(n.stateNode=o,Tt=n,Xe=wn(o.firstChild),Mn=!1,u=!0):u=!1),u||ai(n)),lt(n),u=n.type,p=n.pendingProps,x=t!==null?t.memoizedProps:null,o=p.children,wf(u,p)?o=null:x!==null&&wf(u,x)&&(n.flags|=32),n.memoizedState!==null&&(u=bd(t,n,pE,null,null,s),ks._currentValue=u),po(t,n),pt(t,n,o,s),n.child;case 6:return t===null&&Ce&&((t=s=Xe)&&(s=JE(s,n.pendingProps,Mn),s!==null?(n.stateNode=s,Tt=n,Xe=null,t=!0):t=!1),t||ai(n)),null;case 13:return dp(t,n,s);case 4:return Pe(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=ia(n,null,o,s):pt(t,n,o,s),n.child;case 11:return rp(t,n,n.type,n.pendingProps,s);case 7:return pt(t,n,n.pendingProps,s),n.child;case 8:return pt(t,n,n.pendingProps.children,s),n.child;case 12:return pt(t,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,hr(n,n.type,o.value),pt(t,n,o.children,s),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,li(n),u=wt(u),o=o(u),n.flags|=1,pt(t,n,o,s),n.child;case 14:return ip(t,n,n.type,n.pendingProps,s);case 15:return ap(t,n,n.type,n.pendingProps,s);case 19:return hp(t,n,s);case 31:return o=n.pendingProps,s=n.mode,o={mode:o.mode,children:o.children},t===null?(s=yo(o,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Vn(t.child,o),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return sp(t,n,s);case 24:return li(n),o=wt(it),t===null?(u=dd(),u===null&&(u=ze,p=cd(),u.pooledCache=p,p.refCount++,p!==null&&(u.pooledCacheLanes|=s),u=p),n.memoizedState={parent:o,cache:u},hd(n),hr(n,it,u)):((t.lanes&s)!==0&&(md(t,n),fs(n,null,null,s),ds()),u=t.memoizedState,p=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),hr(n,it,o)):(o=p.cache,hr(n,it,o),o!==u.cache&&od(n,[it],s,!0))),pt(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Zn(t){t.flags|=4}function gp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ey(n)){if(n=fn.current,n!==null&&((we&4194048)===we?jn!==null:(we&62914560)!==we&&(we&536870912)===0||n!==jn))throw cs=fd,Zg;t.flags|=8192}}function vo(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ym():536870912,t.lanes|=n,oa|=n)}function _s(t,n){if(!Ce)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function $e(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(n)for(var u=t.child;u!==null;)s|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)s|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=s,n}function TE(t,n,s){var o=n.pendingProps;switch(id(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(n),null;case 1:return $e(n),null;case 3:return s=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Qn(it),je(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ns(n)?Zn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Yg())),$e(n),null;case 26:return s=n.memoizedState,t===null?(Zn(n),s!==null?($e(n),gp(n,s)):($e(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Zn(n),$e(n),gp(n,s)):($e(n),n.flags&=-16777217):(t.memoizedProps!==o&&Zn(n),$e(n),n.flags&=-16777217),null;case 27:Mi(n),s=fe.current;var u=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Zn(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return $e(n),null}t=D.current,ns(n)?Gg(n):(t=gy(u,o,s),n.stateNode=t,Zn(n))}return $e(n),null;case 5:if(Mi(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Zn(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return $e(n),null}if(t=D.current,ns(n))Gg(n);else{switch(u=Do(fe.current),t){case 1:t=u.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=u.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=u.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=u.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?u.createElement("select",{is:o.is}):u.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?u.createElement(s,{is:o.is}):u.createElement(s)}}t[xt]=n,t[Mt]=o;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=t;e:switch(vt(t,s,o),s){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Zn(n)}}return $e(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Zn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=fe.current,ns(n)){if(t=n.stateNode,s=n.memoizedProps,o=null,u=Tt,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[xt]=n,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||oy(t.nodeValue,s)),t||ai(n)}else t=Do(t).createTextNode(o),t[xt]=n,n.stateNode=t}return $e(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=ns(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(a(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));u[xt]=n}else rs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),u=!1}else u=Yg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Xn(n),n):(Xn(n),null)}if(Xn(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=o!==null,t=t!==null&&t.memoizedState!==null,s){o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool);var p=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),vo(n,n.updateQueue),$e(n),null;case 4:return je(),t===null&&yf(n.stateNode.containerInfo),$e(n),null;case 10:return Qn(n.type),$e(n),null;case 19:if(Me(at),u=n.memoizedState,u===null)return $e(n),null;if(o=(n.flags&128)!==0,p=u.rendering,p===null)if(o)_s(u,!1);else{if(We!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(p=ho(t),p!==null){for(n.flags|=128,_s(u,!1),t=p.updateQueue,n.updateQueue=t,vo(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)Fg(s,t),s=s.sibling;return A(at,at.current&1|2),n.child}t=t.sibling}u.tail!==null&&Dn()>xo&&(n.flags|=128,o=!0,_s(u,!1),n.lanes=4194304)}else{if(!o)if(t=ho(p),t!==null){if(n.flags|=128,o=!0,t=t.updateQueue,n.updateQueue=t,vo(n,t),_s(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Ce)return $e(n),null}else 2*Dn()-u.renderingStartTime>xo&&s!==536870912&&(n.flags|=128,o=!0,_s(u,!1),n.lanes=4194304);u.isBackwards?(p.sibling=n.child,n.child=p):(t=u.last,t!==null?t.sibling=p:n.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Dn(),n.sibling=null,t=at.current,A(at,o?t&1|2:t&1),n):($e(n),null);case 22:case 23:return Xn(n),vd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&($e(n),n.subtreeFlags&6&&(n.flags|=8192)):$e(n),s=n.updateQueue,s!==null&&vo(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),t!==null&&Me(oi),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Qn(it),$e(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function NE(t,n){switch(id(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Qn(it),je(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Mi(n),null;case 13:if(Xn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));rs()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Me(at),null;case 4:return je(),null;case 10:return Qn(n.type),null;case 22:case 23:return Xn(n),vd(),t!==null&&Me(oi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Qn(it),null;case 25:return null;default:return null}}function pp(t,n){switch(id(n),n.tag){case 3:Qn(it),je();break;case 26:case 27:case 5:Mi(n);break;case 4:je();break;case 13:Xn(n);break;case 19:Me(at);break;case 10:Qn(n.type);break;case 22:case 23:Xn(n),vd(),t!==null&&Me(oi);break;case 24:Qn(it)}}function bs(t,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var u=o.next;s=u;do{if((s.tag&t)===t){o=void 0;var p=s.create,x=s.inst;o=p(),x.destroy=o}s=s.next}while(s!==u)}}catch(E){Ue(n,n.return,E)}}function br(t,n,s){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&t)===t){var x=o.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,u=n;var T=s,M=E;try{M()}catch(P){Ue(u,T,P)}}}o=o.next}while(o!==p)}}catch(P){Ue(n,n.return,P)}}function yp(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{i0(n,s)}catch(o){Ue(t,t.return,o)}}}function vp(t,n,s){s.props=ui(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){Ue(t,n,o)}}function xs(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof s=="function"?t.refCleanup=s(o):s.current=o}}catch(u){Ue(t,n,u)}}function kn(t,n){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(u){Ue(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(u){Ue(t,n,u)}else s.current=null}function _p(t){var n=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(u){Ue(t,t.return,u)}}function $d(t,n,s){try{var o=t.stateNode;YE(o,t.type,s,n),o[Mt]=n}catch(u){Ue(t,t.return,u)}}function bp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cr(t.type)||t.tag===4}function Yd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qd(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Ro));else if(o!==4&&(o===27&&Cr(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Qd(t,n,s),t=t.sibling;t!==null;)Qd(t,n,s),t=t.sibling}function _o(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(o!==4&&(o===27&&Cr(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(_o(t,n,s),t=t.sibling;t!==null;)_o(t,n,s),t=t.sibling}function xp(t){var n=t.stateNode,s=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);vt(n,o,s),n[xt]=t,n[Mt]=s}catch(p){Ue(t,t.return,p)}}var Jn=!1,tt=!1,Kd=!1,wp=typeof WeakSet=="function"?WeakSet:Set,ut=null;function AE(t,n){if(t=t.containerInfo,bf=Uo,t=jg(t),Yu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var u=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var x=0,E=-1,T=-1,M=0,P=0,H=t,k=null;t:for(;;){for(var I;H!==s||u!==0&&H.nodeType!==3||(E=x+u),H!==p||o!==0&&H.nodeType!==3||(T=x+o),H.nodeType===3&&(x+=H.nodeValue.length),(I=H.firstChild)!==null;)k=H,H=I;for(;;){if(H===t)break t;if(k===s&&++M===u&&(E=x),k===p&&++P===o&&(T=x),(I=H.nextSibling)!==null)break;H=k,k=H.parentNode}H=I}s=E===-1||T===-1?null:{start:E,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(xf={focusedElem:t,selectionRange:s},Uo=!1,ut=n;ut!==null;)if(n=ut,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,ut=t;else for(;ut!==null;){switch(n=ut,p=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=n,u=p.memoizedProps,p=p.memoizedState,o=s.stateNode;try{var ce=ui(s.type,u,s.elementType===s.type);t=o.getSnapshotBeforeUpdate(ce,p),o.__reactInternalSnapshotBeforeUpdate=t}catch(se){Ue(s,s.return,se)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Sf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,ut=t;break}ut=n.return}}function Ep(t,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:xr(t,s),o&4&&bs(5,s);break;case 1:if(xr(t,s),o&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(x){Ue(s,s.return,x)}else{var u=ui(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Ue(s,s.return,x)}}o&64&&yp(s),o&512&&xs(s,s.return);break;case 3:if(xr(t,s),o&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{i0(t,n)}catch(x){Ue(s,s.return,x)}}break;case 27:n===null&&o&4&&xp(s);case 26:case 5:xr(t,s),n===null&&o&4&&_p(s),o&512&&xs(s,s.return);break;case 12:xr(t,s);break;case 13:xr(t,s),o&4&&Np(t,s),o&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=LE.bind(null,s),eS(t,s))));break;case 22:if(o=s.memoizedState!==null||Jn,!o){n=n!==null&&n.memoizedState!==null||tt,u=Jn;var p=tt;Jn=o,(tt=n)&&!p?wr(t,s,(s.subtreeFlags&8772)!==0):xr(t,s),Jn=u,tt=p}break;case 30:break;default:xr(t,s)}}function Sp(t){var n=t.alternate;n!==null&&(t.alternate=null,Sp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Cu(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,It=!1;function er(t,n,s){for(s=s.child;s!==null;)Tp(t,n,s),s=s.sibling}function Tp(t,n,s){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Ha,s)}catch{}switch(s.tag){case 26:tt||kn(s,n),er(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:tt||kn(s,n);var o=Fe,u=It;Cr(s.type)&&(Fe=s.stateNode,It=!1),er(t,n,s),Rs(s.stateNode),Fe=o,It=u;break;case 5:tt||kn(s,n);case 6:if(o=Fe,u=It,Fe=null,er(t,n,s),Fe=o,It=u,Fe!==null)if(It)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(s.stateNode)}catch(p){Ue(s,n,p)}else try{Fe.removeChild(s.stateNode)}catch(p){Ue(s,n,p)}break;case 18:Fe!==null&&(It?(t=Fe,hy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Bs(t)):hy(Fe,s.stateNode));break;case 4:o=Fe,u=It,Fe=s.stateNode.containerInfo,It=!0,er(t,n,s),Fe=o,It=u;break;case 0:case 11:case 14:case 15:tt||br(2,s,n),tt||br(4,s,n),er(t,n,s);break;case 1:tt||(kn(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&vp(s,n,o)),er(t,n,s);break;case 21:er(t,n,s);break;case 22:tt=(o=tt)||s.memoizedState!==null,er(t,n,s),tt=o;break;default:er(t,n,s)}}function Np(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bs(t)}catch(s){Ue(n,n.return,s)}}function CE(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new wp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new wp),n;default:throw Error(a(435,t.tag))}}function Xd(t,n){var s=CE(t);n.forEach(function(o){var u=UE.bind(null,t,o);s.has(o)||(s.add(o),o.then(u,u))})}function Gt(t,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var u=s[o],p=t,x=n,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(Cr(E.type)){Fe=E.stateNode,It=!1;break e}break;case 5:Fe=E.stateNode,It=!1;break e;case 3:case 4:Fe=E.stateNode.containerInfo,It=!0;break e}E=E.return}if(Fe===null)throw Error(a(160));Tp(p,x,u),Fe=null,It=!1,p=u.alternate,p!==null&&(p.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Ap(n,t),n=n.sibling}var xn=null;function Ap(t,n){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gt(n,t),$t(t),o&4&&(br(3,t,t.return),bs(3,t),br(5,t,t.return));break;case 1:Gt(n,t),$t(t),o&512&&(tt||s===null||kn(s,s.return)),o&64&&Jn&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var u=xn;if(Gt(n,t),$t(t),o&512&&(tt||s===null||kn(s,s.return)),o&4){var p=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":p=u.getElementsByTagName("title")[0],(!p||p[Ga]||p[xt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=u.createElement(o),u.head.insertBefore(p,u.querySelector("head > title"))),vt(p,o,s),p[xt]=t,ot(p),o=p;break e;case"link":var x=xy("link","href",u).get(o+(s.href||""));if(x){for(var E=0;E<x.length;E++)if(p=x[E],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){x.splice(E,1);break t}}p=u.createElement(o),vt(p,o,s),u.head.appendChild(p);break;case"meta":if(x=xy("meta","content",u).get(o+(s.content||""))){for(E=0;E<x.length;E++)if(p=x[E],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){x.splice(E,1);break t}}p=u.createElement(o),vt(p,o,s),u.head.appendChild(p);break;default:throw Error(a(468,o))}p[xt]=t,ot(p),o=p}t.stateNode=o}else wy(u,t.type,t.stateNode);else t.stateNode=by(u,o,t.memoizedProps);else p!==o?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,o===null?wy(u,t.type,t.stateNode):by(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&$d(t,t.memoizedProps,s.memoizedProps)}break;case 27:Gt(n,t),$t(t),o&512&&(tt||s===null||kn(s,s.return)),s!==null&&o&4&&$d(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Gt(n,t),$t(t),o&512&&(tt||s===null||kn(s,s.return)),t.flags&32){u=t.stateNode;try{zi(u,"")}catch(I){Ue(t,t.return,I)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,$d(t,u,s!==null?s.memoizedProps:u)),o&1024&&(Kd=!0);break;case 6:if(Gt(n,t),$t(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(I){Ue(t,t.return,I)}}break;case 3:if(ko=null,u=xn,xn=Mo(n.containerInfo),Gt(n,t),xn=u,$t(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{Bs(n.containerInfo)}catch(I){Ue(t,t.return,I)}Kd&&(Kd=!1,Cp(t));break;case 4:o=xn,xn=Mo(t.stateNode.containerInfo),Gt(n,t),$t(t),xn=o;break;case 12:Gt(n,t),$t(t);break;case 13:Gt(n,t),$t(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(nf=Dn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Xd(t,o)));break;case 22:u=t.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,M=Jn,P=tt;if(Jn=M||u,tt=P||T,Gt(n,t),tt=P,Jn=M,$t(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(s===null||T||Jn||tt||di(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){T=s=n;try{if(p=T.stateNode,u)x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=T.stateNode;var H=T.memoizedProps.style,k=H!=null&&H.hasOwnProperty("display")?H.display:null;E.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(I){Ue(T,T.return,I)}}}else if(n.tag===6){if(s===null){T=n;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(I){Ue(T,T.return,I)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Xd(t,s))));break;case 19:Gt(n,t),$t(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Xd(t,o)));break;case 30:break;case 21:break;default:Gt(n,t),$t(t)}}function $t(t){var n=t.flags;if(n&2){try{for(var s,o=t.return;o!==null;){if(bp(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var u=s.stateNode,p=Yd(t);_o(t,p,u);break;case 5:var x=s.stateNode;s.flags&32&&(zi(x,""),s.flags&=-33);var E=Yd(t);_o(t,E,x);break;case 3:case 4:var T=s.stateNode.containerInfo,M=Yd(t);Qd(t,M,T);break;default:throw Error(a(161))}}catch(P){Ue(t,t.return,P)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Cp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Cp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function xr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ep(t,n.alternate,n),n=n.sibling}function di(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:br(4,n,n.return),di(n);break;case 1:kn(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&vp(n,n.return,s),di(n);break;case 27:Rs(n.stateNode);case 26:case 5:kn(n,n.return),di(n);break;case 22:n.memoizedState===null&&di(n);break;case 30:di(n);break;default:di(n)}t=t.sibling}}function wr(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,p=n,x=p.flags;switch(p.tag){case 0:case 11:case 15:wr(u,p,s),bs(4,p);break;case 1:if(wr(u,p,s),o=p,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(M){Ue(o,o.return,M)}if(o=p,u=o.updateQueue,u!==null){var E=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)r0(T[u],E)}catch(M){Ue(o,o.return,M)}}s&&x&64&&yp(p),xs(p,p.return);break;case 27:xp(p);case 26:case 5:wr(u,p,s),s&&o===null&&x&4&&_p(p),xs(p,p.return);break;case 12:wr(u,p,s);break;case 13:wr(u,p,s),s&&x&4&&Np(u,p);break;case 22:p.memoizedState===null&&wr(u,p,s),xs(p,p.return);break;case 30:break;default:wr(u,p,s)}n=n.sibling}}function Wd(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&ss(s))}function Zd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ss(t))}function In(t,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Op(t,n,s,o),n=n.sibling}function Op(t,n,s,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:In(t,n,s,o),u&2048&&bs(9,n);break;case 1:In(t,n,s,o);break;case 3:In(t,n,s,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ss(t)));break;case 12:if(u&2048){In(t,n,s,o),t=n.stateNode;try{var p=n.memoizedProps,x=p.id,E=p.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(T){Ue(n,n.return,T)}}else In(t,n,s,o);break;case 13:In(t,n,s,o);break;case 23:break;case 22:p=n.stateNode,x=n.alternate,n.memoizedState!==null?p._visibility&2?In(t,n,s,o):ws(t,n):p._visibility&2?In(t,n,s,o):(p._visibility|=2,aa(t,n,s,o,(n.subtreeFlags&10256)!==0)),u&2048&&Wd(x,n);break;case 24:In(t,n,s,o),u&2048&&Zd(n.alternate,n);break;default:In(t,n,s,o)}}function aa(t,n,s,o,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var p=t,x=n,E=s,T=o,M=x.flags;switch(x.tag){case 0:case 11:case 15:aa(p,x,E,T,u),bs(8,x);break;case 23:break;case 22:var P=x.stateNode;x.memoizedState!==null?P._visibility&2?aa(p,x,E,T,u):ws(p,x):(P._visibility|=2,aa(p,x,E,T,u)),u&&M&2048&&Wd(x.alternate,x);break;case 24:aa(p,x,E,T,u),u&&M&2048&&Zd(x.alternate,x);break;default:aa(p,x,E,T,u)}n=n.sibling}}function ws(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,o=n,u=o.flags;switch(o.tag){case 22:ws(s,o),u&2048&&Wd(o.alternate,o);break;case 24:ws(s,o),u&2048&&Zd(o.alternate,o);break;default:ws(s,o)}n=n.sibling}}var Es=8192;function sa(t){if(t.subtreeFlags&Es)for(t=t.child;t!==null;)Rp(t),t=t.sibling}function Rp(t){switch(t.tag){case 26:sa(t),t.flags&Es&&t.memoizedState!==null&&hS(xn,t.memoizedState,t.memoizedProps);break;case 5:sa(t);break;case 3:case 4:var n=xn;xn=Mo(t.stateNode.containerInfo),sa(t),xn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Es,Es=16777216,sa(t),Es=n):sa(t));break;default:sa(t)}}function Dp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ss(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];ut=o,jp(o,t)}Dp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:Ss(t),t.flags&2048&&br(9,t,t.return);break;case 3:Ss(t);break;case 12:Ss(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,bo(t)):Ss(t);break;default:Ss(t)}}function bo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];ut=o,jp(o,t)}Dp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:br(8,n,n.return),bo(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,bo(n));break;default:bo(n)}t=t.sibling}}function jp(t,n){for(;ut!==null;){var s=ut;switch(s.tag){case 0:case 11:case 15:br(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ss(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,ut=o;else e:for(s=t;ut!==null;){o=ut;var u=o.sibling,p=o.return;if(Sp(o),o===s){ut=null;break e}if(u!==null){u.return=p,ut=u;break e}ut=p}}}var OE={getCacheForType:function(t){var n=wt(it),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},RE=typeof WeakMap=="function"?WeakMap:Map,Oe=0,ze=null,be=null,we=0,Re=0,Yt=null,Er=!1,la=!1,Jd=!1,tr=0,We=0,Sr=0,fi=0,ef=0,hn=0,oa=0,Ts=null,Lt=null,tf=!1,nf=0,xo=1/0,wo=null,Tr=null,yt=0,Nr=null,ca=null,ua=0,rf=0,af=null,kp=null,Ns=0,sf=null;function Qt(){if((Oe&2)!==0&&we!==0)return we&-we;if(B.T!==null){var t=Wi;return t!==0?t:hf()}return Xm()}function Ip(){hn===0&&(hn=(we&536870912)===0||Ce?$m():536870912);var t=fn.current;return t!==null&&(t.flags|=32),hn}function Kt(t,n,s){(t===ze&&(Re===2||Re===9)||t.cancelPendingCommit!==null)&&(da(t,0),Ar(t,we,hn,!1)),Va(t,s),((Oe&2)===0||t!==ze)&&(t===ze&&((Oe&2)===0&&(fi|=s),We===4&&Ar(t,we,hn,!1)),Ln(t))}function Lp(t,n,s){if((Oe&6)!==0)throw Error(a(327));var o=!s&&(n&124)===0&&(n&t.expiredLanes)===0||Fa(t,n),u=o?jE(t,n):cf(t,n,!0),p=o;do{if(u===0){la&&!o&&Ar(t,n,0,!1);break}else{if(s=t.current.alternate,p&&!DE(s)){u=cf(t,n,!1),p=!1;continue}if(u===2){if(p=n,t.errorRecoveryDisabledLanes&p)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var E=t;u=Ts;var T=E.current.memoizedState.isDehydrated;if(T&&(da(E,x).flags|=256),x=cf(E,x,!1),x!==2){if(Jd&&!T){E.errorRecoveryDisabledLanes|=p,fi|=p,u=4;break e}p=Lt,Lt=u,p!==null&&(Lt===null?Lt=p:Lt.push.apply(Lt,p))}u=x}if(p=!1,u!==2)continue}}if(u===1){da(t,0),Ar(t,n,0,!0);break}e:{switch(o=t,p=u,p){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Ar(o,n,hn,!Er);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(u=nf+300-Dn(),10<u)){if(Ar(o,n,hn,!Er),Ml(o,0,!0)!==0)break e;o.timeoutHandle=dy(Up.bind(null,o,s,Lt,wo,tf,n,hn,fi,oa,Er,p,2,-0,0),u);break e}Up(o,s,Lt,wo,tf,n,hn,fi,oa,Er,p,0,-0,0)}}break}while(!0);Ln(t)}function Up(t,n,s,o,u,p,x,E,T,M,P,H,k,I){if(t.timeoutHandle=-1,H=n.subtreeFlags,(H&8192||(H&16785408)===16785408)&&(js={stylesheets:null,count:0,unsuspend:fS},Rp(n),H=mS(),H!==null)){t.cancelPendingCommit=H(Vp.bind(null,t,n,p,s,o,u,x,E,T,P,1,k,I)),Ar(t,p,x,!M);return}Vp(t,n,p,s,o,u,x,E,T)}function DE(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var u=s[o],p=u.getSnapshot;u=u.value;try{if(!Ft(p(),u))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ar(t,n,s,o){n&=~ef,n&=~fi,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var p=31-Ht(u),x=1<<p;o[p]=-1,u&=~x}s!==0&&Qm(t,s,n)}function Eo(){return(Oe&6)===0?(As(0),!1):!0}function lf(){if(be!==null){if(Re===0)var t=be.return;else t=be,Yn=si=null,Ed(t),ra=null,ys=0,t=be;for(;t!==null;)pp(t.alternate,t),t=t.return;be=null}}function da(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,KE(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),lf(),ze=t,be=s=Vn(t.current,null),we=n,Re=0,Yt=null,Er=!1,la=Fa(t,n),Jd=!1,oa=hn=ef=fi=Sr=We=0,Lt=Ts=null,tf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-Ht(o),p=1<<u;n|=t[u],o&=~p}return tr=n,Vl(),s}function Bp(t,n){he=null,B.H=co,n===os||n===Jl?(n=t0(),Re=3):n===Zg?(n=t0(),Re=4):Re=n===np?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Yt=n,be===null&&(We=1,go(t,on(n,t.current)))}function Pp(){var t=B.H;return B.H=co,t===null?co:t}function zp(){var t=B.A;return B.A=OE,t}function of(){We=4,Er||(we&4194048)!==we&&fn.current!==null||(la=!0),(Sr&134217727)===0&&(fi&134217727)===0||ze===null||Ar(ze,we,hn,!1)}function cf(t,n,s){var o=Oe;Oe|=2;var u=Pp(),p=zp();(ze!==t||we!==n)&&(wo=null,da(t,n)),n=!1;var x=We;e:do try{if(Re!==0&&be!==null){var E=be,T=Yt;switch(Re){case 8:lf(),x=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(n=!0);var M=Re;if(Re=0,Yt=null,fa(t,E,T,M),s&&la){x=0;break e}break;default:M=Re,Re=0,Yt=null,fa(t,E,T,M)}}ME(),x=We;break}catch(P){Bp(t,P)}while(!0);return n&&t.shellSuspendCounter++,Yn=si=null,Oe=o,B.H=u,B.A=p,be===null&&(ze=null,we=0,Vl()),x}function ME(){for(;be!==null;)qp(be)}function jE(t,n){var s=Oe;Oe|=2;var o=Pp(),u=zp();ze!==t||we!==n?(wo=null,xo=Dn()+500,da(t,n)):la=Fa(t,n);e:do try{if(Re!==0&&be!==null){n=be;var p=Yt;t:switch(Re){case 1:Re=0,Yt=null,fa(t,n,p,1);break;case 2:case 9:if(Jg(p)){Re=0,Yt=null,Hp(n);break}n=function(){Re!==2&&Re!==9||ze!==t||(Re=7),Ln(t)},p.then(n,n);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:Jg(p)?(Re=0,Yt=null,Hp(n)):(Re=0,Yt=null,fa(t,n,p,7));break;case 5:var x=null;switch(be.tag){case 26:x=be.memoizedState;case 5:case 27:var E=be;if(!x||Ey(x)){Re=0,Yt=null;var T=E.sibling;if(T!==null)be=T;else{var M=E.return;M!==null?(be=M,So(M)):be=null}break t}}Re=0,Yt=null,fa(t,n,p,5);break;case 6:Re=0,Yt=null,fa(t,n,p,6);break;case 8:lf(),We=6;break e;default:throw Error(a(462))}}kE();break}catch(P){Bp(t,P)}while(!0);return Yn=si=null,B.H=o,B.A=u,Oe=s,be!==null?0:(ze=null,we=0,Vl(),We)}function kE(){for(;be!==null&&!wu();)qp(be)}function qp(t){var n=mp(t.alternate,t,tr);t.memoizedProps=t.pendingProps,n===null?So(t):be=n}function Hp(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=op(s,n,n.pendingProps,n.type,void 0,we);break;case 11:n=op(s,n,n.pendingProps,n.type.render,n.ref,we);break;case 5:Ed(n);default:pp(s,n),n=be=Fg(n,tr),n=mp(s,n,tr)}t.memoizedProps=t.pendingProps,n===null?So(t):be=n}function fa(t,n,s,o){Yn=si=null,Ed(n),ra=null,ys=0;var u=n.return;try{if(EE(t,u,n,s,we)){We=1,go(t,on(s,t.current)),be=null;return}}catch(p){if(u!==null)throw be=u,p;We=1,go(t,on(s,t.current)),be=null;return}n.flags&32768?(Ce||o===1?t=!0:la||(we&536870912)!==0?t=!1:(Er=t=!0,(o===2||o===9||o===3||o===6)&&(o=fn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fp(n,t)):So(n)}function So(t){var n=t;do{if((n.flags&32768)!==0){Fp(n,Er);return}t=n.return;var s=TE(n.alternate,n,tr);if(s!==null){be=s;return}if(n=n.sibling,n!==null){be=n;return}be=n=t}while(n!==null);We===0&&(We=5)}function Fp(t,n){do{var s=NE(t.alternate,t);if(s!==null){s.flags&=32767,be=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){be=t;return}be=t=s}while(t!==null);We=6,be=null}function Vp(t,n,s,o,u,p,x,E,T){t.cancelPendingCommit=null;do To();while(yt!==0);if((Oe&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(p=n.lanes|n.childLanes,p|=Zu,fw(t,s,p,x,E,T),t===ze&&(be=ze=null,we=0),ca=n,Nr=t,ua=s,rf=p,af=u,kp=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,BE(Ol,function(){return Kp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,u=te.p,te.p=2,x=Oe,Oe|=4;try{AE(t,n,s)}finally{Oe=x,te.p=u,B.T=o}}yt=1,Gp(),$p(),Yp()}}function Gp(){if(yt===1){yt=0;var t=Nr,n=ca,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=B.T,B.T=null;var o=te.p;te.p=2;var u=Oe;Oe|=4;try{Ap(n,t);var p=xf,x=jg(t.containerInfo),E=p.focusedElem,T=p.selectionRange;if(x!==E&&E&&E.ownerDocument&&Mg(E.ownerDocument.documentElement,E)){if(T!==null&&Yu(E)){var M=T.start,P=T.end;if(P===void 0&&(P=M),"selectionStart"in E)E.selectionStart=M,E.selectionEnd=Math.min(P,E.value.length);else{var H=E.ownerDocument||document,k=H&&H.defaultView||window;if(k.getSelection){var I=k.getSelection(),ce=E.textContent.length,se=Math.min(T.start,ce),Le=T.end===void 0?se:Math.min(T.end,ce);!I.extend&&se>Le&&(x=Le,Le=se,se=x);var O=Dg(E,se),N=Dg(E,Le);if(O&&N&&(I.rangeCount!==1||I.anchorNode!==O.node||I.anchorOffset!==O.offset||I.focusNode!==N.node||I.focusOffset!==N.offset)){var R=H.createRange();R.setStart(O.node,O.offset),I.removeAllRanges(),se>Le?(I.addRange(R),I.extend(N.node,N.offset)):(R.setEnd(N.node,N.offset),I.addRange(R))}}}}for(H=[],I=E;I=I.parentNode;)I.nodeType===1&&H.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<H.length;E++){var z=H[E];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}Uo=!!bf,xf=bf=null}finally{Oe=u,te.p=o,B.T=s}}t.current=n,yt=2}}function $p(){if(yt===2){yt=0;var t=Nr,n=ca,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=B.T,B.T=null;var o=te.p;te.p=2;var u=Oe;Oe|=4;try{Ep(t,n.alternate,n)}finally{Oe=u,te.p=o,B.T=s}}yt=3}}function Yp(){if(yt===4||yt===3){yt=0,Eu();var t=Nr,n=ca,s=ua,o=kp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?yt=5:(yt=0,ca=Nr=null,Qp(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Tr=null),Nu(s),n=n.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Ha,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=B.T,u=te.p,te.p=2,B.T=null;try{for(var p=t.onRecoverableError,x=0;x<o.length;x++){var E=o[x];p(E.value,{componentStack:E.stack})}}finally{B.T=n,te.p=u}}(ua&3)!==0&&To(),Ln(t),u=t.pendingLanes,(s&4194090)!==0&&(u&42)!==0?t===sf?Ns++:(Ns=0,sf=t):Ns=0,As(0)}}function Qp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,ss(n)))}function To(t){return Gp(),$p(),Yp(),Kp()}function Kp(){if(yt!==5)return!1;var t=Nr,n=rf;rf=0;var s=Nu(ua),o=B.T,u=te.p;try{te.p=32>s?32:s,B.T=null,s=af,af=null;var p=Nr,x=ua;if(yt=0,ca=Nr=null,ua=0,(Oe&6)!==0)throw Error(a(331));var E=Oe;if(Oe|=4,Mp(p.current),Op(p,p.current,x,s),Oe=E,As(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Ha,p)}catch{}return!0}finally{te.p=u,B.T=o,Qp(t,n)}}function Xp(t,n,s){n=on(s,n),n=Ud(t.stateNode,n,2),t=pr(t,n,2),t!==null&&(Va(t,2),Ln(t))}function Ue(t,n,s){if(t.tag===3)Xp(t,t,s);else for(;n!==null;){if(n.tag===3){Xp(n,t,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Tr===null||!Tr.has(o))){t=on(s,t),s=ep(2),o=pr(n,s,2),o!==null&&(tp(s,o,n,t),Va(o,2),Ln(o));break}}n=n.return}}function uf(t,n,s){var o=t.pingCache;if(o===null){o=t.pingCache=new RE;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(s)||(Jd=!0,u.add(s),t=IE.bind(null,t,n,s),n.then(t,t))}function IE(t,n,s){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ze===t&&(we&s)===s&&(We===4||We===3&&(we&62914560)===we&&300>Dn()-nf?(Oe&2)===0&&da(t,0):ef|=s,oa===we&&(oa=0)),Ln(t)}function Wp(t,n){n===0&&(n=Ym()),t=Yi(t,n),t!==null&&(Va(t,n),Ln(t))}function LE(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Wp(t,s)}function UE(t,n){var s=0;switch(t.tag){case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(s=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),Wp(t,s)}function BE(t,n){return He(t,n)}var No=null,ha=null,df=!1,Ao=!1,ff=!1,hi=0;function Ln(t){t!==ha&&t.next===null&&(ha===null?No=ha=t:ha=ha.next=t),Ao=!0,df||(df=!0,zE())}function As(t,n){if(!ff&&Ao){ff=!0;do for(var s=!1,o=No;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var p=0;else{var x=o.suspendedLanes,E=o.pingedLanes;p=(1<<31-Ht(42|t)+1)-1,p&=u&~(x&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,ty(o,p))}else p=we,p=Ml(o,o===ze?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(p&3)===0||Fa(o,p)||(s=!0,ty(o,p));o=o.next}while(s);ff=!1}}function PE(){Zp()}function Zp(){Ao=df=!1;var t=0;hi!==0&&(QE()&&(t=hi),hi=0);for(var n=Dn(),s=null,o=No;o!==null;){var u=o.next,p=Jp(o,n);p===0?(o.next=null,s===null?No=u:s.next=u,u===null&&(ha=s)):(s=o,(t!==0||(p&3)!==0)&&(Ao=!0)),o=u}As(t)}function Jp(t,n){for(var s=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var x=31-Ht(p),E=1<<x,T=u[x];T===-1?((E&s)===0||(E&o)!==0)&&(u[x]=dw(E,n)):T<=n&&(t.expiredLanes|=E),p&=~E}if(n=ze,s=we,s=Ml(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,s===0||t===n&&(Re===2||Re===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Kr(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Fa(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(o!==null&&Kr(o),Nu(s)){case 2:case 8:s=Vm;break;case 32:s=Ol;break;case 268435456:s=Gm;break;default:s=Ol}return o=ey.bind(null,t),s=He(s,o),t.callbackPriority=n,t.callbackNode=s,n}return o!==null&&o!==null&&Kr(o),t.callbackPriority=2,t.callbackNode=null,2}function ey(t,n){if(yt!==0&&yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(To()&&t.callbackNode!==s)return null;var o=we;return o=Ml(t,t===ze?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Lp(t,o,n),Jp(t,Dn()),t.callbackNode!=null&&t.callbackNode===s?ey.bind(null,t):null)}function ty(t,n){if(To())return null;Lp(t,n,!0)}function zE(){XE(function(){(Oe&6)!==0?He(Fm,PE):Zp()})}function hf(){return hi===0&&(hi=$m()),hi}function ny(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ul(""+t)}function ry(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function qE(t,n,s,o,u){if(n==="submit"&&s&&s.stateNode===u){var p=ny((u[Mt]||null).action),x=o.submitter;x&&(n=(n=x[Mt]||null)?ny(n.formAction):x.getAttribute("formAction"),n!==null&&(p=n,x=null));var E=new ql("action","action",null,o,u);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(hi!==0){var T=x?ry(u,x):new FormData(u);Md(s,{pending:!0,data:T,method:u.method,action:p},null,T)}}else typeof p=="function"&&(E.preventDefault(),T=x?ry(u,x):new FormData(u),Md(s,{pending:!0,data:T,method:u.method,action:p},p,T))},currentTarget:u}]})}}for(var mf=0;mf<Wu.length;mf++){var gf=Wu[mf],HE=gf.toLowerCase(),FE=gf[0].toUpperCase()+gf.slice(1);bn(HE,"on"+FE)}bn(Lg,"onAnimationEnd"),bn(Ug,"onAnimationIteration"),bn(Bg,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(sE,"onTransitionRun"),bn(lE,"onTransitionStart"),bn(oE,"onTransitionCancel"),bn(Pg,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cs));function iy(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],u=o.event;o=o.listeners;e:{var p=void 0;if(n)for(var x=o.length-1;0<=x;x--){var E=o[x],T=E.instance,M=E.currentTarget;if(E=E.listener,T!==p&&u.isPropagationStopped())break e;p=E,u.currentTarget=M;try{p(u)}catch(P){mo(P)}u.currentTarget=null,p=T}else for(x=0;x<o.length;x++){if(E=o[x],T=E.instance,M=E.currentTarget,E=E.listener,T!==p&&u.isPropagationStopped())break e;p=E,u.currentTarget=M;try{p(u)}catch(P){mo(P)}u.currentTarget=null,p=T}}}}function xe(t,n){var s=n[Au];s===void 0&&(s=n[Au]=new Set);var o=t+"__bubble";s.has(o)||(ay(n,t,2,!1),s.add(o))}function pf(t,n,s){var o=0;n&&(o|=4),ay(s,t,o,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function yf(t){if(!t[Co]){t[Co]=!0,Zm.forEach(function(s){s!=="selectionchange"&&(VE.has(s)||pf(s,!1,t),pf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Co]||(n[Co]=!0,pf("selectionchange",!1,n))}}function ay(t,n,s,o){switch(Oy(n)){case 2:var u=yS;break;case 8:u=vS;break;default:u=Df}s=u.bind(null,n,s,t),u=void 0,!Bu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,s,{capture:!0,passive:u}):t.addEventListener(n,s,!0):u!==void 0?t.addEventListener(n,s,{passive:u}):t.addEventListener(n,s,!1)}function vf(t,n,s,o,u){var p=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var E=o.stateNode.containerInfo;if(E===u)break;if(x===4)for(x=o.return;x!==null;){var T=x.tag;if((T===3||T===4)&&x.stateNode.containerInfo===u)return;x=x.return}for(;E!==null;){if(x=ki(E),x===null)return;if(T=x.tag,T===5||T===6||T===26||T===27){o=p=x;continue e}E=E.parentNode}}o=o.return}fg(function(){var M=p,P=Lu(s),H=[];e:{var k=zg.get(t);if(k!==void 0){var I=ql,ce=t;switch(t){case"keypress":if(Pl(s)===0)break e;case"keydown":case"keyup":I=Bw;break;case"focusin":ce="focus",I=Hu;break;case"focusout":ce="blur",I=Hu;break;case"beforeblur":case"afterblur":I=Hu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=qw;break;case Lg:case Ug:case Bg:I=Ow;break;case Pg:I=Fw;break;case"scroll":case"scrollend":I=Sw;break;case"wheel":I=Gw;break;case"copy":case"cut":case"paste":I=Dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=yg;break;case"toggle":case"beforetoggle":I=Yw}var se=(n&4)!==0,Le=!se&&(t==="scroll"||t==="scrollend"),O=se?k!==null?k+"Capture":null:k;se=[];for(var N=M,R;N!==null;){var z=N;if(R=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||R===null||O===null||(z=Ya(N,O),z!=null&&se.push(Os(N,z,R))),Le)break;N=N.return}0<se.length&&(k=new I(k,ce,null,s,P),H.push({event:k,listeners:se}))}}if((n&7)===0){e:{if(k=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",k&&s!==Iu&&(ce=s.relatedTarget||s.fromElement)&&(ki(ce)||ce[ji]))break e;if((I||k)&&(k=P.window===P?P:(k=P.ownerDocument)?k.defaultView||k.parentWindow:window,I?(ce=s.relatedTarget||s.toElement,I=M,ce=ce?ki(ce):null,ce!==null&&(Le=c(ce),se=ce.tag,ce!==Le||se!==5&&se!==27&&se!==6)&&(ce=null)):(I=null,ce=M),I!==ce)){if(se=gg,z="onMouseLeave",O="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(se=yg,z="onPointerLeave",O="onPointerEnter",N="pointer"),Le=I==null?k:$a(I),R=ce==null?k:$a(ce),k=new se(z,N+"leave",I,s,P),k.target=Le,k.relatedTarget=R,z=null,ki(P)===M&&(se=new se(O,N+"enter",ce,s,P),se.target=R,se.relatedTarget=Le,z=se),Le=z,I&&ce)t:{for(se=I,O=ce,N=0,R=se;R;R=ma(R))N++;for(R=0,z=O;z;z=ma(z))R++;for(;0<N-R;)se=ma(se),N--;for(;0<R-N;)O=ma(O),R--;for(;N--;){if(se===O||O!==null&&se===O.alternate)break t;se=ma(se),O=ma(O)}se=null}else se=null;I!==null&&sy(H,k,I,se,!1),ce!==null&&Le!==null&&sy(H,Le,ce,se,!0)}}e:{if(k=M?$a(M):window,I=k.nodeName&&k.nodeName.toLowerCase(),I==="select"||I==="input"&&k.type==="file")var ne=Tg;else if(Eg(k))if(Ng)ne=rE;else{ne=tE;var ye=eE}else I=k.nodeName,!I||I.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?M&&ku(M.elementType)&&(ne=Tg):ne=nE;if(ne&&(ne=ne(t,M))){Sg(H,ne,s,P);break e}ye&&ye(t,k,M),t==="focusout"&&M&&k.type==="number"&&M.memoizedProps.value!=null&&ju(k,"number",k.value)}switch(ye=M?$a(M):window,t){case"focusin":(Eg(ye)||ye.contentEditable==="true")&&(Vi=ye,Qu=M,ts=null);break;case"focusout":ts=Qu=Vi=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,kg(H,s,P);break;case"selectionchange":if(aE)break;case"keydown":case"keyup":kg(H,s,P)}var ie;if(Vu)e:{switch(t){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Fi?xg(t,s)&&(le="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(le="onCompositionStart");le&&(vg&&s.locale!=="ko"&&(Fi||le!=="onCompositionStart"?le==="onCompositionEnd"&&Fi&&(ie=hg()):(fr=P,Pu="value"in fr?fr.value:fr.textContent,Fi=!0)),ye=Oo(M,le),0<ye.length&&(le=new pg(le,t,null,s,P),H.push({event:le,listeners:ye}),ie?le.data=ie:(ie=wg(s),ie!==null&&(le.data=ie)))),(ie=Kw?Xw(t,s):Ww(t,s))&&(le=Oo(M,"onBeforeInput"),0<le.length&&(ye=new pg("onBeforeInput","beforeinput",null,s,P),H.push({event:ye,listeners:le}),ye.data=ie)),qE(H,t,M,s,P)}iy(H,n)})}function Os(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Oo(t,n){for(var s=n+"Capture",o=[];t!==null;){var u=t,p=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||p===null||(u=Ya(t,s),u!=null&&o.unshift(Os(t,u,p)),u=Ya(t,n),u!=null&&o.push(Os(t,u,p))),t.tag===3)return o;t=t.return}return[]}function ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sy(t,n,s,o,u){for(var p=n._reactName,x=[];s!==null&&s!==o;){var E=s,T=E.alternate,M=E.stateNode;if(E=E.tag,T!==null&&T===o)break;E!==5&&E!==26&&E!==27||M===null||(T=M,u?(M=Ya(s,p),M!=null&&x.unshift(Os(s,M,T))):u||(M=Ya(s,p),M!=null&&x.push(Os(s,M,T)))),s=s.return}x.length!==0&&t.push({event:n,listeners:x})}var GE=/\r\n?/g,$E=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(GE,`
`).replace($E,"")}function oy(t,n){return n=ly(n),ly(t)===n}function Ro(){}function Ie(t,n,s,o,u,p){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||zi(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&zi(t,""+o);break;case"className":kl(t,"class",o);break;case"tabIndex":kl(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(t,s,o);break;case"style":ug(t,o,p);break;case"data":if(n!=="object"){kl(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Ul(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(n!=="input"&&Ie(t,n,"name",u.name,u,null),Ie(t,n,"formEncType",u.formEncType,u,null),Ie(t,n,"formMethod",u.formMethod,u,null),Ie(t,n,"formTarget",u.formTarget,u,null)):(Ie(t,n,"encType",u.encType,u,null),Ie(t,n,"method",u.method,u,null),Ie(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Ul(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=Ro);break;case"onScroll":o!=null&&xe("scroll",t);break;case"onScrollEnd":o!=null&&xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(u.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=Ul(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":xe("beforetoggle",t),xe("toggle",t),jl(t,"popover",o);break;case"xlinkActuate":Hn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Hn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Hn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Hn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Hn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Hn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":jl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ww.get(s)||s,jl(t,s,o))}}function _f(t,n,s,o,u,p){switch(s){case"style":ug(t,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(u.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof o=="string"?zi(t,o):(typeof o=="number"||typeof o=="bigint")&&zi(t,""+o);break;case"onScroll":o!=null&&xe("scroll",t);break;case"onScrollEnd":o!=null&&xe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ro);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jm.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(u=s.endsWith("Capture"),n=s.slice(2,u?s.length-7:void 0),p=t[Mt]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(n,p,u),typeof o=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,o,u);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):jl(t,s,o)}}}function vt(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",t),xe("load",t);var o=!1,u=!1,p;for(p in s)if(s.hasOwnProperty(p)){var x=s[p];if(x!=null)switch(p){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ie(t,n,p,x,s,null)}}u&&Ie(t,n,"srcSet",s.srcSet,s,null),o&&Ie(t,n,"src",s.src,s,null);return;case"input":xe("invalid",t);var E=p=x=u=null,T=null,M=null;for(o in s)if(s.hasOwnProperty(o)){var P=s[o];if(P!=null)switch(o){case"name":u=P;break;case"type":x=P;break;case"checked":T=P;break;case"defaultChecked":M=P;break;case"value":p=P;break;case"defaultValue":E=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(137,n));break;default:Ie(t,n,o,P,s,null)}}sg(t,p,E,T,M,x,u,!1),Il(t);return;case"select":xe("invalid",t),o=x=p=null;for(u in s)if(s.hasOwnProperty(u)&&(E=s[u],E!=null))switch(u){case"value":p=E;break;case"defaultValue":x=E;break;case"multiple":o=E;default:Ie(t,n,u,E,s,null)}n=p,s=x,t.multiple=!!o,n!=null?Pi(t,!!o,n,!1):s!=null&&Pi(t,!!o,s,!0);return;case"textarea":xe("invalid",t),p=u=o=null;for(x in s)if(s.hasOwnProperty(x)&&(E=s[x],E!=null))switch(x){case"value":o=E;break;case"defaultValue":u=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:Ie(t,n,x,E,s,null)}og(t,o,u,p),Il(t);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(o=s[T],o!=null))switch(T){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ie(t,n,T,o,s,null)}return;case"dialog":xe("beforetoggle",t),xe("toggle",t),xe("cancel",t),xe("close",t);break;case"iframe":case"object":xe("load",t);break;case"video":case"audio":for(o=0;o<Cs.length;o++)xe(Cs[o],t);break;case"image":xe("error",t),xe("load",t);break;case"details":xe("toggle",t);break;case"embed":case"source":case"link":xe("error",t),xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in s)if(s.hasOwnProperty(M)&&(o=s[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ie(t,n,M,o,s,null)}return;default:if(ku(n)){for(P in s)s.hasOwnProperty(P)&&(o=s[P],o!==void 0&&_f(t,n,P,o,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(o=s[E],o!=null&&Ie(t,n,E,o,s,null))}function YE(t,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,p=null,x=null,E=null,T=null,M=null,P=null;for(I in s){var H=s[I];if(s.hasOwnProperty(I)&&H!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":T=H;default:o.hasOwnProperty(I)||Ie(t,n,I,null,o,H)}}for(var k in o){var I=o[k];if(H=s[k],o.hasOwnProperty(k)&&(I!=null||H!=null))switch(k){case"type":p=I;break;case"name":u=I;break;case"checked":M=I;break;case"defaultChecked":P=I;break;case"value":x=I;break;case"defaultValue":E=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(137,n));break;default:I!==H&&Ie(t,n,k,I,o,H)}}Mu(t,x,E,T,M,P,p,u);return;case"select":I=x=E=k=null;for(p in s)if(T=s[p],s.hasOwnProperty(p)&&T!=null)switch(p){case"value":break;case"multiple":I=T;default:o.hasOwnProperty(p)||Ie(t,n,p,null,o,T)}for(u in o)if(p=o[u],T=s[u],o.hasOwnProperty(u)&&(p!=null||T!=null))switch(u){case"value":k=p;break;case"defaultValue":E=p;break;case"multiple":x=p;default:p!==T&&Ie(t,n,u,p,o,T)}n=E,s=x,o=I,k!=null?Pi(t,!!s,k,!1):!!o!=!!s&&(n!=null?Pi(t,!!s,n,!0):Pi(t,!!s,s?[]:"",!1));return;case"textarea":I=k=null;for(E in s)if(u=s[E],s.hasOwnProperty(E)&&u!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ie(t,n,E,null,o,u)}for(x in o)if(u=o[x],p=s[x],o.hasOwnProperty(x)&&(u!=null||p!=null))switch(x){case"value":k=u;break;case"defaultValue":I=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(a(91));break;default:u!==p&&Ie(t,n,x,u,o,p)}lg(t,k,I);return;case"option":for(var ce in s)if(k=s[ce],s.hasOwnProperty(ce)&&k!=null&&!o.hasOwnProperty(ce))switch(ce){case"selected":t.selected=!1;break;default:Ie(t,n,ce,null,o,k)}for(T in o)if(k=o[T],I=s[T],o.hasOwnProperty(T)&&k!==I&&(k!=null||I!=null))switch(T){case"selected":t.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Ie(t,n,T,k,o,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in s)k=s[se],s.hasOwnProperty(se)&&k!=null&&!o.hasOwnProperty(se)&&Ie(t,n,se,null,o,k);for(M in o)if(k=o[M],I=s[M],o.hasOwnProperty(M)&&k!==I&&(k!=null||I!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(137,n));break;default:Ie(t,n,M,k,o,I)}return;default:if(ku(n)){for(var Le in s)k=s[Le],s.hasOwnProperty(Le)&&k!==void 0&&!o.hasOwnProperty(Le)&&_f(t,n,Le,void 0,o,k);for(P in o)k=o[P],I=s[P],!o.hasOwnProperty(P)||k===I||k===void 0&&I===void 0||_f(t,n,P,k,o,I);return}}for(var O in s)k=s[O],s.hasOwnProperty(O)&&k!=null&&!o.hasOwnProperty(O)&&Ie(t,n,O,null,o,k);for(H in o)k=o[H],I=s[H],!o.hasOwnProperty(H)||k===I||k==null&&I==null||Ie(t,n,H,k,o,I)}var bf=null,xf=null;function Do(t){return t.nodeType===9?t:t.ownerDocument}function cy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function wf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ef=null;function QE(){var t=window.event;return t&&t.type==="popstate"?t===Ef?!1:(Ef=t,!0):(Ef=null,!1)}var dy=typeof setTimeout=="function"?setTimeout:void 0,KE=typeof clearTimeout=="function"?clearTimeout:void 0,fy=typeof Promise=="function"?Promise:void 0,XE=typeof queueMicrotask=="function"?queueMicrotask:typeof fy<"u"?function(t){return fy.resolve(null).then(t).catch(WE)}:dy;function WE(t){setTimeout(function(){throw t})}function Cr(t){return t==="head"}function hy(t,n){var s=n,o=0,u=0;do{var p=s.nextSibling;if(t.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(0<o&&8>o){s=o;var x=t.ownerDocument;if(s&1&&Rs(x.documentElement),s&2&&Rs(x.body),s&4)for(s=x.head,Rs(s),x=s.firstChild;x;){var E=x.nextSibling,T=x.nodeName;x[Ga]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&x.rel.toLowerCase()==="stylesheet"||s.removeChild(x),x=E}}if(u===0){t.removeChild(p),Bs(n);return}u--}else s==="$"||s==="$?"||s==="$!"?u++:o=s.charCodeAt(0)-48;else o=0;s=p}while(s);Bs(n)}function Sf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Sf(s),Cu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function ZE(t,n,s,o){for(;t.nodeType===1;){var u=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ga])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var p=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=wn(t.nextSibling),t===null)break}return null}function JE(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=wn(t.nextSibling),t===null))return null;return t}function Tf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function eS(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function wn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Nf=null;function my(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function gy(t,n,s){switch(n=Do(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Rs(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Cu(t)}var mn=new Map,py=new Set;function Mo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var nr=te.d;te.d={f:tS,r:nS,D:rS,C:iS,L:aS,m:sS,X:oS,S:lS,M:cS};function tS(){var t=nr.f(),n=Eo();return t||n}function nS(t){var n=Ii(t);n!==null&&n.tag===5&&n.type==="form"?L0(n):nr.r(t)}var ga=typeof document>"u"?null:document;function yy(t,n,s){var o=ga;if(o&&typeof n=="string"&&n){var u=ln(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof s=="string"&&(u+='[crossorigin="'+s+'"]'),py.has(u)||(py.add(u),t={rel:t,crossOrigin:s,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),vt(n,"link",t),ot(n),o.head.appendChild(n)))}}function rS(t){nr.D(t),yy("dns-prefetch",t,null)}function iS(t,n){nr.C(t,n),yy("preconnect",t,n)}function aS(t,n,s){nr.L(t,n,s);var o=ga;if(o&&t&&n){var u='link[rel="preload"][as="'+ln(n)+'"]';n==="image"&&s&&s.imageSrcSet?(u+='[imagesrcset="'+ln(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(u+='[imagesizes="'+ln(s.imageSizes)+'"]')):u+='[href="'+ln(t)+'"]';var p=u;switch(n){case"style":p=pa(t);break;case"script":p=ya(t)}mn.has(p)||(t=h({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),mn.set(p,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(Ds(p))||n==="script"&&o.querySelector(Ms(p))||(n=o.createElement("link"),vt(n,"link",t),ot(n),o.head.appendChild(n)))}}function sS(t,n){nr.m(t,n);var s=ga;if(s&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+ln(o)+'"][href="'+ln(t)+'"]',p=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ya(t)}if(!mn.has(p)&&(t=h({rel:"modulepreload",href:t},n),mn.set(p,t),s.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ms(p)))return}o=s.createElement("link"),vt(o,"link",t),ot(o),s.head.appendChild(o)}}}function lS(t,n,s){nr.S(t,n,s);var o=ga;if(o&&t){var u=Li(o).hoistableStyles,p=pa(t);n=n||"default";var x=u.get(p);if(!x){var E={loading:0,preload:null};if(x=o.querySelector(Ds(p)))E.loading=5;else{t=h({rel:"stylesheet",href:t,"data-precedence":n},s),(s=mn.get(p))&&Af(t,s);var T=x=o.createElement("link");ot(T),vt(T,"link",t),T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),T.addEventListener("load",function(){E.loading|=1}),T.addEventListener("error",function(){E.loading|=2}),E.loading|=4,jo(x,n,o)}x={type:"stylesheet",instance:x,count:1,state:E},u.set(p,x)}}}function oS(t,n){nr.X(t,n);var s=ga;if(s&&t){var o=Li(s).hoistableScripts,u=ya(t),p=o.get(u);p||(p=s.querySelector(Ms(u)),p||(t=h({src:t,async:!0},n),(n=mn.get(u))&&Cf(t,n),p=s.createElement("script"),ot(p),vt(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(u,p))}}function cS(t,n){nr.M(t,n);var s=ga;if(s&&t){var o=Li(s).hoistableScripts,u=ya(t),p=o.get(u);p||(p=s.querySelector(Ms(u)),p||(t=h({src:t,async:!0,type:"module"},n),(n=mn.get(u))&&Cf(t,n),p=s.createElement("script"),ot(p),vt(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(u,p))}}function vy(t,n,s,o){var u=(u=fe.current)?Mo(u):null;if(!u)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=pa(s.href),s=Li(u).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=pa(s.href);var p=Li(u).hoistableStyles,x=p.get(t);if(x||(u=u.ownerDocument||u,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,x),(p=u.querySelector(Ds(t)))&&!p._p&&(x.instance=p,x.state.loading=5),mn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},mn.set(t,s),p||uS(u,t,s,x.state))),n&&o===null)throw Error(a(528,""));return x}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ya(s),s=Li(u).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function pa(t){return'href="'+ln(t)+'"'}function Ds(t){return'link[rel="stylesheet"]['+t+"]"}function _y(t){return h({},t,{"data-precedence":t.precedence,precedence:null})}function uS(t,n,s,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),vt(n,"link",s),ot(n),t.head.appendChild(n))}function ya(t){return'[src="'+ln(t)+'"]'}function Ms(t){return"script[async]"+t}function by(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+ln(s.href)+'"]');if(o)return n.instance=o,ot(o),o;var u=h({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),ot(o),vt(o,"style",u),jo(o,s.precedence,t),n.instance=o;case"stylesheet":u=pa(s.href);var p=t.querySelector(Ds(u));if(p)return n.state.loading|=4,n.instance=p,ot(p),p;o=_y(s),(u=mn.get(u))&&Af(o,u),p=(t.ownerDocument||t).createElement("link"),ot(p);var x=p;return x._p=new Promise(function(E,T){x.onload=E,x.onerror=T}),vt(p,"link",o),n.state.loading|=4,jo(p,s.precedence,t),n.instance=p;case"script":return p=ya(s.src),(u=t.querySelector(Ms(p)))?(n.instance=u,ot(u),u):(o=s,(u=mn.get(p))&&(o=h({},s),Cf(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),ot(u),vt(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,jo(o,s.precedence,t));return n.instance}function jo(t,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,p=u,x=0;x<o.length;x++){var E=o[x];if(E.dataset.precedence===n)p=E;else if(p!==u)break}p?p.parentNode.insertBefore(t,p.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Af(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Cf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var ko=null;function xy(t,n,s){if(ko===null){var o=new Map,u=ko=new Map;u.set(s,o)}else u=ko,o=u.get(s),o||(o=new Map,u.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),u=0;u<s.length;u++){var p=s[u];if(!(p[Ga]||p[xt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var x=p.getAttribute(n)||"";x=t+x;var E=o.get(x);E?E.push(p):o.set(x,[p])}}return o}function wy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function dS(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ey(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var js=null;function fS(){}function hS(t,n,s){if(js===null)throw Error(a(475));var o=js;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=pa(s.href),p=t.querySelector(Ds(u));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Io.bind(o),t.then(o,o)),n.state.loading|=4,n.instance=p,ot(p);return}p=t.ownerDocument||t,s=_y(s),(u=mn.get(u))&&Af(s,u),p=p.createElement("link"),ot(p);var x=p;x._p=new Promise(function(E,T){x.onload=E,x.onerror=T}),vt(p,"link",s),n.instance=p}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Io.bind(o),t.addEventListener("load",n),t.addEventListener("error",n))}}function mS(){if(js===null)throw Error(a(475));var t=js;return t.stylesheets&&t.count===0&&Of(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&Of(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Io(){if(this.count--,this.count===0){if(this.stylesheets)Of(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lo=null;function Of(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lo=new Map,n.forEach(gS,t),Lo=null,Io.call(t))}function gS(t,n){if(!(n.state.loading&4)){var s=Lo.get(t);if(s)var o=s.get(null);else{s=new Map,Lo.set(t,s);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<u.length;p++){var x=u[p];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(s.set(x.dataset.precedence,x),o=x)}o&&s.set(null,o)}u=n.instance,x=u.getAttribute("data-precedence"),p=s.get(x)||o,p===o&&s.set(null,u),s.set(x,u),this.count++,o=Io.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),p?p.parentNode.insertBefore(u,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var ks={$$typeof:G,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function pS(t,n,s,o,u,p,x,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Su(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Su(0),this.hiddenUpdates=Su(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=p,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Sy(t,n,s,o,u,p,x,E,T,M,P,H){return t=new pS(t,n,s,x,E,T,M,H),n=1,p===!0&&(n|=24),p=Vt(3,null,null,n),t.current=p,p.stateNode=t,n=cd(),n.refCount++,t.pooledCache=n,n.refCount++,p.memoizedState={element:o,isDehydrated:s,cache:n},hd(p),t}function Ty(t){return t?(t=Qi,t):Qi}function Ny(t,n,s,o,u,p){u=Ty(u),o.context===null?o.context=u:o.pendingContext=u,o=gr(n),o.payload={element:s},p=p===void 0?null:p,p!==null&&(o.callback=p),s=pr(t,o,n),s!==null&&(Kt(s,t,n),us(s,t,n))}function Ay(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Rf(t,n){Ay(t,n),(t=t.alternate)&&Ay(t,n)}function Cy(t){if(t.tag===13){var n=Yi(t,67108864);n!==null&&Kt(n,t,67108864),Rf(t,67108864)}}var Uo=!0;function yS(t,n,s,o){var u=B.T;B.T=null;var p=te.p;try{te.p=2,Df(t,n,s,o)}finally{te.p=p,B.T=u}}function vS(t,n,s,o){var u=B.T;B.T=null;var p=te.p;try{te.p=8,Df(t,n,s,o)}finally{te.p=p,B.T=u}}function Df(t,n,s,o){if(Uo){var u=Mf(o);if(u===null)vf(t,n,o,Bo,s),Ry(t,o);else if(bS(u,t,n,s,o))o.stopPropagation();else if(Ry(t,o),n&4&&-1<_S.indexOf(t)){for(;u!==null;){var p=Ii(u);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var x=Xr(p.pendingLanes);if(x!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var T=1<<31-Ht(x);E.entanglements[1]|=T,x&=~T}Ln(p),(Oe&6)===0&&(xo=Dn()+500,As(0))}}break;case 13:E=Yi(p,2),E!==null&&Kt(E,p,2),Eo(),Rf(p,2)}if(p=Mf(o),p===null&&vf(t,n,o,Bo,s),p===u)break;u=p}u!==null&&o.stopPropagation()}else vf(t,n,o,null,s)}}function Mf(t){return t=Lu(t),jf(t)}var Bo=null;function jf(t){if(Bo=null,t=ki(t),t!==null){var n=c(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=d(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Bo=t,null}function Oy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(iw()){case Fm:return 2;case Vm:return 8;case Ol:case aw:return 32;case Gm:return 268435456;default:return 32}default:return 32}}var kf=!1,Or=null,Rr=null,Dr=null,Is=new Map,Ls=new Map,Mr=[],_S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ry(t,n){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Is.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(n.pointerId)}}function Us(t,n,s,o,u,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:p,targetContainers:[u]},n!==null&&(n=Ii(n),n!==null&&Cy(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function bS(t,n,s,o,u){switch(n){case"focusin":return Or=Us(Or,t,n,s,o,u),!0;case"dragenter":return Rr=Us(Rr,t,n,s,o,u),!0;case"mouseover":return Dr=Us(Dr,t,n,s,o,u),!0;case"pointerover":var p=u.pointerId;return Is.set(p,Us(Is.get(p)||null,t,n,s,o,u)),!0;case"gotpointercapture":return p=u.pointerId,Ls.set(p,Us(Ls.get(p)||null,t,n,s,o,u)),!0}return!1}function Dy(t){var n=ki(t.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){t.blockedOn=n,hw(t.priority,function(){if(s.tag===13){var o=Qt();o=Tu(o);var u=Yi(s,o);u!==null&&Kt(u,s,o),Rf(s,o)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Po(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Mf(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);Iu=o,s.target.dispatchEvent(o),Iu=null}else return n=Ii(s),n!==null&&Cy(n),t.blockedOn=s,!1;n.shift()}return!0}function My(t,n,s){Po(t)&&s.delete(n)}function xS(){kf=!1,Or!==null&&Po(Or)&&(Or=null),Rr!==null&&Po(Rr)&&(Rr=null),Dr!==null&&Po(Dr)&&(Dr=null),Is.forEach(My),Ls.forEach(My)}function zo(t,n){t.blockedOn===n&&(t.blockedOn=null,kf||(kf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xS)))}var qo=null;function jy(t){qo!==t&&(qo=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qo===t&&(qo=null);for(var n=0;n<t.length;n+=3){var s=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(jf(o||s)===null)continue;break}var p=Ii(s);p!==null&&(t.splice(n,3),n-=3,Md(p,{pending:!0,data:u,method:s.method,action:o},o,u))}}))}function Bs(t){function n(T){return zo(T,t)}Or!==null&&zo(Or,t),Rr!==null&&zo(Rr,t),Dr!==null&&zo(Dr,t),Is.forEach(n),Ls.forEach(n);for(var s=0;s<Mr.length;s++){var o=Mr[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Mr.length&&(s=Mr[0],s.blockedOn===null);)Dy(s),s.blockedOn===null&&Mr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var u=s[o],p=s[o+1],x=u[Mt]||null;if(typeof p=="function")x||jy(s);else if(x){var E=null;if(p&&p.hasAttribute("formAction")){if(u=p,x=p[Mt]||null)E=x.formAction;else if(jf(u)!==null)continue}else E=x.action;typeof E=="function"?s[o+1]=E:(s.splice(o,3),o-=3),jy(s)}}}function If(t){this._internalRoot=t}Ho.prototype.render=If.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=Qt();Ny(s,o,t,n,null,null)},Ho.prototype.unmount=If.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Ny(t.current,2,null,t,null,null),Eo(),n[ji]=null}};function Ho(t){this._internalRoot=t}Ho.prototype.unstable_scheduleHydration=function(t){if(t){var n=Xm();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Mr.length&&n!==0&&n<Mr[s].priority;s++);Mr.splice(s,0,t),s===0&&Dy(t)}};var ky=e.version;if(ky!=="19.1.1")throw Error(a(527,ky,"19.1.1"));te.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(n),t=t!==null?f(t):null,t=t===null?null:t.stateNode,t};var wS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fo.isDisabled&&Fo.supportsFiber)try{Ha=Fo.inject(wS),qt=Fo}catch{}}return zs.createRoot=function(t,n){if(!l(t))throw Error(a(299));var s=!1,o="",u=X0,p=W0,x=Z0,E=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Sy(t,1,!1,null,null,s,o,u,p,x,E,null),t[ji]=n.current,yf(t),new If(n)},zs.hydrateRoot=function(t,n,s){if(!l(t))throw Error(a(299));var o=!1,u="",p=X0,x=W0,E=Z0,T=null,M=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks),s.formState!==void 0&&(M=s.formState)),n=Sy(t,1,!0,n,s??null,o,u,p,x,E,T,M),n.context=Ty(null),s=n.current,o=Qt(),o=Tu(o),u=gr(o),u.callback=null,pr(s,u,o),s=o,n.current.lanes=s,Va(n,s),Ln(n),t[ji]=n.current,yf(t),new Ho(n)},zs.version="19.1.1",zs}var zy;function lT(){if(zy)return Bf.exports;zy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Bf.exports=sT(),Bf.exports}var oT=lT();const cT="modulepreload",uT=function(i){return"/"+i},qy={},ue=function(e,r,a){let l=Promise.resolve();if(r&&r.length>0){let y=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");l=y(r.map(f=>{if(f=uT(f),f in qy)return;qy[f]=!0;const h=f.endsWith(".css"),_=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":cT,h||(v.as="script"),v.crossOrigin="",v.href=f,m&&v.setAttribute("nonce",m),document.head.appendChild(v),h)return new Promise((b,w)=>{v.addEventListener("load",b),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return l.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};class Hy extends U.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r}),this.props.onError?.(e,r)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8",children:[g.jsxs("div",{className:"text-center",children:[g.jsx(OS,{className:"mx-auto h-12 w-12 text-red-500"}),g.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Something went wrong"}),g.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"We're sorry, but something unexpected happened."}),!1]}),g.jsx("div",{children:g.jsxs("button",{onClick:this.handleRetry,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[g.jsx(RS,{className:"w-4 h-4 mr-2"}),"Try Again"]})})]})}):this.props.children}}class Jh{cache=new Map;config;cacheStats={hits:0,misses:0,evictions:0,totalSize:0};constructor(e={}){this.config={defaultTTL:300*1e3,maxSize:1e3,storageType:"memory",enableCompression:!1,enableEncryption:!1,version:"1.0.0",...e},this.initializeCache()}async initializeCache(){if(this.config.storageType==="localStorage"&&typeof window<"u")try{const e=localStorage.getItem("tsaerp_cache");if(e){const r=JSON.parse(e);r.version===this.config.version&&Object.entries(r.entries).forEach(([a,l])=>{l.expiresAt>Date.now()&&this.cache.set(a,l)})}}catch(e){console.warn("Failed to restore cache from localStorage:",e)}}generateKey(e,r){if(!r)return e;const a=JSON.stringify(r,Object.keys(r).sort()),l=this.simpleHash(a);return`${e}:${l}`}simpleHash(e){let r=0;for(let a=0;a<e.length;a++){const l=e.charCodeAt(a);r=(r<<5)-r+l,r=r&r}return Math.abs(r).toString(36)}get(e,r){const a=this.generateKey(e,r),l=this.cache.get(a);return l?l.expiresAt<Date.now()?(this.cache.delete(a),this.cacheStats.misses++,this.cacheStats.evictions++,null):(l.accessCount++,l.lastAccessed=Date.now(),this.cacheStats.hits++,l.data):(this.cacheStats.misses++,null)}set(e,r,a,l="medium",c){const d=this.generateKey(e,c),m=Date.now()+(a||this.config.defaultTTL),y={data:r,timestamp:Date.now(),expiresAt:m,key:d,version:this.config.version,priority:l,accessCount:1,lastAccessed:Date.now()};this.cache.size>=this.config.maxSize&&this.evictLRU(),this.cache.set(d,y),this.persistToStorage()}update(e,r,a){const l=this.get(e,a),c=r(l);return this.set(e,c,void 0,"high",a),c}invalidate(e,r){const a=this.generateKey(e,r),l=this.cache.delete(a);return l&&this.persistToStorage(),l}invalidatePattern(e){const r=new RegExp(e.replace("*",".*"));let a=0;for(const[l]of this.cache)r.test(l)&&(this.cache.delete(l),a++);return a>0&&this.persistToStorage(),a}evictLRU(){let e="",r=Date.now();for(const[a,l]of this.cache)l.priority==="low"&&l.lastAccessed<r&&(r=l.lastAccessed,e=a);if(!e)for(const[a,l]of this.cache)l.lastAccessed<r&&(r=l.lastAccessed,e=a);e&&(this.cache.delete(e),this.cacheStats.evictions++)}persistToStorage(){if(this.config.storageType==="localStorage"&&typeof window<"u")try{const e={version:this.config.version,entries:Object.fromEntries(this.cache)};localStorage.setItem("tsaerp_cache",JSON.stringify(e))}catch(e){console.warn("Failed to persist cache to localStorage:",e)}}async warm(e){const r=e.map(async({namespace:a,loader:l,ttl:c,priority:d,params:m})=>{try{const y=await l();this.set(a,y,c,d||"medium",m)}catch(y){console.warn(`Failed to warm cache for ${a}:`,y)}});await Promise.allSettled(r)}getStats(){const e=this.cacheStats.hits+this.cacheStats.misses>0?this.cacheStats.hits/(this.cacheStats.hits+this.cacheStats.misses)*100:0;return{...this.cacheStats,hitRate:Math.round(e*100)/100,size:this.cache.size,maxSize:this.config.maxSize,utilization:Math.round(this.cache.size/this.config.maxSize*100),health:e>80?"excellent":e>60?"good":e>40?"fair":"poor"}}clear(){this.cache.clear(),this.cacheStats={hits:0,misses:0,evictions:0,totalSize:0},this.config.storageType==="localStorage"&&typeof window<"u"&&localStorage.removeItem("tsaerp_cache")}export(){return Array.from(this.cache.values())}async prefetch(e){const r=e.filter(({condition:a})=>!a||a()).map(async({namespace:a,loader:l,priority:c})=>{try{if(!this.cache.has(a)){const d=await l();this.set(a,d,void 0,c||"low")}}catch(d){console.warn(`Prefetch failed for ${a}:`,d)}});await Promise.allSettled(r)}}const bt=new Jh({defaultTTL:600*1e3,maxSize:500,storageType:"localStorage",version:"1.0.0"});new Jh({defaultTTL:1800*1e3,maxSize:200,storageType:"sessionStorage",version:"1.0.0"});const Vo=new Jh({defaultTTL:300*1e3,maxSize:1e3,storageType:"memory",version:"1.0.0"});var Fy={};const Vy="@firebase/database",Gy="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F1="";function V1(i){F1=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),st(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:Qh(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Rn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dT(e)}}catch{}return new fT},yi=G1("localStorage"),hT=G1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new R1("@firebase/database"),$1=(function(){let i=1;return function(){return i++}})(),Y1=function(i){const e=kS(i),r=new IS;r.update(e);const a=r.digest();return LS.encodeByteArray(a)},yl=function(...i){let e="";for(let r=0;r<i.length;r++){const a=i[r];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?e+=yl.apply(null,a):typeof a=="object"?e+=st(a):e+=a,e+=" "}return e};let el=null,$y=!0;const mT=function(i,e){X(!0,"Can't turn on custom loggers persistently."),Ca.logLevel=US.VERBOSE,el=Ca.log.bind(Ca)},mt=function(...i){if($y===!0&&($y=!1,el===null&&hT.get("logging_enabled")===!0&&mT()),el){const e=yl.apply(null,i);el(e)}},vl=function(i){return function(...e){mt(i,...e)}},Dh=function(...i){const e="FIREBASE INTERNAL ERROR: "+yl(...i);Ca.error(e)},cr=function(...i){const e=`FIREBASE FATAL ERROR: ${yl(...i)}`;throw Ca.error(e),new Error(e)},Rt=function(...i){const e="FIREBASE WARNING: "+yl(...i);Ca.warn(e)},gT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nu=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},pT=function(i){if(document.readyState==="complete")i();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Da="[MIN_NAME]",xi="[MAX_NAME]",Ai=function(i,e){if(i===e)return 0;if(i===Da||e===xi)return-1;if(e===Da||i===xi)return 1;{const r=Yy(i),a=Yy(e);return r!==null?a!==null?r-a===0?i.length-e.length:r-a:-1:a!==null?1:i<e?-1:1}},yT=function(i,e){return i===e?0:i<e?-1:1},qs=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+st(e))},em=function(i){if(typeof i!="object"||i===null)return st(i);const e=[];for(const a in i)e.push(a);e.sort();let r="{";for(let a=0;a<e.length;a++)a!==0&&(r+=","),r+=st(e[a]),r+=":",r+=em(i[e[a]]);return r+="}",r},Q1=function(i,e){const r=i.length;if(r<=e)return[i];const a=[];for(let l=0;l<r;l+=e)l+e>r?a.push(i.substring(l,r)):a.push(i.substring(l,l+e));return a};function gt(i,e){for(const r in i)i.hasOwnProperty(r)&&e(r,i[r])}const K1=function(i){X(!nu(i),"Invalid JSON number");const e=11,r=52,a=(1<<e-1)-1;let l,c,d,m,y;i===0?(c=0,d=0,l=1/i===-1/0?1:0):(l=i<0,i=Math.abs(i),i>=Math.pow(2,1-a)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),a),c=m+a,d=Math.round(i*Math.pow(2,r-m)-Math.pow(2,r))):(c=0,d=Math.round(i/Math.pow(2,1-a-r))));const f=[];for(y=r;y;y-=1)f.push(d%2?1:0),d=Math.floor(d/2);for(y=e;y;y-=1)f.push(c%2?1:0),c=Math.floor(c/2);f.push(l?1:0),f.reverse();const h=f.join("");let _="";for(y=0;y<64;y+=8){let v=parseInt(h.substr(y,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},vT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_T=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function bT(i,e){let r="Unknown Error";i==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?r="Client doesn't have permission to access the desired data.":i==="unavailable"&&(r="The service is unavailable");const a=new Error(i+" at "+e._path.toString()+": "+r);return a.code=i.toUpperCase(),a}const xT=new RegExp("^-?(0*)\\d{1,10}$"),wT=-2147483648,ET=2147483647,Yy=function(i){if(xT.test(i)){const e=Number(i);if(e>=wT&&e<=ET)return e}return null},La=function(i){try{i()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Rt("Exception was thrown by user callback.",r),e},Math.floor(0))}},ST=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},tl=function(i,e){const r=setTimeout(i,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,r){this.appCheckProvider=r,this.appName=e.name,D1(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=r?.getImmediate({optional:!0}),this.appCheck||r?.get().then(a=>this.appCheck=a)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((r,a)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,a):r(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,r,a){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,a)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,a):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rt(e)}}class Mc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Mc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="5",X1="v",W1="s",Z1="r",J1="f",eb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tb="ls",nb="p",Mh="ac",rb="websocket",ib="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,r,a,l,c=!1,d="",m=!1,y=!1,f=null){this.secure=r,this.namespace=a,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=y,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function AT(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function sb(i,e,r){X(typeof e=="string","typeof type must == string"),X(typeof r=="object","typeof params must == object");let a;if(e===rb)a=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===ib)a=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);AT(i)&&(r.ns=i.namespace);const l=[];return gt(r,(c,d)=>{l.push(c+"="+d)}),a+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.counters_={}}incrementCounter(e,r=1){Rn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return HS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf={},Hf={};function nm(i){const e=i.toString();return qf[e]||(qf[e]=new CT),qf[e]}function OT(i,e){const r=i.toString();return Hf[r]||(Hf[r]=e()),Hf[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<a.length;++l)a[l]&&La(()=>{this.onMessage_(a[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="start",DT="close",MT="pLPCommand",jT="pRTLPCB",lb="id",ob="pw",cb="ser",kT="cb",IT="seg",LT="ts",UT="d",BT="dframe",ub=1870,db=30,PT=ub-db,zT=25e3,qT=3e4;class Ta{constructor(e,r,a,l,c,d,m){this.connId=e,this.repoInfo=r,this.applicationId=a,this.appCheckToken=l,this.authToken=c,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vl(e),this.stats_=nm(r),this.urlFn=y=>(this.appCheckToken&&(y[Mh]=this.appCheckToken),sb(r,ib,y))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new RT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qT)),pT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rm((...c)=>{const[d,m,y,f,h]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===Qy)this.id=m,this.password=y;else if(d===DT)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const a={};a[Qy]="t",a[cb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[kT]=this.scriptTagHolder.uniqueCallbackIdentifier),a[X1]=tm,this.transportSessionId&&(a[W1]=this.transportSessionId),this.lastSessionId&&(a[tb]=this.lastSessionId),this.applicationId&&(a[nb]=this.applicationId),this.appCheckToken&&(a[Mh]=this.appCheckToken),typeof location<"u"&&location.hostname&&eb.test(location.hostname)&&(a[Z1]=J1);const l=this.urlFn(a);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ta.forceAllow_=!0}static forceDisallow(){Ta.forceDisallow_=!0}static isAvailable(){return Ta.forceAllow_?!0:!Ta.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vT()&&!_T()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=st(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const a=FS(r),l=Q1(a,PT);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const a={};a[BT]="t",a[lb]=e,a[ob]=r,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=st(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class rm{constructor(e,r,a,l){this.onDisconnect=a,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$1(),window[MT+this.uniqueCallbackIdentifier]=e,window[jT+this.uniqueCallbackIdentifier]=r,this.myIFrame=rm.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){mt("frame writing exception"),m.stack&&mt(m.stack),mt(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||mt("No IE domain setting required")}catch{const a=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[lb]=this.myID,e[ob]=this.myPW,e[cb]=this.currentSerial;let r=this.urlFn(e),a="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+db+a.length<=ub;){const d=this.pendingSegs.shift();a=a+"&"+IT+l+"="+d.seg+"&"+LT+l+"="+d.ts+"&"+UT+l+"="+d.d,l++}return r=r+a,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,a){this.pendingSegs.push({seg:e,ts:r,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const a=()=>{this.outstandingRequests.delete(r),this.newRequest_()},l=setTimeout(a,Math.floor(zT)),c=()=>{clearTimeout(l),a()};this.addTag(e,c)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){const l=a.readyState;(!l||l==="loaded"||l==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),r())},a.onerror=()=>{mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=16384,FT=45e3;let Lc=null;typeof MozWebSocket<"u"?Lc=MozWebSocket:typeof WebSocket<"u"&&(Lc=WebSocket);class Nn{constructor(e,r,a,l,c,d,m){this.connId=e,this.applicationId=a,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vl(this.connId),this.stats_=nm(r),this.connURL=Nn.connectionURL_(r,d,m,l,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,a,l,c){const d={};return d[X1]=tm,typeof location<"u"&&location.hostname&&eb.test(location.hostname)&&(d[Z1]=J1),r&&(d[W1]=r),a&&(d[tb]=a),l&&(d[Mh]=l),c&&(d[nb]=c),sb(e,rb,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yi.set("previous_websocket_failure",!0);try{let a;VS(),this.mySock=new Lc(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const l=a.message||a.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const l=a.message||a.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Nn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(r);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&Lc!==null&&!Nn.forceDisallow_}static previouslyFailed(){return yi.isInMemoryStorage||yi.get("previous_websocket_failure")===!0}markConnectionHealthy(){yi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const a=Qh(r);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const a=this.extractFrameCount_(r);a!==null&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const r=st(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const a=Q1(r,HT);a.length>1&&this.sendString_(String(a.length));for(let l=0;l<a.length;l++)this.sendString_(a[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(FT))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nn.responsesRequiredToBeHealthy=2;Nn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static get ALL_TRANSPORTS(){return[Ta,Nn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const r=Nn&&Nn.isAvailable();let a=r&&!Nn.previouslyFailed();if(e.webSocketOnly&&(r||Rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Nn];else{const l=this.transports_=[];for(const c of sl.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);sl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}sl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=6e4,GT=5e3,$T=10*1024,YT=100*1024,Ff="t",Ky="d",QT="s",Xy="r",KT="e",Wy="o",Zy="a",Jy="n",ev="p",XT="h";class WT{constructor(e,r,a,l,c,d,m,y,f,h){this.id=e,this.repoInfo_=r,this.applicationId_=a,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=y,this.onKill_=f,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vl("c:"+this.id+":"),this.transportManager_=new sl(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,a)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>YT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$T?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ff in e){const r=e[Ff];r===Zy?this.upgradeIfSecondaryHealthy_():r===Xy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Wy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=qs("t",e),a=qs("d",e);if(r==="c")this.onSecondaryControl_(a);else if(r==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ev,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Jy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=qs("t",e),a=qs("d",e);r==="c"?this.onControl_(a):r==="d"&&this.onDataMessage_(a)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=qs(Ff,e);if(Ky in e){const a=e[Ky];if(r===XT){const l={...a};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(r===Jy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===QT?this.onConnectionShutdown_(a):r===Xy?this.onReset_(a):r===KT?Dh("Server Error: "+a):r===Wy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dh("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,a=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),tm!==a&&Rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,a),tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(VT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(GT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ev,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{put(e,r,a,l){}merge(e,r,a,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,a){}onDisconnectMerge(e,r,a){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const a=[...this.listeners_[e]];for(let l=0;l<a.length;l++)a[l].callback.apply(a[l].context,r)}}on(e,r,a){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:a});const l=this.getInitialEvent(e);l&&r.apply(a,l)}off(e,r,a){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let c=0;c<l.length;c++)if(l[c].callback===r&&(!a||a===l[c].context)){l.splice(c,1);return}}validateEventType_(e){X(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends hb{static getInstance(){return new Uc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!M1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=32,nv=768;class De{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let a=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[a]=this.pieces_[l],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}}function Ne(){return new De("")}function me(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Vr(i){return i.pieces_.length-i.pieceNum_}function Be(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new De(i.pieces_,e)}function im(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function ZT(i){let e="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)i.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[r])));return e||"/"}function ll(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function mb(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)e.push(i.pieces_[r]);return new De(e,0)}function Qe(i,e){const r=[];for(let a=i.pieceNum_;a<i.pieces_.length;a++)r.push(i.pieces_[a]);if(e instanceof De)for(let a=e.pieceNum_;a<e.pieces_.length;a++)r.push(e.pieces_[a]);else{const a=e.split("/");for(let l=0;l<a.length;l++)a[l].length>0&&r.push(a[l])}return new De(r,0)}function ve(i){return i.pieceNum_>=i.pieces_.length}function Ot(i,e){const r=me(i),a=me(e);if(r===null)return e;if(r===a)return Ot(Be(i),Be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function JT(i,e){const r=ll(i,0),a=ll(e,0);for(let l=0;l<r.length&&l<a.length;l++){const c=Ai(r[l],a[l]);if(c!==0)return c}return r.length===a.length?0:r.length<a.length?-1:1}function am(i,e){if(Vr(i)!==Vr(e))return!1;for(let r=i.pieceNum_,a=e.pieceNum_;r<=i.pieces_.length;r++,a++)if(i.pieces_[r]!==e.pieces_[a])return!1;return!0}function vn(i,e){let r=i.pieceNum_,a=e.pieceNum_;if(Vr(i)>Vr(e))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==e.pieces_[a])return!1;++r,++a}return!0}class eN{constructor(e,r){this.errorPrefix_=r,this.parts_=ll(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=eu(this.parts_[a]);gb(this)}}function tN(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=eu(e),gb(i)}function nN(i){const e=i.parts_.pop();i.byteLength_-=eu(e),i.parts_.length>0&&(i.byteLength_-=1)}function gb(i){if(i.byteLength_>nv)throw new Error(i.errorPrefix_+"has a key path longer than "+nv+" bytes ("+i.byteLength_+").");if(i.parts_.length>tv)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tv+") or object contains a cycle "+pi(i))}function pi(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends hb{static getInstance(){return new sm}constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const a=!document[e];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=1e3,rN=300*1e3,rv=30*1e3,iN=1.3,aN=3e4,sN="server_kill",iv=3;class or extends fb{constructor(e,r,a,l,c,d,m,y){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=a,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=or.nextPersistentConnectionId_++,this.log_=vl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hs,this.maxReconnectDelay_=rN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Uc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,a){const l=++this.requestNumber_,c={r:l,a:e,b:r};this.log_(st(c)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),a&&(this.requestCBHash_[l]=a)}get(e){this.initConnection_();const r=new Bn,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const m=d.d;d.s==="ok"?r.resolve(m):r.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(e,r,a,l){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:e,tag:a};this.listens.get(d).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(a)})}sendListen_(e){const r=e.query,a=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+a+" for "+l);const c={p:a},d="q";e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,m=>{const y=m.d,f=m.s;or.warnOnListenWarnings_(y,r),(this.listens.get(a)&&this.listens.get(a).get(l))===e&&(this.log_("listen response",m),f!=="ok"&&this.removeListen_(a,l),e.onComplete&&e.onComplete(f,y))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Rn(e,"w")){const a=bi(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||PS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=zS(e)?"auth":"gauth",a={cred:e};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(r,a,l=>{const c=l.s,d=l.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,a=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,a)})}unlisten(e,r){const a=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+l),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,l)&&this.connected_&&this.sendUnlisten_(a,l,e._queryObject,r)}sendUnlisten_(e,r,a,l){this.log_("Unlisten on "+e+" for "+r);const c={p:e},d="n";l&&(c.q=a,c.t=l),this.sendRequest(d,c)}onDisconnectPut(e,r,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:a})}onDisconnectMerge(e,r,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:a})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,a,l){const c={p:r,d:a};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{l&&setTimeout(()=>{l(d.s,d.d)},Math.floor(0))})}put(e,r,a,l){this.putInternal("p",e,r,a,l)}merge(e,r,a,l){this.putInternal("m",e,r,a,l)}putInternal(e,r,a,l,c){this.initConnection_();const d={p:r,d:a};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:l}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,a,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,a=>{if(a.s!=="ok"){const c=a.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+st(e));const r=e.r,a=this.requestCBHash_[r];a&&(delete this.requestCBHash_[r],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):Dh("Unrecognized action received from server: "+st(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aN&&(this.reconnectDelay_=Hs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*iN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+or.nextConnectionId_++,c=this.lastSessionId;let d=!1,m=null;const y=function(){m?m.close():(d=!0,a())},f=function(_){X(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(_)};this.realtime_={close:y,sendRequest:f};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);d?mt("getToken() completed but was canceled"):(mt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,m=new WT(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,a,b=>{Rt(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(sN)},c))}catch(_){this.log_("Failed to get token: "+_),d||(this.repoInfo_.nodeAdmin&&Rt(_),y())}}}interrupt(e){mt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){mt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Oh(this.interruptReasons_)&&(this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let a;r?a=r.map(c=>em(c)).join("$"):a="default";const l=this.removeListen_(e,a);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const a=new De(e).toString();let l;if(this.listens.has(a)){const c=this.listens.get(a);l=c.get(r),c.delete(r),c.size===0&&this.listens.delete(a)}else l=void 0;return l}onAuthRevoked_(e,r){mt("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iv&&(this.reconnectDelay_=rv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){mt("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+F1.replace(/\./g,"-")]=1,M1()?e["framework.cordova"]=1:qS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Uc.getInstance().currentlyOnline();return Oh(this.interruptReasons_)&&e}}or.nextPersistentConnectionId_=0;or.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new _e(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const a=new _e(Da,e),l=new _e(Da,r);return this.compare(a,l)!==0}minPost(){return _e.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go;class pb extends ru{static get __EMPTY_NODE(){return Go}static set __EMPTY_NODE(e){Go=e}compare(e,r){return Ai(e.name,r.name)}isDefinedOn(e){throw pl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return _e.MIN}maxPost(){return new _e(xi,Go)}makePost(e,r){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new _e(e,Go)}toString(){return".key"}}const Oa=new pb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,r,a,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=r?a(e.key,r):1,l&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ht{constructor(e,r,a,l,c){this.key=e,this.value=r,this.color=a??ht.RED,this.left=l??Bt.EMPTY_NODE,this.right=c??Bt.EMPTY_NODE}copy(e,r,a,l,c){return new ht(e??this.key,r??this.value,a??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let l=this;const c=a(e,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(e,r,a),null):c===0?l=l.copy(null,r,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,r,a)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let a,l;if(a=this,r(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),r(e,a.key)===0){if(a.right.isEmpty())return Bt.EMPTY_NODE;l=a.right.min_(),a=a.copy(l.key,l.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ht.RED=!0;ht.BLACK=!1;class lN{copy(e,r,a,l,c){return this}insert(e,r,a){return new ht(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bt{constructor(e,r=Bt.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new Bt(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,ht.BLACK,null,null))}remove(e){return new Bt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ht.BLACK,null,null))}get(e){let r,a=this.root_;for(;!a.isEmpty();){if(r=this.comparator_(e,a.key),r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}getPredecessorKey(e){let r,a=this.root_,l=null;for(;!a.isEmpty();)if(r=this.comparator_(e,a.key),r===0){if(a.left.isEmpty())return l?l.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else r<0?a=a.left:r>0&&(l=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $o(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new $o(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new $o(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new $o(this.root_,null,this.comparator_,!0,e)}}Bt.EMPTY_NODE=new lN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(i,e){return Ai(i.name,e.name)}function lm(i,e){return Ai(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh;function cN(i){jh=i}const yb=function(i){return typeof i=="number"?"number:"+K1(i):"string:"+i},vb=function(i){if(i.isLeafNode()){const e=i.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Rn(e,".sv"),"Priority must be a string or number.")}else X(i===jh||i.isEmpty(),"priority of unexpected type.");X(i===jh||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av;class ft{static set __childrenNodeConstructor(e){av=e}static get __childrenNodeConstructor(){return av}constructor(e,r=ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vb(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ft(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ve(e)?this:me(e)===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const a=me(e);return a===null?r:r.isEmpty()&&a!==".priority"?this:(X(a!==".priority"||Vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(Be(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yb(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=K1(this.value_):e+=this.value_,this.lazyHash_=Y1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ft.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ft.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,a=typeof this.value_,l=ft.VALUE_TYPE_ORDER.indexOf(r),c=ft.VALUE_TYPE_ORDER.indexOf(a);return X(l>=0,"Unknown leaf type: "+r),X(c>=0,"Unknown leaf type: "+a),l===c?a==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _b,bb;function uN(i){_b=i}function dN(i){bb=i}class fN extends ru{compare(e,r){const a=e.node.getPriority(),l=r.node.getPriority(),c=a.compareTo(l);return c===0?Ai(e.name,r.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return _e.MIN}maxPost(){return new _e(xi,new ft("[PRIORITY-POST]",bb))}makePost(e,r){const a=_b(e);return new _e(r,new ft("[PRIORITY-POST]",a))}toString(){return".priority"}}const Ge=new fN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=Math.log(2);class mN{constructor(e){const r=c=>parseInt(Math.log(c)/hN,10),a=c=>parseInt(Array(c+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const l=a(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bc=function(i,e,r,a){i.sort(e);const l=function(y,f){const h=f-y;let _,v;if(h===0)return null;if(h===1)return _=i[y],v=r?r(_):_,new ht(v,_.node,ht.BLACK,null,null);{const b=parseInt(h/2,10)+y,w=l(y,b),S=l(b+1,f);return _=i[b],v=r?r(_):_,new ht(v,_.node,ht.BLACK,w,S)}},c=function(y){let f=null,h=null,_=i.length;const v=function(w,S){const C=_-w,j=_;_-=w;const L=l(C+1,j),G=i[C],Q=r?r(G):G;b(new ht(Q,G.node,S,null,L))},b=function(w){f?(f.left=w,f=w):(h=w,f=w)};for(let w=0;w<y.count;++w){const S=y.nextBitIsOne(),C=Math.pow(2,y.count-(w+1));S?v(C,ht.BLACK):(v(C,ht.BLACK),v(C,ht.RED))}return h},d=new mN(i.length),m=c(d);return new Bt(a||e,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf;const va={};class sr{static get Default(){return X(va&&Ge,"ChildrenNode.ts has not been loaded"),Vf=Vf||new sr({".priority":va},{".priority":Ge}),Vf}constructor(e,r){this.indexes_=e,this.indexSet_=r}get(e){const r=bi(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Bt?r:null}hasIndex(e){return Rn(this.indexSet_,e.toString())}addIndex(e,r){X(e!==Oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let l=!1;const c=r.getIterator(_e.Wrap);let d=c.getNext();for(;d;)l=l||e.isDefinedOn(d.node),a.push(d),d=c.getNext();let m;l?m=Bc(a,e.getCompare()):m=va;const y=e.toString(),f={...this.indexSet_};f[y]=e;const h={...this.indexes_};return h[y]=m,new sr(h,f)}addToIndexes(e,r){const a=Ic(this.indexes_,(l,c)=>{const d=bi(this.indexSet_,c);if(X(d,"Missing index implementation for "+c),l===va)if(d.isDefinedOn(e.node)){const m=[],y=r.getIterator(_e.Wrap);let f=y.getNext();for(;f;)f.name!==e.name&&m.push(f),f=y.getNext();return m.push(e),Bc(m,d.getCompare())}else return va;else{const m=r.get(e.name);let y=l;return m&&(y=y.remove(new _e(e.name,m))),y.insert(e,e.node)}});return new sr(a,this.indexSet_)}removeFromIndexes(e,r){const a=Ic(this.indexes_,l=>{if(l===va)return l;{const c=r.get(e.name);return c?l.remove(new _e(e.name,c)):l}});return new sr(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs;class oe{static get EMPTY_NODE(){return Fs||(Fs=new oe(new Bt(lm),null,sr.Default))}constructor(e,r,a){this.children_=e,this.priorityNode_=r,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&vb(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fs}updatePriority(e){return this.children_.isEmpty()?this:new oe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Fs:r}}getChild(e){const r=me(e);return r===null?this:this.getImmediateChild(r).getChild(Be(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(X(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const a=new _e(e,r);let l,c;r.isEmpty()?(l=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(a,this.children_)):(l=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(a,this.children_));const d=l.isEmpty()?Fs:this.priorityNode_;return new oe(l,d,c)}}updateChild(e,r){const a=me(e);if(a===null)return r;{X(me(e)!==".priority"||Vr(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(a).updateChild(Be(e),r);return this.updateImmediateChild(a,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let a=0,l=0,c=!0;if(this.forEachChild(Ge,(d,m)=>{r[d]=m.val(e),a++,c&&oe.INTEGER_REGEXP_.test(d)?l=Math.max(l,Number(d)):c=!1}),!e&&c&&l<2*a){const d=[];for(const m in r)d[m]=r[m];return d}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yb(this.getPriority().val())+":"),this.forEachChild(Ge,(r,a)=>{const l=a.hash();l!==""&&(e+=":"+r+":"+l)}),this.lazyHash_=e===""?"":Y1(e)}return this.lazyHash_}getPredecessorChildName(e,r,a){const l=this.resolveIndex_(a);if(l){const c=l.getPredecessorKey(new _e(e,r));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const a=r.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new _e(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const a=r.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new _e(r,this.children_.get(r)):null}forEachChild(e,r){const a=this.resolveIndex_(e);return a?a.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const a=this.resolveIndex_(r);if(a)return a.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,_e.Wrap);let c=l.peek();for(;c!=null&&r.compare(c,e)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const a=this.resolveIndex_(r);if(a)return a.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,_e.Wrap);let c=l.peek();for(;c!=null&&r.compare(c,e)>0;)l.getNext(),c=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_l?-1:0}withIndex(e){if(e===Oa||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new oe(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Oa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const a=this.getIterator(Ge),l=r.getIterator(Ge);let c=a.getNext(),d=l.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=a.getNext(),d=l.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Oa?null:this.indexMap_.get(e.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gN extends oe{constructor(){super(new Bt(lm),oe.EMPTY_NODE,sr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return oe.EMPTY_NODE}isEmpty(){return!1}}const _l=new gN;Object.defineProperties(_e,{MIN:{value:new _e(Da,oe.EMPTY_NODE)},MAX:{value:new _e(xi,_l)}});pb.__EMPTY_NODE=oe.EMPTY_NODE;ft.__childrenNodeConstructor=oe;cN(_l);dN(_l);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=!0;function Ye(i,e=null){if(i===null)return oe.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const r=i;return new ft(r,Ye(e))}if(!(i instanceof Array)&&pN){const r=[];let a=!1;if(gt(i,(d,m)=>{if(d.substring(0,1)!=="."){const y=Ye(m);y.isEmpty()||(a=a||!y.getPriority().isEmpty(),r.push(new _e(d,y)))}}),r.length===0)return oe.EMPTY_NODE;const c=Bc(r,oN,d=>d.name,lm);if(a){const d=Bc(r,Ge.getCompare());return new oe(c,Ye(e),new sr({".priority":d},{".priority":Ge}))}else return new oe(c,Ye(e),sr.Default)}else{let r=oe.EMPTY_NODE;return gt(i,(a,l)=>{if(Rn(i,a)&&a.substring(0,1)!=="."){const c=Ye(l);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(a,c))}}),r.updatePriority(Ye(e))}}uN(Ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN extends ru{constructor(e){super(),this.indexPath_=e,X(!ve(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const a=this.extractChild(e.node),l=this.extractChild(r.node),c=a.compareTo(l);return c===0?Ai(e.name,r.name):c}makePost(e,r){const a=Ye(e),l=oe.EMPTY_NODE.updateChild(this.indexPath_,a);return new _e(r,l)}maxPost(){const e=oe.EMPTY_NODE.updateChild(this.indexPath_,_l);return new _e(xi,e)}toString(){return ll(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN extends ru{compare(e,r){const a=e.node.compareTo(r.node);return a===0?Ai(e.name,r.name):a}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return _e.MIN}maxPost(){return _e.MAX}makePost(e,r){const a=Ye(e);return new _e(r,a)}toString(){return".value"}}const _N=new vN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(i){return{type:"value",snapshotNode:i}}function Ma(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function ol(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function cl(i,e,r){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:r}}function bN(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.index_=e}updateChild(e,r,a,l,c,d){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(r);return m.getChild(l).equals(a.getChild(l))&&m.isEmpty()===a.isEmpty()||(d!=null&&(a.isEmpty()?e.hasChild(r)?d.trackChildChange(ol(r,m)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(Ma(r,a)):d.trackChildChange(cl(r,a,m))),e.isLeafNode()&&a.isEmpty())?e:e.updateImmediateChild(r,a).withIndex(this.index_)}updateFullNode(e,r,a){return a!=null&&(e.isLeafNode()||e.forEachChild(Ge,(l,c)=>{r.hasChild(l)||a.trackChildChange(ol(l,c))}),r.isLeafNode()||r.forEachChild(Ge,(l,c)=>{if(e.hasChild(l)){const d=e.getImmediateChild(l);d.equals(c)||a.trackChildChange(cl(l,c,d))}else a.trackChildChange(Ma(l,c))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?oe.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.indexedFilter_=new om(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ul.getStartPost_(e),this.endPost_=ul.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,a=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&a}updateChild(e,r,a,l,c,d){return this.matches(new _e(r,a))||(a=oe.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,a,l,c,d)}updateFullNode(e,r,a){r.isLeafNode()&&(r=oe.EMPTY_NODE);let l=r.withIndex(this.index_);l=l.updatePriority(oe.EMPTY_NODE);const c=this;return r.forEachChild(Ge,(d,m)=>{c.matches(new _e(d,m))||(l=l.updateImmediateChild(d,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,a)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=r=>{const a=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new ul(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,a,l,c,d){return this.rangedFilter_.matches(new _e(r,a))||(a=oe.EMPTY_NODE),e.getImmediateChild(r).equals(a)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,a,l,c,d):this.fullLimitUpdateChild_(e,r,a,c,d)}updateFullNode(e,r,a){let l;if(r.isLeafNode()||r.isEmpty())l=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){l=oe.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const m=c.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))l=l.updateImmediateChild(m.name,m.node),d++;else break;else continue}}else{l=r.withIndex(this.index_),l=l.updatePriority(oe.EMPTY_NODE);let c;this.reverse_?c=l.getReverseIterator(this.index_):c=l.getIterator(this.index_);let d=0;for(;c.hasNext();){const m=c.getNext();d<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?d++:l=l.updateImmediateChild(m.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,a)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,a,l,c){let d;if(this.reverse_){const _=this.index_.getCompare();d=(v,b)=>_(b,v)}else d=this.index_.getCompare();const m=e;X(m.numChildren()===this.limit_,"");const y=new _e(r,a),f=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),h=this.rangedFilter_.matches(y);if(m.hasChild(r)){const _=m.getImmediateChild(r);let v=l.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===r||m.hasChild(v.name));)v=l.getChildAfterChild(this.index_,v,this.reverse_);const b=v==null?1:d(v,y);if(h&&!a.isEmpty()&&b>=0)return c?.trackChildChange(cl(r,a,_)),m.updateImmediateChild(r,a);{c?.trackChildChange(ol(r,_));const S=m.updateImmediateChild(r,oe.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(c?.trackChildChange(Ma(v.name,v.node)),S.updateImmediateChild(v.name,v.node)):S}}else return a.isEmpty()?e:h&&d(f,y)>=0?(c!=null&&(c.trackChildChange(ol(f.name,f.node)),c.trackChildChange(Ma(r,a))),m.updateImmediateChild(r,a).updateImmediateChild(f.name,oe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Da}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ge}copy(){const e=new iu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wN(i){return i.loadsAllData()?new om(i.getIndex()):i.hasLimit()?new xN(i):new ul(i)}function sv(i){const e={};if(i.isDefault())return e;let r;if(i.index_===Ge?r="$priority":i.index_===_N?r="$value":i.index_===Oa?r="$key":(X(i.index_ instanceof yN,"Unrecognized index type!"),r=i.index_.toString()),e.orderBy=st(r),i.startSet_){const a=i.startAfterSet_?"startAfter":"startAt";e[a]=st(i.indexStartValue_),i.startNameSet_&&(e[a]+=","+st(i.indexStartName_))}if(i.endSet_){const a=i.endBeforeSet_?"endBefore":"endAt";e[a]=st(i.indexEndValue_),i.endNameSet_&&(e[a]+=","+st(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function lv(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let r=i.viewFrom_;r===""&&(i.isViewFromLeft()?r="l":r="r"),e.vf=r}return i.index_!==Ge&&(e.i=i.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends fb{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,r,a,l){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.log_=vl("p:rest:"),this.listens_={}}listen(e,r,a,l){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=Pc.getListenId_(e,a),m={};this.listens_[d]=m;const y=sv(e._queryParams);this.restRequest_(c+".json",y,(f,h)=>{let _=h;if(f===404&&(_=null,f=null),f===null&&this.onDataUpdate_(c,_,!1,a),bi(this.listens_,d)===m){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",l(v,null)}})}unlisten(e,r){const a=Pc.getListenId_(e,r);delete this.listens_[a]}get(e){const r=sv(e._queryParams),a=e._path.toString(),l=new Bn;return this.restRequest_(a+".json",r,(c,d)=>{let m=d;c===404&&(m=null,c=null),c===null?(this.onDataUpdate_(a,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(e){}restRequest_(e,r={},a){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(r.auth=l.accessToken),c&&c.token&&(r.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+BS(r);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(a&&m.readyState===4){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=Qh(m.responseText)}catch{Rt("Failed to parse JSON response for "+d+": "+m.responseText)}a(null,y)}else m.status!==401&&m.status!==404&&Rt("Got unsuccessful REST response for "+d+" Status: "+m.status),a(m.status);a=null}},m.open("GET",d,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(){return{value:null,children:new Map}}function Ua(i,e,r){if(ve(e))i.value=r,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,r);else{const a=me(e);i.children.has(a)||i.children.set(a,zc());const l=i.children.get(a);e=Be(e),Ua(l,e,r)}}function kh(i,e){if(ve(e))return i.value=null,i.children.clear(),!0;if(i.value!==null){if(i.value.isLeafNode())return!1;{const r=i.value;return i.value=null,r.forEachChild(Ge,(a,l)=>{Ua(i,new De(a),l)}),kh(i,e)}}else if(i.children.size>0){const r=me(e);return e=Be(e),i.children.has(r)&&kh(i.children.get(r),e)&&i.children.delete(r),i.children.size===0}else return!0}function Ih(i,e,r){i.value!==null?r(e,i.value):SN(i,(a,l)=>{const c=new De(e.toString()+"/"+a);Ih(l,c,r)})}function SN(i,e){i.children.forEach((r,a)=>{e(a,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r={...e};return this.last_&&gt(this.last_,(a,l)=>{r[a]=r[a]-l}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=10*1e3,NN=30*1e3,AN=300*1e3;class CN{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new TN(e);const a=ov+(NN-ov)*Math.random();tl(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const e=this.statsListener_.get(),r={};let a=!1;gt(e,(l,c)=>{c>0&&Rn(this.statsToReport_,l)&&(r[l]=c,a=!0)}),a&&this.server_.reportStats(r),tl(this.reportStats_.bind(this),Math.floor(Math.random()*2*AN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(An||(An={}));function cm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function um(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dm(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,r,a){this.path=e,this.affectedTree=r,this.revert=a,this.type=An.ACK_USER_WRITE,this.source=cm()}operationForChild(e){if(ve(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new De(e));return new qc(Ne(),r,this.revert)}}else return X(me(this.path)===e,"operationForChild called for unrelated child."),new qc(Be(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,r){this.source=e,this.path=r,this.type=An.LISTEN_COMPLETE}operationForChild(e){return ve(this.path)?new dl(this.source,Ne()):new dl(this.source,Be(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,r,a){this.source=e,this.path=r,this.snap=a,this.type=An.OVERWRITE}operationForChild(e){return ve(this.path)?new wi(this.source,Ne(),this.snap.getImmediateChild(e)):new wi(this.source,Be(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,r,a){this.source=e,this.path=r,this.children=a,this.type=An.MERGE}operationForChild(e){if(ve(this.path)){const r=this.children.subtree(new De(e));return r.isEmpty()?null:r.value?new wi(this.source,Ne(),r.value):new ja(this.source,Ne(),r)}else return X(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ja(this.source,Be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,r,a){this.node_=e,this.fullyInitialized_=r,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ve(e))return this.isFullyInitialized()&&!this.filtered_;const r=me(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function RN(i,e,r,a){const l=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(bN(d.childName,d.snapshotNode))}),Vs(i,l,"child_removed",e,a,r),Vs(i,l,"child_added",e,a,r),Vs(i,l,"child_moved",c,a,r),Vs(i,l,"child_changed",e,a,r),Vs(i,l,"value",e,a,r),l}function Vs(i,e,r,a,l,c){const d=a.filter(m=>m.type===r);d.sort((m,y)=>MN(i,m,y)),d.forEach(m=>{const y=DN(i,m,c);l.forEach(f=>{f.respondsTo(m.type)&&e.push(f.createEvent(y,i.query_))})})}function DN(i,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function MN(i,e,r){if(e.childName==null||r.childName==null)throw pl("Should only compare child_ events.");const a=new _e(e.childName,e.snapshotNode),l=new _e(r.childName,r.snapshotNode);return i.index_.compare(a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(i,e){return{eventCache:i,serverCache:e}}function nl(i,e,r,a){return au(new Gr(e,r,a),i.serverCache)}function wb(i,e,r,a){return au(i.eventCache,new Gr(e,r,a))}function Hc(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Ei(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;const jN=()=>(Gf||(Gf=new Bt(yT)),Gf);class qe{static fromObject(e){let r=new qe(null);return gt(e,(a,l)=>{r=r.set(new De(a),l)}),r}constructor(e,r=jN()){this.value=e,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:Ne(),value:this.value};if(ve(e))return null;{const a=me(e),l=this.children.get(a);if(l!==null){const c=l.findRootMostMatchingPathAndValue(Be(e),r);return c!=null?{path:Qe(new De(a),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ve(e))return this;{const r=me(e),a=this.children.get(r);return a!==null?a.subtree(Be(e)):new qe(null)}}set(e,r){if(ve(e))return new qe(r,this.children);{const a=me(e),c=(this.children.get(a)||new qe(null)).set(Be(e),r),d=this.children.insert(a,c);return new qe(this.value,d)}}remove(e){if(ve(e))return this.children.isEmpty()?new qe(null):new qe(null,this.children);{const r=me(e),a=this.children.get(r);if(a){const l=a.remove(Be(e));let c;return l.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,l),this.value===null&&c.isEmpty()?new qe(null):new qe(this.value,c)}else return this}}get(e){if(ve(e))return this.value;{const r=me(e),a=this.children.get(r);return a?a.get(Be(e)):null}}setTree(e,r){if(ve(e))return r;{const a=me(e),c=(this.children.get(a)||new qe(null)).setTree(Be(e),r);let d;return c.isEmpty()?d=this.children.remove(a):d=this.children.insert(a,c),new qe(this.value,d)}}fold(e){return this.fold_(Ne(),e)}fold_(e,r){const a={};return this.children.inorderTraversal((l,c)=>{a[l]=c.fold_(Qe(e,l),r)}),r(e,this.value,a)}findOnPath(e,r){return this.findOnPath_(e,Ne(),r)}findOnPath_(e,r,a){const l=this.value?a(r,this.value):!1;if(l)return l;if(ve(e))return null;{const c=me(e),d=this.children.get(c);return d?d.findOnPath_(Be(e),Qe(r,c),a):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,Ne(),r)}foreachOnPath_(e,r,a){if(ve(e))return this;{this.value&&a(r,this.value);const l=me(e),c=this.children.get(l);return c?c.foreachOnPath_(Be(e),Qe(r,l),a):new qe(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,r){this.children.inorderTraversal((a,l)=>{l.foreach_(Qe(e,a),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,a)=>{a.value&&e(r,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.writeTree_=e}static empty(){return new On(new qe(null))}}function rl(i,e,r){if(ve(e))return new On(new qe(r));{const a=i.writeTree_.findRootMostValueAndPath(e);if(a!=null){const l=a.path;let c=a.value;const d=Ot(l,e);return c=c.updateChild(d,r),new On(i.writeTree_.set(l,c))}else{const l=new qe(r),c=i.writeTree_.setTree(e,l);return new On(c)}}}function Lh(i,e,r){let a=i;return gt(r,(l,c)=>{a=rl(a,Qe(e,l),c)}),a}function cv(i,e){if(ve(e))return On.empty();{const r=i.writeTree_.setTree(e,new qe(null));return new On(r)}}function Uh(i,e){return Ci(i,e)!=null}function Ci(i,e){const r=i.writeTree_.findRootMostValueAndPath(e);return r!=null?i.writeTree_.get(r.path).getChild(Ot(r.path,e)):null}function uv(i){const e=[],r=i.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ge,(a,l)=>{e.push(new _e(a,l))}):i.writeTree_.children.inorderTraversal((a,l)=>{l.value!=null&&e.push(new _e(a,l.value))}),e}function zr(i,e){if(ve(e))return i;{const r=Ci(i,e);return r!=null?new On(new qe(r)):new On(i.writeTree_.subtree(e))}}function Bh(i){return i.writeTree_.isEmpty()}function ka(i,e){return Eb(Ne(),i.writeTree_,e)}function Eb(i,e,r){if(e.value!=null)return r.updateChild(i,e.value);{let a=null;return e.children.inorderTraversal((l,c)=>{l===".priority"?(X(c.value!==null,"Priority writes must always be leaf nodes"),a=c.value):r=Eb(Qe(i,l),c,r)}),!r.getChild(i).isEmpty()&&a!==null&&(r=r.updateChild(Qe(i,".priority"),a)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(i,e){return Ab(e,i)}function kN(i,e,r,a,l){X(a>i.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),i.allWrites.push({path:e,snap:r,writeId:a,visible:l}),l&&(i.visibleWrites=rl(i.visibleWrites,e,r)),i.lastWriteId=a}function IN(i,e,r,a){X(a>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:e,children:r,writeId:a,visible:!0}),i.visibleWrites=Lh(i.visibleWrites,e,r),i.lastWriteId=a}function LN(i,e){for(let r=0;r<i.allWrites.length;r++){const a=i.allWrites[r];if(a.writeId===e)return a}return null}function UN(i,e){const r=i.allWrites.findIndex(m=>m.writeId===e);X(r>=0,"removeWrite called with nonexistent writeId.");const a=i.allWrites[r];i.allWrites.splice(r,1);let l=a.visible,c=!1,d=i.allWrites.length-1;for(;l&&d>=0;){const m=i.allWrites[d];m.visible&&(d>=r&&BN(m,a.path)?l=!1:vn(a.path,m.path)&&(c=!0)),d--}if(l){if(c)return PN(i),!0;if(a.snap)i.visibleWrites=cv(i.visibleWrites,a.path);else{const m=a.children;gt(m,y=>{i.visibleWrites=cv(i.visibleWrites,Qe(a.path,y))})}return!0}else return!1}function BN(i,e){if(i.snap)return vn(i.path,e);for(const r in i.children)if(i.children.hasOwnProperty(r)&&vn(Qe(i.path,r),e))return!0;return!1}function PN(i){i.visibleWrites=Sb(i.allWrites,zN,Ne()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function zN(i){return i.visible}function Sb(i,e,r){let a=On.empty();for(let l=0;l<i.length;++l){const c=i[l];if(e(c)){const d=c.path;let m;if(c.snap)vn(r,d)?(m=Ot(r,d),a=rl(a,m,c.snap)):vn(d,r)&&(m=Ot(d,r),a=rl(a,Ne(),c.snap.getChild(m)));else if(c.children){if(vn(r,d))m=Ot(r,d),a=Lh(a,m,c.children);else if(vn(d,r))if(m=Ot(d,r),ve(m))a=Lh(a,Ne(),c.children);else{const y=bi(c.children,me(m));if(y){const f=y.getChild(Be(m));a=rl(a,Ne(),f)}}}else throw pl("WriteRecord should have .snap or .children")}}return a}function Tb(i,e,r,a,l){if(!a&&!l){const c=Ci(i.visibleWrites,e);if(c!=null)return c;{const d=zr(i.visibleWrites,e);if(Bh(d))return r;if(r==null&&!Uh(d,Ne()))return null;{const m=r||oe.EMPTY_NODE;return ka(d,m)}}}else{const c=zr(i.visibleWrites,e);if(!l&&Bh(c))return r;if(!l&&r==null&&!Uh(c,Ne()))return null;{const d=function(f){return(f.visible||l)&&(!a||!~a.indexOf(f.writeId))&&(vn(f.path,e)||vn(e,f.path))},m=Sb(i.allWrites,d,e),y=r||oe.EMPTY_NODE;return ka(m,y)}}}function qN(i,e,r){let a=oe.EMPTY_NODE;const l=Ci(i.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Ge,(c,d)=>{a=a.updateImmediateChild(c,d)}),a;if(r){const c=zr(i.visibleWrites,e);return r.forEachChild(Ge,(d,m)=>{const y=ka(zr(c,new De(d)),m);a=a.updateImmediateChild(d,y)}),uv(c).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}else{const c=zr(i.visibleWrites,e);return uv(c).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}}function HN(i,e,r,a,l){X(a||l,"Either existingEventSnap or existingServerSnap must exist");const c=Qe(e,r);if(Uh(i.visibleWrites,c))return null;{const d=zr(i.visibleWrites,c);return Bh(d)?l.getChild(r):ka(d,l.getChild(r))}}function FN(i,e,r,a){const l=Qe(e,r),c=Ci(i.visibleWrites,l);if(c!=null)return c;if(a.isCompleteForChild(r)){const d=zr(i.visibleWrites,l);return ka(d,a.getNode().getImmediateChild(r))}else return null}function VN(i,e){return Ci(i.visibleWrites,e)}function GN(i,e,r,a,l,c,d){let m;const y=zr(i.visibleWrites,e),f=Ci(y,Ne());if(f!=null)m=f;else if(r!=null)m=ka(y,r);else return[];if(m=m.withIndex(d),!m.isEmpty()&&!m.isLeafNode()){const h=[],_=d.getCompare(),v=c?m.getReverseIteratorFrom(a,d):m.getIteratorFrom(a,d);let b=v.getNext();for(;b&&h.length<l;)_(b,a)!==0&&h.push(b),b=v.getNext();return h}else return[]}function $N(){return{visibleWrites:On.empty(),allWrites:[],lastWriteId:-1}}function Fc(i,e,r,a){return Tb(i.writeTree,i.treePath,e,r,a)}function fm(i,e){return qN(i.writeTree,i.treePath,e)}function dv(i,e,r,a){return HN(i.writeTree,i.treePath,e,r,a)}function Vc(i,e){return VN(i.writeTree,Qe(i.treePath,e))}function YN(i,e,r,a,l,c){return GN(i.writeTree,i.treePath,e,r,a,l,c)}function hm(i,e,r){return FN(i.writeTree,i.treePath,e,r)}function Nb(i,e){return Ab(Qe(i.treePath,e),i.writeTree)}function Ab(i,e){return{treePath:i,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,a=e.childName;X(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),X(a!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(a);if(l){const c=l.type;if(r==="child_added"&&c==="child_removed")this.changeMap.set(a,cl(a,e.snapshotNode,l.snapshotNode));else if(r==="child_removed"&&c==="child_added")this.changeMap.delete(a);else if(r==="child_removed"&&c==="child_changed")this.changeMap.set(a,ol(a,l.oldSnap));else if(r==="child_changed"&&c==="child_added")this.changeMap.set(a,Ma(a,e.snapshotNode));else if(r==="child_changed"&&c==="child_changed")this.changeMap.set(a,cl(a,e.snapshotNode,l.oldSnap));else throw pl("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(a,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{getCompleteChild(e){return null}getChildAfterChild(e,r,a){return null}}const Cb=new KN;class mm{constructor(e,r,a=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=a}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const a=this.optCompleteServerCache_!=null?new Gr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hm(this.writes_,e,a)}}getChildAfterChild(e,r,a){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ei(this.viewCache_),c=YN(this.writes_,l,r,1,a,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(i){return{filter:i}}function WN(i,e){X(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function ZN(i,e,r,a,l){const c=new QN;let d,m;if(r.type===An.OVERWRITE){const f=r;f.source.fromUser?d=Ph(i,e,f.path,f.snap,a,l,c):(X(f.source.fromServer,"Unknown source."),m=f.source.tagged||e.serverCache.isFiltered()&&!ve(f.path),d=Gc(i,e,f.path,f.snap,a,l,m,c))}else if(r.type===An.MERGE){const f=r;f.source.fromUser?d=e2(i,e,f.path,f.children,a,l,c):(X(f.source.fromServer,"Unknown source."),m=f.source.tagged||e.serverCache.isFiltered(),d=zh(i,e,f.path,f.children,a,l,m,c))}else if(r.type===An.ACK_USER_WRITE){const f=r;f.revert?d=r2(i,e,f.path,a,l,c):d=t2(i,e,f.path,f.affectedTree,a,l,c)}else if(r.type===An.LISTEN_COMPLETE)d=n2(i,e,r.path,a,c);else throw pl("Unknown operation type: "+r.type);const y=c.getChanges();return JN(e,d,y),{viewCache:d,changes:y}}function JN(i,e,r){const a=e.eventCache;if(a.isFullyInitialized()){const l=a.getNode().isLeafNode()||a.getNode().isEmpty(),c=Hc(i);(r.length>0||!i.eventCache.isFullyInitialized()||l&&!a.getNode().equals(c)||!a.getNode().getPriority().equals(c.getPriority()))&&r.push(xb(Hc(e)))}}function Ob(i,e,r,a,l,c){const d=e.eventCache;if(Vc(a,r)!=null)return e;{let m,y;if(ve(r))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Ei(e),h=f instanceof oe?f:oe.EMPTY_NODE,_=fm(a,h);m=i.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const f=Fc(a,Ei(e));m=i.filter.updateFullNode(e.eventCache.getNode(),f,c)}else{const f=me(r);if(f===".priority"){X(Vr(r)===1,"Can't have a priority with additional path components");const h=d.getNode();y=e.serverCache.getNode();const _=dv(a,r,h,y);_!=null?m=i.filter.updatePriority(h,_):m=d.getNode()}else{const h=Be(r);let _;if(d.isCompleteForChild(f)){y=e.serverCache.getNode();const v=dv(a,r,d.getNode(),y);v!=null?_=d.getNode().getImmediateChild(f).updateChild(h,v):_=d.getNode().getImmediateChild(f)}else _=hm(a,f,e.serverCache);_!=null?m=i.filter.updateChild(d.getNode(),f,_,h,l,c):m=d.getNode()}}return nl(e,m,d.isFullyInitialized()||ve(r),i.filter.filtersNodes())}}function Gc(i,e,r,a,l,c,d,m){const y=e.serverCache;let f;const h=d?i.filter:i.filter.getIndexedFilter();if(ve(r))f=h.updateFullNode(y.getNode(),a,null);else if(h.filtersNodes()&&!y.isFiltered()){const b=y.getNode().updateChild(r,a);f=h.updateFullNode(y.getNode(),b,null)}else{const b=me(r);if(!y.isCompleteForPath(r)&&Vr(r)>1)return e;const w=Be(r),C=y.getNode().getImmediateChild(b).updateChild(w,a);b===".priority"?f=h.updatePriority(y.getNode(),C):f=h.updateChild(y.getNode(),b,C,w,Cb,null)}const _=wb(e,f,y.isFullyInitialized()||ve(r),h.filtersNodes()),v=new mm(l,_,c);return Ob(i,_,r,l,v,m)}function Ph(i,e,r,a,l,c,d){const m=e.eventCache;let y,f;const h=new mm(l,e,c);if(ve(r))f=i.filter.updateFullNode(e.eventCache.getNode(),a,d),y=nl(e,f,!0,i.filter.filtersNodes());else{const _=me(r);if(_===".priority")f=i.filter.updatePriority(e.eventCache.getNode(),a),y=nl(e,f,m.isFullyInitialized(),m.isFiltered());else{const v=Be(r),b=m.getNode().getImmediateChild(_);let w;if(ve(v))w=a;else{const S=h.getCompleteChild(_);S!=null?im(v)===".priority"&&S.getChild(mb(v)).isEmpty()?w=S:w=S.updateChild(v,a):w=oe.EMPTY_NODE}if(b.equals(w))y=e;else{const S=i.filter.updateChild(m.getNode(),_,w,v,h,d);y=nl(e,S,m.isFullyInitialized(),i.filter.filtersNodes())}}}return y}function fv(i,e){return i.eventCache.isCompleteForChild(e)}function e2(i,e,r,a,l,c,d){let m=e;return a.foreach((y,f)=>{const h=Qe(r,y);fv(e,me(h))&&(m=Ph(i,m,h,f,l,c,d))}),a.foreach((y,f)=>{const h=Qe(r,y);fv(e,me(h))||(m=Ph(i,m,h,f,l,c,d))}),m}function hv(i,e,r){return r.foreach((a,l)=>{e=e.updateChild(a,l)}),e}function zh(i,e,r,a,l,c,d,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,f;ve(r)?f=a:f=new qe(null).setTree(r,a);const h=e.serverCache.getNode();return f.children.inorderTraversal((_,v)=>{if(h.hasChild(_)){const b=e.serverCache.getNode().getImmediateChild(_),w=hv(i,b,v);y=Gc(i,y,new De(_),w,l,c,d,m)}}),f.children.inorderTraversal((_,v)=>{const b=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!h.hasChild(_)&&!b){const w=e.serverCache.getNode().getImmediateChild(_),S=hv(i,w,v);y=Gc(i,y,new De(_),S,l,c,d,m)}}),y}function t2(i,e,r,a,l,c,d){if(Vc(l,r)!=null)return e;const m=e.serverCache.isFiltered(),y=e.serverCache;if(a.value!=null){if(ve(r)&&y.isFullyInitialized()||y.isCompleteForPath(r))return Gc(i,e,r,y.getNode().getChild(r),l,c,m,d);if(ve(r)){let f=new qe(null);return y.getNode().forEachChild(Oa,(h,_)=>{f=f.set(new De(h),_)}),zh(i,e,r,f,l,c,m,d)}else return e}else{let f=new qe(null);return a.foreach((h,_)=>{const v=Qe(r,h);y.isCompleteForPath(v)&&(f=f.set(h,y.getNode().getChild(v)))}),zh(i,e,r,f,l,c,m,d)}}function n2(i,e,r,a,l){const c=e.serverCache,d=wb(e,c.getNode(),c.isFullyInitialized()||ve(r),c.isFiltered());return Ob(i,d,r,a,Cb,l)}function r2(i,e,r,a,l,c){let d;if(Vc(a,r)!=null)return e;{const m=new mm(a,e,l),y=e.eventCache.getNode();let f;if(ve(r)||me(r)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Fc(a,Ei(e));else{const _=e.serverCache.getNode();X(_ instanceof oe,"serverChildren would be complete if leaf node"),h=fm(a,_)}h=h,f=i.filter.updateFullNode(y,h,c)}else{const h=me(r);let _=hm(a,h,e.serverCache);_==null&&e.serverCache.isCompleteForChild(h)&&(_=y.getImmediateChild(h)),_!=null?f=i.filter.updateChild(y,h,_,Be(r),m,c):e.eventCache.getNode().hasChild(h)?f=i.filter.updateChild(y,h,oe.EMPTY_NODE,Be(r),m,c):f=y,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Fc(a,Ei(e)),d.isLeafNode()&&(f=i.filter.updateFullNode(f,d,c)))}return d=e.serverCache.isFullyInitialized()||Vc(a,Ne())!=null,nl(e,f,d,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const a=this.query_._queryParams,l=new om(a.getIndex()),c=wN(a);this.processor_=XN(c);const d=r.serverCache,m=r.eventCache,y=l.updateFullNode(oe.EMPTY_NODE,d.getNode(),null),f=c.updateFullNode(oe.EMPTY_NODE,m.getNode(),null),h=new Gr(y,d.isFullyInitialized(),l.filtersNodes()),_=new Gr(f,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=au(_,h),this.eventGenerator_=new ON(this.query_)}get query(){return this.query_}}function a2(i){return i.viewCache_.serverCache.getNode()}function s2(i){return Hc(i.viewCache_)}function l2(i,e){const r=Ei(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!ve(e)&&!r.getImmediateChild(me(e)).isEmpty())?r.getChild(e):null}function mv(i){return i.eventRegistrations_.length===0}function o2(i,e){i.eventRegistrations_.push(e)}function gv(i,e,r){const a=[];if(r){X(e==null,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(r,l);d&&a.push(d)})}if(e){let l=[];for(let c=0;c<i.eventRegistrations_.length;++c){const d=i.eventRegistrations_[c];if(!d.matches(e))l.push(d);else if(e.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(c+1));break}}i.eventRegistrations_=l}else i.eventRegistrations_=[];return a}function pv(i,e,r,a){e.type===An.MERGE&&e.source.queryId!==null&&(X(Ei(i.viewCache_),"We should always have a full cache before handling merges"),X(Hc(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,c=ZN(i.processor_,l,e,r,a);return WN(i.processor_,c.viewCache),X(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,Rb(i,c.changes,c.viewCache.eventCache.getNode(),null)}function c2(i,e){const r=i.viewCache_.eventCache,a=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ge,(c,d)=>{a.push(Ma(c,d))}),r.isFullyInitialized()&&a.push(xb(r.getNode())),Rb(i,a,r.getNode(),e)}function Rb(i,e,r,a){const l=a?[a]:i.eventRegistrations_;return RN(i.eventGenerator_,e,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c;class Db{constructor(){this.views=new Map}}function u2(i){X(!$c,"__referenceConstructor has already been defined"),$c=i}function d2(){return X($c,"Reference.ts has not been loaded"),$c}function f2(i){return i.views.size===0}function gm(i,e,r,a){const l=e.source.queryId;if(l!==null){const c=i.views.get(l);return X(c!=null,"SyncTree gave us an op for an invalid query."),pv(c,e,r,a)}else{let c=[];for(const d of i.views.values())c=c.concat(pv(d,e,r,a));return c}}function Mb(i,e,r,a,l){const c=e._queryIdentifier,d=i.views.get(c);if(!d){let m=Fc(r,l?a:null),y=!1;m?y=!0:a instanceof oe?(m=fm(r,a),y=!1):(m=oe.EMPTY_NODE,y=!1);const f=au(new Gr(m,y,!1),new Gr(a,l,!1));return new i2(e,f)}return d}function h2(i,e,r,a,l,c){const d=Mb(i,e,a,l,c);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),o2(d,r),c2(d,r)}function m2(i,e,r,a){const l=e._queryIdentifier,c=[];let d=[];const m=$r(i);if(l==="default")for(const[y,f]of i.views.entries())d=d.concat(gv(f,r,a)),mv(f)&&(i.views.delete(y),f.query._queryParams.loadsAllData()||c.push(f.query));else{const y=i.views.get(l);y&&(d=d.concat(gv(y,r,a)),mv(y)&&(i.views.delete(l),y.query._queryParams.loadsAllData()||c.push(y.query)))}return m&&!$r(i)&&c.push(new(d2())(e._repo,e._path)),{removed:c,events:d}}function jb(i){const e=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function qr(i,e){let r=null;for(const a of i.views.values())r=r||l2(a,e);return r}function kb(i,e){if(e._queryParams.loadsAllData())return lu(i);{const a=e._queryIdentifier;return i.views.get(a)}}function Ib(i,e){return kb(i,e)!=null}function $r(i){return lu(i)!=null}function lu(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc;function g2(i){X(!Yc,"__referenceConstructor has already been defined"),Yc=i}function p2(){return X(Yc,"Reference.ts has not been loaded"),Yc}let y2=1;class yv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qe(null),this.pendingWriteTree_=$N(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pm(i,e,r,a,l){return kN(i.pendingWriteTree_,e,r,a,l),l?Ba(i,new wi(cm(),e,r)):[]}function v2(i,e,r,a){IN(i.pendingWriteTree_,e,r,a);const l=qe.fromObject(r);return Ba(i,new ja(cm(),e,l))}function Br(i,e,r=!1){const a=LN(i.pendingWriteTree_,e);if(UN(i.pendingWriteTree_,e)){let c=new qe(null);return a.snap!=null?c=c.set(Ne(),!0):gt(a.children,d=>{c=c.set(new De(d),!0)}),Ba(i,new qc(a.path,c,r))}else return[]}function bl(i,e,r){return Ba(i,new wi(um(),e,r))}function _2(i,e,r){const a=qe.fromObject(r);return Ba(i,new ja(um(),e,a))}function b2(i,e){return Ba(i,new dl(um(),e))}function x2(i,e,r){const a=ym(i,r);if(a){const l=vm(a),c=l.path,d=l.queryId,m=Ot(c,e),y=new dl(dm(d),m);return _m(i,c,y)}else return[]}function Qc(i,e,r,a,l=!1){const c=e._path,d=i.syncPointTree_.get(c);let m=[];if(d&&(e._queryIdentifier==="default"||Ib(d,e))){const y=m2(d,e,r,a);f2(d)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const f=y.removed;if(m=y.events,!l){const h=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=i.syncPointTree_.findOnPath(c,(v,b)=>$r(b));if(h&&!_){const v=i.syncPointTree_.subtree(c);if(!v.isEmpty()){const b=S2(v);for(let w=0;w<b.length;++w){const S=b[w],C=S.query,j=Pb(i,S);i.listenProvider_.startListening(il(C),fl(i,C),j.hashFn,j.onComplete)}}}!_&&f.length>0&&!a&&(h?i.listenProvider_.stopListening(il(e),null):f.forEach(v=>{const b=i.queryToTagMap.get(cu(v));i.listenProvider_.stopListening(il(v),b)}))}T2(i,f)}return m}function Lb(i,e,r,a){const l=ym(i,a);if(l!=null){const c=vm(l),d=c.path,m=c.queryId,y=Ot(d,e),f=new wi(dm(m),y,r);return _m(i,d,f)}else return[]}function w2(i,e,r,a){const l=ym(i,a);if(l){const c=vm(l),d=c.path,m=c.queryId,y=Ot(d,e),f=qe.fromObject(r),h=new ja(dm(m),y,f);return _m(i,d,h)}else return[]}function qh(i,e,r,a=!1){const l=e._path;let c=null,d=!1;i.syncPointTree_.foreachOnPath(l,(v,b)=>{const w=Ot(v,l);c=c||qr(b,w),d=d||$r(b)});let m=i.syncPointTree_.get(l);m?(d=d||$r(m),c=c||qr(m,Ne())):(m=new Db,i.syncPointTree_=i.syncPointTree_.set(l,m));let y;c!=null?y=!0:(y=!1,c=oe.EMPTY_NODE,i.syncPointTree_.subtree(l).foreachChild((b,w)=>{const S=qr(w,Ne());S&&(c=c.updateImmediateChild(b,S))}));const f=Ib(m,e);if(!f&&!e._queryParams.loadsAllData()){const v=cu(e);X(!i.queryToTagMap.has(v),"View does not exist, but we have a tag");const b=N2();i.queryToTagMap.set(v,b),i.tagToQueryMap.set(b,v)}const h=su(i.pendingWriteTree_,l);let _=h2(m,e,r,h,c,y);if(!f&&!d&&!a){const v=kb(m,e);_=_.concat(A2(i,e,v))}return _}function ou(i,e,r){const l=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(e,(d,m)=>{const y=Ot(d,e),f=qr(m,y);if(f)return f});return Tb(l,e,c,r,!0)}function E2(i,e){const r=e._path;let a=null;i.syncPointTree_.foreachOnPath(r,(f,h)=>{const _=Ot(f,r);a=a||qr(h,_)});let l=i.syncPointTree_.get(r);l?a=a||qr(l,Ne()):(l=new Db,i.syncPointTree_=i.syncPointTree_.set(r,l));const c=a!=null,d=c?new Gr(a,!0,!1):null,m=su(i.pendingWriteTree_,e._path),y=Mb(l,e,m,c?d.getNode():oe.EMPTY_NODE,c);return s2(y)}function Ba(i,e){return Ub(e,i.syncPointTree_,null,su(i.pendingWriteTree_,Ne()))}function Ub(i,e,r,a){if(ve(i.path))return Bb(i,e,r,a);{const l=e.get(Ne());r==null&&l!=null&&(r=qr(l,Ne()));let c=[];const d=me(i.path),m=i.operationForChild(d),y=e.children.get(d);if(y&&m){const f=r?r.getImmediateChild(d):null,h=Nb(a,d);c=c.concat(Ub(m,y,f,h))}return l&&(c=c.concat(gm(l,i,a,r))),c}}function Bb(i,e,r,a){const l=e.get(Ne());r==null&&l!=null&&(r=qr(l,Ne()));let c=[];return e.children.inorderTraversal((d,m)=>{const y=r?r.getImmediateChild(d):null,f=Nb(a,d),h=i.operationForChild(d);h&&(c=c.concat(Bb(h,m,y,f)))}),l&&(c=c.concat(gm(l,i,a,r))),c}function Pb(i,e){const r=e.query,a=fl(i,r);return{hashFn:()=>(a2(e)||oe.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return a?x2(i,r._path,a):b2(i,r._path);{const c=bT(l,r);return Qc(i,r,null,c)}}}}function fl(i,e){const r=cu(e);return i.queryToTagMap.get(r)}function cu(i){return i._path.toString()+"$"+i._queryIdentifier}function ym(i,e){return i.tagToQueryMap.get(e)}function vm(i){const e=i.indexOf("$");return X(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new De(i.substr(0,e))}}function _m(i,e,r){const a=i.syncPointTree_.get(e);X(a,"Missing sync point for query tag that we're tracking");const l=su(i.pendingWriteTree_,e);return gm(a,r,l,null)}function S2(i){return i.fold((e,r,a)=>{if(r&&$r(r))return[lu(r)];{let l=[];return r&&(l=jb(r)),gt(a,(c,d)=>{l=l.concat(d)}),l}})}function il(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(p2())(i._repo,i._path):i}function T2(i,e){for(let r=0;r<e.length;++r){const a=e[r];if(!a._queryParams.loadsAllData()){const l=cu(a),c=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(c)}}}function N2(){return y2++}function A2(i,e,r){const a=e._path,l=fl(i,e),c=Pb(i,r),d=i.listenProvider_.startListening(il(e),l,c.hashFn,c.onComplete),m=i.syncPointTree_.subtree(a);if(l)X(!$r(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((f,h,_)=>{if(!ve(f)&&h&&$r(h))return[lu(h).query];{let v=[];return h&&(v=v.concat(jb(h).map(b=>b.query))),gt(_,(b,w)=>{v=v.concat(w)}),v}});for(let f=0;f<y.length;++f){const h=y[f];i.listenProvider_.stopListening(il(h),fl(i,h))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new bm(r)}node(){return this.node_}}class xm{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Qe(this.path_,e);return new xm(this.syncTree_,r)}node(){return ou(this.syncTree_,this.path_)}}const C2=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},vv=function(i,e,r){if(!i||typeof i!="object")return i;if(X(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return O2(i[".sv"],e,r);if(typeof i[".sv"]=="object")return R2(i[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},O2=function(i,e,r){switch(i){case"timestamp":return r.timestamp;default:X(!1,"Unexpected server value: "+i)}},R2=function(i,e,r){i.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const a=i.increment;typeof a!="number"&&X(!1,"Unexpected increment value: "+a);const l=e.node();if(X(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return a;const d=l.getValue();return typeof d!="number"?a:d+a},zb=function(i,e,r,a){return Em(e,new xm(r,i),a)},wm=function(i,e,r){return Em(i,new bm(e),r)};function Em(i,e,r){const a=i.getPriority().val(),l=vv(a,e.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const d=i,m=vv(d.getValue(),e,r);return m!==d.getValue()||l!==d.getPriority().val()?new ft(m,Ye(l)):i}else{const d=i;return c=d,l!==d.getPriority().val()&&(c=c.updatePriority(new ft(l))),d.forEachChild(Ge,(m,y)=>{const f=Em(y,e.getImmediateChild(m),r);f!==y&&(c=c.updateImmediateChild(m,f))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e="",r=null,a={children:{},childCount:0}){this.name=e,this.parent=r,this.node=a}}function uu(i,e){let r=e instanceof De?e:new De(e),a=i,l=me(r);for(;l!==null;){const c=bi(a.node.children,l)||{children:{},childCount:0};a=new Sm(l,a,c),r=Be(r),l=me(r)}return a}function Oi(i){return i.node.value}function Tm(i,e){i.node.value=e,Hh(i)}function qb(i){return i.node.childCount>0}function D2(i){return Oi(i)===void 0&&!qb(i)}function du(i,e){gt(i.node.children,(r,a)=>{e(new Sm(r,i,a))})}function Hb(i,e,r,a){r&&e(i),du(i,l=>{Hb(l,e,!0)})}function M2(i,e,r){let a=i.parent;for(;a!==null;){if(e(a))return!0;a=a.parent}return!1}function xl(i){return new De(i.parent===null?i.name:xl(i.parent)+"/"+i.name)}function Hh(i){i.parent!==null&&j2(i.parent,i.name,i)}function j2(i,e,r){const a=D2(r),l=Rn(i.node.children,e);a&&l?(delete i.node.children[e],i.node.childCount--,Hh(i)):!a&&!l&&(i.node.children[e]=r.node,i.node.childCount++,Hh(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/[\[\].#$\/\u0000-\u001F\u007F]/,I2=/[\[\].#$\u0000-\u001F\u007F]/,$f=10*1024*1024,Nm=function(i){return typeof i=="string"&&i.length!==0&&!k2.test(i)},Fb=function(i){return typeof i=="string"&&i.length!==0&&!I2.test(i)},L2=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Fb(i)},Am=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!nu(i)||i&&typeof i=="object"&&Rn(i,".sv")},Fh=function(i,e,r,a){wl(Ra(i,"value"),e,r)},wl=function(i,e,r){const a=r instanceof De?new eN(r,i):r;if(e===void 0)throw new Error(i+"contains undefined "+pi(a));if(typeof e=="function")throw new Error(i+"contains a function "+pi(a)+" with contents = "+e.toString());if(nu(e))throw new Error(i+"contains "+e.toString()+" "+pi(a));if(typeof e=="string"&&e.length>$f/3&&eu(e)>$f)throw new Error(i+"contains a string greater than "+$f+" utf8 bytes "+pi(a)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,c=!1;if(gt(e,(d,m)=>{if(d===".value")l=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!Nm(d)))throw new Error(i+" contains an invalid key ("+d+") "+pi(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tN(a,d),wl(i,m,a),nN(a)}),l&&c)throw new Error(i+' contains ".value" child '+pi(a)+" in addition to actual children.")}},U2=function(i,e){let r,a;for(r=0;r<e.length;r++){a=e[r];const c=ll(a);for(let d=0;d<c.length;d++)if(!(c[d]===".priority"&&d===c.length-1)){if(!Nm(c[d]))throw new Error(i+"contains an invalid key ("+c[d]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(JT);let l=null;for(r=0;r<e.length;r++){if(a=e[r],l!==null&&vn(l,a))throw new Error(i+"contains a path "+l.toString()+" that is ancestor of another path "+a.toString());l=a}},Vb=function(i,e,r,a){const l=Ra(i,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const c=[];gt(e,(d,m)=>{const y=new De(d);if(wl(l,m,Qe(r,y)),im(y)===".priority"&&!Am(m))throw new Error(l+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),U2(l,c)},B2=function(i,e,r){if(nu(e))throw new Error(Ra(i,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Am(e))throw new Error(Ra(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Cm=function(i,e,r,a){if(!Fb(r))throw new Error(Ra(i,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},P2=function(i,e,r,a){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Cm(i,e,r)},vi=function(i,e){if(me(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},z2=function(i,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Nm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!L2(r))throw new Error(Ra(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fu(i,e){let r=null;for(let a=0;a<e.length;a++){const l=e[a],c=l.getPath();r!==null&&!am(c,r.path)&&(i.eventLists_.push(r),r=null),r===null&&(r={events:[],path:c}),r.events.push(l)}r&&i.eventLists_.push(r)}function Gb(i,e,r){fu(i,r),$b(i,a=>am(a,e))}function rn(i,e,r){fu(i,r),$b(i,a=>vn(a,e)||vn(e,a))}function $b(i,e){i.recursionDepth_++;let r=!0;for(let a=0;a<i.eventLists_.length;a++){const l=i.eventLists_[a];if(l){const c=l.path;e(c)?(H2(i.eventLists_[a]),i.eventLists_[a]=null):r=!1}}r&&(i.eventLists_=[]),i.recursionDepth_--}function H2(i){for(let e=0;e<i.events.length;e++){const r=i.events[e];if(r!==null){i.events[e]=null;const a=r.getEventRunner();el&&mt("event: "+r.toString()),La(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="repo_interrupt",F2=25;class V2{constructor(e,r,a,l){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=a,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new q2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zc(),this.transactionQueueTree_=new Sm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function G2(i,e,r){if(i.stats_=nm(i.repoInfo_),i.forceRestClient_||ST())i.server_=new Pc(i.repoInfo_,(a,l,c,d)=>{_v(i,a,l,c,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>bv(i,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{st(r)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}i.persistentConnection_=new or(i.repoInfo_,e,(a,l,c,d)=>{_v(i,a,l,c,d)},a=>{bv(i,a)},a=>{Y2(i,a)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(a=>{i.server_.refreshAuthToken(a)}),i.appCheckProvider_.addTokenChangeListener(a=>{i.server_.refreshAppCheckToken(a.token)}),i.statsReporter_=OT(i.repoInfo_,()=>new CN(i.stats_,i.server_)),i.infoData_=new EN,i.infoSyncTree_=new yv({startListening:(a,l,c,d)=>{let m=[];const y=i.infoData_.getNode(a._path);return y.isEmpty()||(m=bl(i.infoSyncTree_,a._path,y),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),Om(i,"connected",!1),i.serverSyncTree_=new yv({startListening:(a,l,c,d)=>(i.server_.listen(a,c,l,(m,y)=>{const f=d(m,y);rn(i.eventQueue_,a._path,f)}),[]),stopListening:(a,l)=>{i.server_.unlisten(a,l)}})}function $2(i){const r=i.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function El(i){return C2({timestamp:$2(i)})}function _v(i,e,r,a,l){i.dataUpdateCount++;const c=new De(e);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,r):r;let d=[];if(l)if(a){const y=Ic(r,f=>Ye(f));d=w2(i.serverSyncTree_,c,y,l)}else{const y=Ye(r);d=Lb(i.serverSyncTree_,c,y,l)}else if(a){const y=Ic(r,f=>Ye(f));d=_2(i.serverSyncTree_,c,y)}else{const y=Ye(r);d=bl(i.serverSyncTree_,c,y)}let m=c;d.length>0&&(m=Ia(i,c)),rn(i.eventQueue_,m,d)}function bv(i,e){Om(i,"connected",e),e===!1&&W2(i)}function Y2(i,e){gt(e,(r,a)=>{Om(i,r,a)})}function Om(i,e,r){const a=new De("/.info/"+e),l=Ye(r);i.infoData_.updateSnapshot(a,l);const c=bl(i.infoSyncTree_,a,l);rn(i.eventQueue_,a,c)}function hu(i){return i.nextWriteId_++}function Q2(i,e,r){const a=E2(i.serverSyncTree_,e);return a!=null?Promise.resolve(a):i.server_.get(e).then(l=>{const c=Ye(l).withIndex(e._queryParams.getIndex());qh(i.serverSyncTree_,e,r,!0);let d;if(e._queryParams.loadsAllData())d=bl(i.serverSyncTree_,e._path,c);else{const m=fl(i.serverSyncTree_,e);d=Lb(i.serverSyncTree_,e._path,c,m)}return rn(i.eventQueue_,e._path,d),Qc(i.serverSyncTree_,e,r,null,!0),c},l=>(Pa(i,"get for query "+st(e)+" failed: "+l),Promise.reject(new Error(l))))}function K2(i,e,r,a,l){Pa(i,"set",{path:e.toString(),value:r,priority:a});const c=El(i),d=Ye(r,a),m=ou(i.serverSyncTree_,e),y=wm(d,m,c),f=hu(i),h=pm(i.serverSyncTree_,e,y,f,!0);fu(i.eventQueue_,h),i.server_.put(e.toString(),d.val(!0),(v,b)=>{const w=v==="ok";w||Rt("set at "+e+" failed: "+v);const S=Br(i.serverSyncTree_,f,!w);rn(i.eventQueue_,e,S),Yr(i,l,v,b)});const _=Dm(i,e);Ia(i,_),rn(i.eventQueue_,_,[])}function X2(i,e,r,a){Pa(i,"update",{path:e.toString(),value:r});let l=!0;const c=El(i),d={};if(gt(r,(m,y)=>{l=!1,d[m]=zb(Qe(e,m),Ye(y),i.serverSyncTree_,c)}),l)mt("update() called with empty data.  Don't do anything."),Yr(i,a,"ok",void 0);else{const m=hu(i),y=v2(i.serverSyncTree_,e,d,m);fu(i.eventQueue_,y),i.server_.merge(e.toString(),r,(f,h)=>{const _=f==="ok";_||Rt("update at "+e+" failed: "+f);const v=Br(i.serverSyncTree_,m,!_),b=v.length>0?Ia(i,e):e;rn(i.eventQueue_,b,v),Yr(i,a,f,h)}),gt(r,f=>{const h=Dm(i,Qe(e,f));Ia(i,h)}),rn(i.eventQueue_,e,[])}}function W2(i){Pa(i,"onDisconnectEvents");const e=El(i),r=zc();Ih(i.onDisconnect_,Ne(),(l,c)=>{const d=zb(l,c,i.serverSyncTree_,e);Ua(r,l,d)});let a=[];Ih(r,Ne(),(l,c)=>{a=a.concat(bl(i.serverSyncTree_,l,c));const d=Dm(i,l);Ia(i,d)}),i.onDisconnect_=zc(),rn(i.eventQueue_,Ne(),a)}function Z2(i,e,r){i.server_.onDisconnectCancel(e.toString(),(a,l)=>{a==="ok"&&kh(i.onDisconnect_,e),Yr(i,r,a,l)})}function xv(i,e,r,a){const l=Ye(r);i.server_.onDisconnectPut(e.toString(),l.val(!0),(c,d)=>{c==="ok"&&Ua(i.onDisconnect_,e,l),Yr(i,a,c,d)})}function J2(i,e,r,a,l){const c=Ye(r,a);i.server_.onDisconnectPut(e.toString(),c.val(!0),(d,m)=>{d==="ok"&&Ua(i.onDisconnect_,e,c),Yr(i,l,d,m)})}function eA(i,e,r,a){if(Oh(r)){mt("onDisconnect().update() called with empty data.  Don't do anything."),Yr(i,a,"ok",void 0);return}i.server_.onDisconnectMerge(e.toString(),r,(l,c)=>{l==="ok"&&gt(r,(d,m)=>{const y=Ye(m);Ua(i.onDisconnect_,Qe(e,d),y)}),Yr(i,a,l,c)})}function tA(i,e,r){let a;me(e._path)===".info"?a=qh(i.infoSyncTree_,e,r):a=qh(i.serverSyncTree_,e,r),Gb(i.eventQueue_,e._path,a)}function Vh(i,e,r){let a;me(e._path)===".info"?a=Qc(i.infoSyncTree_,e,r):a=Qc(i.serverSyncTree_,e,r),Gb(i.eventQueue_,e._path,a)}function Qb(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Yb)}function nA(i){i.persistentConnection_&&i.persistentConnection_.resume(Yb)}function Pa(i,...e){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),mt(r,...e)}function Yr(i,e,r,a){e&&La(()=>{if(r==="ok")e(null);else{const l=(r||"error").toUpperCase();let c=l;a&&(c+=": "+a);const d=new Error(c);d.code=l,e(d)}})}function rA(i,e,r,a,l,c){Pa(i,"transaction on "+e);const d={path:e,update:r,onComplete:a,status:null,order:$1(),applyLocally:c,retryCount:0,unwatcher:l,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=Rm(i,e,void 0);d.currentInputSnapshot=m;const y=d.update(m.val());if(y===void 0)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{wl("transaction failed: Data returned ",y,d.path),d.status=0;const f=uu(i.transactionQueueTree_,e),h=Oi(f)||[];h.push(d),Tm(f,h);let _;typeof y=="object"&&y!==null&&Rn(y,".priority")?(_=bi(y,".priority"),X(Am(_),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):_=(ou(i.serverSyncTree_,e)||oe.EMPTY_NODE).getPriority().val();const v=El(i),b=Ye(y,_),w=wm(b,m,v);d.currentOutputSnapshotRaw=b,d.currentOutputSnapshotResolved=w,d.currentWriteId=hu(i);const S=pm(i.serverSyncTree_,e,w,d.currentWriteId,d.applyLocally);rn(i.eventQueue_,e,S),mu(i,i.transactionQueueTree_)}}function Rm(i,e,r){return ou(i.serverSyncTree_,e,r)||oe.EMPTY_NODE}function mu(i,e=i.transactionQueueTree_){if(e||gu(i,e),Oi(e)){const r=Xb(i,e);X(r.length>0,"Sending zero length transaction queue"),r.every(l=>l.status===0)&&iA(i,xl(e),r)}else qb(e)&&du(e,r=>{mu(i,r)})}function iA(i,e,r){const a=r.map(f=>f.currentWriteId),l=Rm(i,e,a);let c=l;const d=l.hash();for(let f=0;f<r.length;f++){const h=r[f];X(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const _=Ot(e,h.path);c=c.updateChild(_,h.currentOutputSnapshotRaw)}const m=c.val(!0),y=e;i.server_.put(y.toString(),m,f=>{Pa(i,"transaction put response",{path:y.toString(),status:f});let h=[];if(f==="ok"){const _=[];for(let v=0;v<r.length;v++)r[v].status=2,h=h.concat(Br(i.serverSyncTree_,r[v].currentWriteId)),r[v].onComplete&&_.push(()=>r[v].onComplete(null,!0,r[v].currentOutputSnapshotResolved)),r[v].unwatcher();gu(i,uu(i.transactionQueueTree_,e)),mu(i,i.transactionQueueTree_),rn(i.eventQueue_,e,h);for(let v=0;v<_.length;v++)La(_[v])}else{if(f==="datastale")for(let _=0;_<r.length;_++)r[_].status===3?r[_].status=4:r[_].status=0;else{Rt("transaction at "+y.toString()+" failed: "+f);for(let _=0;_<r.length;_++)r[_].status=4,r[_].abortReason=f}Ia(i,e)}},d)}function Ia(i,e){const r=Kb(i,e),a=xl(r),l=Xb(i,r);return aA(i,l,a),a}function aA(i,e,r){if(e.length===0)return;const a=[];let l=[];const d=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const y=e[m],f=Ot(r,y.path);let h=!1,_;if(X(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)h=!0,_=y.abortReason,l=l.concat(Br(i.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=F2)h=!0,_="maxretry",l=l.concat(Br(i.serverSyncTree_,y.currentWriteId,!0));else{const v=Rm(i,y.path,d);y.currentInputSnapshot=v;const b=e[m].update(v.val());if(b!==void 0){wl("transaction failed: Data returned ",b,y.path);let w=Ye(b);typeof b=="object"&&b!=null&&Rn(b,".priority")||(w=w.updatePriority(v.getPriority()));const C=y.currentWriteId,j=El(i),L=wm(w,v,j);y.currentOutputSnapshotRaw=w,y.currentOutputSnapshotResolved=L,y.currentWriteId=hu(i),d.splice(d.indexOf(C),1),l=l.concat(pm(i.serverSyncTree_,y.path,L,y.currentWriteId,y.applyLocally)),l=l.concat(Br(i.serverSyncTree_,C,!0))}else h=!0,_="nodata",l=l.concat(Br(i.serverSyncTree_,y.currentWriteId,!0))}rn(i.eventQueue_,r,l),l=[],h&&(e[m].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[m].unwatcher),e[m].onComplete&&(_==="nodata"?a.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):a.push(()=>e[m].onComplete(new Error(_),!1,null))))}gu(i,i.transactionQueueTree_);for(let m=0;m<a.length;m++)La(a[m]);mu(i,i.transactionQueueTree_)}function Kb(i,e){let r,a=i.transactionQueueTree_;for(r=me(e);r!==null&&Oi(a)===void 0;)a=uu(a,r),e=Be(e),r=me(e);return a}function Xb(i,e){const r=[];return Wb(i,e,r),r.sort((a,l)=>a.order-l.order),r}function Wb(i,e,r){const a=Oi(e);if(a)for(let l=0;l<a.length;l++)r.push(a[l]);du(e,l=>{Wb(i,l,r)})}function gu(i,e){const r=Oi(e);if(r){let a=0;for(let l=0;l<r.length;l++)r[l].status!==2&&(r[a]=r[l],a++);r.length=a,Tm(e,r.length>0?r:void 0)}du(e,a=>{gu(i,a)})}function Dm(i,e){const r=xl(Kb(i,e)),a=uu(i.transactionQueueTree_,e);return M2(a,l=>{Yf(i,l)}),Yf(i,a),Hb(a,l=>{Yf(i,l)}),r}function Yf(i,e){const r=Oi(e);if(r){const a=[];let l=[],c=-1;for(let d=0;d<r.length;d++)r[d].status===3||(r[d].status===1?(X(c===d-1,"All SENT items should be at beginning of queue."),c=d,r[d].status=3,r[d].abortReason="set"):(X(r[d].status===0,"Unexpected transaction status in abort"),r[d].unwatcher(),l=l.concat(Br(i.serverSyncTree_,r[d].currentWriteId,!0)),r[d].onComplete&&a.push(r[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Tm(e,void 0):r.length=c+1,rn(i.eventQueue_,xl(e),l);for(let d=0;d<a.length;d++)La(a[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(i){let e="";const r=i.split("/");for(let a=0;a<r.length;a++)if(r[a].length>0){let l=r[a];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function lA(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const r of i.split("&")){if(r.length===0)continue;const a=r.split("=");a.length===2?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Rt(`Invalid query segment '${r}' in query '${i}'`)}return e}const wv=function(i,e){const r=oA(i),a=r.namespace;r.domain==="firebase.com"&&cr(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&r.domain!=="localhost"&&cr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||gT();const l=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new ab(r.host,r.secure,a,l,e,"",a!==r.subdomain),path:new De(r.pathString)}},oA=function(i){let e="",r="",a="",l="",c="",d=!0,m="https",y=443;if(typeof i=="string"){let f=i.indexOf("//");f>=0&&(m=i.substring(0,f-1),i=i.substring(f+2));let h=i.indexOf("/");h===-1&&(h=i.length);let _=i.indexOf("?");_===-1&&(_=i.length),e=i.substring(0,Math.min(h,_)),h<_&&(l=sA(i.substring(h,_)));const v=lA(i.substring(Math.min(i.length,_)));f=e.indexOf(":"),f>=0?(d=m==="https"||m==="wss",y=parseInt(e.substring(f+1),10)):f=e.length;const b=e.slice(0,f);if(b.toLowerCase()==="localhost")r="localhost";else if(b.split(".").length<=2)r=b;else{const w=e.indexOf(".");a=e.substring(0,w).toLowerCase(),r=e.substring(w+1),c=a}"ns"in v&&(c=v.ns)}return{host:e,port:y,domain:r,subdomain:a,secure:d,scheme:m,pathString:l,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,r,a,l){this.eventType=e,this.eventRegistration=r,this.snapshot=a,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+st(this.snapshot.exportVal())}}class Jb{constructor(e,r,a){this.eventRegistration=e,this.error=r,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,r){this._repo=e,this._path=r}cancel(){const e=new Bn;return Z2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vi("OnDisconnect.remove",this._path);const e=new Bn;return xv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vi("OnDisconnect.set",this._path),Fh("OnDisconnect.set",e,this._path);const r=new Bn;return xv(this._repo,this._path,e,r.wrapCallback(()=>{})),r.promise}setWithPriority(e,r){vi("OnDisconnect.setWithPriority",this._path),Fh("OnDisconnect.setWithPriority",e,this._path),B2("OnDisconnect.setWithPriority",r);const a=new Bn;return J2(this._repo,this._path,e,r,a.wrapCallback(()=>{})),a.promise}update(e){vi("OnDisconnect.update",this._path),Vb("OnDisconnect.update",e,this._path);const r=new Bn;return eA(this._repo,this._path,e,r.wrapCallback(()=>{})),r.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,r,a,l){this._repo=e,this._path=r,this._queryParams=a,this._orderByCalled=l}get key(){return ve(this._path)?null:im(this._path)}get ref(){return new _n(this._repo,this._path)}get _queryIdentifier(){const e=lv(this._queryParams),r=em(e);return r==="{}"?"default":r}get _queryObject(){return lv(this._queryParams)}isEqual(e){if(e=zt(e),!(e instanceof pu))return!1;const r=this._repo===e._repo,a=am(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return r&&a&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+ZT(this._path)}}class _n extends pu{constructor(e,r){super(e,r,new iu,!1)}get parent(){const e=mb(this._path);return e===null?null:new _n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qr{constructor(e,r,a){this._node=e,this.ref=r,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new De(e),a=hl(this.ref,e);return new Qr(this._node.getChild(r),a,Ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,l)=>e(new Qr(l,hl(this.ref,a),Ge)))}hasChild(e){const r=new De(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zt(i,e){return i=zt(i),i._checkNotDeleted("ref"),e!==void 0?hl(i._root,e):i._root}function hl(i,e){return i=zt(i),me(i._path)===null?P2("child","path",e):Cm("child","path",e),new _n(i._repo,Qe(i._path,e))}function tx(i){return i=zt(i),new ex(i._repo,i._path)}function Jt(i,e){i=zt(i),vi("set",i._path),Fh("set",e,i._path);const r=new Bn;return K2(i._repo,i._path,e,null,r.wrapCallback(()=>{})),r.promise}function cA(i,e){Vb("update",e,i._path);const r=new Bn;return X2(i._repo,i._path,e,r.wrapCallback(()=>{})),r.promise}function uA(i){i=zt(i);const e=new Mm(()=>{}),r=new Sl(e);return Q2(i._repo,i,r).then(a=>new Qr(a,new _n(i._repo,i._path),i._queryParams.getIndex()))}class Sl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const a=r._queryParams.getIndex();return new Zb("value",this,new Qr(e.snapshotNode,new _n(r._repo,r._path),a))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new Jb(this,e,r):null}matches(e){return e instanceof Sl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class jm{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new Jb(this,e,r):null}createEvent(e,r){X(e.childName!=null,"Child events should have a childName.");const a=hl(new _n(r._repo,r._path),e.childName),l=r._queryParams.getIndex();return new Zb(e.type,this,new Qr(e.snapshotNode,a,l),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof jm?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function dA(i,e,r,a,l){let c;if(typeof a=="object"&&(c=void 0,l=a),typeof a=="function"&&(c=a),l&&l.onlyOnce){const y=r,f=(h,_)=>{Vh(i._repo,i,m),y(h,_)};f.userCallback=r.userCallback,f.context=r.context,r=f}const d=new Mm(r,c||void 0),m=new Sl(d);return tA(i._repo,i,m),()=>Vh(i._repo,i,m)}function Pr(i,e,r,a){return dA(i,"value",e,r,a)}function nx(i,e,r){let a=null;const l=r?new Mm(r):null;e==="value"?a=new Sl(l):e&&(a=new jm(e,l)),Vh(i._repo,i,a)}u2(_n);g2(_n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="FIREBASE_DATABASE_EMULATOR_HOST",Gh={};let hA=!1;function mA(i,e,r,a){const l=e.lastIndexOf(":"),c=e.substring(0,l),d=Kh(c);i.repoInfo_=new ab(e,d,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,r),a&&(i.authTokenProvider_=a)}function rx(i,e,r,a,l){let c=a||i.options.databaseURL;c===void 0&&(i.options.projectId||cr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mt("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=wv(c,l),m=d.repoInfo,y;typeof process<"u"&&Fy&&(y=Fy[fA]),y?(c=`http://${y}?ns=${m.namespace}`,d=wv(c,l),m=d.repoInfo):d.repoInfo.secure;const f=new NT(i.name,i.options,e);z2("Invalid Firebase Database URL",d),ve(d.path)||cr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=pA(m,i,f,new TT(i,r));return new ix(h,i)}function gA(i,e){const r=Gh[e];(!r||r[i.key]!==i)&&cr(`Database ${e}(${i.repoInfo_}) has already been deleted.`),Qb(i),delete r[i.key]}function pA(i,e,r,a){let l=Gh[e.name];l||(l={},Gh[e.name]=l);let c=l[i.toURLString()];return c&&cr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new V2(i,hA,r,a),l[i.toURLString()]=c,c}class ix{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(G2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _n(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(gA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&cr("Cannot call "+e+" on a deleted database.")}}function ax(i=tu(),e){const r=Ni(i,"database").getImmediate({identifier:e});if(!r._instanceStarted){const a=j1("database");a&&sx(r,...a)}return r}function sx(i,e,r,a={}){i=zt(i),i._checkNotDeleted("useEmulator");const l=`${e}:${r}`,c=i._repoInternal;if(i._instanceStarted){if(l===i._repoInternal.repoInfo_.host&&k1(a,c.repoInfo_.emulatorOptions))return;cr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)a.mockUserToken&&cr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Mc(Mc.OWNER);else if(a.mockUserToken){const m=typeof a.mockUserToken=="string"?a.mockUserToken:I1(a.mockUserToken,i.app.options.projectId);d=new Mc(m)}Kh(e)&&(L1(e),U1("Database",!0)),mA(c,l,a,d)}function yA(i){i=zt(i),i._checkNotDeleted("goOffline"),Qb(i._repo)}function vA(i){i=zt(i),i._checkNotDeleted("goOnline"),nA(i._repo)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(i){V1(B1),Hr(new Fr("database",(e,{instanceIdentifier:r})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return rx(a,l,c,r)},"PUBLIC").setMultipleInstances(!0)),Pn(Vy,Gy,i),Pn(Vy,Gy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA={".sv":"timestamp"};function pn(){return bA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,r){this.committed=e,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function xA(i,e,r){if(i=zt(i),vi("Reference.transaction",i._path),i.key===".length"||i.key===".keys")throw"Reference.transaction failed: "+i.key+" is a read-only object.";const a=!0,l=new Bn,c=(m,y,f)=>{let h=null;m?l.reject(m):(h=new Qr(f,new _n(i._repo,i._path),Ge),l.resolve(new lx(y,h)))},d=Pr(i,()=>{});return rA(i._repo,i._path,e,c,d,a),l.promise}or.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};or.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};_A();const wA=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Qr,Database:ix,OnDisconnect:ex,TransactionResult:lx,_QueryImpl:pu,_QueryParams:iu,_ReferenceImpl:_n,_repoManagerDatabaseFromApp:rx,_setSDKVersion:V1,_validatePathString:Cm,_validateWritablePath:vi,child:hl,connectDatabaseEmulator:sx,get:uA,getDatabase:ax,goOffline:yA,goOnline:vA,off:nx,onDisconnect:tx,onValue:Pr,ref:Zt,runTransaction:xA,serverTimestamp:pn,set:Jt,update:cA},Symbol.toStringTag,{value:"Module"})),ox="@firebase/installations",km="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=1e4,ux=`w:${km}`,dx="FIS_v2",EA="https://firebaseinstallations.googleapis.com/v1",SA=3600*1e3,TA="installations",NA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Si=new Xh(TA,NA,AA);function fx(i){return i instanceof Zh&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx({projectId:i}){return`${EA}/projects/${i}/installations`}function mx(i){return{token:i.token,requestStatus:2,expiresIn:OA(i.expiresIn),creationTime:Date.now()}}async function gx(i,e){const a=(await e.json()).error;return Si.create("request-failed",{requestName:i,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function px({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function CA(i,{refreshToken:e}){const r=px(i);return r.append("Authorization",RA(e)),r}async function yx(i){const e=await i();return e.status>=500&&e.status<600?i():e}function OA(i){return Number(i.replace("s","000"))}function RA(i){return`${dx} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA({appConfig:i,heartbeatServiceProvider:e},{fid:r}){const a=hx(i),l=px(i),c=e.getImmediate({optional:!0});if(c){const f=await c.getHeartbeatsHeader();f&&l.append("x-firebase-client",f)}const d={fid:r,authVersion:dx,appId:i.appId,sdkVersion:ux},m={method:"POST",headers:l,body:JSON.stringify(d)},y=await yx(()=>fetch(a,m));if(y.ok){const f=await y.json();return{fid:f.fid||r,registrationStatus:2,refreshToken:f.refreshToken,authToken:mx(f.authToken)}}else throw await gx("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=/^[cdef][\w-]{21}$/,$h="";function kA(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const r=IA(i);return jA.test(r)?r:$h}catch{return $h}}function IA(i){return MA(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Map;function bx(i,e){const r=yu(i);xx(r,e),LA(r,e)}function xx(i,e){const r=_x.get(i);if(r)for(const a of r)a(e)}function LA(i,e){const r=UA();r&&r.postMessage({key:i,fid:e}),BA()}let _i=null;function UA(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=i=>{xx(i.data.key,i.data.fid)}),_i}function BA(){_x.size===0&&_i&&(_i.close(),_i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebase-installations-database",zA=1,Ti="firebase-installations-store";let Qf=null;function Im(){return Qf||(Qf=Wh(PA,zA,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Ti)}}})),Qf}async function Kc(i,e){const r=yu(i),l=(await Im()).transaction(Ti,"readwrite"),c=l.objectStore(Ti),d=await c.get(r);return await c.put(e,r),await l.done,(!d||d.fid!==e.fid)&&bx(i,e.fid),e}async function wx(i){const e=yu(i),a=(await Im()).transaction(Ti,"readwrite");await a.objectStore(Ti).delete(e),await a.done}async function vu(i,e){const r=yu(i),l=(await Im()).transaction(Ti,"readwrite"),c=l.objectStore(Ti),d=await c.get(r),m=e(d);return m===void 0?await c.delete(r):await c.put(m,r),await l.done,m&&(!d||d.fid!==m.fid)&&bx(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(i){let e;const r=await vu(i.appConfig,a=>{const l=qA(a),c=HA(i,l);return e=c.registrationPromise,c.installationEntry});return r.fid===$h?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function qA(i){const e=i||{fid:kA(),registrationStatus:0};return Ex(e)}function HA(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Si.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=FA(i,r);return{installationEntry:r,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:VA(i)}:{installationEntry:e}}async function FA(i,e){try{const r=await DA(i,e);return Kc(i.appConfig,r)}catch(r){throw fx(r)&&r.customData.serverCode===409?await wx(i.appConfig):await Kc(i.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function VA(i){let e=await Ev(i.appConfig);for(;e.registrationStatus===1;)await vx(100),e=await Ev(i.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await Lm(i);return a||r}return e}function Ev(i){return vu(i,e=>{if(!e)throw Si.create("installation-not-found");return Ex(e)})}function Ex(i){return GA(i)?{fid:i.fid,registrationStatus:0}:i}function GA(i){return i.registrationStatus===1&&i.registrationTime+cx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A({appConfig:i,heartbeatServiceProvider:e},r){const a=YA(i,r),l=CA(i,r),c=e.getImmediate({optional:!0});if(c){const f=await c.getHeartbeatsHeader();f&&l.append("x-firebase-client",f)}const d={installation:{sdkVersion:ux,appId:i.appId}},m={method:"POST",headers:l,body:JSON.stringify(d)},y=await yx(()=>fetch(a,m));if(y.ok){const f=await y.json();return mx(f)}else throw await gx("Generate Auth Token",y)}function YA(i,{fid:e}){return`${hx(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Um(i,e=!1){let r;const a=await vu(i.appConfig,c=>{if(!Sx(c))throw Si.create("not-registered");const d=c.authToken;if(!e&&XA(d))return c;if(d.requestStatus===1)return r=QA(i,e),c;{if(!navigator.onLine)throw Si.create("app-offline");const m=ZA(c);return r=KA(i,m),m}});return r?await r:a.authToken}async function QA(i,e){let r=await Sv(i.appConfig);for(;r.authToken.requestStatus===1;)await vx(100),r=await Sv(i.appConfig);const a=r.authToken;return a.requestStatus===0?Um(i,e):a}function Sv(i){return vu(i,e=>{if(!Sx(e))throw Si.create("not-registered");const r=e.authToken;return JA(r)?{...e,authToken:{requestStatus:0}}:e})}async function KA(i,e){try{const r=await $A(i,e),a={...e,authToken:r};return await Kc(i.appConfig,a),r}catch(r){if(fx(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await wx(i.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Kc(i.appConfig,a)}throw r}}function Sx(i){return i!==void 0&&i.registrationStatus===2}function XA(i){return i.requestStatus===2&&!WA(i)}function WA(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+SA}function ZA(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function JA(i){return i.requestStatus===1&&i.requestTime+cx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(i){const e=i,{installationEntry:r,registrationPromise:a}=await Lm(e);return a?a.catch(console.error):Um(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(i,e=!1){const r=i;return await nC(r),(await Um(r,e)).token}async function nC(i){const{registrationPromise:e}=await Lm(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(i){if(!i||!i.options)throw Kf("App Configuration");if(!i.name)throw Kf("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!i.options[r])throw Kf(r);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Kf(i){return Si.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="installations",iC="installations-internal",aC=i=>{const e=i.getProvider("app").getImmediate(),r=rC(e),a=Ni(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},sC=i=>{const e=i.getProvider("app").getImmediate(),r=Ni(e,Tx).getImmediate();return{getId:()=>eC(r),getToken:l=>tC(r,l)}};function lC(){Hr(new Fr(Tx,aC,"PUBLIC")),Hr(new Fr(iC,sC,"PRIVATE"))}lC();Pn(ox,km);Pn(ox,km,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="/firebase-messaging-sw.js",cC="/firebase-cloud-messaging-push-scope",Nx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uC="https://fcmregistrations.googleapis.com/v1",Ax="google.c.a.c_id",dC="google.c.a.c_l",fC="google.c.a.ts",hC="google.c.a.e",Tv=1e4;var Nv;(function(i){i[i.DATA_MESSAGE=1]="DATA_MESSAGE",i[i.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Nv||(Nv={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ml;(function(i){i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked"})(ml||(ml={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(i){const e=new Uint8Array(i);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mC(i){const e="=".repeat((4-i.length%4)%4),r=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(r),l=new Uint8Array(a.length);for(let c=0;c<a.length;++c)l[c]=a.charCodeAt(c);return l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="fcm_token_details_db",gC=5,Av="fcm_token_object_Store";async function pC(i){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(Xf))return null;let e=null;return(await Wh(Xf,gC,{upgrade:async(a,l,c,d)=>{if(l<2||!a.objectStoreNames.contains(Av))return;const m=d.objectStore(Av),y=await m.index("fcmSenderId").get(i);if(await m.clear(),!!y){if(l===2){const f=y;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:f.createTime??Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:ir(f.vapidKey)}}}else if(l===3){const f=y;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ir(f.auth),p256dh:ir(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ir(f.vapidKey)}}}else if(l===4){const f=y;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ir(f.auth),p256dh:ir(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ir(f.vapidKey)}}}}}})).close(),await Lf(Xf),await Lf("fcm_vapid_details_db"),await Lf("undefined"),yC(e)?e:null}function yC(i){if(!i||!i.subscriptionOptions)return!1;const{subscriptionOptions:e}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firebase-messaging-database",_C=1,gl="firebase-messaging-store";let Wf=null;function Cx(){return Wf||(Wf=Wh(vC,_C,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(gl)}}})),Wf}async function bC(i){const e=Ox(i),a=await(await Cx()).transaction(gl).objectStore(gl).get(e);if(a)return a;{const l=await pC(i.appConfig.senderId);if(l)return await Bm(i,l),l}}async function Bm(i,e){const r=Ox(i),l=(await Cx()).transaction(gl,"readwrite");return await l.objectStore(gl).put(e,r),await l.done,e}function Ox({appConfig:i}){return i.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Dt=new Xh("messaging","Messaging",xC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(i,e){const r=await zm(i),a=Rx(e),l={method:"POST",headers:r,body:JSON.stringify(a)};let c;try{c=await(await fetch(Pm(i.appConfig),l)).json()}catch(d){throw Dt.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(c.error){const d=c.error.message;throw Dt.create("token-subscribe-failed",{errorInfo:d})}if(!c.token)throw Dt.create("token-subscribe-no-token");return c.token}async function EC(i,e){const r=await zm(i),a=Rx(e.subscriptionOptions),l={method:"PATCH",headers:r,body:JSON.stringify(a)};let c;try{c=await(await fetch(`${Pm(i.appConfig)}/${e.token}`,l)).json()}catch(d){throw Dt.create("token-update-failed",{errorInfo:d?.toString()})}if(c.error){const d=c.error.message;throw Dt.create("token-update-failed",{errorInfo:d})}if(!c.token)throw Dt.create("token-update-no-token");return c.token}async function SC(i,e){const a={method:"DELETE",headers:await zm(i)};try{const c=await(await fetch(`${Pm(i.appConfig)}/${e}`,a)).json();if(c.error){const d=c.error.message;throw Dt.create("token-unsubscribe-failed",{errorInfo:d})}}catch(l){throw Dt.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function Pm({projectId:i}){return`${uC}/projects/${i}/registrations`}async function zm({appConfig:i,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function Rx({p256dh:i,auth:e,endpoint:r,vapidKey:a}){const l={web:{endpoint:r,auth:e,p256dh:i}};return a!==Nx&&(l.web.applicationPubKey=a),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10080*60*1e3;async function NC(i){const e=await CC(i.swRegistration,i.vapidKey),r={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:e.endpoint,auth:ir(e.getKey("auth")),p256dh:ir(e.getKey("p256dh"))},a=await bC(i.firebaseDependencies);if(a){if(OC(a.subscriptionOptions,r))return Date.now()>=a.createTime+TC?AC(i,{token:a.token,createTime:Date.now(),subscriptionOptions:r}):a.token;try{await SC(i.firebaseDependencies,a.token)}catch(l){console.warn(l)}return Cv(i.firebaseDependencies,r)}else return Cv(i.firebaseDependencies,r)}async function AC(i,e){try{const r=await EC(i.firebaseDependencies,e),a={...e,token:r,createTime:Date.now()};return await Bm(i.firebaseDependencies,a),r}catch(r){throw r}}async function Cv(i,e){const a={token:await wC(i,e),createTime:Date.now(),subscriptionOptions:e};return await Bm(i,a),a.token}async function CC(i,e){const r=await i.pushManager.getSubscription();return r||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mC(e)})}function OC(i,e){const r=e.vapidKey===i.vapidKey,a=e.endpoint===i.endpoint,l=e.auth===i.auth,c=e.p256dh===i.p256dh;return r&&a&&l&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(i){const e={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return RC(e,i),DC(e,i),MC(e,i),e}function RC(i,e){if(!e.notification)return;i.notification={};const r=e.notification.title;r&&(i.notification.title=r);const a=e.notification.body;a&&(i.notification.body=a);const l=e.notification.image;l&&(i.notification.image=l);const c=e.notification.icon;c&&(i.notification.icon=c)}function DC(i,e){e.data&&(i.data=e.data)}function MC(i,e){if(!e.fcmOptions&&!e.notification?.click_action)return;i.fcmOptions={};const r=e.fcmOptions?.link??e.notification?.click_action;r&&(i.fcmOptions.link=r);const a=e.fcmOptions?.analytics_label;a&&(i.fcmOptions.analyticsLabel=a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(i){return typeof i=="object"&&!!i&&Ax in i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(i){if(!i||!i.options)throw Zf("App Configuration Object");if(!i.name)throw Zf("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=i;for(const a of e)if(!r[a])throw Zf(a);return{appName:i.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function Zf(i){return Dt.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,r,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=kC(e);this.firebaseDependencies={app:e,appConfig:l,installations:r,analyticsProvider:a}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(i){try{i.swRegistration=await navigator.serviceWorker.register(oC,{scope:cC}),i.swRegistration.update().catch(()=>{}),await UC(i.swRegistration)}catch(e){throw Dt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function UC(i){return new Promise((e,r)=>{const a=setTimeout(()=>r(new Error(`Service worker not registered after ${Tv} ms`)),Tv),l=i.installing||i.waiting;i.active?(clearTimeout(a),e()):l?l.onstatechange=c=>{c.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),r(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(i,e){if(!e&&!i.swRegistration&&await LC(i),!(!e&&i.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Dt.create("invalid-sw-registration");i.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(i,e){e?i.vapidKey=e:i.vapidKey||(i.vapidKey=Nx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(i,e){if(!navigator)throw Dt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Dt.create("permission-blocked");return await PC(i,e?.vapidKey),await BC(i,e?.serviceWorkerRegistration),NC(i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(i,e,r){const a=HC(e);(await i.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:r[Ax],message_name:r[dC],message_time:r[fC],message_device_time:Math.floor(Date.now()/1e3)})}function HC(i){switch(i){case ml.NOTIFICATION_CLICKED:return"notification_open";case ml.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(i,e){const r=e.data;if(!r.isFirebaseMessaging)return;i.onMessageHandler&&r.messageType===ml.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(Ov(r)):i.onMessageHandler.next(Ov(r)));const a=r.data;jC(a)&&a[hC]==="1"&&await qC(i,r.messageType,a)}const Rv="@firebase/messaging",Dv="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=i=>{const e=new IC(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>FC(e,r)),e},GC=i=>{const e=i.getProvider("messaging").getImmediate();return{getToken:a=>zC(e,a)}};function $C(){Hr(new Fr("messaging",VC,"PUBLIC")),Hr(new Fr("messaging-internal",GC,"PRIVATE")),Pn(Rv,Dv),Pn(Rv,Dv,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(){try{await P1()}catch{return!1}return typeof window<"u"&&z1()&&q1()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(i=tu()){return Dx().then(e=>{if(!e)throw Dt.create("unsupported-browser")},e=>{throw Dt.create("indexed-db-unsupported")}),Ni(zt(i),"messaging").getImmediate()}$C();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="firebasestorage.googleapis.com",QC="storageBucket",KC=120*1e3,XC=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Zh{constructor(e,r,a=0){super(Jf(e),`Firebase Storage: ${r} (${Jf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zn;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zn||(zn={}));function Jf(i){return"storage/"+i}function WC(){const i="An unknown error occurred, please check the error payload for server response.";return new qn(zn.UNKNOWN,i)}function ZC(){return new qn(zn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JC(){return new qn(zn.CANCELED,"User canceled the upload/download.")}function eO(i){return new qn(zn.INVALID_URL,"Invalid URL '"+i+"'.")}function tO(i){return new qn(zn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Mv(i){return new qn(zn.INVALID_ARGUMENT,i)}function jx(){return new qn(zn.APP_DELETED,"The Firebase app was deleted.")}function nO(i){return new qn(zn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let a;try{a=Cn.makeFromUrl(e,r)}catch{return new Cn(e,"")}if(a.path==="")return a;throw tO(e)}static makeFromUrl(e,r){let a=null;const l="([A-Za-z0-9.\\-_]+)";function c(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+l+d,"i"),y={bucket:1,path:3};function f(Q){Q.path_=decodeURIComponent(Q.path)}const h="v[A-Za-z0-9_]+",_=r.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${_}/${h}/b/${l}/o${v}`,"i"),w={bucket:1,path:3},S=r===Mx?"(?:storage.googleapis.com|storage.cloud.google.com)":r,C="([^?#]*)",j=new RegExp(`^https?://${S}/${l}/${C}`,"i"),G=[{regex:m,indices:y,postModify:c},{regex:b,indices:w,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let Q=0;Q<G.length;Q++){const ae=G[Q],W=ae.regex.exec(e);if(W){const ee=W[ae.indices.bucket];let J=W[ae.indices.path];J||(J=""),a=new Cn(ee,J),ae.postModify(a);break}}if(a==null)throw eO(e);return a}}class rO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(i,e,r){let a=1,l=null,c=null,d=!1,m=0;function y(){return m===2}let f=!1;function h(...C){f||(f=!0,e.apply(null,C))}function _(C){l=setTimeout(()=>{l=null,i(b,y())},C)}function v(){c&&clearTimeout(c)}function b(C,...j){if(f){v();return}if(C){v(),h.call(null,C,...j);return}if(y()||d){v(),h.call(null,C,...j);return}a<64&&(a*=2);let G;m===1?(m=2,G=0):G=(a+Math.random())*1e3,_(G)}let w=!1;function S(C){w||(w=!0,v(),!f&&(l!==null?(C||(m=2),clearTimeout(l),_(0)):C||(m=1)))}return _(0),c=setTimeout(()=>{d=!0,S(!0)},r),S}function aO(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(i){return i!==void 0}function jv(i,e,r,a){if(a<e)throw Mv(`Invalid value for '${i}'. Expected ${e} or greater.`);if(a>r)throw Mv(`Invalid value for '${i}'. Expected ${r} or less.`)}function lO(i){const e=encodeURIComponent;let r="?";for(const a in i)if(i.hasOwnProperty(a)){const l=e(a)+"="+e(i[a]);r=r+l+"&"}return r=r.slice(0,-1),r}var Xc;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Xc||(Xc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(i,e){const r=i>=500&&i<600,l=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return r||l||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,r,a,l,c,d,m,y,f,h,_,v=!0,b=!1){this.url_=e,this.method_=r,this.headers_=a,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=_,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,S)=>{this.resolve_=w,this.reject_=S,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new Yo(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const y=m.loaded,f=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,f)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Xc.NO_ERROR,y=c.getStatus();if(!m||oO(y,this.additionalRetryCodes_)&&this.retry){const h=c.getErrorCode()===Xc.ABORT;a(!1,new Yo(!1,null,h));return}const f=this.successCodes_.indexOf(y)!==-1;a(!0,new Yo(f,c))})},r=(a,l)=>{const c=this.resolve_,d=this.reject_,m=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());sO(y)?c(y):c()}catch(y){d(y)}else if(m!==null){const y=WC();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(l.canceled){const y=this.appDelete_?jx():JC();d(y)}else{const y=ZC();d(y)}};this.canceled_?r(!1,new Yo(!1,null,!0)):this.backoffId_=iO(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yo{constructor(e,r,a){this.wasSuccessCode=e,this.connection=r,this.canceled=!!a}}function uO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function dO(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fO(i,e){e&&(i["X-Firebase-GMPID"]=e)}function hO(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function mO(i,e,r,a,l,c,d=!0,m=!1){const y=lO(i.urlParams),f=i.url+y,h=Object.assign({},i.headers);return fO(h,e),uO(h,r),dO(h,c),hO(h,a),new cO(f,i.method,h,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,l,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function pO(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,r){this._service=e,r instanceof Cn?this._location=r:this._location=Cn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Wc(e,r)}get root(){const e=new Cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pO(this._location.path)}get storage(){return this._service}get parent(){const e=gO(this._location.path);if(e===null)return null;const r=new Cn(this._location.bucket,e);return new Wc(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw nO(e)}}function kv(i,e){const r=e?.[QC];return r==null?null:Cn.makeFromBucketSpec(r,i)}function yO(i,e,r,a={}){i.host=`${e}:${r}`;const l=Kh(e);l&&(L1(`https://${i.host}/b`),U1("Storage",!0)),i._isUsingEmulator=!0,i._protocol=l?"https":"http";const{mockUserToken:c}=a;c&&(i._overrideAuthToken=typeof c=="string"?c:I1(c,i.app.options.projectId))}class vO{constructor(e,r,a,l,c,d=!1){this.app=e,this._authProvider=r,this._appCheckProvider=a,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=Mx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KC,this._maxUploadRetryTime=XC,this._requests=new Set,l!=null?this._bucket=Cn.makeFromBucketSpec(l,this._host):this._bucket=kv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cn.makeFromBucketSpec(this._url,e):this._bucket=kv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(D1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wc(this,e)}_makeRequest(e,r,a,l,c=!0){if(this._deleted)return new rO(jx());{const d=mO(e,this._appId,a,l,r,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,r){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,a,l).getPromise()}}const Iv="@firebase/storage",Lv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="storage";function _O(i=tu(),e){i=zt(i);const a=Ni(i,kx).getImmediate({identifier:e}),l=j1("storage");return l&&bO(a,...l),a}function bO(i,e,r,a={}){yO(i,e,r,a)}function xO(i,{instanceIdentifier:e}){const r=i.getProvider("app").getImmediate(),a=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal");return new vO(r,a,l,e,B1)}function wO(){Hr(new Fr(kx,xO,"PUBLIC").setMultipleInstances(!0)),Pn(Iv,Lv,""),Pn(Iv,Lv,"esm2020")}wO();const EO=()=>{const i="production",e=i==="development";return{environment:i,isDevelopment:e,isProduction:i==="production",isTesting:i==="testing",firebase:{apiKey:"AIzaSyB8Z4GdoLZsBW6bfmAh_BSTftpTRUXPZMw",authDomain:"erp-for-tsa.firebaseapp.com",databaseURL:"https://erp-for-tsa-default-rtdb.firebaseio.com",projectId:"erp-for-tsa",storageBucket:"erp-for-tsa.firebasestorage.app",messagingSenderId:"271232983905",appId:"1:271232983905:web:7d06c8f5ec269824759b20",measurementId:"G-6CYWPS4N0G"},api:{baseUrl:"https://erp-for-tsa.web.app/api",timeout:3e4,retries:3},app:{name:"TSA Production ERP",version:"1.0.0",enableMockData:e,autoRefreshInterval:parseInt("60000")},features:{enableDevTools:e,enablePWA:!0,enableAnalytics:!0,enableOfflineMode:!0,enablePushNotifications:!0,enableErrorReporting:!0,enablePerformanceMonitoring:!0,enableHotReload:e,useFirebaseEmulators:!1},logging:{level:"error",debugMode:e},build:{legacySupport:!0,sourcemap:e}}},Sn=EO(),SO=()=>{const i=[];return{valid:i.length===0,errors:i}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="analytics",TO="firebase_id",NO="origin",AO=60*1e3,CO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt=new R1("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nn=new Xh("analytics","Analytics",OO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(i){if(!i.startsWith(qm)){const e=nn.create("invalid-gtag-resource",{gtagURL:i});return Pt.warn(e.message),""}return i}function Ix(i){return Promise.all(i.map(e=>e.catch(r=>r)))}function DO(i,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(i,e)),r}function MO(i,e){const r=DO("firebase-js-sdk-policy",{createScriptURL:RO}),a=document.createElement("script"),l=`${qm}?l=${i}&id=${e}`;a.src=r?r?.createScriptURL(l):l,a.async=!0,document.head.appendChild(a)}function jO(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function kO(i,e,r,a,l,c){const d=a[l];try{if(d)await e[d];else{const y=(await Ix(r)).find(f=>f.measurementId===l);y&&await e[y.appId]}}catch(m){Pt.error(m)}i("config",l,c)}async function IO(i,e,r,a,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const m=await Ix(r);for(const y of d){const f=m.find(_=>_.measurementId===y),h=f&&e[f.appId];if(h)c.push(h);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",a,l||{})}catch(c){Pt.error(c)}}function LO(i,e,r,a){async function l(c,...d){try{if(c==="event"){const[m,y]=d;await IO(i,e,r,m,y)}else if(c==="config"){const[m,y]=d;await kO(i,e,r,a,m,y)}else if(c==="consent"){const[m,y]=d;i("consent",m,y)}else if(c==="get"){const[m,y,f]=d;i("get",m,y,f)}else if(c==="set"){const[m]=d;i("set",m)}else i(c,...d)}catch(m){Pt.error(m)}}return l}function UO(i,e,r,a,l){let c=function(...d){window[a].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=LO(c,i,e,r),{gtagCore:c,wrappedGtag:window[l]}}function BO(i){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(qm)&&r.src.includes(i))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=30,zO=1e3;class qO{constructor(e={},r=zO){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Lx=new qO;function HO(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function FO(i){const{appId:e,apiKey:r}=i,a={method:"GET",headers:HO(r)},l=CO.replace("{app-id}",e),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();m.error?.message&&(d=m.error.message)}catch{}throw nn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function VO(i,e=Lx,r){const{appId:a,apiKey:l,measurementId:c}=i.options;if(!a)throw nn.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:a};throw nn.create("no-api-key")}const d=e.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new YO;return setTimeout(async()=>{m.abort()},AO),Ux({appId:a,apiKey:l,measurementId:c},d,m,e)}async function Ux(i,{throttleEndTimeMillis:e,backoffCount:r},a,l=Lx){const{appId:c,measurementId:d}=i;try{await GO(a,e)}catch(m){if(d)return Pt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{const m=await FO(i);return l.deleteThrottleMetadata(c),m}catch(m){const y=m;if(!$O(y)){if(l.deleteThrottleMetadata(c),d)return Pt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:c,measurementId:d};throw m}const f=Number(y?.customData?.httpStatus)===503?Iy(r,l.intervalMillis,PO):Iy(r,l.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return l.setThrottleMetadata(c,h),Pt.debug(`Calling attemptFetch again in ${f} millis`),Ux(i,h,a,l)}}function GO(i,e){return new Promise((r,a)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(r,l);i.addEventListener(()=>{clearTimeout(c),a(nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $O(i){if(!(i instanceof Zh)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class YO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QO(i,e,r,a,l){if(l&&l.global){i("event",r,a);return}else{const c=await e,d={...a,send_to:c};i("event",r,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(){if(z1())try{await P1()}catch(i){return Pt.warn(nn.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return Pt.warn(nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function XO(i,e,r,a,l,c,d){const m=VO(i);m.then(v=>{r[v.measurementId]=v.appId,i.options.measurementId&&v.measurementId!==i.options.measurementId&&Pt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Pt.error(v)),e.push(m);const y=KO().then(v=>{if(v)return a.getId()}),[f,h]=await Promise.all([m,y]);BO(c)||MO(c,f.measurementId),l("js",new Date);const _=d?.config??{};return _[NO]="firebase",_.update=!0,h!=null&&(_[TO]=h),l("config",f.measurementId,_),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.app=e}_delete(){return delete al[this.app.options.appId],Promise.resolve()}}let al={},Uv=[];const Bv={};let eh="dataLayer",ZO="gtag",Pv,Bx,zv=!1;function JO(){const i=[];if(GS()&&i.push("This is a browser extension environment."),q1()||i.push("Cookies are not available."),i.length>0){const e=i.map((a,l)=>`(${l+1}) ${a}`).join(" "),r=nn.create("invalid-analytics-context",{errorInfo:e});Pt.warn(r.message)}}function eR(i,e,r){JO();const a=i.options.appId;if(!a)throw nn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Pt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nn.create("no-api-key");if(al[a]!=null)throw nn.create("already-exists",{id:a});if(!zv){jO(eh);const{wrappedGtag:c,gtagCore:d}=UO(al,Uv,Bv,eh,ZO);Bx=c,Pv=d,zv=!0}return al[a]=XO(i,Uv,Bv,e,Pv,eh,r),new WO(i)}function tR(i=tu()){i=zt(i);const e=Ni(i,Zc);return e.isInitialized()?e.getImmediate():nR(i)}function nR(i,e={}){const r=Ni(i,Zc);if(r.isInitialized()){const l=r.getImmediate();if(k1(e,r.getOptions()))return l;throw nn.create("already-initialized")}return r.initialize({options:e})}function rR(i,e,r,a){i=zt(i),QO(Bx,al[i.app.options.appId],e,r,a).catch(l=>Pt.error(l))}const qv="@firebase/analytics",Hv="0.10.18";function iR(){Hr(new Fr(Zc,(e,{options:r})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return eR(a,l,r)},"PUBLIC")),Hr(new Fr("analytics-internal",i,"PRIVATE")),Pn(qv,Hv),Pn(qv,Hv,"esm2020");function i(e){try{const r=e.getProvider(Zc).getImmediate();return{logEvent:(a,l,c)=>rR(r,a,l,c)}}catch(r){throw nn.create("interop-component-reg-failed",{reason:r})}}}iR();const th=SO();if(!th.valid)throw console.error("❌ Environment Configuration Errors:",th.errors),new Error(`Invalid production configuration: ${th.errors.join(", ")}`);const aR={apiKey:Sn.firebase.apiKey,authDomain:Sn.firebase.authDomain,databaseURL:Sn.firebase.databaseURL,projectId:Sn.firebase.projectId,storageBucket:Sn.firebase.storageBucket,messagingSenderId:Sn.firebase.messagingSenderId,appId:Sn.firebase.appId,measurementId:Sn.firebase.measurementId},za=$S(aR),Ve=YS(za),jc=QS(za),en=ax(za);_O(za);typeof window<"u"&&tR(za);typeof window<"u"&&Dx().then(i=>{i&&YC(za)});const _t={OPERATORS:"operators",SUPERVISORS:"supervisors",MANAGEMENT:"management",BUNDLES:"bundles",WORK_ASSIGNMENTS:"workAssignments",WORK_ITEMS:"workItems",WORK_COMPLETIONS:"workCompletions",WIP_ENTRIES:"wipEntries",WIP_ROLLS:"wipRolls",ASSIGNMENT_HISTORY:"assignmentHistory",QUALITY_ISSUES:"qualityIssues",PRODUCTION_STATS:"productionStats",EFFICIENCY_LOGS:"efficiencyLogs",OPERATOR_EARNINGS:"operatorEarnings",NOTIFICATIONS:"notifications",DAILY_REPORTS:"dailyReports",LINE_STATUS:"lineStatus",SIZE_CONFIGS:"sizeConfigs",MACHINE_CONFIGS:"machineConfigs",ARTICLE_TEMPLATES:"articleTemplates",DELETED_TEMPLATES:"deletedTemplates",SYSTEM_SETTINGS:"systemSettings",WAGE_RECORDS:"wageRecords",USERS:"users",USER_ACTIVITIES:"user_activities",SYSTEM_ACTIVITIES:"system_activities",DAMAGE_REPORTS:"damage_reports",DAMAGE_NOTIFICATIONS:"damage_notifications",OPERATOR_WALLETS:"operatorWallets",PRODUCTION_BUNDLES:"production_bundles",BUNDLE_OPERATIONS:"bundle_operations",PARTS_COMPLAINTS:"parts_complaints",BUNDLE_TRACKING:"bundle_tracking"},yn={OPERATOR_STATUS:"operator_status",WORK_PROGRESS:"work_progress",STATION_STATUS:"station_status",LIVE_METRICS:"live_metrics",NOTIFICATIONS:"notifications",SYSTEM_HEALTH:"system_health",ACTIVE_SESSIONS:"active_sessions",AVAILABLE_WORK:"available_work",LINE_BALANCING:"line_balancing"},sR={retryDelay:2e3,heartbeatInterval:3e4};console.log("🚀 Using live Firebase services in production mode");const Fv=Object.freeze(Object.defineProperty({__proto__:null,COLLECTIONS:_t,REALTIME_CONFIG:sR,RT_PATHS:yn,auth:jc,db:Ve,rtdb:en},Symbol.toStringTag,{value:"Module"}));class lR{collectionName="trusted_devices";deviceKey="tsaerp_device_id";minLoginCount=3;maxTrustedDevices=5;trustExpireDays=30;generateDeviceFingerprint(){return{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,localStorage:typeof Storage<"u"}}getCurrentDeviceId(){let e=localStorage.getItem(this.deviceKey);return e||(e="device_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem(this.deviceKey,e)),e}async getTrustedDevices(){const e=bt.get("trusted_devices_all");if(e)return console.log("📦 Retrieved trusted devices from cache"),e;try{const r=Ir(Ve,this.collectionName),l=(await Lr(Et(r,Js("lastLoginDate","desc")))).docs.map(c=>({id:c.id,...c.data(),firstSeenDate:c.data().firstSeenDate?.toDate()||new Date,lastLoginDate:c.data().lastLoginDate?.toDate()||new Date,loginHistory:c.data().loginHistory?.map(d=>({...d,timestamp:d.timestamp?.toDate()||new Date}))||[]}));return bt.set("trusted_devices_all",l,300*1e3,"high"),console.log("🔥 Loaded trusted devices from Firebase and cached"),l}catch(r){return console.error("Error loading trusted devices from Firebase:",r),[]}}async getTrustedDevicesForOperator(e){const r=bt.get("trusted_devices_operator",{operatorId:e});if(r)return console.log(`📦 Retrieved trusted devices for ${e} from cache`),r;try{const a=Ir(Ve,this.collectionName),l=Et(a,Ut("operatorId","==",e),Ut("isActive","==",!0),Js("lastLoginDate","desc")),d=(await Lr(l)).docs.map(m=>({id:m.id,...m.data(),firstSeenDate:m.data().firstSeenDate?.toDate()||new Date,lastLoginDate:m.data().lastLoginDate?.toDate()||new Date,loginHistory:m.data().loginHistory?.map(y=>({...y,timestamp:y.timestamp?.toDate()||new Date}))||[]}));return bt.set("trusted_devices_operator",d,180*1e3,"medium",{operatorId:e}),console.log(`🔥 Loaded trusted devices for ${e} from Firebase and cached`),d}catch(a){return console.error("Error loading trusted devices for operator:",a),[]}}async isDeviceTrusted(e){try{const r=this.getCurrentDeviceId(),a=Ir(Ve,this.collectionName),l=Et(a,Ut("deviceId","==",r),Ut("operatorId","==",e),Ut("isTrusted","==",!0),Ut("isActive","==",!0)),c=await Lr(l);if(c.empty)return!1;const d=c.docs[0].data();return(Date.now()-(d.lastLoginDate?.toDate?.()||d.lastLoginDate).getTime())/(1e3*60*60*24)>this.trustExpireDays?(await this.revokeTrust(e,r),!1):!0}catch(r){return console.error("Error checking device trust:",r),!1}}async getTrustedDevice(e){try{const r=this.getCurrentDeviceId(),a=Ir(Ve,this.collectionName),l=Et(a,Ut("deviceId","==",r),Ut("operatorId","==",e)),c=await Lr(l);if(c.empty)return null;const d=c.docs[0];return{id:d.id,...d.data(),firstSeenDate:d.data().firstSeenDate?.toDate()||new Date,lastLoginDate:d.data().lastLoginDate?.toDate()||new Date,loginHistory:d.data().loginHistory?.map(m=>({...m,timestamp:m.timestamp?.toDate()||new Date}))||[]}}catch(r){return console.error("Error getting trusted device:",r),null}}async recordLogin(e,r,a,l){try{const c=this.getCurrentDeviceId(),d={timestamp:new Date,success:a,ipAddress:l,operatorId:e},m=await this.getTrustedDevice(e);if(m&&m.id){const y=[...m.loginHistory||[],d],f=m.loginCount+(a?1:0),h=a&&f>=this.minLoginCount;await Aa(tn(Ve,this.collectionName,m.id),{lastLoginDate:lr(),loginCount:f,loginHistory:y.map(_=>({..._,timestamp:Tn.fromDate(_.timestamp)})),isTrusted:h||m.isTrusted,isActive:!0}),bt.invalidatePattern("trusted_devices_*"),console.log(`✅ Updated existing device for ${r}. Trusted: ${h||m.isTrusted}`)}else{const y=this.generateDeviceFingerprint(),f=this.parseUserAgent(navigator.userAgent),h={deviceId:c,operatorId:e,operatorName:r,deviceFingerprint:y,deviceInfo:f,firstSeenDate:new Date,lastLoginDate:new Date,loginCount:a?1:0,loginHistory:[d],isTrusted:!1,isActive:!0};await KS(Ir(Ve,this.collectionName),{...h,firstSeenDate:lr(),lastLoginDate:lr(),loginHistory:h.loginHistory.map(_=>({..._,timestamp:Tn.fromDate(_.timestamp)}))}),bt.invalidatePattern("trusted_devices_*"),console.log(`✅ Created new device entry for ${r}`)}}catch(c){console.error("Error recording login:",c)}}async grantTrust(e){try{const r=await this.getTrustedDevice(e);return!r||!r.id?!1:(await Aa(tn(Ve,this.collectionName,r.id),{isTrusted:!0,isActive:!0}),bt.invalidatePattern("trusted_devices_*"),console.log(`✅ Granted trust to device for operator ${e}`),!0)}catch(r){return console.error("Error granting trust:",r),!1}}async revokeTrust(e,r){try{let a,l;r?(a=e,l=r):(a=e,l=this.getCurrentDeviceId());const c=Ir(Ve,this.collectionName),d=Et(c,Ut("deviceId","==",l),Ut("operatorId","==",a)),m=await Lr(d);if(m.empty)return!1;const y=m.docs[0];return await Aa(y.ref,{isTrusted:!1}),bt.invalidatePattern("trusted_devices_*"),console.log(`✅ Revoked trust from device for operator ${a}`),!0}catch(a){return console.error("Error revoking trust:",a),!1}}async removeDevice(e,r){try{const a=Ir(Ve,this.collectionName),l=Et(a,Ut("deviceId","==",e),Ut("operatorId","==",r)),c=await Lr(l);return c.empty?!1:(await H1(c.docs[0].ref),bt.invalidatePattern("trusted_devices_*"),console.log(`✅ Removed device ${e} for operator ${r}`),!0)}catch(a){return console.error("Error removing device:",a),!1}}parseUserAgent(e){const r=this.detectBrowser(e),a=this.detectOS(e),l=this.detectDevice(e);return{browser:r,os:a,device:l}}detectBrowser(e){return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":e.includes("Opera")?"Opera":"Unknown"}detectOS(e){return e.includes("Windows")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":"Unknown"}detectDevice(e){return e.includes("Mobile")?"Mobile":e.includes("Tablet")?"Tablet":"Desktop"}async getDeviceStatistics(){try{const e=await this.getTrustedDevices(),r=new Date,a=new Date(r.getTime()-1440*60*1e3);return{totalDevices:e.length,trustedDevices:e.filter(l=>l.isTrusted).length,activeDevices:e.filter(l=>l.isActive).length,recentLogins:e.filter(l=>l.lastLoginDate>a).length}}catch(e){return console.error("Error getting device statistics:",e),{totalDevices:0,trustedDevices:0,activeDevices:0,recentLogins:0}}}async getDeviceStats(e){try{const r=await this.getTrustedDevice(e);if(!r)return{isTrusted:!1,successfulLogins:0,loginCount:0,lastLoginDate:null,deviceExists:!1};const a=r.loginHistory.filter(l=>l.success).length;return{isTrusted:r.isTrusted,successfulLogins:a,loginCount:r.loginCount,lastLoginDate:r.lastLoginDate,deviceExists:!0}}catch(r){return console.error("Error getting device stats:",r),null}}async recordLoginAttempt(e,r,a,l){return this.recordLogin(e,r,a,l)}async performTrustedLogin(e){try{if(!await this.isDeviceTrusted(e))return console.log(`🚫 Device not trusted for operator ${e}`),!1;const a=await this.getTrustedDevice(e);return a?(await this.recordLogin(e,a.operatorName,!0),console.log(`✅ Auto-login successful for trusted device - ${a.operatorName}`),!0):!1}catch(r){return console.error("Error performing trusted login:",r),!1}}}const Yh=new lR,oR=Object.freeze(Object.defineProperty({__proto__:null,trustedDeviceService:Yh},Symbol.toStringTag,{value:"Module"}));class cR{pendingUpdates=new Map;confirmedUpdates=new Map;failedUpdates=new Map;callbacks=new Map;retryTimeouts=new Map;async applyOptimisticUpdate(e,r,a,l,c,d,m,y){const f={id:e,type:r,collection:a,documentId:l,data:c,originalData:d,timestamp:Date.now(),retryCount:0,maxRetries:3,status:"pending"};this.pendingUpdates.set(e,f),y&&this.callbacks.set(e,y);try{const h=await m();this.confirmUpdate(e,h)}catch(h){this.handleUpdateError(e,h)}}confirmUpdate(e,r){const a=this.pendingUpdates.get(e);if(!a)return;a.status="confirmed",this.pendingUpdates.delete(e),this.confirmedUpdates.set(e,a),this.clearRetryTimeout(e),this.callbacks.get(e)?.onSuccess?.(a),setTimeout(()=>{this.confirmedUpdates.delete(e),this.callbacks.delete(e)},3e4),console.log(`Optimistic update confirmed: ${e}`)}handleUpdateError(e,r){const a=this.pendingUpdates.get(e);if(a)if(a.retryCount++,a.retryCount<=a.maxRetries){const l=1e3*Math.pow(2,a.retryCount-1),c=setTimeout(async()=>{console.log(`Retrying optimistic update: ${e} (attempt ${a.retryCount})`);try{this.markUpdateAsFailed(e,r)}catch(d){this.handleUpdateError(e,d)}},l);this.retryTimeouts.set(e,c)}else this.markUpdateAsFailed(e,r)}markUpdateAsFailed(e,r){const a=this.pendingUpdates.get(e);if(!a)return;a.status="failed",this.pendingUpdates.delete(e),this.failedUpdates.set(e,a),this.clearRetryTimeout(e),this.callbacks.get(e)?.onError?.(a,r),setTimeout(()=>{this.failedUpdates.has(e)&&this.revertUpdate(e)},1e4),console.error(`Optimistic update failed: ${e}`,r)}revertUpdate(e){const r=this.failedUpdates.get(e)||this.pendingUpdates.get(e);return r?(r.status="reverted",this.failedUpdates.delete(e),this.pendingUpdates.delete(e),this.clearRetryTimeout(e),this.callbacks.get(e)?.onRevert?.(r),setTimeout(()=>{this.callbacks.delete(e)},1e3),console.log(`Optimistic update reverted: ${e}`),!0):!1}getUpdateStatus(e){return this.pendingUpdates.get(e)||this.confirmedUpdates.get(e)||this.failedUpdates.get(e)||null}getPendingUpdates(){return Array.from(this.pendingUpdates.values())}getFailedUpdates(){return Array.from(this.failedUpdates.values())}hasPendingUpdates(){return this.pendingUpdates.size>0}getStats(){return{pending:this.pendingUpdates.size,confirmed:this.confirmedUpdates.size,failed:this.failedUpdates.size,totalRetries:Array.from(this.pendingUpdates.values()).reduce((e,r)=>e+r.retryCount,0)}}clearRetryTimeout(e){const r=this.retryTimeouts.get(e);r&&(clearTimeout(r),this.retryTimeouts.delete(e))}cancelUpdate(e){return this.pendingUpdates.get(e)?(this.pendingUpdates.delete(e),this.clearRetryTimeout(e),this.callbacks.delete(e),console.log(`Optimistic update cancelled: ${e}`),!0):!1}async retryFailedUpdate(e){const r=this.failedUpdates.get(e);return r?(this.failedUpdates.delete(e),r.status="pending",r.retryCount=0,this.pendingUpdates.set(e,r),console.log(`Manually retrying update: ${e}`),!0):!1}clearFailedUpdates(){this.failedUpdates.clear(),console.log("All failed updates cleared")}cleanup(){for(const e of this.retryTimeouts.values())clearTimeout(e);this.pendingUpdates.clear(),this.confirmedUpdates.clear(),this.failedUpdates.clear(),this.callbacks.clear(),this.retryTimeouts.clear(),console.log("Optimistic updates service cleaned up")}subscribeToStatusChanges(e,r){return()=>{}}generateUpdateId(e="opt"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const Vv=new cR;class uR{userId=null;connectionRef=null;status={isOnline:!1,lastSeen:0,reconnectAttempts:0,latency:null};callbacks={};heartbeatInterval=null;latencyCheckInterval=null;reconnectTimeouts=[];initialize(e,r={}){this.userId=e,this.callbacks=r,this.setupConnectionMonitoring(),this.setupHeartbeat(),this.setupLatencyMonitoring(),console.log(`Connection monitor initialized for user: ${e}`)}setupConnectionMonitoring(){if(!this.userId)return;const e=Zt(en,".info/connected");Pr(e,r=>{r.val()===!0?this.handleConnection():this.handleDisconnection()}),this.connectionRef=Zt(en,`${yn.ACTIVE_SESSIONS}/${this.userId}`),Jt(this.connectionRef,{status:"online",lastSeen:pn(),userAgent:navigator.userAgent,timestamp:Date.now()}),tx(this.connectionRef).set({status:"offline",lastSeen:pn(),timestamp:Date.now()})}handleConnection(){this.status.isOnline=!0,this.status.reconnectAttempts=0,this.reconnectTimeouts.forEach(e=>clearTimeout(e)),this.reconnectTimeouts=[],this.connectionRef&&this.userId&&Jt(this.connectionRef,{status:"online",lastSeen:pn(),timestamp:Date.now()}),this.callbacks.onConnectionChange?.(this.status),this.callbacks.onReconnect?.(),console.log("Firebase connection established")}handleDisconnection(){this.status.isOnline=!1,this.status.lastSeen=Date.now(),this.callbacks.onConnectionChange?.(this.status),this.callbacks.onDisconnect?.(),this.attemptReconnection(),console.log("Firebase connection lost")}attemptReconnection(){if(this.status.reconnectAttempts>=10){console.log("Max reconnection attempts reached");return}const a=1e3*Math.pow(2,this.status.reconnectAttempts);this.status.reconnectAttempts++;const l=setTimeout(()=>{this.status.isOnline||(console.log(`Reconnection attempt ${this.status.reconnectAttempts}`),this.callbacks.onConnectionChange?.(this.status),this.attemptReconnection())},a);this.reconnectTimeouts.push(l)}setupHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.status.isOnline&&this.connectionRef&&Jt(this.connectionRef,{status:"online",lastSeen:pn(),timestamp:Date.now()}).catch(e=>{console.warn("Heartbeat failed:",e)})},3e4)}setupLatencyMonitoring(){this.latencyCheckInterval=setInterval(()=>{this.measureLatency()},6e4)}async measureLatency(){if(!this.status.isOnline)return this.status.latency=null,-1;try{const e=Date.now(),r=Zt(en,`${yn.SYSTEM_HEALTH}/latency_test`);return await Jt(r,e),new Promise(a=>{const l=Pr(r,c=>{if(c.val()===e){const m=Date.now()-e;this.status.latency=m,this.callbacks.onConnectionChange?.(this.status),l(),a(m)}});setTimeout(()=>{this.status.latency=null,l(),a(-1)},1e4)})}catch(e){return console.warn("Latency measurement failed:",e),this.status.latency=null,-1}}getStatus(){return{...this.status}}isOnline(){return this.status.isOnline}async checkConnection(){try{return await this.measureLatency(),this.status.isOnline&&this.status.latency!==null}catch{return!1}}updateActivity(){this.status.isOnline&&this.connectionRef&&Jt(this.connectionRef,{status:"online",lastSeen:pn(),lastActivity:Date.now(),timestamp:Date.now()}).catch(e=>{console.warn("Failed to update activity:",e)})}setUserStatus(e){this.connectionRef&&Jt(this.connectionRef,{status:e,lastSeen:pn(),timestamp:Date.now()}).catch(r=>{console.warn("Failed to set user status:",r)})}cleanup(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.latencyCheckInterval&&(clearInterval(this.latencyCheckInterval),this.latencyCheckInterval=null),this.reconnectTimeouts.forEach(e=>clearTimeout(e)),this.reconnectTimeouts=[],this.connectionRef&&Jt(this.connectionRef,{status:"offline",lastSeen:pn(),timestamp:Date.now()}).catch(()=>{}),console.log("Connection monitor cleaned up")}subscribeToUserStatus(e,r){const a=Zt(en,`${yn.ACTIVE_SESSIONS}/${e}`);return Pr(a,c=>{const d=c.exists()?c.val():null;r(d)})}subscribeToOnlineUsers(e){const r=Zt(en,yn.ACTIVE_SESSIONS);return Pr(r,l=>{const c=l.val()||{},d=Object.entries(c).filter(([m,y])=>y?.status==="online").map(([m,y])=>({userId:m,...y}));e(d)})}}const dR=new uR;class Ur{collectionName;cache;cacheTimeout=300*1e3;constructor(e){this.collectionName=e,this.cache=new Map}getCollection(){return Ir(Ve,this.collectionName)}getDocRef(e){return tn(Ve,this.collectionName,e)}validateObject(e){if(e==null)return null;if(Array.isArray(e))return e.map(r=>this.validateObject(r)).filter(r=>r!==void 0);if(typeof e=="object"){const r={};return Object.entries(e).forEach(([a,l])=>{if(l!==void 0){const c=this.validateObject(l);c!==void 0&&(r[a]=c)}}),r}return e}async create(e,r){try{const a={...e,createdAt:Tn.now(),updatedAt:Tn.now()},l=this.validateObject(a),c=r?this.getDocRef(r):tn(this.getCollection());return await XS(c,l),this.invalidateCache(),{success:!0,data:{...a,id:c.id},id:c.id}}catch(a){return console.error(`Error creating document in ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async getById(e,r=!0){try{if(r){const c=this.getFromCache(e);if(c)return{success:!0,data:c}}const a=this.getDocRef(e),l=await Zs(a);if(l.exists()){const c={id:l.id,...l.data()};return r&&this.setCache(e,c),{success:!0,data:c}}else return{success:!1,error:"Document not found"}}catch(a){return console.error(`Error getting document ${e} from ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async update(e,r){try{const a=this.getDocRef(e),l={...r,updatedAt:Tn.now()};return await Aa(a,l),this.cache.delete(e),await this.getById(e,!1)}catch(a){return console.error(`Error updating document ${e} in ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async delete(e){try{const r=this.getDocRef(e);return await H1(r),this.cache.delete(e),this.invalidateCache(),{success:!0}}catch(r){return console.error(`Error deleting document ${e} from ${this.collectionName}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getAll(e){try{let r=Et(this.getCollection());return e?.orderByField&&(r=Et(r,Js(e.orderByField,e.orderDirection||"asc"))),e?.limitCount&&(r=Et(r,Uf(e.limitCount))),{success:!0,data:(await Lr(r)).docs.map(c=>({id:c.id,...c.data()}))}}catch(r){return console.error(`Error getting all documents from ${this.collectionName}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getWhere(e,r){try{let a=Et(this.getCollection(),Ut(e.field,e.operator,e.value));return r?.orderByField&&(a=Et(a,Js(r.orderByField,r.orderDirection||"asc"))),r?.limitCount&&(a=Et(a,Uf(r.limitCount))),{success:!0,data:(await Lr(a)).docs.map(d=>({id:d.id,...d.data()}))}}catch(a){return console.error(`Error querying documents from ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async batchCreate(e){try{const r=Rh(Ve);return e.forEach(({id:a,data:l})=>{const c={...l,createdAt:Tn.now(),updatedAt:Tn.now()},d=a?this.getDocRef(a):tn(this.getCollection());r.set(d,c)}),await r.commit(),this.invalidateCache(),{success:!0}}catch(r){return console.error(`Error batch creating documents in ${this.collectionName}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}subscribeToDocument(e,r){const a=this.getDocRef(e);return Ly(a,l=>{if(l.exists()){const c={id:l.id,...l.data()};this.setCache(e,c),r(c)}else r(null)},l=>{console.error(`Error subscribing to document ${e}:`,l),r(null)})}subscribeToCollection(e,r,a){let l=Et(this.getCollection());return r&&(l=Et(l,Ut(r.field,r.operator,r.value))),a?.orderByField&&(l=Et(l,Js(a.orderByField,a.orderDirection||"asc"))),a?.limitCount&&(l=Et(l,Uf(a.limitCount))),Ly(l,c=>{const d=c.docs.map(m=>({id:m.id,...m.data()}));e(d)},c=>{console.error(`Error subscribing to collection ${this.collectionName}:`,c),e([])})}getFromCache(e){const r=this.cache.get(e);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.data:(r&&this.cache.delete(e),null)}setCache(e,r){this.cache.set(e,{data:r,timestamp:Date.now()})}invalidateCache(e){if(e)for(const r of this.cache.keys())r.includes(e)&&this.cache.delete(r);else this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}async atomicUpdate(e,r,a=3){try{const l=this.getDocRef(e),c=await WS(Ve,async d=>{const m=await d.get(l),y=m.exists()?{id:m.id,...m.data()}:null,f=r(y);if(f===null)return null;const h={...f,updatedAt:lr()};return d.set(l,h),f});return c?(this.cache.delete(e),{success:!0,data:c,message:"Atomic update successful"}):{success:!1,error:"Transaction aborted",code:"TRANSACTION_ABORTED"}}catch(l){return a>0&&l instanceof Error&&l.message.includes("aborted")?(await new Promise(c=>setTimeout(c,100*(4-a))),this.atomicUpdate(e,r,a-1)):(console.error(`Atomic update failed for ${e}:`,l),{success:!1,error:l instanceof Error?l.message:"Transaction failed",code:"ATOMIC_UPDATE_FAILED"})}}async optimisticUpdate(e,r,a){const l=Vv.generateUpdateId("service");try{const c=await this.getById(e,!1),d=c.success?c.data:void 0;await Vv.applyOptimisticUpdate(l,"update",this.collectionName,e,r,d,a);const m={...d,...r};return this.setCache(e,m),{success:!0,data:m,message:"Optimistic update applied"}}catch(c){return console.error(`Optimistic update failed for ${e}:`,c),{success:!1,error:c instanceof Error?c.message:"Optimistic update failed",code:"OPTIMISTIC_UPDATE_FAILED"}}}async withRetry(e,r=3,a=1e3){let l;for(let c=0;c<=r;c++)try{return await e()}catch(d){if(l=d instanceof Error?d:new Error("Unknown error"),c===r)break;const m=a*Math.pow(2,c);await new Promise(y=>setTimeout(y,m)),console.warn(`Retry attempt ${c+1}/${r} after ${m}ms`)}throw l}async ensureConnection(){return dR.isOnline()?!0:(console.warn("Offline mode - operation queued"),!1)}async createWithValidation(e,r,a){if(r){const c=r(e);if(!c.isValid)return{success:!1,error:c.errors.join(", "),code:"VALIDATION_ERROR"}}return await this.ensureConnection()?this.create(e,a):{success:!1,error:"No network connection",code:"NETWORK_ERROR"}}}function nh(i){return i==null?[]:Array.isArray(i)?i:[i]}function _a(i,e=""){return i==null?e:String(i)}function ba(i,e=0){if(i==null)return e;const r=Number(i);return isNaN(r)?e:r}function fR(i){return i?{...i,name:_a(i.name,"Unknown"),employeeId:_a(i.employeeId,"N/A"),email:_a(i.email,""),phone:_a(i.phone,""),address:_a(i.address,""),machineTypes:nh(i.machineTypes),specializations:nh(i.specializations),currentAssignments:nh(i.currentAssignments),averageEfficiency:ba(i.averageEfficiency,0),qualityScore:ba(i.qualityScore,85),totalPieces:ba(i.totalPieces,0),completedBundles:ba(i.completedBundles,0),totalEarnings:ba(i.totalEarnings,0),maxConcurrentWork:ba(i.maxConcurrentWork,1),isActive:i.isActive!==!1,availabilityStatus:i.availabilityStatus||"available",primaryMachine:_a(i.primaryMachine,""),skillLevel:i.skillLevel||"intermediate"}:null}class Px extends Ur{constructor(){super(_t.OPERATORS)}async createOperator(e){try{const r=this.validateOperatorData(e);if(!r.isValid)return{success:!1,error:r.errors.join(", "),code:"VALIDATION_ERROR"};let a=e.employeeId;if(!a){const{IDGenerationService:b}=await ue(async()=>{const{IDGenerationService:w}=await import("./id-generation-service.DIFbM1n0.js");return{IDGenerationService:w}},__vite__mapDeps([0,1,2,3,4,5]));a=await b.generateEmployeeId()}const l=await this.checkDuplicates(e.username,a);if(!l.isValid)return{success:!1,error:l.error,code:"DUPLICATE_ERROR"};const c=Object.fromEntries(Object.entries(e).filter(([b,w])=>w!==void 0&&b!=="password")),d={type:"initials",value:(e.name||e.username||"OP").slice(0,2).toUpperCase(),backgroundColor:"#3B82F6"};let m=d;e.avatar&&(m={type:e.avatar.type||d.type,value:e.avatar.value||d.value,backgroundColor:e.avatar.backgroundColor||d.backgroundColor});const y=e.password?btoa(e.password):void 0,f={...c,employeeId:a,email:e.email||"",phone:e.phone||"",address:e.address||"",avatar:m,role:"operator",averageEfficiency:0,qualityScore:0,completedBundles:0,totalPieces:0,totalEarnings:0,isActive:!0,availabilityStatus:"available",currentAssignments:[],maxConcurrentWork:e.maxConcurrentWork||3,createdAt:Tn.now(),updatedAt:Tn.now(),...y&&{passwordHash:y}};console.log("🔍 Creating operator with avatar data:",m);const h=JSON.parse(JSON.stringify(f,(b,w)=>w===void 0?null:w)),_=Object.fromEntries(Object.entries(h).filter(([b,w])=>w!==null));console.log("💾 Final operator data being saved:",_);const v=await this.create(_);return v.success&&v.data&&(await this.initializeOperatorStatus(v.data.id,e.primaryMachine),await this.logActivity(v.data.id,"operator_created","Operator account created")),v}catch(r){return console.error("Error creating operator:",r),{success:!1,error:r instanceof Error?r.message:"Failed to create operator",code:"CREATION_FAILED"}}}async getOperatorWithStatus(e){try{const r=await this.getById(e);if(!r.success||!r.data)return r;const a=await this.getOperatorRealtimeStatus(e);return{success:!0,data:{...r.data,realtimeStatus:a}}}catch(r){return console.error("Error getting operator with status:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get operator",code:"FETCH_FAILED"}}}async getAllOperators(){try{const e=await this.getAll();return e.success&&e.data?{success:!0,data:(Array.isArray(e.data)?e.data:[e.data]).filter(l=>l!=null).map(l=>fR(l))}:{success:!0,data:[]}}catch(e){return console.error("Error getting all operators:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get operators",code:"FETCH_ERROR",data:[]}}}async getOperatorsSummary(){try{const e=await this.getAll();return!e.success||!e.data?e:{success:!0,data:await Promise.all(e.data.map(async a=>{const l=await this.getOperatorRealtimeStatus(a.id);return{id:a.id,name:a.name,employeeId:a.employeeId,primaryMachine:a.primaryMachine,currentStatus:l.status,efficiency:a.averageEfficiency,qualityScore:a.qualityScore,currentWork:l.currentWork,avatar:a.avatar}}))}}catch(e){return console.error("Error getting operators summary:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get operators",code:"FETCH_FAILED"}}}async updateOperator(e,r){try{if(r.username||r.employeeId){const c=await this.checkDuplicates(r.username,r.employeeId,e);if(!c.isValid)return{success:!1,error:c.error,code:"DUPLICATE_ERROR"}}const a={...r};a.password&&a.password.trim()&&(a.passwordHash=btoa(a.password),delete a.password);const l=await this.update(e,{...a,updatedAt:Tn.now()});return l.success&&await this.logActivity(e,"profile_updated",`Profile updated: ${Object.keys(r).join(", ")}`),l}catch(a){return console.error("Error updating operator:",a),{success:!1,error:a instanceof Error?a.message:"Failed to update operator",code:"UPDATE_FAILED"}}}async updateOperatorStats(e,r){try{const a={};r.efficiency!==void 0&&(a.averageEfficiency=r.efficiency),r.qualityScore!==void 0&&(a.qualityScore=r.qualityScore),r.completedPieces!==void 0&&(a.totalPieces=Ps(r.completedPieces),a.completedBundles=Ps(1)),r.earnings!==void 0&&(a.totalEarnings=Ps(r.earnings)),a.updatedAt=lr();const l=await this.update(e,a);return l.success&&await this.logActivity(e,"stats_updated",`Statistics updated: ${Object.keys(r).join(", ")}`),l}catch(a){return console.error("Error updating operator stats:",a),{success:!1,error:a instanceof Error?a.message:"Failed to update statistics",code:"STATS_UPDATE_FAILED"}}}async assignWork(e,r){try{const a=await this.getById(e);if(!a.success||!a.data)return{success:!1,error:"Operator not found",code:"OPERATOR_NOT_FOUND"};if(a.data.currentAssignments.length>=a.data.maxConcurrentWork)return{success:!1,error:`Operator at maximum capacity (${a.data.maxConcurrentWork} assignments)`,code:"CAPACITY_EXCEEDED"};const l=Rh(Ve),c=tn(Ve,_t.OPERATORS,e);l.update(c,{currentAssignments:ZS(r.bundleId),updatedAt:lr()});const d=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);return await Jt(d,{status:"working",currentWork:r.workItemId,lastActivity:pn(),machineStatus:"running"}),await l.commit(),await this.logActivity(e,"work_assigned",`Work assigned: ${r.bundleId} (${r.assignmentMethod})`),{success:!0,message:"Work assigned successfully"}}catch(a){return console.error("Error assigning work:",a),{success:!1,error:a instanceof Error?a.message:"Failed to assign work",code:"ASSIGNMENT_FAILED"}}}async completeWork(e,r){try{const a=Rh(Ve),l=tn(Ve,_t.OPERATORS,e);a.update(l,{currentAssignments:JS(r.bundleId),totalPieces:Ps(r.completedPieces),completedBundles:Ps(1),updatedAt:lr()});const c=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);return await Jt(c,{status:"idle",currentWork:null,lastActivity:pn(),machineStatus:"stopped"}),await a.commit(),await this.updateOperatorStats(e,{efficiency:r.efficiency,qualityScore:r.qualityScore,completedPieces:r.completedPieces}),await this.logActivity(e,"work_completed",`Work completed: ${r.bundleId}, Pieces: ${r.completedPieces}, Quality: ${r.qualityScore}%`),{success:!0,message:"Work completed successfully"}}catch(a){return console.error("Error completing work:",a),{success:!1,error:a instanceof Error?a.message:"Failed to complete work",code:"COMPLETION_FAILED"}}}async getOperatorsByMachine(e){try{const r={field:"machineTypes",operator:"array-contains",value:e};return await this.getWhere(r,{orderByField:"averageEfficiency",orderDirection:"desc"})}catch(r){return console.error("Error getting operators by machine:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get operators",code:"FETCH_FAILED"}}}async getOperatorsBySkill(e){try{const r={field:"skillLevel",operator:"==",value:e};return await this.getWhere(r,{orderByField:"qualityScore",orderDirection:"desc"})}catch(r){return console.error("Error getting operators by skill:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get operators",code:"FETCH_FAILED"}}}async updateOperatorStatus(e,r){try{const a=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);return await Jt(a,{...r,lastActivity:pn()}),{success:!0,message:"Status updated successfully"}}catch(a){return console.error("Error updating operator status:",a),{success:!1,error:a instanceof Error?a.message:"Failed to update status",code:"STATUS_UPDATE_FAILED"}}}subscribeToOperatorStatus(e,r){const a=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);return Pr(a,l=>{const c=l.exists()?l.val():null;r(c)},l=>{console.error("Error subscribing to operator status:",l),r(null)}),()=>nx(a)}async getOperatorRealtimeStatus(e){return new Promise(r=>{const a=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);Pr(a,l=>{const c=l.exists()?l.val():{status:"offline",currentWork:null,lastActivity:Date.now(),machineStatus:"stopped"};r(c)},{onlyOnce:!0})})}async initializeOperatorStatus(e,r){const a=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);await Jt(a,{status:"offline",currentWork:null,lastActivity:pn(),machineStatus:"stopped",primaryMachine:r})}validateOperatorData(e){const r=[];return(!e.username||e.username.length<3)&&r.push("Username must be at least 3 characters"),/^[a-zA-Z0-9_]+$/.test(e.username)||r.push("Username can only contain letters, numbers, and underscores"),(!e.name||e.name.length<2)&&r.push("Name must be at least 2 characters"),(!e.employeeId||!/^TSA-EMP-\d{4}$/.test(e.employeeId))&&r.push("Employee ID must follow format: TSA-EMP-XXXX (e.g., TSA-EMP-0001)"),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&r.push("Invalid email format"),e.primaryMachine||r.push("Primary machine is required"),(!e.machineTypes||e.machineTypes.length===0)&&r.push("At least one machine type is required"),e.skillLevel||r.push("Skill level is required"),e.shift||r.push("Shift is required"),{isValid:r.length===0,errors:r}}async checkDuplicates(e,r,a){try{const l=await this.getWhere({field:"username",operator:"==",value:e});if(l.success&&l.data&&l.data.length>0){const d=l.data[0];if(!a||d.id!==a)return{isValid:!1,error:"Username already exists"}}const c=await this.getWhere({field:"employeeId",operator:"==",value:r});if(c.success&&c.data&&c.data.length>0){const d=c.data[0];if(!a||d.id!==a)return{isValid:!1,error:"Employee ID already exists"}}return{isValid:!0}}catch(l){return console.error("Error checking duplicates:",l),{isValid:!1,error:"Validation error"}}}async deleteOperator(e,r){try{const a=await this.getById(e);if(!a.success||!a.data)return{success:!1,error:"Operator not found",code:"NOT_FOUND"};const l=a.data,c=await this.delete(e);return c.success?(await this.cleanupOperatorData(e),await this.logActivity(e,"operator_deleted",`Operator "${l.name}" (${l.username}) deleted by ${r||"system"}`,{deletedOperator:{username:l.username,name:l.name,employeeId:l.employeeId},deletedBy:r||"system"}),{success:!0,message:`Operator "${l.name}" deleted successfully`}):c}catch(a){return console.error("Error deleting operator:",a),{success:!1,error:a instanceof Error?a.message:"Failed to delete operator",code:"DELETE_FAILED"}}}async cleanupOperatorData(e){try{const r=Zt(en,`${yn.OPERATOR_STATUS}/${e}`);await Jt(r,null),console.log(`Cleaned up related data for operator: ${e}`)}catch(r){console.error("Error cleaning up operator data:",r)}}async logActivity(e,r,a,l){try{const c=new Ur(_t.USER_ACTIVITIES),d={operatorId:e,activityType:r,description:a,metadata:l,timestamp:Tn.now()};await c.create(d)}catch(c){console.error("Error logging activity:",c)}}}const zx=new Px,Gv=Object.freeze(Object.defineProperty({__proto__:null,OperatorService:Px,operatorService:zx},Symbol.toStringTag,{value:"Module"}));class hR{localStorage_keys_to_remove=["tsa_operators","tsa_bundles","tsa_work_assignments","tsa_production_data","tsa_demo_data","tsa_mock_operators","tsa_sample_data","tsaerp_trusted_devices","tsa_cached_data","tsa_temp_data"];scanLocalStorageUsage(){const e=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith("tsa"))try{const l=localStorage.getItem(a);e.push({key:a,value:l&&JSON.parse(l)})}catch{e.push({key:a,value:localStorage.getItem(a)})}}return e}cleanupMockData(){const e=[],r=[],a=["tsa_auth_token","tsa_user_role","tsa_username","tsaerp_remembered_username","tsaerp_remember_me","tsa_user_preferences","tsaerp_cache"];for(let l=localStorage.length-1;l>=0;l--){const c=localStorage.key(l);c&&c.startsWith("tsa")&&(a.includes(c)?r.push(c):(localStorage.removeItem(c),e.push(c)))}return{removed:e,kept:r}}async validateFirebaseConnection(){const e={firestore:!1,realtimeDatabase:!1,auth:!1};try{const{operatorService:r}=await ue(async()=>{const{operatorService:a}=await Promise.resolve().then(()=>Gv);return{operatorService:a}},void 0);await r.getAllOperators(),e.firestore=!0}catch(r){console.warn("Firestore connection test failed:",r)}try{const{rtdb:r}=await ue(async()=>{const{rtdb:y}=await Promise.resolve().then(()=>Fv);return{rtdb:y}},void 0),{ref:a,onValue:l,off:c}=await ue(async()=>{const{ref:y,onValue:f,off:h}=await Promise.resolve().then(()=>wA);return{ref:y,onValue:f,off:h}},void 0),d=a(r,"system_health"),m=()=>new Promise(y=>{const f=l(d,()=>{c(d),y(!0)},h=>{y(!1)})});e.realtimeDatabase=await m()}catch(r){console.warn("Realtime Database connection test failed:",r)}try{const{auth:r}=await ue(async()=>{const{auth:a}=await Promise.resolve().then(()=>Fv);return{auth:a}},void 0);e.auth=r!=null}catch(r){console.warn("Auth connection test failed:",r)}return e}async migrateToFirebaseOnly(){console.log("🚀 Starting Firebase-only migration...");const e=[];try{const r=await this.validateFirebaseConnection();if(!r.firestore)throw new Error("❌ Firestore connection failed - cannot proceed with migration");const{removed:a,kept:l}=this.cleanupMockData();return console.log(`🧹 Cleaned ${a.length} mock data keys:`,a),console.log(`✅ Kept ${l.length} essential keys:`,l),bt.clear(),console.log("🔄 Cache system reset for Firebase operations"),this.validateNoMockDataUsage(),console.log("✅ Firebase-only migration completed successfully"),{success:!0,cleaned:a,errors:e,firebaseStatus:r}}catch(r){const a=r instanceof Error?r.message:"Unknown error";return e.push(a),console.error("❌ Firebase migration failed:",r),{success:!1,cleaned:[],errors:e,firebaseStatus:await this.validateFirebaseConnection()}}}validateNoMockDataUsage(){["mockOperators","demoData","sampleData","mockBundles"].forEach(r=>{window[r]&&console.warn(`⚠️ Found suspicious mock data global: ${r}`)})}createFirebaseOnlyLoader(){return{loadOperators:async()=>{const{operatorService:e}=await ue(async()=>{const{operatorService:r}=await Promise.resolve().then(()=>Gv);return{operatorService:r}},void 0);return e.getAllOperators()},loadBundles:async()=>(console.warn("Bundle service not yet fully migrated to Firebase"),{success:!1,error:"Bundle service migration pending"}),loadWorkAssignments:async()=>(console.warn("Work assignment service not yet fully migrated to Firebase"),{success:!1,error:"Work assignment service migration pending"})}}async getMigrationReport(){const e=this.scanLocalStorageUsage(),r=await this.validateFirebaseConnection(),a=bt.getStats(),l=[];return e.length>10&&l.push("Consider cleaning up unused localStorage keys"),r.firestore||l.push("Fix Firestore connection issues"),a.hitRate<70&&l.push("Optimize cache performance for better Firebase data access"),{localStorageKeys:e,firebaseStatus:r,cacheStatus:a,recommendations:l}}}const mR=new hR;class gR{config={enableCacheWarming:!0,enableOfflineSupport:!0,preloadCriticalData:!0,enablePerformanceMonitoring:!0};async initialize(){console.log("🚀 TSA Intelligence Hub - Initializing Advanced Systems...");const e=performance.now();try{console.log("🔥 Running Firebase migration...");const r=await mR.migrateToFirebaseOnly();r.success?console.log(`✅ Firebase migration complete - cleaned ${r.cleaned.length} mock data keys`):console.warn("⚠️ Firebase migration had issues:",r.errors),await this.initializeCacheSystem(),this.config.preloadCriticalData&&await this.preloadCriticalData(),this.config.enableCacheWarming&&await this.warmUpCaches(),this.config.enablePerformanceMonitoring&&this.setupPerformanceMonitoring();const a=performance.now(),l=Math.round(a-e);console.log(`✅ TSA Intelligence Hub initialized in ${l}ms`),console.log("🎯 Ready for Smart Manufacturing Operations"),this.displayCacheStatistics()}catch(r){console.error("❌ App initialization failed:",r)}}async initializeCacheSystem(){console.log("💾 Initializing Intelligent Cache System...");const e=bt.getStats();console.log(`📊 Cache Status - Hit Rate: ${e.hitRate}% | Utilization: ${e.utilization}%`),e.health==="poor"&&(console.log("🔄 Cache performance poor - Clearing and optimizing..."),bt.clear())}async preloadCriticalData(){console.log("📦 Preloading Critical Manufacturing Data...");const e=[{name:"Active Operators",task:async()=>{try{const l=await zx.getAllOperators();return Vo.set("active_operators",l,600*1e3,"high"),l.length}catch(l){return console.warn("Failed to preload operators:",l),0}}},{name:"Trusted Devices",task:async()=>{try{const l=await Yh.getTrustedDevices();return Vo.set("trusted_devices_summary",l,300*1e3,"high"),l.length}catch(l){return console.warn("Failed to preload trusted devices:",l),0}}},{name:"System Statistics",task:async()=>{try{const l=await Yh.getDeviceStatistics();return Vo.set("system_stats",l,120*1e3,"medium"),Object.keys(l).length}catch(l){return console.warn("Failed to preload system statistics:",l),0}}}],a=(await Promise.allSettled(e.map(async({name:l,task:c})=>{const d=performance.now(),m=await c(),y=performance.now(),f=Math.round(y-d);return console.log(`  ✓ ${l}: ${m} records loaded in ${f}ms`),{name:l,result:m,duration:f}}))).filter(l=>l.status==="fulfilled").length;console.log(`📊 Preloaded ${a}/${e.length} critical datasets`)}async warmUpCaches(){console.log("🔥 Warming Up Intelligent Caches...");try{await bt.warm([{namespace:"user_preferences",loader:async()=>{const e=localStorage.getItem("tsa_user_preferences");return e?JSON.parse(e):{}},ttl:1800*1e3,priority:"medium"},{namespace:"app_config",loader:async()=>({version:"2.0.0",features:["smart_manufacturing","ai_analytics","real_time_monitoring"],theme:"production-optimized",cache_enabled:!0,performance_mode:"enhanced"}),ttl:3600*1e3,priority:"high"}]),console.log("🎯 Cache warming completed successfully")}catch(e){console.warn("Cache warming partially failed:",e)}}setupPerformanceMonitoring(){if(console.log("📈 Setting Up Performance Intelligence..."),setInterval(()=>{const e=bt.getStats();e.hitRate<70&&console.warn(`⚠️ Cache hit rate low: ${e.hitRate}% - Consider optimization`)},300*1e3),"memory"in performance){const e=performance.memory,r=Math.round(e.usedJSHeapSize/1024/1024),a=Math.round(e.totalJSHeapSize/1024/1024);console.log(`🧠 Memory Usage: ${r}MB / ${a}MB`)}if("PerformanceObserver"in window)try{new PerformanceObserver(r=>{r.getEntries().forEach(l=>{l.duration>1e3&&console.warn(`🐌 Slow operation detected: ${l.name} took ${Math.round(l.duration)}ms`)})}).observe({entryTypes:["measure","navigation"]}),console.log("📊 Performance monitoring active")}catch(e){console.warn("Performance observer setup failed:",e)}}displayCacheStatistics(){const e=bt.getStats(),r=Vo.getStats();console.log(`
📊 TSA Intelligence Hub - Cache Performance Report`),console.log("═════════════════════════════════════════════════"),console.log("🎯 Application Cache:"),console.log(`   Hit Rate: ${e.hitRate}% | Health: ${e.health.toUpperCase()}`),console.log(`   Size: ${e.size}/${e.maxSize} | Utilization: ${e.utilization}%`),console.log(`   Hits: ${e.hits} | Misses: ${e.misses} | Evictions: ${e.evictions}`),console.log("🧠 Memory Cache:"),console.log(`   Hit Rate: ${r.hitRate}% | Health: ${r.health.toUpperCase()}`),console.log(`   Size: ${r.size}/${r.maxSize} | Utilization: ${r.utilization}%`),console.log(`   Hits: ${r.hits} | Misses: ${r.misses} | Evictions: ${r.evictions}`),console.log(`═════════════════════════════════════════════════
`);const a=e.hitRate>80&&r.hitRate>80?"excellent":e.hitRate>60&&r.hitRate>60?"good":"needs-optimization";console.log(`🚀 Overall Performance: ${a.toUpperCase()}`),a==="needs-optimization"&&console.log("💡 Tip: Consider clearing cache or adjusting TTL values for better performance")}getReadinessStatus(){const e=bt.getStats(),r=e.hitRate>85?"A":e.hitRate>70?"B":e.hitRate>50?"C":"D";return{ready:!0,cacheHealth:e.health,preloadedData:this.config.preloadCriticalData,performanceGrade:r}}}const $v=new gR;class pR{apiEndpoint="/api/errors";performanceEndpoint="/api/performance";sessionId;userId;userRole;errorQueue=[];performanceQueue=[];isOnline=!0;maxQueueSize=100;flushInterval=1e4;errorEndpointAvailable=!0;performanceEndpointAvailable=!0;constructor(){this.sessionId=this.generateSessionId(),this.setupGlobalErrorHandlers(),this.setupPerformanceMonitoring(),this.setupNetworkStatusListener(),this.startPeriodicFlush()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setUser(e){this.userId=e.id,this.userRole=e.role}async captureException(e,r){const a=`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l={id:a,message:e.message,name:e.name,stack:e.stack,timestamp:new Date().toISOString(),sessionId:this.sessionId,url:window.location.href,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},user:{id:this.userId,role:this.userRole},level:r?.level||"error",contexts:{browser:{name:this.getBrowserName(),version:this.getBrowserVersion(),language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine},os:{platform:navigator.platform},device:{pixelRatio:window.devicePixelRatio,memory:navigator.deviceMemory,cores:navigator.hardwareConcurrency},performance:this.getPerformanceSnapshot(),...r?.contexts},tags:{environment:"production",version:"1.0.0",component:"frontend",...r?.tags},fingerprint:r?.fingerprint||[e.name,e.message],extra:r?.extra||{}};return this.queueError(l),a}captureMessage(e,r="info",a){const l={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,message:e,level:r,timestamp:new Date().toISOString(),sessionId:this.sessionId,url:window.location.href,user:{id:this.userId,role:this.userRole},contexts:a?.contexts||{},tags:{environment:"production",version:"1.0.0",...a?.tags},extra:a?.extra||{}};this.queueError(l)}trackUserAction(e){const r={...e,sessionId:this.sessionId,userId:this.userId,userRole:this.userRole};this.sendUserAction(r)}recordPerformanceMetric(e){this.performanceQueue.push({...e,timestamp:new Date,tags:{sessionId:this.sessionId,userId:this.userId||"anonymous",...e.tags}}),this.performanceQueue.length>=this.maxQueueSize&&this.flushPerformanceMetrics()}recordWebVitals(){if(!("web-vital"in window)){if(window["web-vital"]=!0,"PerformanceObserver"in window)try{new PerformanceObserver(c=>{const d=c.getEntries(),m=d[d.length-1];this.recordPerformanceMetric({name:"largest-contentful-paint",value:m.startTime,unit:"ms",timestamp:new Date,tags:{metric:"core-web-vital"}})}).observe({type:"largest-contentful-paint",buffered:!0}),new PerformanceObserver(c=>{c.getEntries().forEach(m=>{this.recordPerformanceMetric({name:"first-input-delay",value:m.processingStart-m.startTime,unit:"ms",timestamp:new Date,tags:{metric:"core-web-vital"}})})}).observe({type:"first-input",buffered:!0});let a=0;new PerformanceObserver(c=>{c.getEntries().forEach(m=>{m.hadRecentInput||(a+=m.value)}),this.recordPerformanceMetric({name:"cumulative-layout-shift",value:a,unit:"score",timestamp:new Date,tags:{metric:"core-web-vital"}})}).observe({type:"layout-shift",buffered:!0})}catch(e){console.warn("Failed to set up Performance Observer:",e)}window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(this.recordPerformanceMetric({name:"page-load-time",value:e.loadEventEnd-e.loadEventStart,unit:"ms",timestamp:new Date}),this.recordPerformanceMetric({name:"dom-content-loaded",value:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,unit:"ms",timestamp:new Date}),this.recordPerformanceMetric({name:"time-to-first-byte",value:e.responseStart-e.requestStart,unit:"ms",timestamp:new Date}))},0)})}}trackNetworkError(e,r,a,l){this.captureMessage(`Network Error: ${a} ${e} - ${r}`,"warning",{tags:{type:"network-error",url:e,method:a,status:r.toString()},extra:{error:l?.message,stack:l?.stack}})}setupGlobalErrorHandlers(){window.addEventListener("error",r=>{this.captureException(r.error||new Error(r.message),{contexts:{error_event:{filename:r.filename,lineno:r.lineno,colno:r.colno}},tags:{source:"window.onerror"}})}),window.addEventListener("unhandledrejection",r=>{const a=r.reason instanceof Error?r.reason:new Error(r.reason);this.captureException(a,{tags:{source:"unhandled-promise-rejection"},extra:{reason:r.reason}})});const e=window.fetch;window.fetch=async(...r)=>{const a=performance.now();try{const l=await e(...r),d=performance.now()-a;return this.recordPerformanceMetric({name:"api-call-duration",value:d,unit:"ms",timestamp:new Date,tags:{url:typeof r[0]=="string"?r[0]:r[0].url,method:r[1]?.method||"GET",status:l.status.toString()}}),l.ok||this.trackNetworkError(typeof r[0]=="string"?r[0]:r[0].url,l.status,r[1]?.method||"GET"),l}catch(l){const d=performance.now()-a;throw this.recordPerformanceMetric({name:"api-call-duration",value:d,unit:"ms",timestamp:new Date,tags:{url:typeof r[0]=="string"?r[0]:r[0].url,method:r[1]?.method||"GET",status:"error"}}),this.trackNetworkError(typeof r[0]=="string"?r[0]:r[0].url,0,r[1]?.method||"GET",l),l}}}setupPerformanceMonitoring(){if("PerformanceObserver"in window)try{new PerformanceObserver(r=>{r.getEntries().forEach(l=>{this.recordPerformanceMetric({name:"long-task",value:l.duration,unit:"ms",timestamp:new Date,tags:{type:"performance-issue"}})})}).observe({type:"longtask",buffered:!0})}catch(e){console.warn("Long task monitoring not supported:",e)}this.recordWebVitals()}setupNetworkStatusListener(){window.addEventListener("online",()=>{this.isOnline=!0,this.flushAllQueues()}),window.addEventListener("offline",()=>{this.isOnline=!1})}startPeriodicFlush(){setInterval(()=>{this.isOnline&&this.flushAllQueues()},this.flushInterval)}queueError(e){this.errorQueue.push(e),this.errorQueue.length>=this.maxQueueSize&&this.flushErrors()}async flushErrors(){if(this.errorQueue.length===0||!this.isOnline||!this.errorEndpointAvailable)return;const e=this.errorQueue.splice(0,this.maxQueueSize);try{const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errors:e})});if(r.status===404){this.errorEndpointAvailable=!1,Sn.logging.debugMode;return}if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch(r){r instanceof TypeError||r?.message?.includes("fetch")?(this.errorQueue.unshift(...e),console.error("Failed to send error reports (network error):",r)):this.errorEndpointAvailable=!1}}async flushPerformanceMetrics(){if(this.performanceQueue.length===0||!this.isOnline||!this.performanceEndpointAvailable)return;const e=this.performanceQueue.splice(0,this.maxQueueSize);try{const r=await fetch(this.performanceEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:e})});if(r.status===404){this.performanceEndpointAvailable=!1,Sn.logging.debugMode;return}if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch(r){r instanceof TypeError||r?.message?.includes("fetch")?(this.performanceQueue.unshift(...e),console.error("Failed to send performance metrics (network error):",r)):this.performanceEndpointAvailable=!1}}async sendUserAction(e){if(this.isOnline)try{const r=await fetch("/api/analytics/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.status===404&&Sn.logging.debugMode,!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch{}}flushAllQueues(){this.flushErrors(),this.flushPerformanceMetrics()}getBrowserName(){const e=navigator.userAgent;return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Unknown"}getBrowserVersion(){const r=navigator.userAgent.match(/(?:Chrome|Firefox|Safari|Edge)\/(\d+)/);return r?r[1]:"Unknown"}getPerformanceSnapshot(){return performance.memory?{memory:{used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit},timing:performance.timing,navigation:performance.navigation}:{}}destroy(){this.flushAllQueues()}}const ge=new pR;typeof window<"u"&&window.addEventListener("beforeunload",()=>{ge.destroy()});function St(...i){return nT(rT(i))}const yR={default:["bg-white border border-secondary-200 shadow-sm","dark:bg-secondary-900 dark:border-secondary-700"],outlined:["bg-white border-2 border-secondary-200 shadow-none","dark:bg-secondary-900 dark:border-secondary-700"],elevated:["bg-white border-0 shadow-lg","dark:bg-secondary-900"],filled:["bg-secondary-50 border border-secondary-200 shadow-none","dark:bg-secondary-800 dark:border-secondary-700"],glass:["bg-white/70 backdrop-blur-md border border-white/20 shadow-lg shadow-black/5","dark:bg-secondary-900/70 dark:border-secondary-700/30 dark:shadow-black/20"],neu:["bg-secondary-50 border-0","shadow-[8px_8px_16px_#d1d5db,-8px_-8px_16px_#ffffff]","dark:bg-secondary-800","dark:shadow-[8px_8px_16px_#111827,-8px_-8px_16px_#374151]"]},vR={sm:"p-4",md:"p-6",lg:"p-8"},At=de.forwardRef(({className:i,variant:e="default",size:r="md",hoverable:a=!1,interactive:l=!1,children:c,...d},m)=>g.jsx("div",{ref:m,className:St("rounded-lg transition-all duration-200",yR[e],vR[r],a&&["cursor-pointer","hover:shadow-md hover:scale-[1.02]",e==="outlined"&&"hover:border-primary-300",e==="elevated"&&"hover:shadow-xl",e==="glass"&&"glass-hover dark:glass-hover-dark",e==="neu"&&"hover:shadow-[4px_4px_8px_#d1d5db,-4px_-4px_8px_#ffffff] dark:hover:shadow-[4px_4px_8px_#111827,-4px_-4px_8px_#374151]"],l&&["card-hover","transform-gpu"],"focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-offset-2",i),...d,children:c}));At.displayName="Card";const qx=({className:i,children:e,...r})=>g.jsx("div",{className:St("mb-4 pb-4 border-b border-secondary-200 dark:border-secondary-700",i),...r,children:e}),_R=({className:i,children:e,...r})=>g.jsx("div",{className:i,...r,children:e}),Hx=_R,e3=({className:i,children:e,...r})=>g.jsx("p",{className:St("text-sm text-secondary-600 dark:text-secondary-400",i),...r,children:e}),Fx=({className:i,children:e,...r})=>g.jsx("h3",{className:St("text-lg font-semibold text-secondary-900 dark:text-secondary-100",i),...r,children:e}),bR={primary:["bg-primary-500 text-white border-primary-500","hover:bg-primary-600 hover:border-primary-600","focus:ring-primary-500 focus:border-primary-600","active:bg-primary-700 active:border-primary-700","disabled:bg-primary-300 disabled:border-primary-300 disabled:cursor-not-allowed","dark:bg-primary-600 dark:border-primary-600","dark:hover:bg-primary-700 dark:hover:border-primary-700"],secondary:["bg-secondary-100 text-secondary-900 border-secondary-200","hover:bg-secondary-200 hover:border-secondary-300","focus:ring-secondary-500 focus:border-secondary-400","active:bg-secondary-300 active:border-secondary-400","disabled:bg-secondary-50 disabled:text-secondary-400 disabled:cursor-not-allowed","dark:bg-secondary-800 dark:text-secondary-100 dark:border-secondary-700","dark:hover:bg-secondary-700 dark:hover:border-secondary-600"],success:["bg-success-500 text-white border-success-500","hover:bg-success-600 hover:border-success-600","focus:ring-success-500 focus:border-success-600","active:bg-success-700 active:border-success-700","disabled:bg-success-300 disabled:border-success-300 disabled:cursor-not-allowed"],warning:["bg-warning-500 text-white border-warning-500","hover:bg-warning-600 hover:border-warning-600","focus:ring-warning-500 focus:border-warning-600","active:bg-warning-700 active:border-warning-700","disabled:bg-warning-300 disabled:border-warning-300 disabled:cursor-not-allowed"],danger:["bg-danger-500 text-white border-danger-500","hover:bg-danger-600 hover:border-danger-600","focus:ring-danger-500 focus:border-danger-600","active:bg-danger-700 active:border-danger-700","disabled:bg-danger-300 disabled:border-danger-300 disabled:cursor-not-allowed"],info:["bg-blue-500 text-white border-blue-500","hover:bg-blue-600 hover:border-blue-600","focus:ring-blue-500 focus:border-blue-600","active:bg-blue-700 active:border-blue-700","disabled:bg-blue-300 disabled:border-blue-300 disabled:cursor-not-allowed"],back:["bg-gray-500 text-white border-gray-500","hover:bg-gray-600 hover:border-gray-600","focus:ring-gray-500 focus:border-gray-600","active:bg-gray-700 active:border-gray-700","disabled:bg-gray-300 disabled:border-gray-300 disabled:cursor-not-allowed"],ghost:["bg-transparent text-secondary-700 border-transparent","hover:bg-secondary-100 hover:text-secondary-900","focus:ring-secondary-500 focus:bg-secondary-100","active:bg-secondary-200","disabled:text-secondary-400 disabled:cursor-not-allowed","dark:text-secondary-300","dark:hover:bg-secondary-800 dark:hover:text-secondary-100"],outline:["bg-transparent text-secondary-700 border-secondary-300","hover:bg-secondary-50 hover:border-secondary-400","focus:ring-secondary-500 focus:border-secondary-500","active:bg-secondary-100 active:border-secondary-500","disabled:text-secondary-400 disabled:border-secondary-200 disabled:cursor-not-allowed","dark:text-secondary-300 dark:border-secondary-600","dark:hover:bg-secondary-800 dark:hover:border-secondary-500"],link:["bg-transparent text-primary-600 border-transparent p-0","hover:text-primary-700 hover:underline","focus:ring-primary-500 focus:underline","active:text-primary-800","disabled:text-primary-400 disabled:cursor-not-allowed disabled:no-underline","dark:text-primary-400","dark:hover:text-primary-300"],glass:["bg-white/10 text-secondary-800 border border-white/20 backdrop-blur-md","hover:bg-white/20 hover:border-white/30","focus:ring-primary-500/50 focus:border-primary-300/50","active:bg-white/30","disabled:bg-white/5 disabled:text-secondary-400 disabled:cursor-not-allowed","dark:bg-secondary-900/30 dark:text-secondary-200 dark:border-secondary-700/30","dark:hover:bg-secondary-900/40"],neu:["bg-secondary-50 text-secondary-700 border-0","shadow-[4px_4px_8px_#d1d5db,-4px_-4px_8px_#ffffff]","hover:shadow-[2px_2px_4px_#d1d5db,-2px_-2px_4px_#ffffff]","active:shadow-[inset_2px_2px_4px_#d1d5db,inset_-2px_-2px_4px_#ffffff]","focus:ring-primary-500/30","disabled:text-secondary-400 disabled:cursor-not-allowed disabled:shadow-none","dark:bg-secondary-800 dark:text-secondary-300","dark:shadow-[4px_4px_8px_#111827,-4px_-4px_8px_#374151]","dark:hover:shadow-[2px_2px_4px_#111827,-2px_-2px_4px_#374151]","dark:active:shadow-[inset_2px_2px_4px_#111827,inset_-2px_-2px_4px_#374151]"]},xR={xs:"px-2 py-1 text-xs font-medium",sm:"px-3 py-1.5 text-sm font-medium",md:"px-4 py-2 text-sm font-medium",lg:"px-6 py-3 text-base font-medium",xl:"px-8 py-4 text-lg font-medium"},Je=de.forwardRef(({className:i,variant:e="primary",size:r="md",loading:a=!1,disabled:l=!1,leftIcon:c,rightIcon:d,fullWidth:m=!1,rounded:y=!1,interactive:f=!1,children:h,..._},v)=>{const b=l||a;return g.jsxs("button",{className:St("inline-flex items-center justify-center","border font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","select-none",xR[r],bR[e],y?"rounded-full":"rounded-md",m&&"w-full",a&&"cursor-wait",f&&!b&&["button-press",e!=="neu"&&"hover-lift"],"min-h-[44px] md:min-h-[auto]","focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",i),disabled:b,ref:v,..._,children:[a&&g.jsx(DS,{className:St("animate-spin",r==="xs"&&"w-3 h-3",r==="sm"&&"w-3 h-3",r==="md"&&"w-4 h-4",r==="lg"&&"w-4 h-4",r==="xl"&&"w-5 h-5",(c||h)&&"mr-2")}),c&&!a&&g.jsx("span",{className:St("flex-shrink-0",h&&"mr-2"),children:c}),h&&g.jsx("span",{className:"truncate",children:h}),d&&!a&&g.jsx("span",{className:St("flex-shrink-0",h&&"ml-2"),children:d})]})});Je.displayName="Button";const Qo={default:{solid:"bg-secondary-100 text-secondary-800 dark:bg-secondary-800 dark:text-secondary-300",outline:"border border-secondary-300 text-secondary-700 bg-transparent dark:border-secondary-600 dark:text-secondary-400"},primary:{solid:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-300",outline:"border border-primary-300 text-primary-700 bg-transparent dark:border-primary-600 dark:text-primary-400"},secondary:{solid:"bg-secondary-200 text-secondary-800 dark:bg-secondary-700 dark:text-secondary-300",outline:"border border-secondary-400 text-secondary-700 bg-transparent dark:border-secondary-500 dark:text-secondary-400"},success:{solid:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-300",outline:"border border-success-300 text-success-700 bg-transparent dark:border-success-600 dark:text-success-400"},warning:{solid:"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-300",outline:"border border-warning-300 text-warning-700 bg-transparent dark:border-warning-600 dark:text-warning-400"},danger:{solid:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-300",outline:"border border-danger-300 text-danger-700 bg-transparent dark:border-danger-600 dark:text-danger-400"},info:{solid:"bg-info-100 text-info-800 dark:bg-info-900 dark:text-info-300",outline:"border border-info-300 text-info-700 bg-transparent dark:border-info-600 dark:text-info-400"},blue:{solid:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",outline:"border border-blue-300 text-blue-700 bg-transparent dark:border-blue-600 dark:text-blue-400"},green:{solid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",outline:"border border-green-300 text-green-700 bg-transparent dark:border-green-600 dark:text-green-400"},red:{solid:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",outline:"border border-red-300 text-red-700 bg-transparent dark:border-red-600 dark:text-red-400"},purple:{solid:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",outline:"border border-purple-300 text-purple-700 bg-transparent dark:border-purple-600 dark:text-purple-400"},gray:{solid:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",outline:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400"},outline:{solid:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400",outline:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400"},destructive:{solid:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",outline:"border border-red-300 text-red-700 bg-transparent dark:border-red-600 dark:text-red-400"}},wR={xs:"px-1.5 py-0.5 text-xs font-medium",sm:"px-2 py-0.5 text-xs font-medium",md:"px-2.5 py-1 text-xs font-medium",lg:"px-3 py-1.5 text-sm font-medium"},ER={rounded:"rounded",pill:"rounded-full",square:"rounded-none"},Ct=de.forwardRef(({className:i,variant:e="default",size:r="md",shape:a="rounded",outline:l=!1,dismissible:c=!1,onDismiss:d,children:m,...y},f)=>g.jsxs("span",{ref:f,className:St("inline-flex items-center justify-center","font-medium whitespace-nowrap","transition-colors duration-200",wR[r],ER[a],l?Qo[e]?.outline||Qo.default.outline:Qo[e]?.solid||Qo.default.solid,i),...y,children:[g.jsx("span",{className:"truncate",children:m}),c&&g.jsx("button",{onClick:d,className:St("ml-1 -mr-1 flex-shrink-0","hover:bg-black hover:bg-opacity-10 rounded-full","focus:outline-none focus:bg-black focus:bg-opacity-20","transition-colors duration-150",r==="xs"&&"w-2 h-2",r==="sm"&&"w-3 h-3",r==="md"&&"w-4 h-4",r==="lg"&&"w-5 h-5"),children:g.jsx(O1,{className:"w-full h-full"})})]}));Ct.displayName="Badge";function SR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const TR=U.forwardRef(SR);function NR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const AR=U.forwardRef(NR);function CR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const Yv=U.forwardRef(CR);function OR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const kc=U.forwardRef(OR);function RR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const DR=U.forwardRef(RR);function MR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const jR=U.forwardRef(MR);function kR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const IR=U.forwardRef(kR);function LR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Qv=U.forwardRef(LR);function UR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const BR=U.forwardRef(UR);function PR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Kv=U.forwardRef(PR);function zR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const qR=U.forwardRef(zR);function HR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Vx=U.forwardRef(HR);function FR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const VR=U.forwardRef(FR);function GR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Jc=U.forwardRef(GR);var Ko={},Gs={},Xo={},Xv;function an(){if(Xv)return Xo;Xv=1,Object.defineProperty(Xo,"__esModule",{value:!0});function i(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function r(a,l){i(this,r),this.data=a,this.text=l.text||a,this.options=l};return Xo.default=e,Xo}var Wv;function $R(){if(Wv)return Gs;Wv=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.CODE39=void 0;var i=(function(){function S(C,j){for(var L=0;L<j.length;L++){var G=j[L];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(C,G.key,G)}}return function(C,j,L){return j&&S(C.prototype,j),L&&S(C,L),C}})(),e=an(),r=a(e);function a(S){return S&&S.__esModule?S:{default:S}}function l(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function c(S,C){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:S}function d(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);S.prototype=Object.create(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(S,C):S.__proto__=C)}var m=(function(S){d(C,S);function C(j,L){return l(this,C),j=j.toUpperCase(),L.mod43&&(j+=v(w(j))),c(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,j,L))}return i(C,[{key:"encode",value:function(){for(var L=h("*"),G=0;G<this.data.length;G++)L+=h(this.data[G])+"0";return L+=h("*"),{data:L,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),C})(r.default),y=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],f=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function h(S){return _(b(S))}function _(S){return f[S].toString(2)}function v(S){return y[S]}function b(S){return y.indexOf(S)}function w(S){for(var C=0,j=0;j<S.length;j++)C+=b(S[j]);return C=C%43,C}return Gs.CODE39=m,Gs}var En={},Wo={},Zo={},Ze={},Zv;function Tl(){if(Zv)return Ze;Zv=1,Object.defineProperty(Ze,"__esModule",{value:!0});var i;function e(y,f,h){return f in y?Object.defineProperty(y,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):y[f]=h,y}var r=Ze.SET_A=0,a=Ze.SET_B=1,l=Ze.SET_C=2;Ze.SHIFT=98;var c=Ze.START_A=103,d=Ze.START_B=104,m=Ze.START_C=105;return Ze.MODULO=103,Ze.STOP=106,Ze.FNC1=207,Ze.SET_BY_CODE=(i={},e(i,c,r),e(i,d,a),e(i,m,l),i),Ze.SWAP={101:r,100:a,99:l},Ze.A_START_CHAR="Ð",Ze.B_START_CHAR="Ñ",Ze.C_START_CHAR="Ò",Ze.A_CHARS="[\0-_È-Ï]",Ze.B_CHARS="[ -È-Ï]",Ze.C_CHARS="(Ï*[0-9]{2}Ï*)",Ze.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Ze}var Jv;function _u(){if(Jv)return Zo;Jv=1,Object.defineProperty(Zo,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=an(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){c(this,h);var b=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_.substring(1),v));return b.bytes=_.split("").map(function(w){return w.charCodeAt(0)}),b}return i(h,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var v=this.bytes,b=v.shift()-105,w=a.SET_BY_CODE[b];if(w===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&v.unshift(a.FNC1);var S=h.next(v,1,w);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:h.getBar(b)+S.result+h.getBar((S.checksum+b)%a.MODULO)+h.getBar(a.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var v=this.options.ean128||!1;return typeof v=="string"&&(v=v.toLowerCase()==="true"),v}}],[{key:"getBar",value:function(v){return a.BARS[v]?a.BARS[v].toString():""}},{key:"correctIndex",value:function(v,b){if(b===a.SET_A){var w=v.shift();return w<32?w+64:w-32}else return b===a.SET_B?v.shift()-32:(v.shift()-48)*10+v.shift()-48}},{key:"next",value:function(v,b,w){if(!v.length)return{result:"",checksum:0};var S=void 0,C=void 0;if(v[0]>=200){C=v.shift()-105;var j=a.SWAP[C];j!==void 0?S=h.next(v,b+1,j):((w===a.SET_A||w===a.SET_B)&&C===a.SHIFT&&(v[0]=w===a.SET_A?v[0]>95?v[0]-96:v[0]:v[0]<32?v[0]+96:v[0]),S=h.next(v,b+1,w))}else C=h.correctIndex(v,w),S=h.next(v,b+1,w);var L=h.getBar(C),G=C*b;return{result:L+S.result,checksum:G+S.checksum}}}]),h})(r.default);return Zo.default=y,Zo}var Jo={},e_;function YR(){if(e_)return Jo;e_=1,Object.defineProperty(Jo,"__esModule",{value:!0});var i=Tl(),e=function(m){return m.match(new RegExp("^"+i.A_CHARS+"*"))[0].length},r=function(m){return m.match(new RegExp("^"+i.B_CHARS+"*"))[0].length},a=function(m){return m.match(new RegExp("^"+i.C_CHARS+"*"))[0]};function l(d,m){var y=m?i.A_CHARS:i.B_CHARS,f=d.match(new RegExp("^("+y+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(f)return f[1]+"Ì"+c(d.substring(f[1].length));var h=d.match(new RegExp("^"+y+"+"))[0];return h.length===d.length?d:h+String.fromCharCode(m?205:206)+l(d.substring(h.length),!m)}function c(d){var m=a(d),y=m.length;if(y===d.length)return d;d=d.substring(y);var f=e(d)>=r(d);return m+String.fromCharCode(f?206:205)+l(d,f)}return Jo.default=function(d){var m=void 0,y=a(d).length;if(y>=2)m=i.C_START_CHAR+c(d);else{var f=e(d)>r(d);m=(f?i.A_START_CHAR:i.B_START_CHAR)+l(d,f)}return m.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(h,_){return"Ë"+_})},Jo}var t_;function QR(){if(t_)return Wo;t_=1,Object.defineProperty(Wo,"__esModule",{value:!0});var i=_u(),e=l(i),r=YR(),a=l(r);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){if(c(this,h),/^[\x00-\x7F\xC8-\xD3]+$/.test(_))var b=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,(0,a.default)(_),v));else var b=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v));return d(b)}return h})(e.default);return Wo.default=y,Wo}var ec={},n_;function KR(){if(n_)return ec;n_=1,Object.defineProperty(ec,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=_u(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a.A_START_CHAR+_,v))}return i(h,[{key:"valid",value:function(){return new RegExp("^"+a.A_CHARS+"+$").test(this.data)}}]),h})(r.default);return ec.default=y,ec}var tc={},r_;function XR(){if(r_)return tc;r_=1,Object.defineProperty(tc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=_u(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a.B_START_CHAR+_,v))}return i(h,[{key:"valid",value:function(){return new RegExp("^"+a.B_CHARS+"+$").test(this.data)}}]),h})(r.default);return tc.default=y,tc}var nc={},i_;function WR(){if(i_)return nc;i_=1,Object.defineProperty(nc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=_u(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a.C_START_CHAR+_,v))}return i(h,[{key:"valid",value:function(){return new RegExp("^"+a.C_CHARS+"+$").test(this.data)}}]),h})(r.default);return nc.default=y,nc}var a_;function ZR(){if(a_)return En;a_=1,Object.defineProperty(En,"__esModule",{value:!0}),En.CODE128C=En.CODE128B=En.CODE128A=En.CODE128=void 0;var i=QR(),e=y(i),r=KR(),a=y(r),l=XR(),c=y(l),d=WR(),m=y(d);function y(f){return f&&f.__esModule?f:{default:f}}return En.CODE128=e.default,En.CODE128A=a.default,En.CODE128B=c.default,En.CODE128C=m.default,En}var Nt={},rc={},rr={},s_;function Nl(){return s_||(s_=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.SIDE_BIN="101",rr.MIDDLE_BIN="01010",rr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},rr.EAN2_STRUCTURE=["LL","LG","GL","GG"],rr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],rr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),rr}var ic={},ac={},l_;function Al(){if(l_)return ac;l_=1,Object.defineProperty(ac,"__esModule",{value:!0});var i=Nl(),e=function(a,l,c){var d=a.split("").map(function(y,f){return i.BINARIES[l[f]]}).map(function(y,f){return y?y[a[f]]:""});if(c){var m=a.length-1;d=d.map(function(y,f){return f<m?y+c:y})}return d.join("")};return ac.default=e,ac}var o_;function Gx(){if(o_)return ic;o_=1,Object.defineProperty(ic,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var w=0;w<b.length;w++){var S=b[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,w){return b&&_(v.prototype,b),w&&_(v,w),v}})(),e=Nl(),r=Al(),a=d(r),l=an(),c=d(l);function d(_){return _&&_.__esModule?_:{default:_}}function m(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function y(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var h=(function(_){f(v,_);function v(b,w){m(this,v);var S=y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,w));return S.fontSize=!w.flat&&w.fontSize>w.width*10?w.width*10:w.fontSize,S.guardHeight=w.height+S.fontSize/2+w.textMargin,S}return i(v,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(w,S){return this.text.substr(w,S)}},{key:"leftEncode",value:function(w,S){return(0,a.default)(w,S)}},{key:"rightText",value:function(w,S){return this.text.substr(w,S)}},{key:"rightEncode",value:function(w,S){return(0,a.default)(w,S)}},{key:"encodeGuarded",value:function(){var w={fontSize:this.fontSize},S={height:this.guardHeight};return[{data:e.SIDE_BIN,options:S},{data:this.leftEncode(),text:this.leftText(),options:w},{data:e.MIDDLE_BIN,options:S},{data:this.rightEncode(),text:this.rightText(),options:w},{data:e.SIDE_BIN,options:S}]}},{key:"encodeFlat",value:function(){var w=[e.SIDE_BIN,this.leftEncode(),e.MIDDLE_BIN,this.rightEncode(),e.SIDE_BIN];return{data:w.join(""),text:this.text}}}]),v})(c.default);return ic.default=h,ic}var c_;function JR(){if(c_)return rc;c_=1,Object.defineProperty(rc,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var w=0;w<b.length;w++){var S=b[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,w){return b&&_(v.prototype,b),w&&_(v,w),v}})(),e=function _(v,b,w){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,b);if(S===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,b,w)}else{if("value"in S)return S.value;var j=S.get;return j===void 0?void 0:j.call(w)}},r=Nl(),a=Gx(),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function m(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function y(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var f=function(v){var b=v.substr(0,12).split("").map(function(w){return+w}).reduce(function(w,S,C){return C%2?w+S*3:w+S},0);return(10-b%10)%10},h=(function(_){y(v,_);function v(b,w){d(this,v),b.search(/^[0-9]{12}$/)!==-1&&(b+=f(b));var S=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,w));return S.lastChar=w.lastChar,S}return i(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===f(this.data)}},{key:"leftText",value:function(){return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var w=this.data.substr(1,6),S=r.EAN13_STRUCTURE[this.data[0]];return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftEncode",this).call(this,w,S)}},{key:"rightText",value:function(){return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var w=this.data.substr(7,6);return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightEncode",this).call(this,w,"RRRRRR")}},{key:"encodeGuarded",value:function(){var w=e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(w.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(w.push({data:"00"}),w.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),w}}]),v})(l.default);return rc.default=h,rc}var sc={},u_;function eD(){if(u_)return sc;u_=1,Object.defineProperty(sc,"__esModule",{value:!0});var i=(function(){function h(_,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,v,b){return v&&h(_.prototype,v),b&&h(_,b),_}})(),e=function h(_,v,b){_===null&&(_=Function.prototype);var w=Object.getOwnPropertyDescriptor(_,v);if(w===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:h(S,v,b)}else{if("value"in w)return w.value;var C=w.get;return C===void 0?void 0:C.call(b)}},r=Gx(),a=l(r);function l(h){return h&&h.__esModule?h:{default:h}}function c(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function d(h,_){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:h}function m(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);h.prototype=Object.create(_&&_.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(h,_):h.__proto__=_)}var y=function(_){var v=_.substr(0,7).split("").map(function(b){return+b}).reduce(function(b,w,S){return S%2?b+w:b+w*3},0);return(10-v%10)%10},f=(function(h){m(_,h);function _(v,b){return c(this,_),v.search(/^[0-9]{7}$/)!==-1&&(v+=y(v)),d(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,v,b))}return i(_,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===y(this.data)}},{key:"leftText",value:function(){return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var b=this.data.substr(0,4);return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftEncode",this).call(this,b,"LLLL")}},{key:"rightText",value:function(){return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var b=this.data.substr(4,4);return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightEncode",this).call(this,b,"RRRR")}}]),_})(a.default);return sc.default=f,sc}var lc={},d_;function tD(){if(d_)return lc;d_=1,Object.defineProperty(lc,"__esModule",{value:!0});var i=(function(){function v(b,w){for(var S=0;S<w.length;S++){var C=w[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,w,S){return w&&v(b.prototype,w),S&&v(b,S),b}})(),e=Nl(),r=Al(),a=d(r),l=an(),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function m(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function y(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var h=function(b){var w=b.split("").map(function(S){return+S}).reduce(function(S,C,j){return j%2?S+C*9:S+C*3},0);return w%10},_=(function(v){f(b,v);function b(w,S){return m(this,b),y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w,S))}return i(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var S=e.EAN5_STRUCTURE[h(this.data)];return{data:"1011"+(0,a.default)(this.data,S,"01"),text:this.text}}}]),b})(c.default);return lc.default=_,lc}var oc={},f_;function nD(){if(f_)return oc;f_=1,Object.defineProperty(oc,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var w=0;w<b.length;w++){var S=b[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,w){return b&&_(v.prototype,b),w&&_(v,w),v}})(),e=Nl(),r=Al(),a=d(r),l=an(),c=d(l);function d(_){return _&&_.__esModule?_:{default:_}}function m(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function y(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var h=(function(_){f(v,_);function v(b,w){return m(this,v),y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,w))}return i(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var w=e.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,a.default)(this.data,w,"01"),text:this.text}}}]),v})(c.default);return oc.default=h,oc}var $s={},h_;function $x(){if(h_)return $s;h_=1,Object.defineProperty($s,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var w=0;w<b.length;w++){var S=b[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,w){return b&&_(v.prototype,b),w&&_(v,w),v}})();$s.checksum=h;var e=Al(),r=c(e),a=an(),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function m(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function y(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var f=(function(_){y(v,_);function v(b,w){d(this,v),b.search(/^[0-9]{11}$/)!==-1&&(b+=h(b));var S=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,w));return S.displayValue=w.displayValue,w.fontSize>w.width*10?S.fontSize=w.width*10:S.fontSize=w.fontSize,S.guardHeight=w.height+S.fontSize/2+w.textMargin,S}return i(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==h(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var w="";return w+="101",w+=(0,r.default)(this.data.substr(0,6),"LLLLLL"),w+="01010",w+=(0,r.default)(this.data.substr(6,6),"RRRRRR"),w+="101",{data:w,text:this.text}}},{key:"guardedEncoding",value:function(){var w=[];return this.displayValue&&w.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),w.push({data:"101"+(0,r.default)(this.data[0],"L"),options:{height:this.guardHeight}}),w.push({data:(0,r.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),w.push({data:"01010",options:{height:this.guardHeight}}),w.push({data:(0,r.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),w.push({data:(0,r.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&w.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),w}}]),v})(l.default);function h(_){var v=0,b;for(b=1;b<11;b+=2)v+=parseInt(_[b]);for(b=0;b<11;b+=2)v+=parseInt(_[b])*3;return(10-v%10)%10}return $s.default=f,$s}var cc={},m_;function rD(){if(m_)return cc;m_=1,Object.defineProperty(cc,"__esModule",{value:!0});var i=(function(){function w(S,C){for(var j=0;j<C.length;j++){var L=C[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(S,L.key,L)}}return function(S,C,j){return C&&w(S.prototype,C),j&&w(S,j),S}})(),e=Al(),r=d(e),a=an(),l=d(a),c=$x();function d(w){return w&&w.__esModule?w:{default:w}}function m(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function y(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function f(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var h=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],_=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],v=(function(w){f(S,w);function S(C,j){m(this,S);var L=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,j));if(L.isValid=!1,C.search(/^[0-9]{6}$/)!==-1)L.middleDigits=C,L.upcA=b(C,"0"),L.text=j.text||""+L.upcA[0]+C+L.upcA[L.upcA.length-1],L.isValid=!0;else if(C.search(/^[01][0-9]{7}$/)!==-1)if(L.middleDigits=C.substring(1,C.length-1),L.upcA=b(L.middleDigits,C[0]),L.upcA[L.upcA.length-1]===C[C.length-1])L.isValid=!0;else return y(L);else return y(L);return L.displayValue=j.displayValue,j.fontSize>j.width*10?L.fontSize=j.width*10:L.fontSize=j.fontSize,L.guardHeight=j.height+L.fontSize/2+j.textMargin,L}return i(S,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var j="";return j+="101",j+=this.encodeMiddleDigits(),j+="010101",{data:j,text:this.text}}},{key:"guardedEncoding",value:function(){var j=[];return this.displayValue&&j.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),j.push({data:"101",options:{height:this.guardHeight}}),j.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),j.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&j.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),j}},{key:"encodeMiddleDigits",value:function(){var j=this.upcA[0],L=this.upcA[this.upcA.length-1],G=_[parseInt(L)][parseInt(j)];return(0,r.default)(this.middleDigits,G)}}]),S})(l.default);function b(w,S){for(var C=parseInt(w[w.length-1]),j=h[C],L="",G=0,Q=0;Q<j.length;Q++){var ae=j[Q];ae==="X"?L+=w[G++]:L+=ae}return L=""+S+L,""+L+(0,c.checksum)(L)}return cc.default=v,cc}var g_;function iD(){if(g_)return Nt;g_=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.UPCE=Nt.UPC=Nt.EAN2=Nt.EAN5=Nt.EAN8=Nt.EAN13=void 0;var i=JR(),e=v(i),r=eD(),a=v(r),l=tD(),c=v(l),d=nD(),m=v(d),y=$x(),f=v(y),h=rD(),_=v(h);function v(b){return b&&b.__esModule?b:{default:b}}return Nt.EAN13=e.default,Nt.EAN8=a.default,Nt.EAN5=c.default,Nt.EAN2=m.default,Nt.UPC=f.default,Nt.UPCE=_.default,Nt}var mi={},uc={},xa={},p_;function aD(){return p_||(p_=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.START_BIN="1010",xa.END_BIN="11101",xa.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),xa}var y_;function Yx(){if(y_)return uc;y_=1,Object.defineProperty(uc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=aD(),r=an(),a=l(r);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var v=this,b=this.data.match(/.{2}/g).map(function(w){return v.encodePair(w)}).join("");return{data:e.START_BIN+b+e.END_BIN,text:this.text}}},{key:"encodePair",value:function(v){var b=e.BINARIES[v[1]];return e.BINARIES[v[0]].split("").map(function(w,S){return(w==="1"?"111":"1")+(b[S]==="1"?"000":"0")}).join("")}}]),h})(a.default);return uc.default=y,uc}var dc={},v_;function sD(){if(v_)return dc;v_=1,Object.defineProperty(dc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=Yx(),r=a(e);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function c(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function d(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var m=function(h){var _=h.substr(0,13).split("").map(function(v){return parseInt(v,10)}).reduce(function(v,b,w){return v+b*(3-w%2*2)},0);return Math.ceil(_/10)*10-_},y=(function(f){d(h,f);function h(_,v){return l(this,h),_.search(/^[0-9]{13}$/)!==-1&&(_+=m(_)),c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v))}return i(h,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===m(this.data)}}]),h})(r.default);return dc.default=y,dc}var __;function lD(){if(__)return mi;__=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.ITF14=mi.ITF=void 0;var i=Yx(),e=l(i),r=sD(),a=l(r);function l(c){return c&&c.__esModule?c:{default:c}}return mi.ITF=e.default,mi.ITF14=a.default,mi}var Xt={},fc={},b_;function Cl(){if(b_)return fc;b_=1,Object.defineProperty(fc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=an(),r=a(e);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function c(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function d(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var m=(function(f){d(h,f);function h(_,v){return l(this,h),c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v))}return i(h,[{key:"encode",value:function(){for(var v="110",b=0;b<this.data.length;b++){var w=parseInt(this.data[b]),S=w.toString(2);S=y(S,4-S.length);for(var C=0;C<S.length;C++)v+=S[C]=="0"?"100":"110"}return v+="1001",{data:v,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),h})(r.default);function y(f,h){for(var _=0;_<h;_++)f="0"+f;return f}return fc.default=m,fc}var hc={},Ys={},x_;function bu(){if(x_)return Ys;x_=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.mod10=i,Ys.mod11=e;function i(r){for(var a=0,l=0;l<r.length;l++){var c=parseInt(r[l]);(l+r.length)%2===0?a+=c:a+=c*2%10+Math.floor(c*2/10)}return(10-a%10)%10}function e(r){for(var a=0,l=[2,3,4,5,6,7],c=0;c<r.length;c++){var d=parseInt(r[r.length-1-c]);a+=l[c%l.length]*d}return(11-a%11)%11}return Ys}var w_;function oD(){if(w_)return hc;w_=1,Object.defineProperty(hc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=bu();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h+(0,r.mod10)(h),_))}return f})(e.default);return hc.default=m,hc}var mc={},E_;function cD(){if(E_)return mc;E_=1,Object.defineProperty(mc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=bu();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h+(0,r.mod11)(h),_))}return f})(e.default);return mc.default=m,mc}var gc={},S_;function uD(){if(S_)return gc;S_=1,Object.defineProperty(gc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=bu();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),h+=(0,r.mod10)(h),h+=(0,r.mod10)(h),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return f})(e.default);return gc.default=m,gc}var pc={},T_;function dD(){if(T_)return pc;T_=1,Object.defineProperty(pc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=bu();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),h+=(0,r.mod11)(h),h+=(0,r.mod10)(h),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return f})(e.default);return pc.default=m,pc}var N_;function fD(){if(N_)return Xt;N_=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.MSI1110=Xt.MSI1010=Xt.MSI11=Xt.MSI10=Xt.MSI=void 0;var i=Cl(),e=h(i),r=oD(),a=h(r),l=cD(),c=h(l),d=uD(),m=h(d),y=dD(),f=h(y);function h(_){return _&&_.__esModule?_:{default:_}}return Xt.MSI=e.default,Xt.MSI10=a.default,Xt.MSI11=c.default,Xt.MSI1010=m.default,Xt.MSI1110=f.default,Xt}var Qs={},A_;function hD(){if(A_)return Qs;A_=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.pharmacode=void 0;var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=an(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){l(this,f);var v=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_));return v.number=parseInt(h,10),v}return i(f,[{key:"encode",value:function(){for(var _=this.number,v="";!isNaN(_)&&_!=0;)_%2===0?(v="11100"+v,_=(_-2)/2):(v="100"+v,_=(_-1)/2);return v=v.slice(0,-2),{data:v,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),f})(r.default);return Qs.pharmacode=m,Qs}var Ks={},C_;function mD(){if(C_)return Ks;C_=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.codabar=void 0;var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=an(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){l(this,f),h.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(h="A"+h+"A");var v=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h.toUpperCase(),_));return v.text=v.options.text||v.text.replace(/[A-D]/g,""),v}return i(f,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var _=[],v=this.getEncodings(),b=0;b<this.data.length;b++)_.push(v[this.data.charAt(b)]),b!==this.data.length-1&&_.push("0");return{text:this.text,data:_.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),f})(r.default);return Ks.codabar=m,Ks}var gi={},yc={},wa={},O_;function gD(){return O_||(O_=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"],wa.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],wa.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),wa}var R_;function Qx(){if(R_)return yc;R_=1,Object.defineProperty(yc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=gD(),r=an(),a=l(r);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v))}return i(h,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var v=this.data.split("").flatMap(function(C){return e.MULTI_SYMBOLS[C]||C}),b=v.map(function(C){return h.getEncoding(C)}).join(""),w=h.checksum(v,20),S=h.checksum(v.concat(w),15);return{text:this.text,data:h.getEncoding("ÿ")+b+h.getEncoding(w)+h.getEncoding(S)+h.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(v){return e.BINARIES[h.symbolValue(v)]}},{key:"getSymbol",value:function(v){return e.SYMBOLS[v]}},{key:"symbolValue",value:function(v){return e.SYMBOLS.indexOf(v)}},{key:"checksum",value:function(v,b){var w=v.slice().reverse().reduce(function(S,C,j){var L=j%b+1;return S+h.symbolValue(C)*L},0);return h.getSymbol(w%47)}}]),h})(a.default);return yc.default=y,yc}var vc={},D_;function pD(){if(D_)return vc;D_=1,Object.defineProperty(vc,"__esModule",{value:!0});var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=Qx(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return i(f,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),f})(r.default);return vc.default=m,vc}var M_;function yD(){if(M_)return gi;M_=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.CODE93FullASCII=gi.CODE93=void 0;var i=Qx(),e=l(i),r=pD(),a=l(r);function l(c){return c&&c.__esModule?c:{default:c}}return gi.CODE93=e.default,gi.CODE93FullASCII=a.default,gi}var Xs={},j_;function vD(){if(j_)return Xs;j_=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.GenericBarcode=void 0;var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=an(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return i(f,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),f})(r.default);return Xs.GenericBarcode=m,Xs}var k_;function _D(){if(k_)return Ko;k_=1,Object.defineProperty(Ko,"__esModule",{value:!0});var i=$R(),e=ZR(),r=iD(),a=lD(),l=fD(),c=hD(),d=mD(),m=yD(),y=vD();return Ko.default={CODE39:i.CODE39,CODE128:e.CODE128,CODE128A:e.CODE128A,CODE128B:e.CODE128B,CODE128C:e.CODE128C,EAN13:r.EAN13,EAN8:r.EAN8,EAN5:r.EAN5,EAN2:r.EAN2,UPC:r.UPC,UPCE:r.UPCE,ITF14:a.ITF14,ITF:a.ITF,MSI:l.MSI,MSI10:l.MSI10,MSI11:l.MSI11,MSI1010:l.MSI1010,MSI1110:l.MSI1110,pharmacode:c.pharmacode,codabar:d.codabar,CODE93:m.CODE93,CODE93FullASCII:m.CODE93FullASCII,GenericBarcode:y.GenericBarcode},Ko}var _c={},I_;function xu(){if(I_)return _c;I_=1,Object.defineProperty(_c,"__esModule",{value:!0});var i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e};return _c.default=function(e,r){return i({},e,r)},_c}var bc={},L_;function bD(){if(L_)return bc;L_=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.default=i;function i(e){var r=[];function a(l){if(Array.isArray(l))for(var c=0;c<l.length;c++)a(l[c]);else l.text=l.text||"",l.data=l.data||"",r.push(l)}return a(e),r}return bc}var xc={},U_;function xD(){if(U_)return xc;U_=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.default=i;function i(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}return xc}var wc={},Ec={},Sc={},B_;function Kx(){if(B_)return Sc;B_=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.default=i;function i(e){var r=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var a in r)r.hasOwnProperty(a)&&(a=r[a],typeof e[a]=="string"&&(e[a]=parseInt(e[a],10)));return typeof e.displayValue=="string"&&(e.displayValue=e.displayValue!="false"),e}return Sc}var Tc={},P_;function Xx(){if(P_)return Tc;P_=1,Object.defineProperty(Tc,"__esModule",{value:!0});var i={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return Tc.default=i,Tc}var z_;function wD(){if(z_)return Ec;z_=1,Object.defineProperty(Ec,"__esModule",{value:!0});var i=Kx(),e=l(i),r=Xx(),a=l(r);function l(d){return d&&d.__esModule?d:{default:d}}function c(d){var m={};for(var y in a.default)a.default.hasOwnProperty(y)&&(d.hasAttribute("jsbarcode-"+y.toLowerCase())&&(m[y]=d.getAttribute("jsbarcode-"+y.toLowerCase())),d.hasAttribute("data-"+y.toLowerCase())&&(m[y]=d.getAttribute("data-"+y.toLowerCase())));return m.value=d.getAttribute("jsbarcode-value")||d.getAttribute("data-value"),m=(0,e.default)(m),m}return Ec.default=c,Ec}var Nc={},Ac={},Wt={},q_;function Wx(){if(q_)return Wt;q_=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.getTotalWidthOfEncodings=Wt.calculateEncodingAttributes=Wt.getBarcodePadding=Wt.getEncodingHeight=Wt.getMaximumHeightOfEncodings=void 0;var i=xu(),e=r(i);function r(f){return f&&f.__esModule?f:{default:f}}function a(f,h){return h.height+(h.displayValue&&f.text.length>0?h.fontSize+h.textMargin:0)+h.marginTop+h.marginBottom}function l(f,h,_){if(_.displayValue&&h<f){if(_.textAlign=="center")return Math.floor((f-h)/2);if(_.textAlign=="left")return 0;if(_.textAlign=="right")return Math.floor(f-h)}return 0}function c(f,h,_){for(var v=0;v<f.length;v++){var b=f[v],w=(0,e.default)(h,b.options),S;w.displayValue?S=y(b.text,w,_):S=0;var C=b.data.length*w.width;b.width=Math.ceil(Math.max(S,C)),b.height=a(b,w),b.barcodePadding=l(S,C,w)}}function d(f){for(var h=0,_=0;_<f.length;_++)h+=f[_].width;return h}function m(f){for(var h=0,_=0;_<f.length;_++)f[_].height>h&&(h=f[_].height);return h}function y(f,h,_){var v;if(_)v=_;else if(typeof document<"u")v=document.createElement("canvas").getContext("2d");else return 0;v.font=h.fontOptions+" "+h.fontSize+"px "+h.font;var b=v.measureText(f);if(!b)return 0;var w=b.width;return w}return Wt.getMaximumHeightOfEncodings=m,Wt.getEncodingHeight=a,Wt.getBarcodePadding=l,Wt.calculateEncodingAttributes=c,Wt.getTotalWidthOfEncodings=d,Wt}var H_;function ED(){if(H_)return Ac;H_=1,Object.defineProperty(Ac,"__esModule",{value:!0});var i=(function(){function m(y,f){for(var h=0;h<f.length;h++){var _=f[h];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,f,h){return f&&m(y.prototype,f),h&&m(y,h),y}})(),e=xu(),r=l(e),a=Wx();function l(m){return m&&m.__esModule?m:{default:m}}function c(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}var d=(function(){function m(y,f,h){c(this,m),this.canvas=y,this.encodings=f,this.options=h}return i(m,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var f=0;f<this.encodings.length;f++){var h=(0,r.default)(this.options,this.encodings[f].options);this.drawCanvasBarcode(h,this.encodings[f]),this.drawCanvasText(h,this.encodings[f]),this.moveCanvasDrawing(this.encodings[f])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var f=this.canvas.getContext("2d");f.save(),(0,a.calculateEncodingAttributes)(this.encodings,this.options,f);var h=(0,a.getTotalWidthOfEncodings)(this.encodings),_=(0,a.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=h+this.options.marginLeft+this.options.marginRight,this.canvas.height=_,f.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(f.fillStyle=this.options.background,f.fillRect(0,0,this.canvas.width,this.canvas.height)),f.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(f,h){var _=this.canvas.getContext("2d"),v=h.data,b;f.textPosition=="top"?b=f.marginTop+f.fontSize+f.textMargin:b=f.marginTop,_.fillStyle=f.lineColor;for(var w=0;w<v.length;w++){var S=w*f.width+h.barcodePadding;v[w]==="1"?_.fillRect(S,b,f.width,f.height):v[w]&&_.fillRect(S,b,f.width,f.height*v[w])}}},{key:"drawCanvasText",value:function(f,h){var _=this.canvas.getContext("2d"),v=f.fontOptions+" "+f.fontSize+"px "+f.font;if(f.displayValue){var b,w;f.textPosition=="top"?w=f.marginTop+f.fontSize-f.textMargin:w=f.height+f.textMargin+f.marginTop+f.fontSize,_.font=v,f.textAlign=="left"||h.barcodePadding>0?(b=0,_.textAlign="left"):f.textAlign=="right"?(b=h.width-1,_.textAlign="right"):(b=h.width/2,_.textAlign="center"),_.fillText(h.text,b,w)}}},{key:"moveCanvasDrawing",value:function(f){var h=this.canvas.getContext("2d");h.translate(f.width,0)}},{key:"restoreCanvas",value:function(){var f=this.canvas.getContext("2d");f.restore()}}]),m})();return Ac.default=d,Ac}var Cc={},F_;function SD(){if(F_)return Cc;F_=1,Object.defineProperty(Cc,"__esModule",{value:!0});var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=xu(),r=l(e),a=Wx();function l(y){return y&&y.__esModule?y:{default:y}}function c(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}var d="http://www.w3.org/2000/svg",m=(function(){function y(f,h,_){c(this,y),this.svg=f,this.encodings=h,this.options=_,this.document=_.xmlDocument||document}return i(y,[{key:"render",value:function(){var h=this.options.marginLeft;this.prepareSVG();for(var _=0;_<this.encodings.length;_++){var v=this.encodings[_],b=(0,r.default)(this.options,v.options),w=this.createGroup(h,b.marginTop,this.svg);this.setGroupOptions(w,b),this.drawSvgBarcode(w,b,v),this.drawSVGText(w,b,v),h+=v.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,a.calculateEncodingAttributes)(this.encodings,this.options);var h=(0,a.getTotalWidthOfEncodings)(this.encodings),_=(0,a.getMaximumHeightOfEncodings)(this.encodings),v=h+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(v,_),this.options.background&&this.drawRect(0,0,v,_,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(h,_,v){var b=v.data,w;_.textPosition=="top"?w=_.fontSize+_.textMargin:w=0;for(var S=0,C=0,j=0;j<b.length;j++)C=j*_.width+v.barcodePadding,b[j]==="1"?S++:S>0&&(this.drawRect(C-_.width*S,w,_.width*S,_.height,h),S=0);S>0&&this.drawRect(C-_.width*(S-1),w,_.width*S,_.height,h)}},{key:"drawSVGText",value:function(h,_,v){var b=this.document.createElementNS(d,"text");if(_.displayValue){var w,S;b.setAttribute("style","font:"+_.fontOptions+" "+_.fontSize+"px "+_.font),_.textPosition=="top"?S=_.fontSize-_.textMargin:S=_.height+_.textMargin+_.fontSize,_.textAlign=="left"||v.barcodePadding>0?(w=0,b.setAttribute("text-anchor","start")):_.textAlign=="right"?(w=v.width-1,b.setAttribute("text-anchor","end")):(w=v.width/2,b.setAttribute("text-anchor","middle")),b.setAttribute("x",w),b.setAttribute("y",S),b.appendChild(this.document.createTextNode(v.text)),h.appendChild(b)}}},{key:"setSvgAttributes",value:function(h,_){var v=this.svg;v.setAttribute("width",h+"px"),v.setAttribute("height",_+"px"),v.setAttribute("x","0px"),v.setAttribute("y","0px"),v.setAttribute("viewBox","0 0 "+h+" "+_),v.setAttribute("xmlns",d),v.setAttribute("version","1.1"),v.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(h,_,v){var b=this.document.createElementNS(d,"g");return b.setAttribute("transform","translate("+h+", "+_+")"),v.appendChild(b),b}},{key:"setGroupOptions",value:function(h,_){h.setAttribute("style","fill:"+_.lineColor+";")}},{key:"drawRect",value:function(h,_,v,b,w){var S=this.document.createElementNS(d,"rect");return S.setAttribute("x",h),S.setAttribute("y",_),S.setAttribute("width",v),S.setAttribute("height",b),w.appendChild(S),S}}]),y})();return Cc.default=m,Cc}var Oc={},V_;function TD(){if(V_)return Oc;V_=1,Object.defineProperty(Oc,"__esModule",{value:!0});var i=(function(){function a(l,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}return function(l,c,d){return c&&a(l.prototype,c),d&&a(l,d),l}})();function e(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var r=(function(){function a(l,c,d){e(this,a),this.object=l,this.encodings=c,this.options=d}return i(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a})();return Oc.default=r,Oc}var G_;function ND(){if(G_)return Nc;G_=1,Object.defineProperty(Nc,"__esModule",{value:!0});var i=ED(),e=d(i),r=SD(),a=d(r),l=TD(),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}return Nc.default={CanvasRenderer:e.default,SVGRenderer:a.default,ObjectRenderer:c.default},Nc}var Ea={},$_;function Zx(){if($_)return Ea;$_=1,Object.defineProperty(Ea,"__esModule",{value:!0});function i(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function e(d,m){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:d}function r(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(d,m):d.__proto__=m)}var a=(function(d){r(m,d);function m(y,f){i(this,m);var h=e(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return h.name="InvalidInputException",h.symbology=y,h.input=f,h.message='"'+h.input+'" is not a valid input for '+h.symbology,h}return m})(Error),l=(function(d){r(m,d);function m(){i(this,m);var y=e(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return y.name="InvalidElementException",y.message="Not supported type to render on",y}return m})(Error),c=(function(d){r(m,d);function m(){i(this,m);var y=e(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return y.name="NoElementException",y.message="No element to render on.",y}return m})(Error);return Ea.InvalidInputException=a,Ea.InvalidElementException=l,Ea.NoElementException=c,Ea}var Y_;function AD(){if(Y_)return wc;Y_=1,Object.defineProperty(wc,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},e=wD(),r=d(e),a=ND(),l=d(a),c=Zx();function d(h){return h&&h.__esModule?h:{default:h}}function m(h){if(typeof h=="string")return y(h);if(Array.isArray(h)){for(var _=[],v=0;v<h.length;v++)_.push(m(h[v]));return _}else{if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLImageElement)return f(h);if(h&&h.nodeName&&h.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&h instanceof SVGElement)return{element:h,options:(0,r.default)(h),renderer:l.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement)return{element:h,options:(0,r.default)(h),renderer:l.default.CanvasRenderer};if(h&&h.getContext)return{element:h,renderer:l.default.CanvasRenderer};if(h&&(typeof h>"u"?"undefined":i(h))==="object"&&!h.nodeName)return{element:h,renderer:l.default.ObjectRenderer};throw new c.InvalidElementException}}function y(h){var _=document.querySelectorAll(h);if(_.length!==0){for(var v=[],b=0;b<_.length;b++)v.push(m(_[b]));return v}}function f(h){var _=document.createElement("canvas");return{element:_,options:(0,r.default)(h),renderer:l.default.CanvasRenderer,afterRender:function(){h.setAttribute("src",_.toDataURL())}}}return wc.default=m,wc}var Rc={},Q_;function CD(){if(Q_)return Rc;Q_=1,Object.defineProperty(Rc,"__esModule",{value:!0});var i=(function(){function a(l,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}return function(l,c,d){return c&&a(l.prototype,c),d&&a(l,d),l}})();function e(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var r=(function(){function a(l){e(this,a),this.api=l}return i(a,[{key:"handleCatch",value:function(c){if(c.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw c.message;else throw c;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(c){try{var d=c.apply(void 0,arguments);return this.api._options.valid(!0),d}catch(m){return this.handleCatch(m),this.api}}}]),a})();return Rc.default=r,Rc}var rh,K_;function OD(){if(K_)return rh;K_=1;var i=_D(),e=j(i),r=xu(),a=j(r),l=bD(),c=j(l),d=xD(),m=j(d),y=AD(),f=j(y),h=Kx(),_=j(h),v=CD(),b=j(v),w=Zx(),S=Xx(),C=j(S);function j(V){return V&&V.__esModule?V:{default:V}}var L=function(){},G=function(F,$,Y){var Z=new L;if(typeof F>"u")throw Error("No element to render on was provided.");return Z._renderProperties=(0,f.default)(F),Z._encodings=[],Z._options=C.default,Z._errorHandler=new b.default(Z),typeof $<"u"&&(Y=Y||{},Y.format||(Y.format=ee()),Z.options(Y)[Y.format]($,Y).render()),Z};G.getModule=function(V){return e.default[V]};for(var Q in e.default)e.default.hasOwnProperty(Q)&&ae(e.default,Q);function ae(V,F){L.prototype[F]=L.prototype[F.toUpperCase()]=L.prototype[F.toLowerCase()]=function($,Y){var Z=this;return Z._errorHandler.wrapBarcodeCall(function(){Y.text=typeof Y.text>"u"?void 0:""+Y.text;var q=(0,a.default)(Z._options,Y);q=(0,_.default)(q);var pe=V[F],B=W($,pe,q);return Z._encodings.push(B),Z})}}function W(V,F,$){V=""+V;var Y=new F(V,$);if(!Y.valid())throw new w.InvalidInputException(Y.constructor.name,V);var Z=Y.encode();Z=(0,c.default)(Z);for(var q=0;q<Z.length;q++)Z[q].options=(0,a.default)($,Z[q].options);return Z}function ee(){return e.default.CODE128?"CODE128":Object.keys(e.default)[0]}L.prototype.options=function(V){return this._options=(0,a.default)(this._options,V),this},L.prototype.blank=function(V){var F=new Array(V+1).join("0");return this._encodings.push({data:F}),this},L.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var V;for(var F in this._renderProperties){V=this._renderProperties[F];var $=(0,a.default)(this._options,V.options);$.format=="auto"&&($.format=ee()),this._errorHandler.wrapBarcodeCall(function(){var Y=$.value,Z=e.default[$.format.toUpperCase()],q=W(Y,Z,$);J(V,q,$)})}}},L.prototype.render=function(){if(!this._renderProperties)throw new w.NoElementException;if(Array.isArray(this._renderProperties))for(var V=0;V<this._renderProperties.length;V++)J(this._renderProperties[V],this._encodings,this._options);else J(this._renderProperties,this._encodings,this._options);return this},L.prototype._defaults=C.default;function J(V,F,$){F=(0,c.default)(F);for(var Y=0;Y<F.length;Y++)F[Y].options=(0,a.default)($,F[Y].options),(0,m.default)(F[Y].options);(0,m.default)($);var Z=V.renderer,q=new Z(V.element,F,$);q.render(),V.afterRender&&V.afterRender()}return typeof window<"u"&&(window.JsBarcode=G),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(V,F){var $=[];return jQuery(this).each(function(){$.push(this)}),G($,V,F)}),rh=G,rh}var RD=OD();const X_=C1(RD);var Sa={},ih,W_;function DD(){return W_||(W_=1,ih=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ih}var ah={},kr={},Z_;function Ri(){if(Z_)return kr;Z_=1;let i;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return kr.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17},kr.getSymbolTotalCodewords=function(a){return e[a]},kr.getBCHDigit=function(r){let a=0;for(;r!==0;)a++,r>>>=1;return a},kr.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');i=a},kr.isKanjiModeEnabled=function(){return typeof i<"u"},kr.toSJIS=function(a){return i(a)},kr}var sh={},J_;function Hm(){return J_||(J_=1,(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+r)}}i.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},i.from=function(a,l){if(i.isValid(a))return a;try{return e(a)}catch{return l}}})(sh)),sh}var lh,e1;function MD(){if(e1)return lh;e1=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)===1},put:function(e,r){for(let a=0;a<r;a++)this.putBit((e>>>r-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},lh=i,lh}var oh,t1;function jD(){if(t1)return oh;t1=1;function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return i.prototype.set=function(e,r,a,l){const c=e*this.size+r;this.data[c]=a,l&&(this.reservedBit[c]=!0)},i.prototype.get=function(e,r){return this.data[e*this.size+r]},i.prototype.xor=function(e,r,a){this.data[e*this.size+r]^=a},i.prototype.isReserved=function(e,r){return this.reservedBit[e*this.size+r]},oh=i,oh}var ch={},n1;function kD(){return n1||(n1=1,(function(i){const e=Ri().getSymbolSize;i.getRowColCoords=function(a){if(a===1)return[];const l=Math.floor(a/7)+2,c=e(a),d=c===145?26:Math.ceil((c-13)/(2*l-2))*2,m=[c-7];for(let y=1;y<l-1;y++)m[y]=m[y-1]-d;return m.push(6),m.reverse()},i.getPositions=function(a){const l=[],c=i.getRowColCoords(a),d=c.length;for(let m=0;m<d;m++)for(let y=0;y<d;y++)m===0&&y===0||m===0&&y===d-1||m===d-1&&y===0||l.push([c[m],c[y]]);return l}})(ch)),ch}var uh={},r1;function ID(){if(r1)return uh;r1=1;const i=Ri().getSymbolSize,e=7;return uh.getPositions=function(a){const l=i(a);return[[0,0],[l-e,0],[0,l-e]]},uh}var dh={},i1;function LD(){return i1||(i1=1,(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};i.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},i.from=function(l){return i.isValid(l)?parseInt(l,10):void 0},i.getPenaltyN1=function(l){const c=l.size;let d=0,m=0,y=0,f=null,h=null;for(let _=0;_<c;_++){m=y=0,f=h=null;for(let v=0;v<c;v++){let b=l.get(_,v);b===f?m++:(m>=5&&(d+=e.N1+(m-5)),f=b,m=1),b=l.get(v,_),b===h?y++:(y>=5&&(d+=e.N1+(y-5)),h=b,y=1)}m>=5&&(d+=e.N1+(m-5)),y>=5&&(d+=e.N1+(y-5))}return d},i.getPenaltyN2=function(l){const c=l.size;let d=0;for(let m=0;m<c-1;m++)for(let y=0;y<c-1;y++){const f=l.get(m,y)+l.get(m,y+1)+l.get(m+1,y)+l.get(m+1,y+1);(f===4||f===0)&&d++}return d*e.N2},i.getPenaltyN3=function(l){const c=l.size;let d=0,m=0,y=0;for(let f=0;f<c;f++){m=y=0;for(let h=0;h<c;h++)m=m<<1&2047|l.get(f,h),h>=10&&(m===1488||m===93)&&d++,y=y<<1&2047|l.get(h,f),h>=10&&(y===1488||y===93)&&d++}return d*e.N3},i.getPenaltyN4=function(l){let c=0;const d=l.data.length;for(let y=0;y<d;y++)c+=l.data[y];return Math.abs(Math.ceil(c*100/d/5)-10)*e.N4};function r(a,l,c){switch(a){case i.Patterns.PATTERN000:return(l+c)%2===0;case i.Patterns.PATTERN001:return l%2===0;case i.Patterns.PATTERN010:return c%3===0;case i.Patterns.PATTERN011:return(l+c)%3===0;case i.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(c/3))%2===0;case i.Patterns.PATTERN101:return l*c%2+l*c%3===0;case i.Patterns.PATTERN110:return(l*c%2+l*c%3)%2===0;case i.Patterns.PATTERN111:return(l*c%3+(l+c)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}i.applyMask=function(l,c){const d=c.size;for(let m=0;m<d;m++)for(let y=0;y<d;y++)c.isReserved(y,m)||c.xor(y,m,r(l,y,m))},i.getBestMask=function(l,c){const d=Object.keys(i.Patterns).length;let m=0,y=1/0;for(let f=0;f<d;f++){c(f),i.applyMask(f,l);const h=i.getPenaltyN1(l)+i.getPenaltyN2(l)+i.getPenaltyN3(l)+i.getPenaltyN4(l);i.applyMask(f,l),h<y&&(y=h,m=f)}return m}})(dh)),dh}var Dc={},a1;function Jx(){if(a1)return Dc;a1=1;const i=Hm(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Dc.getBlocksCount=function(l,c){switch(c){case i.L:return e[(l-1)*4+0];case i.M:return e[(l-1)*4+1];case i.Q:return e[(l-1)*4+2];case i.H:return e[(l-1)*4+3];default:return}},Dc.getTotalCodewordsCount=function(l,c){switch(c){case i.L:return r[(l-1)*4+0];case i.M:return r[(l-1)*4+1];case i.Q:return r[(l-1)*4+2];case i.H:return r[(l-1)*4+3];default:return}},Dc}var fh={},Ws={},s1;function UD(){if(s1)return Ws;s1=1;const i=new Uint8Array(512),e=new Uint8Array(256);return(function(){let a=1;for(let l=0;l<255;l++)i[l]=a,e[a]=l,a<<=1,a&256&&(a^=285);for(let l=255;l<512;l++)i[l]=i[l-255]})(),Ws.log=function(a){if(a<1)throw new Error("log("+a+")");return e[a]},Ws.exp=function(a){return i[a]},Ws.mul=function(a,l){return a===0||l===0?0:i[e[a]+e[l]]},Ws}var l1;function BD(){return l1||(l1=1,(function(i){const e=UD();i.mul=function(a,l){const c=new Uint8Array(a.length+l.length-1);for(let d=0;d<a.length;d++)for(let m=0;m<l.length;m++)c[d+m]^=e.mul(a[d],l[m]);return c},i.mod=function(a,l){let c=new Uint8Array(a);for(;c.length-l.length>=0;){const d=c[0];for(let y=0;y<l.length;y++)c[y]^=e.mul(l[y],d);let m=0;for(;m<c.length&&c[m]===0;)m++;c=c.slice(m)}return c},i.generateECPolynomial=function(a){let l=new Uint8Array([1]);for(let c=0;c<a;c++)l=i.mul(l,new Uint8Array([1,e.exp(c)]));return l}})(fh)),fh}var hh,o1;function PD(){if(o1)return hh;o1=1;const i=BD();function e(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(a){this.degree=a,this.genPoly=i.generateECPolynomial(this.degree)},e.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(a.length+this.degree);l.set(a);const c=i.mod(l,this.genPoly),d=this.degree-c.length;if(d>0){const m=new Uint8Array(this.degree);return m.set(c,d),m}return c},hh=e,hh}var mh={},gh={},ph={},c1;function ew(){return c1||(c1=1,ph.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ph}var Un={},u1;function tw(){if(u1)return Un;u1=1;const i="[0-9]+",e="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Un.KANJI=new RegExp(r,"g"),Un.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Un.BYTE=new RegExp(a,"g"),Un.NUMERIC=new RegExp(i,"g"),Un.ALPHANUMERIC=new RegExp(e,"g");const l=new RegExp("^"+r+"$"),c=new RegExp("^"+i+"$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Un.testKanji=function(y){return l.test(y)},Un.testNumeric=function(y){return c.test(y)},Un.testAlphanumeric=function(y){return d.test(y)},Un}var d1;function Di(){return d1||(d1=1,(function(i){const e=ew(),r=tw();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(c,d){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!e.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?c.ccBits[0]:d<27?c.ccBits[1]:c.ccBits[2]},i.getBestModeForData=function(c){return r.testNumeric(c)?i.NUMERIC:r.testAlphanumeric(c)?i.ALPHANUMERIC:r.testKanji(c)?i.KANJI:i.BYTE},i.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},i.isValid=function(c){return c&&c.bit&&c.ccBits};function a(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+l)}}i.from=function(c,d){if(i.isValid(c))return c;try{return a(c)}catch{return d}}})(gh)),gh}var f1;function zD(){return f1||(f1=1,(function(i){const e=Ri(),r=Jx(),a=Hm(),l=Di(),c=ew(),d=7973,m=e.getBCHDigit(d);function y(v,b,w){for(let S=1;S<=40;S++)if(b<=i.getCapacity(S,w,v))return S}function f(v,b){return l.getCharCountIndicator(v,b)+4}function h(v,b){let w=0;return v.forEach(function(S){const C=f(S.mode,b);w+=C+S.getBitsLength()}),w}function _(v,b){for(let w=1;w<=40;w++)if(h(v,w)<=i.getCapacity(w,b,l.MIXED))return w}i.from=function(b,w){return c.isValid(b)?parseInt(b,10):w},i.getCapacity=function(b,w,S){if(!c.isValid(b))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=l.BYTE);const C=e.getSymbolTotalCodewords(b),j=r.getTotalCodewordsCount(b,w),L=(C-j)*8;if(S===l.MIXED)return L;const G=L-f(S,b);switch(S){case l.NUMERIC:return Math.floor(G/10*3);case l.ALPHANUMERIC:return Math.floor(G/11*2);case l.KANJI:return Math.floor(G/13);case l.BYTE:default:return Math.floor(G/8)}},i.getBestVersionForData=function(b,w){let S;const C=a.from(w,a.M);if(Array.isArray(b)){if(b.length>1)return _(b,C);if(b.length===0)return 1;S=b[0]}else S=b;return y(S.mode,S.getLength(),C)},i.getEncodedBits=function(b){if(!c.isValid(b)||b<7)throw new Error("Invalid QR Code version");let w=b<<12;for(;e.getBCHDigit(w)-m>=0;)w^=d<<e.getBCHDigit(w)-m;return b<<12|w}})(mh)),mh}var yh={},h1;function qD(){if(h1)return yh;h1=1;const i=Ri(),e=1335,r=21522,a=i.getBCHDigit(e);return yh.getEncodedBits=function(c,d){const m=c.bit<<3|d;let y=m<<10;for(;i.getBCHDigit(y)-a>=0;)y^=e<<i.getBCHDigit(y)-a;return(m<<10|y)^r},yh}var vh={},_h,m1;function HD(){if(m1)return _h;m1=1;const i=Di();function e(r){this.mode=i.NUMERIC,this.data=r.toString()}return e.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){let l,c,d;for(l=0;l+3<=this.data.length;l+=3)c=this.data.substr(l,3),d=parseInt(c,10),a.put(d,10);const m=this.data.length-l;m>0&&(c=this.data.substr(l),d=parseInt(c,10),a.put(d,m*3+1))},_h=e,_h}var bh,g1;function FD(){if(g1)return bh;g1=1;const i=Di(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(a){this.mode=i.ALPHANUMERIC,this.data=a}return r.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){let c;for(c=0;c+2<=this.data.length;c+=2){let d=e.indexOf(this.data[c])*45;d+=e.indexOf(this.data[c+1]),l.put(d,11)}this.data.length%2&&l.put(e.indexOf(this.data[c]),6)},bh=r,bh}var xh,p1;function VD(){if(p1)return xh;p1=1;const i=Di();function e(r){this.mode=i.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return e.getBitsLength=function(a){return a*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let a=0,l=this.data.length;a<l;a++)r.put(this.data[a],8)},xh=e,xh}var wh,y1;function GD(){if(y1)return wh;y1=1;const i=Di(),e=Ri();function r(a){this.mode=i.KANJI,this.data=a}return r.getBitsLength=function(l){return l*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(a){let l;for(l=0;l<this.data.length;l++){let c=e.toSJIS(this.data[l]);if(c>=33088&&c<=40956)c-=33088;else if(c>=57408&&c<=60351)c-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);c=(c>>>8&255)*192+(c&255),a.put(c,13)}},wh=r,wh}var Eh={exports:{}},v1;function $D(){return v1||(v1=1,(function(i){var e={single_source_shortest_paths:function(r,a,l){var c={},d={};d[a]=0;var m=e.PriorityQueue.make();m.push(a,0);for(var y,f,h,_,v,b,w,S,C;!m.empty();){y=m.pop(),f=y.value,_=y.cost,v=r[f]||{};for(h in v)v.hasOwnProperty(h)&&(b=v[h],w=_+b,S=d[h],C=typeof d[h]>"u",(C||S>w)&&(d[h]=w,m.push(h,w),c[h]=f))}if(typeof l<"u"&&typeof d[l]>"u"){var j=["Could not find a path from ",a," to ",l,"."].join("");throw new Error(j)}return c},extract_shortest_path_from_predecessor_list:function(r,a){for(var l=[],c=a;c;)l.push(c),r[c],c=r[c];return l.reverse(),l},find_path:function(r,a,l){var c=e.single_source_shortest_paths(r,a,l);return e.extract_shortest_path_from_predecessor_list(c,l)},PriorityQueue:{make:function(r){var a=e.PriorityQueue,l={},c;r=r||{};for(c in a)a.hasOwnProperty(c)&&(l[c]=a[c]);return l.queue=[],l.sorter=r.sorter||a.default_sorter,l},default_sorter:function(r,a){return r.cost-a.cost},push:function(r,a){var l={value:r,cost:a};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=e})(Eh)),Eh.exports}var _1;function YD(){return _1||(_1=1,(function(i){const e=Di(),r=HD(),a=FD(),l=VD(),c=GD(),d=tw(),m=Ri(),y=$D();function f(j){return unescape(encodeURIComponent(j)).length}function h(j,L,G){const Q=[];let ae;for(;(ae=j.exec(G))!==null;)Q.push({data:ae[0],index:ae.index,mode:L,length:ae[0].length});return Q}function _(j){const L=h(d.NUMERIC,e.NUMERIC,j),G=h(d.ALPHANUMERIC,e.ALPHANUMERIC,j);let Q,ae;return m.isKanjiModeEnabled()?(Q=h(d.BYTE,e.BYTE,j),ae=h(d.KANJI,e.KANJI,j)):(Q=h(d.BYTE_KANJI,e.BYTE,j),ae=[]),L.concat(G,Q,ae).sort(function(ee,J){return ee.index-J.index}).map(function(ee){return{data:ee.data,mode:ee.mode,length:ee.length}})}function v(j,L){switch(L){case e.NUMERIC:return r.getBitsLength(j);case e.ALPHANUMERIC:return a.getBitsLength(j);case e.KANJI:return c.getBitsLength(j);case e.BYTE:return l.getBitsLength(j)}}function b(j){return j.reduce(function(L,G){const Q=L.length-1>=0?L[L.length-1]:null;return Q&&Q.mode===G.mode?(L[L.length-1].data+=G.data,L):(L.push(G),L)},[])}function w(j){const L=[];for(let G=0;G<j.length;G++){const Q=j[G];switch(Q.mode){case e.NUMERIC:L.push([Q,{data:Q.data,mode:e.ALPHANUMERIC,length:Q.length},{data:Q.data,mode:e.BYTE,length:Q.length}]);break;case e.ALPHANUMERIC:L.push([Q,{data:Q.data,mode:e.BYTE,length:Q.length}]);break;case e.KANJI:L.push([Q,{data:Q.data,mode:e.BYTE,length:f(Q.data)}]);break;case e.BYTE:L.push([{data:Q.data,mode:e.BYTE,length:f(Q.data)}])}}return L}function S(j,L){const G={},Q={start:{}};let ae=["start"];for(let W=0;W<j.length;W++){const ee=j[W],J=[];for(let V=0;V<ee.length;V++){const F=ee[V],$=""+W+V;J.push($),G[$]={node:F,lastCount:0},Q[$]={};for(let Y=0;Y<ae.length;Y++){const Z=ae[Y];G[Z]&&G[Z].node.mode===F.mode?(Q[Z][$]=v(G[Z].lastCount+F.length,F.mode)-v(G[Z].lastCount,F.mode),G[Z].lastCount+=F.length):(G[Z]&&(G[Z].lastCount=F.length),Q[Z][$]=v(F.length,F.mode)+4+e.getCharCountIndicator(F.mode,L))}}ae=J}for(let W=0;W<ae.length;W++)Q[ae[W]].end=0;return{map:Q,table:G}}function C(j,L){let G;const Q=e.getBestModeForData(j);if(G=e.from(L,Q),G!==e.BYTE&&G.bit<Q.bit)throw new Error('"'+j+'" cannot be encoded with mode '+e.toString(G)+`.
 Suggested mode is: `+e.toString(Q));switch(G===e.KANJI&&!m.isKanjiModeEnabled()&&(G=e.BYTE),G){case e.NUMERIC:return new r(j);case e.ALPHANUMERIC:return new a(j);case e.KANJI:return new c(j);case e.BYTE:return new l(j)}}i.fromArray=function(L){return L.reduce(function(G,Q){return typeof Q=="string"?G.push(C(Q,null)):Q.data&&G.push(C(Q.data,Q.mode)),G},[])},i.fromString=function(L,G){const Q=_(L,m.isKanjiModeEnabled()),ae=w(Q),W=S(ae,G),ee=y.find_path(W.map,"start","end"),J=[];for(let V=1;V<ee.length-1;V++)J.push(W.table[ee[V]].node);return i.fromArray(b(J))},i.rawSplit=function(L){return i.fromArray(_(L,m.isKanjiModeEnabled()))}})(vh)),vh}var b1;function QD(){if(b1)return ah;b1=1;const i=Ri(),e=Hm(),r=MD(),a=jD(),l=kD(),c=ID(),d=LD(),m=Jx(),y=PD(),f=zD(),h=qD(),_=Di(),v=YD();function b(W,ee){const J=W.size,V=c.getPositions(ee);for(let F=0;F<V.length;F++){const $=V[F][0],Y=V[F][1];for(let Z=-1;Z<=7;Z++)if(!($+Z<=-1||J<=$+Z))for(let q=-1;q<=7;q++)Y+q<=-1||J<=Y+q||(Z>=0&&Z<=6&&(q===0||q===6)||q>=0&&q<=6&&(Z===0||Z===6)||Z>=2&&Z<=4&&q>=2&&q<=4?W.set($+Z,Y+q,!0,!0):W.set($+Z,Y+q,!1,!0))}}function w(W){const ee=W.size;for(let J=8;J<ee-8;J++){const V=J%2===0;W.set(J,6,V,!0),W.set(6,J,V,!0)}}function S(W,ee){const J=l.getPositions(ee);for(let V=0;V<J.length;V++){const F=J[V][0],$=J[V][1];for(let Y=-2;Y<=2;Y++)for(let Z=-2;Z<=2;Z++)Y===-2||Y===2||Z===-2||Z===2||Y===0&&Z===0?W.set(F+Y,$+Z,!0,!0):W.set(F+Y,$+Z,!1,!0)}}function C(W,ee){const J=W.size,V=f.getEncodedBits(ee);let F,$,Y;for(let Z=0;Z<18;Z++)F=Math.floor(Z/3),$=Z%3+J-8-3,Y=(V>>Z&1)===1,W.set(F,$,Y,!0),W.set($,F,Y,!0)}function j(W,ee,J){const V=W.size,F=h.getEncodedBits(ee,J);let $,Y;for($=0;$<15;$++)Y=(F>>$&1)===1,$<6?W.set($,8,Y,!0):$<8?W.set($+1,8,Y,!0):W.set(V-15+$,8,Y,!0),$<8?W.set(8,V-$-1,Y,!0):$<9?W.set(8,15-$-1+1,Y,!0):W.set(8,15-$-1,Y,!0);W.set(V-8,8,1,!0)}function L(W,ee){const J=W.size;let V=-1,F=J-1,$=7,Y=0;for(let Z=J-1;Z>0;Z-=2)for(Z===6&&Z--;;){for(let q=0;q<2;q++)if(!W.isReserved(F,Z-q)){let pe=!1;Y<ee.length&&(pe=(ee[Y]>>>$&1)===1),W.set(F,Z-q,pe),$--,$===-1&&(Y++,$=7)}if(F+=V,F<0||J<=F){F-=V,V=-V;break}}}function G(W,ee,J){const V=new r;J.forEach(function(q){V.put(q.mode.bit,4),V.put(q.getLength(),_.getCharCountIndicator(q.mode,W)),q.write(V)});const F=i.getSymbolTotalCodewords(W),$=m.getTotalCodewordsCount(W,ee),Y=(F-$)*8;for(V.getLengthInBits()+4<=Y&&V.put(0,4);V.getLengthInBits()%8!==0;)V.putBit(0);const Z=(Y-V.getLengthInBits())/8;for(let q=0;q<Z;q++)V.put(q%2?17:236,8);return Q(V,W,ee)}function Q(W,ee,J){const V=i.getSymbolTotalCodewords(ee),F=m.getTotalCodewordsCount(ee,J),$=V-F,Y=m.getBlocksCount(ee,J),Z=V%Y,q=Y-Z,pe=Math.floor(V/Y),B=Math.floor($/Y),te=B+1,re=pe-B,Se=new y(re);let Ae=0;const Ke=new Array(Y),Me=new Array(Y);let A=0;const D=new Uint8Array(W.buffer);for(let je=0;je<Y;je++){const lt=je<q?B:te;Ke[je]=D.slice(Ae,Ae+lt),Me[je]=Se.encode(Ke[je]),Ae+=lt,A=Math.max(A,lt)}const K=new Uint8Array(V);let fe=0,Ee,Pe;for(Ee=0;Ee<A;Ee++)for(Pe=0;Pe<Y;Pe++)Ee<Ke[Pe].length&&(K[fe++]=Ke[Pe][Ee]);for(Ee=0;Ee<re;Ee++)for(Pe=0;Pe<Y;Pe++)K[fe++]=Me[Pe][Ee];return K}function ae(W,ee,J,V){let F;if(Array.isArray(W))F=v.fromArray(W);else if(typeof W=="string"){let pe=ee;if(!pe){const B=v.rawSplit(W);pe=f.getBestVersionForData(B,J)}F=v.fromString(W,pe||40)}else throw new Error("Invalid data");const $=f.getBestVersionForData(F,J);if(!$)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ee)ee=$;else if(ee<$)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+$+`.
`);const Y=G(ee,J,F),Z=i.getSymbolSize(ee),q=new a(Z);return b(q,ee),w(q),S(q,ee),j(q,J,0),ee>=7&&C(q,ee),L(q,Y),isNaN(V)&&(V=d.getBestMask(q,j.bind(null,q,J))),d.applyMask(V,q),j(q,J,V),{modules:q,version:ee,errorCorrectionLevel:J,maskPattern:V,segments:F}}return ah.create=function(ee,J){if(typeof ee>"u"||ee==="")throw new Error("No input text");let V=e.M,F,$;return typeof J<"u"&&(V=e.from(J.errorCorrectionLevel,e.M),F=f.from(J.version),$=d.from(J.maskPattern),J.toSJISFunc&&i.setToSJISFunction(J.toSJISFunc)),ae(ee,F,V,$)},ah}var Sh={},Th={},x1;function nw(){return x1||(x1=1,(function(i){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let a=r.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+r);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(c){return[c,c]}))),a.length===6&&a.push("F","F");const l=parseInt(a.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+a.slice(0,6).join("")}}i.getOptions=function(a){a||(a={}),a.color||(a.color={});const l=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,c=a.width&&a.width>=21?a.width:void 0,d=a.scale||4;return{width:c,scale:c?4:d,margin:l,color:{dark:e(a.color.dark||"#000000ff"),light:e(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},i.getScale=function(a,l){return l.width&&l.width>=a+l.margin*2?l.width/(a+l.margin*2):l.scale},i.getImageWidth=function(a,l){const c=i.getScale(a,l);return Math.floor((a+l.margin*2)*c)},i.qrToImageData=function(a,l,c){const d=l.modules.size,m=l.modules.data,y=i.getScale(d,c),f=Math.floor((d+c.margin*2)*y),h=c.margin*y,_=[c.color.light,c.color.dark];for(let v=0;v<f;v++)for(let b=0;b<f;b++){let w=(v*f+b)*4,S=c.color.light;if(v>=h&&b>=h&&v<f-h&&b<f-h){const C=Math.floor((v-h)/y),j=Math.floor((b-h)/y);S=_[m[C*d+j]?1:0]}a[w++]=S.r,a[w++]=S.g,a[w++]=S.b,a[w]=S.a}}})(Th)),Th}var w1;function KD(){return w1||(w1=1,(function(i){const e=nw();function r(l,c,d){l.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=d,c.width=d,c.style.height=d+"px",c.style.width=d+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(c,d,m){let y=m,f=d;typeof y>"u"&&(!d||!d.getContext)&&(y=d,d=void 0),d||(f=a()),y=e.getOptions(y);const h=e.getImageWidth(c.modules.size,y),_=f.getContext("2d"),v=_.createImageData(h,h);return e.qrToImageData(v.data,c,y),r(_,f,h),_.putImageData(v,0,0),f},i.renderToDataURL=function(c,d,m){let y=m;typeof y>"u"&&(!d||!d.getContext)&&(y=d,d=void 0),y||(y={});const f=i.render(c,d,y),h=y.type||"image/png",_=y.rendererOpts||{};return f.toDataURL(h,_.quality)}})(Sh)),Sh}var Nh={},E1;function XD(){if(E1)return Nh;E1=1;const i=nw();function e(l,c){const d=l.a/255,m=c+'="'+l.hex+'"';return d<1?m+" "+c+'-opacity="'+d.toFixed(2).slice(1)+'"':m}function r(l,c,d){let m=l+c;return typeof d<"u"&&(m+=" "+d),m}function a(l,c,d){let m="",y=0,f=!1,h=0;for(let _=0;_<l.length;_++){const v=Math.floor(_%c),b=Math.floor(_/c);!v&&!f&&(f=!0),l[_]?(h++,_>0&&v>0&&l[_-1]||(m+=f?r("M",v+d,.5+b+d):r("m",y,0),y=0,f=!1),v+1<c&&l[_+1]||(m+=r("h",h),h=0)):y++}return m}return Nh.render=function(c,d,m){const y=i.getOptions(d),f=c.modules.size,h=c.modules.data,_=f+y.margin*2,v=y.color.light.a?"<path "+e(y.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",b="<path "+e(y.color.dark,"stroke")+' d="'+a(h,f,y.margin)+'"/>',w='viewBox="0 0 '+_+" "+_+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(y.width?'width="'+y.width+'" height="'+y.width+'" ':"")+w+' shape-rendering="crispEdges">'+v+b+`</svg>
`;return typeof m=="function"&&m(null,C),C},Nh}var S1;function WD(){if(S1)return Sa;S1=1;const i=DD(),e=QD(),r=KD(),a=XD();function l(c,d,m,y,f){const h=[].slice.call(arguments,1),_=h.length,v=typeof h[_-1]=="function";if(!v&&!i())throw new Error("Callback required as last argument");if(v){if(_<2)throw new Error("Too few arguments provided");_===2?(f=m,m=d,d=y=void 0):_===3&&(d.getContext&&typeof f>"u"?(f=y,y=void 0):(f=y,y=m,m=d,d=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(m=d,d=y=void 0):_===2&&!d.getContext&&(y=m,m=d,d=void 0),new Promise(function(b,w){try{const S=e.create(m,y);b(c(S,d,y))}catch(S){w(S)}})}try{const b=e.create(m,y);f(null,c(b,d,y))}catch(b){f(b)}}return Sa.create=e.create,Sa.toCanvas=l.bind(null,r.render),Sa.toDataURL=l.bind(null,r.renderToDataURL),Sa.toString=l.bind(null,function(c,d,m){return a.render(c,m)}),Sa}var ZD=WD();const T1=C1(ZD);class JD{canvas=null;printerConfig;scannerStream=null;isScanning=!1;constructor(){this.canvas=this.createCanvas(),this.printerConfig={printerName:"Default",labelSize:"medium",dpi:203,darknessSetting:10,printSpeed:6}}async generateBundleLabel(e){try{const r=this.generateBarcodeString(e.bundleId,e.lotNumber),a=JSON.stringify({bundleId:e.bundleId,bundleNumber:e.bundleNumber,lotNumber:e.lotNumber,articleName:e.articleName,size:e.size,color:e.color,pieces:e.pieces,cutDate:e.cutDate.toISOString(),type:"bundle",version:"1.0"}),l=await T1.toDataURL(a,{width:128,margin:1,errorCorrectionLevel:"M"});return{...e,barcode:r,qrCode:l}}catch(r){throw console.error("Error generating bundle label:",r),r}}generateBarcodeString(e,r){const a=Date.now().toString().slice(-6),l=this.calculateChecksum(e+r);return`${r}${e.slice(-3)}${a}${l}`}async generateBarcodeImage(e,r="CODE128"){try{if(!this.canvas)throw new Error("Canvas not available");return X_(this.canvas,e,{format:r,width:2,height:40,displayValue:!0,fontSize:12,margin:5}),this.canvas.toDataURL("image/png")}catch(a){throw console.error("Error generating barcode image:",a),a}}async generateQRCode(e,r=128){try{const a=typeof e=="string"?e:JSON.stringify(e);return await T1.toDataURL(a,{width:r,margin:2,errorCorrectionLevel:"M",type:"image/png"})}catch(a){throw console.error("Error generating QR code:",a),a}}generateLabelHTML(e,r="thermal"){return{thermal:this.getThermalLabelTemplate(e),laser:this.getLaserLabelTemplate(e),inkjet:this.getInkjetLabelTemplate(e)}[r]}getThermalLabelTemplate(e){return`
      <div style="width: 4in; height: 2.5in; padding: 0.1in; font-family: Arial, sans-serif; border: 1px solid #000;">
        <!-- Header -->
        <div style="text-align: center; font-size: 14px; font-weight: bold; border-bottom: 1px solid #000; padding-bottom: 2px; margin-bottom: 4px;">
          📦 BUNDLE LABEL
        </div>
        
        <!-- Bundle Info -->
        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
          <div style="font-size: 12px;">
            <strong>Bundle:</strong> ${e.bundleNumber}<br>
            <strong>Lot:</strong> ${e.lotNumber}<br>
            <strong>Article:</strong> ${e.articleName}
          </div>
          <div style="text-align: right; font-size: 12px;">
            <strong>Size:</strong> ${e.size}<br>
            <strong>Color:</strong> ${e.color}<br>
            <strong>Pieces:</strong> ${e.pieces}
          </div>
        </div>
        
        <!-- Barcode -->
        <div style="text-align: center; margin: 8px 0;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(e.barcode)}" alt="Barcode" style="max-width: 3in; height: 0.5in;">
          <div style="font-size: 10px; font-family: monospace;">${e.barcode}</div>
        </div>
        
        <!-- QR Code and Additional Info -->
        <div style="display: flex; justify-content: space-between; align-items: flex-end;">
          <div style="font-size: 10px;">
            <strong>Operation:</strong> ${e.operation}<br>
            <strong>Cut by:</strong> ${e.cutBy}<br>
            <strong>Date:</strong> ${e.cutDate.toLocaleDateString()}
            ${e.operatorAssigned?`<br><strong>Assigned:</strong> ${e.operatorAssigned}`:""}
          </div>
          ${e.qrCode?`<img src="${e.qrCode}" alt="QR Code" style="width: 0.8in; height: 0.8in;">`:""}
        </div>
      </div>
    `}getLaserLabelTemplate(e){return`
      <div style="width: 4in; height: 3in; padding: 0.15in; font-family: 'Helvetica', sans-serif; border: 2px solid #000;">
        <div style="text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 8px; background: #000; color: #fff; padding: 4px;">
          PRODUCTION BUNDLE
        </div>
        
        <table style="width: 100%; font-size: 11px; margin-bottom: 8px;">
          <tr>
            <td><strong>Bundle #:</strong></td>
            <td>${e.bundleNumber}</td>
            <td><strong>Lot #:</strong></td>
            <td>${e.lotNumber}</td>
          </tr>
          <tr>
            <td><strong>Article:</strong></td>
            <td colspan="3">${e.articleName}</td>
          </tr>
          <tr>
            <td><strong>Size:</strong></td>
            <td>${e.size}</td>
            <td><strong>Color:</strong></td>
            <td>${e.color}</td>
          </tr>
          <tr>
            <td><strong>Pieces:</strong></td>
            <td>${e.pieces}</td>
            <td><strong>Operation:</strong></td>
            <td>${e.operation}</td>
          </tr>
        </table>
        
        <div style="text-align: center; margin: 10px 0;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(e.barcode)}" alt="Barcode" style="max-width: 3.5in; height: 0.6in;">
          <div style="font-size: 9px; font-family: 'Courier New', monospace; margin-top: 2px;">${e.barcode}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 9px;">
          <div>
            Cut by: <strong>${e.cutBy}</strong><br>
            Date: <strong>${e.cutDate.toLocaleDateString()}</strong>
          </div>
          ${e.qrCode?`<img src="${e.qrCode}" alt="QR" style="width: 1in; height: 1in; border: 1px solid #ccc;">`:""}
        </div>
      </div>
    `}getInkjetLabelTemplate(e){return`
      <div style="width: 4in; height: 3in; padding: 0.2in; font-family: 'Arial', sans-serif; background: #f9f9f9; border: 2px solid #333; border-radius: 8px;">
        <div style="text-align: center; font-size: 18px; font-weight: bold; color: #fff; background: linear-gradient(45deg, #007bff, #0056b3); padding: 6px; border-radius: 4px; margin-bottom: 10px;">
          🏭 TSA Production Bundle
        </div>
        
        <div style="background: #fff; padding: 8px; border-radius: 4px; margin-bottom: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 11px;">
            <div><span style="color: #666;">Bundle:</span> <strong>${e.bundleNumber}</strong></div>
            <div><span style="color: #666;">Lot:</span> <strong>${e.lotNumber}</strong></div>
            <div><span style="color: #666;">Article:</span> <strong>${e.articleName}</strong></div>
            <div><span style="color: #666;">Operation:</span> <strong>${e.operation}</strong></div>
            <div><span style="color: #666;">Size:</span> <span style="background: #e3f2fd; padding: 2px 6px; border-radius: 3px;"><strong>${e.size}</strong></span></div>
            <div><span style="color: #666;">Color:</span> <span style="background: #fff3e0; padding: 2px 6px; border-radius: 3px;"><strong>${e.color}</strong></span></div>
          </div>
          <div style="text-align: center; font-size: 14px; color: #007bff; font-weight: bold; margin-top: 6px;">
            ${e.pieces} Pieces
          </div>
        </div>
        
        <div style="text-align: center; background: #fff; padding: 6px; border-radius: 4px; margin-bottom: 8px;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(e.barcode)}" alt="Barcode" style="max-width: 3in; height: 0.5in;">
          <div style="font-size: 8px; font-family: 'Courier New', monospace; color: #666; margin-top: 2px;">${e.barcode}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 9px; color: #666;">
          <div style="background: #fff; padding: 4px; border-radius: 3px;">
            <div>Cut by: <strong style="color: #333;">${e.cutBy}</strong></div>
            <div>Date: <strong style="color: #333;">${e.cutDate.toLocaleDateString()}</strong></div>
          </div>
          ${e.qrCode?`<img src="${e.qrCode}" alt="QR" style="width: 0.8in; height: 0.8in; border: 2px solid #007bff; border-radius: 4px;">`:""}
        </div>
      </div>
    `}async printLabel(e,r){try{const a={...this.printerConfig,...r},l=this.generateLabelHTML(e,"thermal");if(window.print&&document){const c=window.open("","_blank","width=400,height=300");if(!c)throw new Error("Unable to open print window");c.document.write(`
          <html>
            <head>
              <title>Bundle Label - ${e.bundleNumber}</title>
              <style>
                @media print {
                  @page { margin: 0; size: 4in 3in; }
                  body { margin: 0; padding: 0; }
                }
                body { font-family: Arial, sans-serif; }
              </style>
            </head>
            <body>
              ${l}
              <script>
                window.onload = function() {
                  window.print();
                  window.close();
                };
              <\/script>
            </body>
          </html>
        `),c.document.close()}else await this.downloadLabelAsImage(e)}catch(a){throw console.error("Error printing label:",a),a}}async downloadLabelAsImage(e){try{const r=document.createElement("canvas");r.width=400,r.height=300;const a=r.getContext("2d");if(!a)throw new Error("Canvas context not available");a.fillStyle="#ffffff",a.fillRect(0,0,r.width,r.height),a.strokeStyle="#000000",a.lineWidth=2,a.strokeRect(0,0,r.width,r.height),a.fillStyle="#000000",a.font="bold 16px Arial",a.textAlign="center",a.fillText("BUNDLE LABEL",r.width/2,25),a.font="12px Arial",a.textAlign="left",a.fillText(`Bundle: ${e.bundleNumber}`,20,60),a.fillText(`Lot: ${e.lotNumber}`,20,80),a.fillText(`Article: ${e.articleName}`,20,100),a.fillText(`Size: ${e.size}`,20,120),a.fillText(`Color: ${e.color}`,200,120),a.fillText(`Pieces: ${e.pieces}`,20,140);const l=new Image;l.onload=()=>{a.drawImage(l,50,160,300,40),a.font="10px Arial",a.fillText(`Cut by: ${e.cutBy}`,20,230),a.fillText(`Date: ${e.cutDate.toLocaleDateString()}`,20,245),a.fillText(`Operation: ${e.operation}`,20,260),r.toBlob(c=>{if(c){const d=URL.createObjectURL(c),m=document.createElement("a");m.href=d,m.download=`bundle_${e.bundleNumber}_label.png`,m.click(),URL.revokeObjectURL(d)}})},l.src=await this.generateBarcodeImage(e.barcode)}catch(r){throw console.error("Error downloading label as image:",r),r}}async startBarcodeScanning(e,r,a){try{this.isScanning&&await this.stopScanning();const l={video:{facingMode:a?.facingMode||"environment",width:{ideal:a?.width||1280},height:{ideal:a?.height||720}}};this.scannerStream=await navigator.mediaDevices.getUserMedia(l),e.srcObject=this.scannerStream,await new Promise(c=>{e.onloadedmetadata=()=>{e.play(),c()}}),this.isScanning=!0,this.startScanLoop(e,r)}catch(l){throw console.error("Error starting barcode scanning:",l),l}}async stopScanning(){this.isScanning=!1,this.scannerStream&&(this.scannerStream.getTracks().forEach(e=>e.stop()),this.scannerStream=null)}startScanLoop(e,r){const a=document.createElement("canvas"),l=a.getContext("2d");if(!l){r({success:!1,error:"Canvas context not available"});return}const c=()=>{if(!this.isScanning)return;a.width=e.videoWidth,a.height=e.videoHeight,l.drawImage(e,0,0);const d=l.getImageData(0,0,a.width,a.height),m=this.processImageForBarcode(d);m.success?r(m):requestAnimationFrame(c)};requestAnimationFrame(c)}processImageForBarcode(e){try{return Math.random()>.95?{success:!0,data:{bundleId:"B001",bundleNumber:"LOT-2024-B001",lotNumber:"LOT-2024",type:"bundle",additionalInfo:{scannedAt:new Date,confidence:.95}}}:{success:!1}}catch{return{success:!1,error:"Error processing image for barcode"}}}parseBarcodeManually(e){try{const r=/^([A-Z0-9\-]+)([A-Z0-9]{3})(\d{6})(\d{2})$/,a=e.match(r);if(!a)return{success:!1,error:"Invalid barcode format"};const[,l,c,d,m]=a,y=this.calculateChecksum(l+c);return parseInt(m)!==y?{success:!1,error:"Invalid barcode checksum"}:{success:!0,data:{bundleId:c,bundleNumber:`${l}-${c}`,lotNumber:l,type:"bundle",additionalInfo:{timestamp:d,manualEntry:!0}}}}catch{return{success:!1,error:"Error parsing barcode"}}}createCanvas(){return typeof document>"u"?{}:document.createElement("canvas")}calculateChecksum(e){let r=0;for(let a=0;a<e.length;a++)r+=e.charCodeAt(a);return r%100}generateBarcodeBase64(e){try{return this.canvas?(X_(this.canvas,e,{format:"CODE128",width:1,height:30,displayValue:!1}),this.canvas.toDataURL("image/png").split(",")[1]):""}catch(r){return console.error("Error generating barcode base64:",r),""}}updatePrinterConfig(e){this.printerConfig={...this.printerConfig,...e}}getPrinterConfig(){return{...this.printerConfig}}validateBarcodeFormat(e){return/^[A-Z0-9\-]{10,30}$/.test(e)}async generateMultipleBarcodes(e){const r=[];for(const a of e){const l=await this.generateBundleLabel(a);r.push(l)}return r}async printMultipleLabels(e){for(const r of e)await this.printLabel(r),await new Promise(a=>setTimeout(a,500))}}const ar=new JD,eM=({onScanSuccess:i,onClose:e,allowManualEntry:r=!0,scanMode:a="both",title:l="Scan Bundle",className:c=""})=>{const d=U.useRef(null),[m,y]=U.useState(!1),[f,h]=U.useState(null),[_,v]=U.useState(""),[b,w]=U.useState(""),[S,C]=U.useState("pending"),[j,L]=U.useState("environment");U.useEffect(()=>{G()},[]);const G=async()=>{try{if(navigator.permissions){const F=await navigator.permissions.query({name:"camera"});C(F.state),F.onchange=()=>{C(F.state)}}}catch(F){console.error("Permission API error:",F),console.log("Permission API not supported"),C("pending")}},Q=async()=>{if(d.current)try{v(""),h(null),y(!0),await ar.startBarcodeScanning(d.current,W,{facingMode:j,width:1280,height:720}),C("granted")}catch(F){console.error("Error starting scanner:",F),v("Unable to access camera. Please check permissions."),C("denied"),y(!1)}},ae=async()=>{try{await ar.stopScanning(),y(!1)}catch(F){console.error("Error stopping scanner:",F)}},W=F=>{h(F),F.success?setTimeout(()=>{i(F)},1500):F.error&&v(F.error)},ee=()=>{if(!b.trim()){v("Please enter a barcode");return}const F=ar.parseBarcodeManually(b.trim());h(F),F.success?setTimeout(()=>{i(F)},1e3):v(F.error||"Invalid barcode format")},J=()=>{L(F=>F==="user"?"environment":"user"),m&&(ae(),setTimeout(Q,500))},V=()=>f?g.jsxs("div",{className:`p-4 rounded-lg border-2 ${f.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.success?g.jsx(kc,{className:"h-5 w-5 text-green-600"}):g.jsx(Qv,{className:"h-5 w-5 text-red-600"}),g.jsx("span",{className:`font-semibold ${f.success?"text-green-800":"text-red-800"}`,children:f.success?"Scan Successful!":"Scan Failed"})]}),f.success&&f.data&&g.jsxs("div",{className:"space-y-2 text-sm",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Bundle ID:"})," ",f.data.bundleId]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Bundle Number:"})," ",f.data.bundleNumber]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Lot Number:"})," ",f.data.lotNumber]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Type:"})," ",g.jsx(Ct,{variant:"secondary",outline:!0,children:f.data.type})]}),f.data.additionalInfo?.manualEntry&&g.jsx("div",{className:"text-blue-600",children:"✏️ Manual Entry"})]}),f.error&&g.jsx("div",{className:"text-red-600 text-sm",children:f.error})]}):null;return g.jsxs(At,{className:`max-w-md mx-auto ${c}`,children:[g.jsxs(qx,{children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(Fx,{className:"flex items-center gap-2",children:[g.jsx(Vx,{className:"h-5 w-5"}),l]}),e&&g.jsx(Je,{variant:"outline",size:"sm",onClick:e,className:"h-8 w-8 p-0",children:g.jsx(Jc,{className:"h-4 w-4"})})]}),g.jsxs("div",{className:"text-sm text-gray-600",children:[a==="both"&&"Scan barcode or QR code",a==="barcode"&&"Scan barcode only",a==="qr"&&"Scan QR code only"]})]}),g.jsxs(Hx,{className:"space-y-4",children:[g.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative",children:[g.jsx("video",{ref:d,className:"w-full h-64 object-cover",playsInline:!0,muted:!0,style:{display:m?"block":"none"}}),!m&&g.jsxs("div",{className:"w-full h-64 bg-gray-100 flex flex-col items-center justify-center",children:[g.jsx(Yv,{className:"h-16 w-16 text-gray-400 mb-4"}),g.jsx("p",{className:"text-gray-600 text-center mb-4",children:S==="denied"?"Camera access denied. Please enable camera permissions.":"Position barcode in camera view"})]}),m&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsxs("div",{className:"border-2 border-red-500 bg-transparent animate-pulse",style:{width:"200px",height:"100px"},children:[g.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-red-500"}),g.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-red-500"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-red-500"}),g.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-red-500"})]})})]}),g.jsxs("div",{className:"flex gap-2",children:[m?g.jsxs(Je,{onClick:ae,variant:"outline",className:"flex-1",children:[g.jsx(Jc,{className:"h-4 w-4 mr-2"}),"Stop Scanning"]}):g.jsxs(Je,{onClick:Q,className:"flex-1",disabled:S==="denied",children:[g.jsx(Yv,{className:"h-4 w-4 mr-2"}),"Start Scanning"]}),g.jsx(Je,{onClick:J,variant:"outline",size:"sm",disabled:!m,className:"px-3",children:g.jsx(AR,{className:"h-4 w-4"})})]}),r&&g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("div",{className:"text-sm font-medium mb-2",children:"Manual Entry"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",placeholder:"Enter barcode manually",value:b,onChange:F=>w(F.target.value),onKeyDown:F=>F.key==="Enter"&&ee(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),g.jsx(Je,{onClick:ee,size:"sm",disabled:!b.trim(),children:"✓"})]})]}),_&&g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Qv,{className:"h-4 w-4 text-red-600"}),g.jsx("span",{className:"text-red-800 text-sm",children:_})]})}),V(),g.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:g.jsxs("div",{className:"text-sm text-blue-800",children:[g.jsx("div",{className:"font-medium mb-1",children:"📱 Scanning Tips:"}),g.jsxs("ul",{className:"text-xs space-y-1",children:[g.jsx("li",{children:"• Hold device steady and ensure good lighting"}),g.jsx("li",{children:"• Keep barcode flat and fully visible in frame"}),g.jsx("li",{children:"• Try moving closer or further from barcode"}),g.jsx("li",{children:"• Use manual entry if scanning fails"})]})]})}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{children:["Camera: ",j==="environment"?"Back":"Front"]}),g.jsxs("span",{children:["Mode: ",a.toUpperCase()]})]}),g.jsx("div",{className:`h-2 w-2 rounded-full ${m?"bg-green-500 animate-pulse":"bg-gray-300"}`})]})]})]})},tM=({bundleData:i,onLabelGenerated:e,className:r=""})=>{const[a,l]=U.useState(null),[c,d]=U.useState(!1),[m,y]=U.useState(!1),[f,h]=U.useState(!1),[_,v]=U.useState(!1),[b,w]=U.useState(ar.getPrinterConfig()),[S,C]=U.useState("thermal"),[j,L]=U.useState(""),[G,Q]=U.useState(""),[ae,W]=U.useState({bundleId:"",bundleNumber:"",lotNumber:"",articleName:"",size:"",color:"",pieces:0,operation:"",cutBy:"",cutDate:new Date,operatorAssigned:""});U.useEffect(()=>{i&&(W({...i,operatorAssigned:i.operatorAssigned||""}),ee({...i,operatorAssigned:i.operatorAssigned||""}))},[i]);const ee=async q=>{try{d(!0),L("");const pe=q||ae;if(!pe.bundleId||!pe.bundleNumber||!pe.lotNumber)throw new Error("Bundle ID, Bundle Number, and Lot Number are required");const B=await ar.generateBundleLabel(pe);l(B),Q("Label generated successfully!"),e?.(B)}catch(pe){console.error("Error generating label:",pe),L(pe instanceof Error?pe.message:"Error generating label")}finally{d(!1)}},J=async()=>{if(a)try{y(!0),L(""),await ar.printLabel(a,b),Q("Label printed successfully!")}catch(q){console.error("Error printing label:",q),L(q instanceof Error?q.message:"Error printing label")}finally{y(!1)}},V=async()=>{if(a)try{await ar.downloadLabelAsImage(a),Q("Label downloaded successfully!")}catch(q){console.error("Error downloading label:",q),L(q instanceof Error?q.message:"Error downloading label")}},F=q=>{const pe={...b,...q};w(pe),ar.updatePrinterConfig(pe)},$=(q,pe)=>{W(B=>({...B,[q]:pe})),Q("")};U.useEffect(()=>{if(G){const q=setTimeout(()=>Q(""),3e3);return()=>clearTimeout(q)}},[G]),U.useEffect(()=>{if(j){const q=setTimeout(()=>L(""),5e3);return()=>clearTimeout(q)}},[j]);const Y=()=>{if(!a||!f)return null;const q=ar.generateLabelHTML(a,S);return g.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-white",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h4",{className:"font-semibold text-sm",children:"Label Preview"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{value:S,onChange:pe=>C(pe.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[g.jsx("option",{value:"thermal",children:"Thermal"}),g.jsx("option",{value:"laser",children:"Laser"}),g.jsx("option",{value:"inkjet",children:"Inkjet"})]}),g.jsx(Je,{size:"sm",variant:"outline",onClick:()=>h(!1),className:"h-6 w-6 p-0",children:"✕"})]})]}),g.jsx("div",{className:"border border-gray-300 rounded bg-white transform scale-75 origin-top-left",style:{width:"133%",height:"auto"},dangerouslySetInnerHTML:{__html:q}})]})},Z=()=>_?g.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-4 bg-blue-50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h4",{className:"font-semibold text-sm",children:"Printer Settings"}),g.jsx(Je,{size:"sm",variant:"outline",onClick:()=>v(!1),className:"h-6 w-6 p-0",children:"✕"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Printer Name"}),g.jsx("input",{type:"text",value:b.printerName,onChange:q=>F({printerName:q.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Label Size"}),g.jsxs("select",{value:b.labelSize,onChange:q=>F({labelSize:q.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[g.jsx("option",{value:"small",children:'Small (2"×1.5")'}),g.jsx("option",{value:"medium",children:'Medium (4"×2.5")'}),g.jsx("option",{value:"large",children:'Large (4"×3")'})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"DPI"}),g.jsxs("select",{value:b.dpi,onChange:q=>F({dpi:parseInt(q.target.value)}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[g.jsx("option",{value:203,children:"203 DPI"}),g.jsx("option",{value:300,children:"300 DPI"}),g.jsx("option",{value:600,children:"600 DPI"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Print Speed"}),g.jsx("select",{value:b.printSpeed,onChange:q=>F({printSpeed:parseInt(q.target.value)}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[2,3,4,5,6,7,8,9,10,11,12].map(q=>g.jsxs("option",{value:q,children:[q," ips"]},q))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Darkness (",b.darknessSetting,")"]}),g.jsx("input",{type:"range",min:"1",max:"15",value:b.darknessSetting,onChange:q=>F({darknessSetting:parseInt(q.target.value)}),className:"w-full"})]})]})]}):null;return g.jsxs(At,{className:`max-w-2xl mx-auto ${r}`,children:[g.jsxs(qx,{children:[g.jsxs(Fx,{className:"flex items-center gap-2",children:[g.jsx(Vx,{className:"h-5 w-5"}),"Bundle Label Generator"]}),g.jsx("p",{className:"text-sm text-gray-600",children:"Generate barcodes and QR codes for production bundles"})]}),g.jsxs(Hx,{className:"space-y-6",children:[!i&&g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle ID*"}),g.jsx("input",{type:"text",value:ae.bundleId,onChange:q=>$("bundleId",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"B001"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle Number*"}),g.jsx("input",{type:"text",value:ae.bundleNumber,onChange:q=>$("bundleNumber",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LOT-2024-B001"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Number*"}),g.jsx("input",{type:"text",value:ae.lotNumber,onChange:q=>$("lotNumber",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LOT-2024"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Article Name"}),g.jsx("input",{type:"text",value:ae.articleName,onChange:q=>$("articleName",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Men's T-Shirt"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),g.jsx("input",{type:"text",value:ae.size,onChange:q=>$("size",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"M"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),g.jsx("input",{type:"text",value:ae.color,onChange:q=>$("color",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Blue"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pieces"}),g.jsx("input",{type:"number",value:ae.pieces,onChange:q=>$("pieces",parseInt(q.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50",min:"1"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operation"}),g.jsx("input",{type:"text",value:ae.operation,onChange:q=>$("operation",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Sewing"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cut By"}),g.jsx("input",{type:"text",value:ae.cutBy,onChange:q=>$("cutBy",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Operator Name"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator Assigned"}),g.jsx("input",{type:"text",value:ae.operatorAssigned,onChange:q=>$("operatorAssigned",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),i&&g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[g.jsx("h4",{className:"font-semibold mb-3",children:"Bundle Information"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Bundle:"})," ",i.bundleNumber]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Lot:"})," ",i.lotNumber]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Article:"})," ",i.articleName]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Operation:"})," ",i.operation]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Size:"})," ",g.jsx(Ct,{outline:!0,children:i.size})]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Color:"})," ",g.jsx(Ct,{outline:!0,children:i.color})]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Pieces:"})," ",i.pieces]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Cut by:"})," ",i.cutBy]})]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx(Je,{onClick:()=>ee(),disabled:c,className:"flex-1",children:c?"⏳ Generating...":"🏷️ Generate Label"}),g.jsxs(Je,{onClick:()=>h(!0),variant:"outline",disabled:!a,children:[g.jsx(BR,{className:"h-4 w-4 mr-1"}),"Preview"]}),g.jsxs(Je,{onClick:()=>v(!0),variant:"outline",children:[g.jsx(DR,{className:"h-4 w-4 mr-1"}),"Settings"]})]}),a&&g.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h4",{className:"font-semibold text-green-800",children:"✅ Label Generated"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(Je,{onClick:J,disabled:m,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[m?"⏳":g.jsx(qR,{className:"h-4 w-4 mr-1"}),"Print"]}),g.jsxs(Je,{onClick:V,size:"sm",variant:"outline",children:[g.jsx(TR,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Barcode:"})," ",g.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:a.barcode})]}),g.jsxs("div",{children:[g.jsx("strong",{children:"QR Code:"})," ",a.qrCode?"✅ Generated":"❌ Failed"]})]}),a.qrCode&&g.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[g.jsx("img",{src:a.qrCode,alt:"QR Code",className:"w-16 h-16 border border-gray-300 rounded"}),g.jsx("div",{className:"text-xs text-gray-600",children:"QR code contains complete bundle information including ID, lot number, article details, and production data."})]})]}),j&&g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-red-600",children:"❌"}),g.jsx("span",{className:"text-red-800 text-sm",children:j})]})}),G&&g.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-green-600",children:"✅"}),g.jsx("span",{className:"text-green-800 text-sm",children:G})]})}),Z(),Y(),g.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:g.jsxs("div",{className:"text-sm text-blue-800",children:[g.jsx("div",{className:"font-medium mb-1",children:"💡 Tips:"}),g.jsxs("ul",{className:"text-xs space-y-1",children:[g.jsx("li",{children:"• Ensure all required fields are filled before generating"}),g.jsx("li",{children:"• Use preview to check label layout before printing"}),g.jsx("li",{children:"• Configure printer settings for optimal print quality"}),g.jsx("li",{children:"• QR codes contain complete bundle information for scanning"}),g.jsx("li",{children:"• Download labels as backup for reprinting if needed"})]})]})})]})]})},nM={sm:"px-3 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"},rM={default:["bg-white border-secondary-300","focus:border-primary-500 focus:ring-primary-500","disabled:bg-secondary-50 disabled:text-secondary-500","dark:bg-secondary-900 dark:border-secondary-600","dark:focus:border-primary-400 dark:focus:ring-primary-400","dark:disabled:bg-secondary-800"],filled:["bg-secondary-50 border-secondary-200","focus:bg-white focus:border-primary-500 focus:ring-primary-500","disabled:bg-secondary-100 disabled:text-secondary-500","dark:bg-secondary-800 dark:border-secondary-700","dark:focus:bg-secondary-900 dark:focus:border-primary-400"],borderless:["bg-transparent border-0 border-b border-secondary-300","focus:border-primary-500 focus:ring-0 focus:ring-offset-0","rounded-none px-0","disabled:bg-transparent disabled:text-secondary-500","dark:border-secondary-600","dark:focus:border-primary-400"]},gn=de.forwardRef(({className:i,label:e,error:r,hint:a,leftIcon:l,rightIcon:c,size:d="md",variant:m="default",clearable:y=!1,onClear:f,disabled:h,value:_,type:v="text",id:b,...w},S)=>{const[C,j]=de.useState(!1),L=de.useId(),G=b||`input-${L}`,Q=v==="password",ae=Q?C?"text":"password":v,ee=y&&(_!==void 0&&_!=="")&&!h,J=Q&&!h,V=()=>{f?.(),w.onChange&&w.onChange({target:{value:""}})};return g.jsxs("div",{className:"w-full",children:[e&&g.jsx("label",{htmlFor:G,className:St("block text-sm font-medium mb-2",r?"text-danger-700":"text-secondary-700",h&&"text-secondary-500","dark:text-secondary-300"),children:e}),g.jsxs("div",{className:"relative",children:[l&&g.jsx("div",{className:St("absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400",d==="sm"&&"left-2",d==="lg"&&"left-4"),children:l}),g.jsx("input",{ref:S,id:G,type:ae,disabled:h,className:St("block w-full border rounded-md shadow-sm","placeholder-secondary-400","focus:outline-none focus:ring-1","transition-colors duration-200","disabled:cursor-not-allowed",nM[d],rM[m],l&&m!=="borderless"&&(d==="sm"?"pl-8":d==="lg"?"pl-12":"pl-10"),(c||ee||J)&&m!=="borderless"&&(d==="sm"?"pr-8":d==="lg"?"pr-12":"pr-10"),r&&["border-danger-300 text-danger-900","focus:border-danger-500 focus:ring-danger-500","dark:border-danger-600"],i),...w}),(c||ee||J)&&g.jsxs("div",{className:St("absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",d==="sm"&&"right-2",d==="lg"&&"right-4"),children:[ee&&g.jsx("button",{type:"button",onClick:V,className:"text-secondary-400 hover:text-secondary-600 focus:outline-none",children:g.jsx(O1,{className:"w-4 h-4"})}),J&&g.jsx("button",{type:"button",onClick:()=>j(!C),className:"text-secondary-400 hover:text-secondary-600 focus:outline-none",children:C?g.jsx(MS,{className:"w-4 h-4"}):g.jsx(jS,{className:"w-4 h-4"})}),c&&!ee&&!J&&g.jsx("div",{className:"text-secondary-400",children:c})]})]}),(r||a)&&g.jsx("div",{className:"mt-1",children:r?g.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400",children:r}):a?g.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:a}):null})]})});gn.displayName="Input";const iM=de.forwardRef(({className:i,label:e,error:r,hint:a,resize:l="vertical",disabled:c,id:d,...m},y)=>{const f=de.useId(),h=d||`textarea-${f}`;return g.jsxs("div",{className:"w-full",children:[e&&g.jsx("label",{htmlFor:h,className:St("block text-sm font-medium mb-2",r?"text-danger-700":"text-secondary-700",c&&"text-secondary-500","dark:text-secondary-300"),children:e}),g.jsx("textarea",{ref:y,id:h,disabled:c,className:St("block w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm","placeholder-secondary-400 text-sm","focus:outline-none focus:ring-1 focus:border-primary-500 focus:ring-primary-500","transition-colors duration-200","disabled:cursor-not-allowed disabled:bg-secondary-50 disabled:text-secondary-500",l==="none"&&"resize-none",l==="both"&&"resize",l==="horizontal"&&"resize-x",l==="vertical"&&"resize-y","dark:bg-secondary-900 dark:border-secondary-600","dark:focus:border-primary-400 dark:focus:ring-primary-400","dark:disabled:bg-secondary-800",r&&["border-danger-300 text-danger-900","focus:border-danger-500 focus:ring-danger-500","dark:border-danger-600"],i),...m}),(r||a)&&g.jsx("div",{className:"mt-1",children:r?g.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400",children:r}):a?g.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:a}):null})]})});iM.displayName="Textarea";const aM=i=>{const e=i.reduce((a,l)=>a+l.smvMinutes,0),r=i.filter(a=>a.processingType==="parallel").length;return e>30||i.length>10?"expert":e>20||r>3||i.length>7?"complex":e>10||i.length>4?"medium":"simple"},sM=i=>!i.templateName.trim()||!i.templateCode.trim()||!i.category.trim()||i.operations.length===0?!1:i.operations.every(e=>e.name.trim()&&e.smvMinutes>0&&e.pricePerPiece>0&&e.machineType.trim());class Na extends Ur{static instance;static getInstance(){return Na.instance||(Na.instance=new Na),Na.instance}constructor(){super("sewing_templates")}async createTemplate(e,r){try{if(!sM(e))return{success:!1,error:"Invalid template data provided"};const a=e.operations.map((y,f)=>({...y,id:`op_${Date.now()}_${f}`,sequenceOrder:f+1,prerequisites:y.processingType==="sequential"&&f>0?[`op_${Date.now()}_${f-1}`]:[]})),l=a.reduce((y,f)=>y+f.smvMinutes,0),c=a.reduce((y,f)=>y+f.pricePerPiece,0),d=aM(a),m={templateName:e.templateName,templateCode:e.templateCode,category:e.category,operations:a,totalSmv:l,totalPricePerPiece:c,complexityLevel:d,version:1,isActive:!0,timesUsed:0,createdBy:r,notes:e.notes,setupInstructions:e.setupInstructions};return await this.create(m)}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to create sewing template"}}}async getTemplate(e){return await this.getById(e)}async getAllTemplates(e){try{return e?await this.getWhere({field:"category",operator:"==",value:e},{orderByField:"templateName",orderDirection:"asc"}):await this.getAll({orderByField:"createdAt",orderDirection:"desc"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get templates"}}}async getActiveTemplates(){try{const e=await this.getAll();return!e.success||!e.data?{success:!1,error:"Failed to fetch templates"}:{success:!0,data:e.data.filter(a=>a.isActive).sort((a,l)=>a.templateName.localeCompare(l.templateName))}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to get active templates"}}}async updateTemplate(e,r){try{return r.operations&&(r.operations=r.operations.map((a,l)=>({...a,id:a.id||`op_${Date.now()}_${l}`,sequence:l+1}))),await this.update(e,r)}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to update template"}}}async deleteTemplate(e){try{return await this.update(e,{isActive:!1})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete template"}}}async searchTemplates(e){try{const r=await this.getAll();if(!r.success||!r.data)return{success:!1,error:"Failed to fetch templates for search"};const a=e.toLowerCase();return{success:!0,data:r.data.filter(c=>c.name.toLowerCase().includes(a)||c.description?.toLowerCase().includes(a)||c.garmentType.toLowerCase().includes(a))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to search templates"}}}async getPopularTemplates(e=10){try{return await this.getAll({orderByField:"timesUsed",orderDirection:"desc",limitCount:e})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get popular templates"}}}async incrementUsage(e){try{const r=await this.getById(e);if(!r.success||!r.data)return{success:!1,error:"Template not found"};const a=r.data.timesUsed||0;return await this.update(e,{timesUsed:a+1})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to increment usage count"}}}async getTemplateAnalytics(e){try{const r=await this.getById(e);return!r.success||!r.data?{success:!1,error:"Template not found"}:{success:!0,data:{templateId:e,templateName:r.data.templateName,totalOperations:r.data.operations.length,totalSmv:r.data.totalSmv,totalPricePerPiece:r.data.totalPricePerPiece,averageOperationTime:r.data.totalSmv/r.data.operations.length,timesUsed:r.data.timesUsed||0,complexityLevel:r.data.complexityLevel,createdAt:r.data.createdAt,lastUsed:r.data.updatedAt}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get template analytics"}}}subscribeToTemplates(e){return this.subscribeToCollection(e,{field:"isActive",operator:"==",value:!0},{orderByField:"templateName",orderDirection:"asc"})}async createWorkAssignment(e,r,a,l){try{const c=await this.getTemplate(e);if(!c.success||!c.data)return{success:!1,error:"Template not found"};const d=c.data,m=d.operations.map(_=>({operationId:_.id,machineType:_.machineType,status:"pending",piecesCompleted:0,piecesTarget:a})),y={templateId:e,bundleId:r,totalPieces:a,operationsProgress:m,assignedOperators:[],status:"draft",supervisorId:l,totalOperations:d.operations.length,completedOperations:0,progressPercentage:0},h=await new Ur("work_assignment_templates").create(y);return h.success&&await this.incrementUsage(e),h}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to create work assignment"}}}async assignOperatorToMachine(e,r,a){try{const l=new Ur("machine_operator_assignments"),c=await l.getWhere({field:"operatorId",operator:"==",value:e});if(c.success&&c.data&&c.data.length>0&&c.data.find(y=>y.machineType===a&&y.isActive))return{success:!1,error:"Operator already assigned to this machine type"};const d={operatorId:e,operatorName:r,machineType:a,isActive:!0,currentWorkload:0};return await l.create(d)}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to assign operator to machine"}}}async getOperatorsByMachineType(e){try{return await new Ur("machine_operator_assignments").getWhere({field:"machineType",operator:"==",value:e},{orderByField:"currentWorkload",orderDirection:"asc"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get operators for machine type"}}}async updateOperationProgress(e,r,a){try{const l=new Ur("work_assignment_templates"),c=await l.getById(e);if(!c.success||!c.data)return{success:!1,error:"Work assignment not found"};const d=c.data,m=d.operationsProgress.findIndex(h=>h.operationId===r);if(m===-1)return{success:!1,error:"Operation not found in work assignment"};d.operationsProgress[m]={...d.operationsProgress[m],...a};const y=d.operationsProgress.filter(h=>h.status==="completed").length,f=Math.round(y/d.totalOperations*100);return await l.update(e,{operationsProgress:d.operationsProgress,completedOperations:y,progressPercentage:f})}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to update operation progress"}}}async getWorkAssignmentsByBundle(e){try{return await new Ur("work_assignment_templates").getWhere({field:"bundleId",operator:"==",value:e})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get work assignments for bundle"}}}async exportTemplate(e){try{const r=await this.getTemplate(e);if(!r.success||!r.data)return{success:!1,error:"Template not found"};const a=r.data,l={templateName:a.templateName,templateCode:a.templateCode,category:a.category,operations:a.operations,totalSmv:a.totalSmv,totalPricePerPiece:a.totalPricePerPiece,complexityLevel:a.complexityLevel,version:a.version,notes:a.notes,setupInstructions:a.setupInstructions,exportedAt:new Date().toISOString(),exportedBy:this.getCurrentUserId?.()||"unknown"},c=`${a.templateCode}_${a.templateName}_${new Date().toISOString().split("T")[0]}.json`;return{success:!0,data:{data:JSON.stringify(l,null,2),filename:c}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to export template"}}}}const lM=Na.getInstance(),oM=({onComplete:i,onCancel:e})=>{const[r,a]=U.useState(1),[l,c]=U.useState({articles:[{id:"article_1",articleNumber:"",style:"",priority:"normal",sizes:[],sizeNames:"",sizeRatios:"",selectedTemplateId:""}],fabricRolls:[],batchCuttingInfo:{layerLength:4.7,totalLayers:0,cuttingEfficiency:95},selectedTemplateId:"",bundleNumber:""}),[d,m]=U.useState(!1),[y,f]=U.useState([]),[h,_]=U.useState({}),[v,b]=U.useState(0),[w,S]=U.useState({rollNumber:"",color:"",weight:"",layerCount:""}),[C,j]=U.useState([]),L=l.articles[v]||l.articles[0];de.useEffect(()=>{G()},[]);const G=async()=>{try{const A=await lM.getActiveTemplates();A.success&&A.data&&f(A.data)}catch(A){console.error("Failed to load templates:",A)}},Q=()=>{const A={id:`article_${Date.now()}`,articleNumber:"",style:"",priority:"normal",sizes:[],sizeNames:"",sizeRatios:"",selectedTemplateId:""};c(D=>({...D,articles:[...D.articles,A]})),b(l.articles.length)},ae=A=>{l.articles.length<=1||(c(D=>({...D,articles:D.articles.filter((K,fe)=>fe!==A)})),v>=A&&v>0&&b(v-1))},W=A=>{c(D=>({...D,articles:D.articles.map((K,fe)=>fe===v?{...K,...A}:K)}))},ee=()=>{const A=[];return w.rollNumber.trim()||A.push("Roll number is required"),w.color.trim()||A.push("Color is required"),(!w.weight.trim()||parseFloat(w.weight)<=0)&&A.push("Weight must be greater than 0"),(!w.layerCount.trim()||parseInt(w.layerCount)<=0)&&A.push("Layer count must be greater than 0"),w.rollNumber.trim()&&l.fabricRolls.some(D=>D.rollNumber.toLowerCase()===w.rollNumber.trim().toLowerCase())&&A.push("Roll number already exists"),A},J=()=>{const A=ee();if(j(A),A.length===0){const D={id:`roll_${Date.now()}`,rollNumber:w.rollNumber.trim(),color:w.color.trim(),weight:parseFloat(w.weight),layerCount:parseInt(w.layerCount),layerLength:l.batchCuttingInfo.layerLength,cuttingComplete:!1};c(K=>({...K,fabricRolls:[...K.fabricRolls,D],batchCuttingInfo:{...K.batchCuttingInfo,totalLayers:K.batchCuttingInfo.totalLayers+parseInt(w.layerCount)}})),S({rollNumber:"",color:"",weight:"",layerCount:""}),j([])}},V=A=>{const D=l.fabricRolls.find(K=>K.id===A);D&&c(K=>({...K,fabricRolls:K.fabricRolls.filter(fe=>fe.id!==A),batchCuttingInfo:{...K.batchCuttingInfo,totalLayers:K.batchCuttingInfo.totalLayers-D.layerCount}}))},F=()=>{const A={};return l.bundleNumber.trim()||(A.bundleNumber="Batch number is required"),l.articles.forEach((D,K)=>{if(D.articleNumber.trim()||(A[`article_${K}_articleNumber`]=`Article ${K+1}: Article number is required`),D.style.trim()||(A[`article_${K}_style`]=`Article ${K+1}: Style is required`),D.sizeNames.trim()||(A[`article_${K}_sizeNames`]=`Article ${K+1}: Size names are required`),D.sizeRatios.trim()||(A[`article_${K}_sizeRatios`]=`Article ${K+1}: Size ratios are required`),D.selectedTemplateId||(A[`article_${K}_template`]=`Article ${K+1}: Sewing template is required`),D.sizeNames.trim()&&D.sizeRatios.trim()){const fe=D.sizeNames.split(":").filter(Pe=>Pe.trim()),Ee=D.sizeRatios.split(":").filter(Pe=>Pe.trim());fe.length!==Ee.length&&(A[`article_${K}_sizeMatch`]=`Article ${K+1}: Number of sizes and ratios must match`)}}),_(A),Object.keys(A).length===0},$=()=>{const A={};return l.articles.forEach((D,K)=>{D.sizes.length===0&&(A[`article_${K}_sizes`]=`Article ${K+1}: At least one size entry is required`)}),l.fabricRolls.length===0&&(A.fabricRolls="At least one fabric roll is required for batch cutting"),l.batchCuttingInfo.layerLength<=0&&(A.layerLength="Layer length must be greater than 0"),_(A),Object.keys(A).length===0},Y=()=>{const A={},D=l.articles.filter(K=>!K.selectedTemplateId);return D.length>0&&(A.articleTemplates=`${D.length} articles are missing template assignments`),_(A),Object.keys(A).length===0},Z=A=>{const D=l.articles[A];if(!D.sizeNames.trim()||!D.sizeRatios.trim())return;const K=D.sizeNames.split(":").map(He=>He.trim()).filter(He=>He),fe=D.sizeRatios.split(":").map(He=>He.trim()).filter(He=>He);if(K.length!==fe.length){_(He=>({...He,sizeGeneration:"Size names and ratios count must match"}));return}const Ee=y.find(He=>He.id===D.selectedTemplateId),Pe=Ee?Ee.totalPricePerPiece:0,je=Ee?Ee.totalSmv:0,lt=l.batchCuttingInfo.totalLayers,Mi=K.map((He,Kr)=>{const wu=parseInt(fe[Kr])||1,Eu=lt*wu;return{size:He,quantity:Eu,completed:0,rate:Pe,smv:je}}),qa=l.articles.map((He,Kr)=>Kr===A?{...He,sizes:Mi}:He);c(He=>({...He,articles:qa})),_(He=>({...He,sizeGeneration:""}))},q=A=>{const D=l.articles.map((K,fe)=>fe===v?{...K,sizes:K.sizes.filter((Ee,Pe)=>Pe!==A)}:K);c(K=>({...K,articles:D}))},pe=()=>{let A=!1;switch(r){case 1:A=F();break;case 2:A=$();break;case 3:A=Y();break}A&&r<3&&a(D=>D+1)},B=()=>{r>1&&a(A=>A-1)},te=async()=>{if(Y()){m(!0);try{await i(l)}catch(A){console.error("Failed to complete WIP entry:",A)}finally{m(!1)}}},re=()=>l.articles.reduce((A,D)=>A+(D.sizes?.reduce((K,fe)=>K+fe.quantity,0)||0),0),Se=()=>l.articles.reduce((A,D)=>A+(D.sizes?.reduce((K,fe)=>K+fe.quantity*fe.rate,0)||0),0),Ae=()=>{const A=l.articles[v];return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg md:rounded-2xl p-4 md:p-8 shadow-lg",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg md:rounded-xl p-2 md:p-3",children:g.jsx(IR,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl md:text-3xl font-bold",children:"Step 1: Article Info"}),g.jsx("p",{className:"text-blue-100 text-sm md:text-lg",children:"Multiple articles for batch cutting"})]})]}),g.jsxs(Je,{onClick:Q,className:"bg-white/20 backdrop-blur hover:bg-white/30 text-white border-white/30 border min-h-[44px] px-4 md:px-6 py-2 md:py-3 w-full md:w-auto",children:[g.jsx(Kv,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),g.jsx("span",{className:"text-sm md:text-base",children:"Add Article"})]})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Articles: ",l.articles.length]})}),g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Current: ",v+1]})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[g.jsxs(At,{className:"xl:col-span-2 p-8 border-l-4 border-l-blue-500 bg-white shadow-lg",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("span",{className:"text-2xl",children:"📋"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Article Configuration"})]}),l.articles.length>1&&g.jsx("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b",children:l.articles.map((D,K)=>g.jsxs("div",{className:"flex items-center",children:[g.jsxs("button",{onClick:()=>b(K),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${K===v?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Article ",K+1,D.articleNumber&&` (${D.articleNumber})`]}),l.articles.length>1&&g.jsx("button",{onClick:()=>ae(K),className:"ml-1 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:g.jsx(Jc,{className:"h-4 w-4"})})]},D.id))}),v===0&&g.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[g.jsx("span",{className:"text-xl",children:"🏷️"}),g.jsx("h4",{className:"font-semibold text-yellow-900",children:"Batch Information"})]}),g.jsx(gn,{label:"Batch Number *",placeholder:"e.g., BATCH-001-2024, WIP-DEC-001",value:l.bundleNumber,onChange:D=>c(K=>({...K,bundleNumber:D.target.value})),error:h.bundleNumber,className:"bg-white"}),g.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"💡 This batch number will be used for all articles in this cutting session"})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsx("div",{children:g.jsx(gn,{label:"Article Number *",className:"text-base font-medium",placeholder:"e.g., #3233 (adult), #3265 (teen)",value:A.articleNumber,onChange:D=>W({articleNumber:D.target.value}),error:h[`article_${v}_articleNumber`]})}),g.jsx("div",{children:g.jsx(gn,{label:"Style *",className:"text-base font-medium",placeholder:"e.g., Round Neck T-shirt",value:A.style,onChange:D=>W({style:D.target.value}),error:h[`article_${v}_style`]})}),g.jsxs("div",{className:"lg:col-span-3",children:[g.jsx(gn,{label:"Size Names *",className:"text-base font-medium",placeholder:"e.g., M:L:XL or S:M:L:XL:2XL",value:A.sizeNames,onChange:D=>W({sizeNames:D.target.value}),error:h[`article_${v}_sizeNames`]}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter sizes separated by colon (:)"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-base font-semibold text-gray-700 mb-3",children:"Priority *"}),g.jsxs("select",{value:A.priority,onChange:D=>W({priority:D.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base font-medium bg-white",children:[g.jsx("option",{value:"low",children:"Low"}),g.jsx("option",{value:"normal",children:"Normal"}),g.jsx("option",{value:"high",children:"High"}),g.jsx("option",{value:"urgent",children:"Urgent"})]})]}),g.jsxs("div",{children:[g.jsx(gn,{label:"Size Ratios *",className:"text-base font-medium",placeholder:"e.g., 1:2:1 or 2:3:2:1:1",value:A.sizeRatios,onChange:D=>W({sizeRatios:D.target.value}),error:h[`article_${v}_sizeRatios`]}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter ratios separated by colon (:), matching size names order"})]}),g.jsxs("div",{className:"lg:col-span-3",children:[g.jsx("label",{className:"block text-base font-semibold text-gray-700 mb-3",children:"Sewing Template *"}),g.jsxs("select",{value:A.selectedTemplateId,onChange:D=>W({selectedTemplateId:D.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base font-medium bg-white",children:[g.jsx("option",{value:"",children:"Select a sewing template"}),y.map(D=>g.jsxs("option",{value:D.id,children:[D.templateName," (",D.templateCode,") - ",D.operations.length," ops"]},D.id))]}),h[`article_${v}_template`]&&g.jsx("p",{className:"text-red-500 text-sm mt-1",children:h[`article_${v}_template`]}),A.selectedTemplateId&&g.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded border",children:(()=>{const D=y.find(K=>K.id===A.selectedTemplateId);return D?g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-800",children:D.templateName}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-600 mt-1",children:[g.jsxs("span",{children:[D.operations.length," operations"]}),g.jsxs("span",{children:[D.totalSmv,"min SMV"]}),g.jsxs("span",{children:["Rs. ",D.totalPricePerPiece,"/pc"]})]})]}):null})()})]})]})]}),g.jsxs(At,{className:"xl:col-span-1 p-6 bg-gradient-to-br from-gray-50 to-blue-50 border border-blue-200",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[g.jsx("span",{className:"text-2xl",children:"👀"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Live Preview"})]}),A&&g.jsx("div",{className:"space-y-4 mb-6",children:g.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[g.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Current Article"}),g.jsxs("div",{className:"space-y-2 text-sm",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Number:"})," ",A.articleNumber||"Not set"]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Style:"})," ",A.style||"Not set"]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Priority:"}),g.jsx(Ct,{variant:A.priority==="urgent"?"danger":"secondary",size:"sm",className:"ml-2",children:A.priority})]}),A.sizes&&A.sizes.length>0&&g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Sizes:"}),g.jsx("div",{className:"grid grid-cols-2 gap-1 mt-1",children:A.sizes.map((D,K)=>g.jsxs("div",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:[D.size,": ",D.quantity]},K))})]})]})]})})]})]}),l.articles.length>0&&g.jsxs(At,{className:"p-6 mt-8",children:[g.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Batch Cutting Preview (",l.articles.length," Articles)"]}),g.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:g.jsxs("p",{className:"text-sm text-yellow-800",children:["📋 ",g.jsx("strong",{children:"Multi-Article Batch:"})," All articles will be cut together from the same fabric layers for maximum efficiency."]})}),g.jsx("div",{className:"space-y-2",children:l.articles.map((D,K)=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsxs(Ct,{variant:"secondary",children:["#",K+1]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-gray-900",children:D.articleNumber||"No article number"}),g.jsxs("p",{className:"text-sm text-gray-500",children:[D.style," | ",D.priority," | Sizes: ",D.sizeNames||"Not set"]}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Template: ",(()=>{const fe=y.find(Ee=>Ee.id===D.selectedTemplateId);return fe?fe.templateName:"Not selected"})()]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx(Ct,{variant:"outline",children:(()=>{if(D.sizes.length>0)return`${D.sizes.reduce((fe,Ee)=>fe+Ee.quantity,0)} pieces`;if(D.sizeRatios){const fe=D.sizeRatios.split(":").map(je=>parseInt(je.trim())||0),Ee=l.batchCuttingInfo.totalLayers;return`${fe.reduce((je,lt)=>je+lt*Ee,0)} pieces (${Ee} layers)`}else return"0 pieces"})()}),g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[g.jsxs("p",{children:["Ratios: ",D.sizeRatios||"Not set"]}),g.jsxs("p",{children:["Template: ",(()=>{const fe=y.find(Ee=>Ee.id===D.selectedTemplateId);return fe?fe.templateCode:"Not selected"})()]})]})]})]},D.id))})]})]})},Ke=()=>g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-2xl p-8 shadow-lg",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-xl p-3",children:g.jsx(jR,{className:"h-8 w-8 text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-bold",children:"Step 2: Fabric & Cutting Setup"}),g.jsx("p",{className:"text-orange-100 text-lg",children:"Configure your fabric rolls for batch cutting"})]})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Articles: ",l.articles.length]})}),g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Fabric Rolls: ",l.fabricRolls.length]})}),g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Total Layers: ",l.batchCuttingInfo.totalLayers]})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsx("div",{className:"space-y-6",children:g.jsxs(At,{className:"p-6 border-l-4 border-l-blue-500 bg-blue-50/30",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("span",{className:"text-2xl",children:"📏"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cutting Specifications"})]}),g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Layer Length (meters) *"}),g.jsx(gn,{type:"number",step:"0.1",value:l.batchCuttingInfo.layerLength,onChange:A=>c(D=>({...D,batchCuttingInfo:{...D.batchCuttingInfo,layerLength:parseFloat(A.target.value)||0}})),placeholder:"4.7",className:"text-lg font-semibold"}),g.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"💡 Standard cutting table length (usually 4.5 - 5.0 meters)"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cutting Efficiency (%)"}),g.jsx(gn,{type:"number",value:l.batchCuttingInfo.cuttingEfficiency,onChange:A=>c(D=>({...D,batchCuttingInfo:{...D.batchCuttingInfo,cuttingEfficiency:parseInt(A.target.value)||95}})),placeholder:"95",className:"text-lg font-semibold"}),g.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"⚡ Fabric utilization efficiency (recommended: 90-98%)"})]}),g.jsxs("div",{className:"bg-blue-100 rounded-xl p-4 border border-blue-200",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-blue-900",children:"Total Fabric Layers:"}),g.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.batchCuttingInfo.totalLayers})]}),g.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"✨ Automatically calculated from your fabric rolls"})]})]})]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs(At,{className:"p-6 border-l-4 border-l-green-500 bg-green-50/30",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("span",{className:"text-2xl",children:"🧵"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Fabric Roll"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Roll Number *"}),g.jsx(gn,{placeholder:"R001, F-123, etc.",value:w.rollNumber,onChange:A=>{S(D=>({...D,rollNumber:A.target.value})),C.length>0&&j([])},className:"font-mono"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fabric Color *"}),g.jsx(gn,{placeholder:"Red, Blue, Navy...",value:w.color,onChange:A=>{S(D=>({...D,color:A.target.value})),C.length>0&&j([])}})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),g.jsx(gn,{type:"number",step:"0.1",placeholder:"15.5",value:w.weight,onChange:A=>{S(D=>({...D,weight:A.target.value})),C.length>0&&j([])}})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Layers Count *"}),g.jsx(gn,{type:"number",placeholder:"50",value:w.layerCount,onChange:A=>{S(D=>({...D,layerCount:A.target.value})),C.length>0&&j([])}})]})]}),g.jsxs(Je,{onClick:J,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 py-3 font-semibold",size:"lg",children:[g.jsx(Kv,{className:"w-5 h-5 mr-2"}),"Add This Roll"]}),C.length>0&&g.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-red-500",children:"⚠️"}),g.jsx("span",{className:"font-semibold text-red-800",children:"Please fix these errors:"})]}),g.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:C.map((A,D)=>g.jsxs("li",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-red-400",children:"•"}),g.jsx("span",{children:A})]},D))})]})]})]}),l.fabricRolls.length>0&&g.jsxs(At,{className:"p-6 border-l-4 border-l-purple-500 bg-purple-50/30",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("span",{className:"text-2xl",children:"📦"}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Fabric Rolls Ready for Cutting (",l.fabricRolls.length,")"]}),g.jsxs("p",{className:"text-purple-700",children:["Total layers: ",l.batchCuttingInfo.totalLayers]})]})]}),g.jsx("div",{className:"grid gap-4",children:l.fabricRolls.map((A,D)=>g.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold text-gray-600",children:D+1}),g.jsx(Ct,{variant:"secondary",className:"font-mono text-lg px-3 py-1",children:A.rollNumber})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 shadow-sm",style:{backgroundColor:A.color.toLowerCase()}}),g.jsx("span",{className:"font-semibold text-gray-900",children:A.color})]}),g.jsxs("div",{className:"text-sm text-gray-600 space-x-6",children:[g.jsxs("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full font-medium",children:[A.weight,"kg"]}),g.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-medium",children:[g.jsx("strong",{children:A.layerCount})," layers"]}),g.jsxs("span",{className:"bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-medium",children:[A.layerLength,"m each"]})]})]}),g.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>V(A.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:[g.jsx(Jc,{className:"w-4 h-4 mr-1"}),"Remove"]})]})},A.id))})]}),h.fabricRolls&&g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-red-500",children:"⚠️"}),g.jsx("p",{className:"text-red-700 font-medium",children:h.fabricRolls})]})}),g.jsxs(At,{className:"p-6",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[g.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:g.jsx(VR,{className:"h-6 w-6 text-green-600"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Article Size Breakdown"}),g.jsx("p",{className:"text-sm text-gray-500",children:"Different cut ratios for each article type"})]})]}),l.articles.length>1&&g.jsx("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b",children:l.articles.map((A,D)=>g.jsxs("button",{onClick:()=>b(D),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${D===v?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[A.articleNumber||`Article ${D+1}`,g.jsxs("span",{className:"ml-2 text-xs bg-white px-1 rounded",children:[A.sizes.length," sizes"]})]},A.id))}),g.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-blue-900",children:L.articleNumber||`Article ${v+1}`}),g.jsx("p",{className:"text-sm text-blue-700",children:L.style})]}),g.jsxs("div",{className:"text-right text-sm",children:[g.jsxs("p",{className:"text-blue-800",children:[g.jsx("strong",{children:"Sizes:"})," ",L.sizeNames||"Not configured"]}),g.jsxs("p",{className:"text-blue-600",children:[g.jsx("strong",{children:"Ratios:"})," ",L.sizeRatios||"Not configured"]}),L.sizeNames&&L.sizeRatios&&g.jsx(Je,{onClick:()=>Z(v),className:"mt-2 bg-blue-600 hover:bg-blue-700 text-xs px-2 py-1",children:"Generate Sizes"})]})]})}),g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[g.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"📋 How to Add Sizes"}),g.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Sizes are automatically generated from your Step 1 configuration using the selected template's pricing."}),g.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[g.jsxs("li",{children:["• ",g.jsx("strong",{children:"Same rate & SMV"})," for all sizes (from template)"]}),g.jsxs("li",{children:["• ",g.jsx("strong",{children:"Different quantities"})," based on your ratios"]}),g.jsx("li",{children:'• Click "Generate Sizes" to create from your size names and ratios'})]}),h.sizeGeneration&&g.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.sizeGeneration})]}),L.sizes.length>0&&g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h4",{className:"font-medium text-gray-900",children:["Article Sizes (",L.sizes.length,")"]}),(()=>{const A=y.find(D=>D.id===L.selectedTemplateId);return A?g.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded",children:["Template: ",g.jsxs("span",{className:"font-medium text-blue-700",children:["Rs. ",A.totalPricePerPiece,"/pc"]})," |",g.jsxs("span",{className:"font-medium text-blue-700",children:[" ",A.totalSmv,"min SMV"]})]}):null})()]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:L.sizes.map((A,D)=>g.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx(Ct,{variant:"secondary",className:"text-lg font-mono",children:A.size}),g.jsx(Je,{variant:"outline",size:"sm",onClick:()=>q(D),className:"text-red-600 hover:text-red-700 text-xs px-2 py-1",children:"Remove"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-gray-600",children:"Quantity:"}),g.jsxs("span",{className:"font-semibold text-gray-900",children:[A.quantity," pieces"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-gray-600",children:"Rate:"}),g.jsxs("span",{className:"font-medium text-gray-900",children:["Rs. ",A.rate,"/pc"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-gray-600",children:"SMV:"}),g.jsxs("span",{className:"font-medium text-gray-900",children:[A.smv," min/pc"]})]}),g.jsx("div",{className:"pt-2 border-t",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Value:"}),g.jsxs("span",{className:"font-bold text-green-600",children:["Rs. ",(A.quantity*A.rate).toFixed(2)]})]})})]})]},D))}),g.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:g.jsxs("div",{className:"flex justify-between items-center text-sm",children:[g.jsx("span",{className:"text-green-700",children:"Article Total:"}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"font-semibold text-green-900",children:[L.sizes.reduce((A,D)=>A+D.quantity,0)," pieces"]}),g.jsxs("div",{className:"font-bold text-green-600",children:["Rs. ",L.sizes.reduce((A,D)=>A+D.quantity*D.rate,0).toFixed(2)]})]})]})})]}),h[`article_${v}_sizes`]&&g.jsx("p",{className:"text-red-500 text-sm",children:h[`article_${v}_sizes`]})]}),g.jsxs(At,{className:"p-6",children:[g.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Multi-Article Batch Summary"}),g.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[g.jsx("h5",{className:"font-medium text-yellow-900 mb-2",children:"🔄 Simultaneous Cutting Process"}),g.jsxs("p",{className:"text-sm text-yellow-800 mb-3",children:["All articles will be cut together using ",l.batchCuttingInfo.totalLayers," total layers at ",l.batchCuttingInfo.layerLength,"m length. Different cut ratios will be applied based on article specifications."]}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-yellow-700",children:"Articles:"}),g.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:l.articles.length})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-yellow-700",children:"Fabric Rolls:"}),g.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:l.fabricRolls.length})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-yellow-700",children:"Total Layers:"}),g.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:l.batchCuttingInfo.totalLayers})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-yellow-700",children:"Total Pieces:"}),g.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:re()})]})]})]}),g.jsx("div",{className:"space-y-3",children:l.articles.map(A=>g.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{children:[g.jsxs("h5",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[g.jsx("span",{children:A.articleNumber}),g.jsx(Ct,{variant:"outline",size:"sm",children:"Article"})]}),g.jsx("p",{className:"text-sm text-gray-600",children:A.style})]}),g.jsxs("div",{className:"text-right",children:[g.jsx(Ct,{variant:A.priority==="urgent"?"danger":A.priority==="high"?"warning":"secondary",children:A.priority}),g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Template: ",(()=>{const D=y.find(K=>K.id===A.selectedTemplateId);return D?D.templateCode:"Not set"})()]})]})]}),A.sizes.length>0?g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-3",children:A.sizes.map((D,K)=>g.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded",children:[g.jsxs("span",{className:"font-medium",children:[D.size,":"]})," ",D.quantity,"pcs"]},K))}):g.jsx("div",{className:"text-sm text-red-500 italic mb-3",children:"No sizes added"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 border-t pt-2",children:[g.jsxs("div",{children:[g.jsx("span",{children:"Article Total: "}),g.jsxs("span",{className:"font-medium text-gray-900",children:[A.sizes.reduce((D,K)=>D+K.quantity,0)," pieces"]})]}),g.jsxs("div",{children:[g.jsx("span",{children:"Article Value: "}),g.jsxs("span",{className:"font-medium text-gray-900",children:["Rs. ",A.sizes.reduce((D,K)=>D+K.quantity*K.rate,0).toFixed(2)]})]})]})]},A.id))}),g.jsx("div",{className:"border-t pt-4 mt-4",children:g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg font-semibold",children:[g.jsxs("div",{className:"text-right",children:[g.jsx("span",{className:"text-gray-600",children:"Batch Total:"}),g.jsxs("span",{className:"text-gray-900 ml-2",children:[re()," pieces"]})]}),g.jsxs("div",{className:"text-left",children:[g.jsx("span",{className:"text-gray-600",children:"Batch Value:"}),g.jsxs("span",{className:"text-gray-900 ml-2",children:["Rs. ",Se().toFixed(2)]})]})]})})]})]})]})]}),Me=()=>g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl p-8 shadow-lg",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-xl p-3",children:g.jsx(kc,{className:"h-8 w-8 text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-bold",children:"Step 3: Final Review & Confirmation"}),g.jsx("p",{className:"text-purple-100 text-lg",children:"Review all settings and complete batch setup"})]})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Batch: ",l.bundleNumber||"Not set"]})}),g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Articles: ",l.articles.length]})}),g.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:g.jsxs("span",{className:"text-sm font-medium",children:["Total Pieces: ",re()]})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs(At,{className:"p-6 border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("span",{className:"text-3xl",children:"📊"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Production Overview"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"relative w-24 h-24 mx-auto mb-3",children:g.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:g.jsxs("div",{className:"text-white text-center",children:[g.jsx("div",{className:"text-2xl font-bold",children:re()}),g.jsx("div",{className:"text-xs",children:"PIECES"})]})})}),g.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Production"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"relative w-24 h-24 mx-auto mb-3",children:g.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:g.jsxs("div",{className:"text-white text-center",children:[g.jsxs("div",{className:"text-lg font-bold",children:["Rs.",Math.round(Se())]}),g.jsx("div",{className:"text-xs",children:"VALUE"})]})})}),g.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Batch Value"})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-orange-600 font-bold",children:"1"})}),g.jsx("span",{className:"font-medium text-gray-700",children:"Articles Setup"})]}),g.jsxs(Ct,{variant:"success",children:[l.articles.length," Articles"]})]}),g.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-blue-600 font-bold",children:"2"})}),g.jsx("span",{className:"font-medium text-gray-700",children:"Fabric Cutting"})]}),g.jsxs(Ct,{variant:"secondary",children:[l.batchCuttingInfo.totalLayers," Layers"]})]}),g.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-purple-600 font-bold",children:"3"})}),g.jsx("span",{className:"font-medium text-gray-700",children:"Sewing Operations"})]}),g.jsxs(Ct,{variant:"warning",children:[l.articles.reduce((A,D)=>{const K=y.find(fe=>fe.id===D.selectedTemplateId);return A+(K?.operations.length||0)},0)," Operations"]})]})]})]}),g.jsxs(At,{className:"p-6 border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-emerald-50",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("span",{className:"text-3xl",children:"🎯"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Article Breakdown"})]}),g.jsx("div",{className:"space-y-4",children:l.articles.map((A,D)=>{const K=y.find(je=>je.id===A.selectedTemplateId),fe=A.sizes.reduce((je,lt)=>je+lt.quantity,0),Ee=A.sizes.reduce((je,lt)=>je+lt.quantity*lt.rate,0),Pe=re()>0?Math.round(fe/re()*100):0;return g.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${D%4===0?"bg-blue-500":D%4===1?"bg-green-500":D%4===2?"bg-orange-500":"bg-purple-500"}`,children:D+1}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-gray-900",children:A.articleNumber}),g.jsx("p",{className:"text-sm text-gray-600",children:A.style})]})]}),g.jsxs(Ct,{variant:"outline",className:"text-sm",children:[Pe,"%"]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:g.jsx("div",{className:`h-2 rounded-full ${D%4===0?"bg-blue-500":D%4===1?"bg-green-500":D%4===2?"bg-orange-500":"bg-purple-500"}`,style:{width:`${Pe}%`}})}),g.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"font-bold text-gray-900",children:fe}),g.jsx("div",{className:"text-gray-600",children:"Pieces"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"font-bold text-gray-900",children:K?.operations.length||0}),g.jsx("div",{className:"text-gray-600",children:"Operations"})]}),g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"font-bold text-gray-900",children:["Rs.",Math.round(Ee)]}),g.jsx("div",{className:"text-gray-600",children:"Value"})]})]}),g.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:A.sizes.map((je,lt)=>g.jsxs("div",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:[je.size,": ",je.quantity]},lt))})})]},A.id)})})]})]}),g.jsxs(At,{className:"p-6 border-l-4 border-l-orange-500 bg-gradient-to-br from-orange-50 to-red-50",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("span",{className:"text-3xl",children:"🧵"}),g.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fabric & Cutting Layout"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"relative w-20 h-20 mx-auto mb-4",children:g.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center shadow-lg transform rotate-45",children:g.jsxs("div",{className:"text-white text-center transform -rotate-45",children:[g.jsx("div",{className:"text-lg font-bold",children:l.fabricRolls.length}),g.jsx("div",{className:"text-xs",children:"ROLLS"})]})})}),g.jsx("p",{className:"font-medium text-gray-700",children:"Fabric Rolls"}),g.jsxs("div",{className:"mt-2 space-y-1",children:[l.fabricRolls.slice(0,3).map(A=>g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:A.color.toLowerCase()}}),g.jsx("span",{className:"text-xs text-gray-600",children:A.rollNumber})]},A.id)),l.fabricRolls.length>3&&g.jsxs("div",{className:"text-xs text-gray-500",children:["+",l.fabricRolls.length-3," more"]})]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"relative w-20 h-20 mx-auto mb-4",children:g.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:g.jsxs("div",{className:"text-white text-center",children:[g.jsx("div",{className:"text-lg font-bold",children:l.batchCuttingInfo.totalLayers}),g.jsx("div",{className:"text-xs",children:"LAYERS"})]})})}),g.jsx("p",{className:"font-medium text-gray-700",children:"Total Layers"}),g.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-600",children:[g.jsxs("p",{children:[l.batchCuttingInfo.layerLength,"m length"]}),g.jsxs("p",{children:[l.batchCuttingInfo.cuttingEfficiency,"% efficiency"]})]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"relative w-20 h-20 mx-auto mb-4",children:g.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center shadow-lg",children:g.jsxs("div",{className:"text-white text-center",children:[g.jsx("div",{className:"text-lg font-bold",children:re()}),g.jsx("div",{className:"text-xs",children:"OUTPUT"})]})})}),g.jsx("p",{className:"font-medium text-gray-700",children:"Total Pieces"}),g.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[g.jsxs("p",{children:["Across ",l.articles.length," articles"]}),g.jsxs("p",{children:["Rs. ",Se().toFixed(0)," value"]})]})]})]}),g.jsxs("div",{className:"mt-6 pt-6 border-t border-orange-200",children:[g.jsx("h4",{className:"font-medium text-gray-700 mb-3 text-center",children:"Batch Cutting Process"}),g.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-orange-600 text-xs font-bold",children:"1"})}),g.jsx("span",{children:"Layer Setup"})]}),g.jsx("div",{className:"text-gray-400",children:"→"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"2"})}),g.jsx("span",{children:"Multi-Article Cut"})]}),g.jsx("div",{className:"text-gray-400",children:"→"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-green-600 text-xs font-bold",children:"3"})}),g.jsx("span",{children:"Bundle Ready"})]})]})]})]}),g.jsx(At,{className:"p-6 bg-gradient-to-r from-green-100 to-blue-100 border border-green-200",children:g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[g.jsx("span",{className:"text-4xl",children:"🚀"}),g.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Batch Ready for Production!"})]}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[g.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[g.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.bundleNumber}),g.jsx("div",{className:"text-sm text-gray-600",children:"Batch Number"})]}),g.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[g.jsx("div",{className:"text-2xl font-bold text-green-600",children:re()}),g.jsx("div",{className:"text-sm text-gray-600",children:"Total Pieces"})]}),g.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[g.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.articles.length}),g.jsx("div",{className:"text-sm text-gray-600",children:"Articles"})]}),g.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[g.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["Rs. ",Math.round(Se())]}),g.jsx("div",{className:"text-sm text-gray-600",children:"Batch Value"})]})]}),g.jsx("p",{className:"text-gray-700 mb-4",children:"Your multi-article batch is configured and ready to proceed to cutting operations. All articles, sizes, templates, and fabric rolls have been validated."}),g.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-200 text-green-800 px-4 py-2 rounded-full",children:[g.jsx(kc,{className:"w-5 h-5"}),g.jsx("span",{className:"font-medium",children:"All systems validated - Ready to proceed!"})]})]})})]});return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsx("div",{className:"sticky top-0 z-20 bg-white/95 backdrop-blur-sm shadow-lg border-b border-gray-200 px-6 py-4 mb-8 rounded-b-xl",children:g.jsx("div",{className:"flex items-center justify-between",children:[1,2,3].map(A=>g.jsxs(de.Fragment,{children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:`flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full transition-all ${A===r?"bg-blue-600 text-white shadow-md":A<r?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:A<r?g.jsx(kc,{className:"h-4 w-4 md:h-5 md:w-5"}):g.jsx("span",{className:"font-bold text-sm md:text-base",children:A})}),g.jsx("div",{className:"ml-2 hidden sm:block",children:g.jsx("p",{className:`text-sm font-semibold ${A===r?"text-blue-600":A<r?"text-green-600":"text-gray-500"}`,children:A===1?"Info":A===2?"Fabric":"Review"})})]}),A<3&&g.jsx("div",{className:`flex-1 h-1 mx-2 md:mx-4 rounded-full transition-all ${A<r?"bg-green-500":"bg-gray-200"}`})]},A))})}),g.jsxs("div",{className:"pb-32",children:[r===1&&Ae(),r===2&&Ke(),r===3&&Me()]}),g.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-t border-gray-200 shadow-2xl z-30 p-6",children:g.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[g.jsx("div",{children:r>1&&g.jsx(Je,{variant:"outline",onClick:B,className:"min-h-[48px] px-6 text-base font-medium",children:"← Back"})}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(Je,{variant:"outline",onClick:e,className:"min-h-[48px] px-6 text-base font-medium border-red-200 text-red-600 hover:bg-red-50",children:"Cancel"}),r<3?g.jsx(Je,{onClick:pe,className:"min-h-[48px] px-8 text-base font-medium bg-blue-600 hover:bg-blue-700 text-white",children:"Next →"}):g.jsx(Je,{onClick:te,disabled:d,className:"min-h-[48px] px-8 text-base font-medium bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-400",children:d?"Creating...":"✓ Complete"})]})]})})]})})};class rw{static async findUser(e){try{const r=await Zs(tn(Ve,_t.OPERATORS,e));if(r.exists())return{success:!0,data:{id:r.id,...r.data()}};const a=await Zs(tn(Ve,_t.SUPERVISORS,e));if(a.exists())return{success:!0,data:{id:a.id,...a.data()}};const l=await Zs(tn(Ve,_t.MANAGEMENT,e));return l.exists()?{success:!0,data:{id:l.id,...l.data()}}:{success:!1,error:"User not found"}}catch(r){return console.error("Error finding user:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}static async getUserById(e,r){try{let a;switch(r){case"operator":a=_t.OPERATORS;break;case"supervisor":a=_t.SUPERVISORS;break;case"management":case"admin":a=_t.MANAGEMENT;break;default:throw new Error("Invalid user role")}const l=await Zs(tn(Ve,a,e));return l.exists()?{success:!0,data:{id:l.id,...l.data()}}:{success:!1,error:"User not found"}}catch(a){return console.error("Error getting user by ID:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}static async login(e){try{const r=await this.findUser(e.username);if(!r.success||!r.data)return{success:!1,error:"Invalid username or password"};const a=r.data;if(!a.active)return{success:!1,error:"Account is deactivated. Please contact administrator."};if(e.isTrustedDevice&&e.password==="auto_trusted_login"){const{trustedDeviceService:d}=await ue(async()=>{const{trustedDeviceService:y}=await Promise.resolve().then(()=>oR);return{trustedDeviceService:y}},void 0);if(!await d.isDeviceTrusted(e.username))return{success:!1,error:"🔒 Device trust has expired. Please login normally."};console.log("🛡️ Trusted device auto-login successful for:",a.name)}else{const d=a.passwordHash,m=btoa(e.password);if(!d||d!==m)return{success:!1,error:"Invalid username or password"}}const l=a.role==="operator"?_t.OPERATORS:a.role==="supervisor"?_t.SUPERVISORS:_t.MANAGEMENT;return await Aa(tn(Ve,l,a.id),{lastLogin:lr()}),{success:!0,data:{...a,lastLogin:new Date}}}catch(r){return console.error("Login error:",r),{success:!1,error:r instanceof Error?r.message:"Login failed"}}}static async logout(e){try{return jc.currentUser&&await eT(jc),console.log("User logged out successfully"),{success:!0}}catch(r){return console.error("Logout error:",r),{success:!1,error:r instanceof Error?r.message:"Logout failed"}}}static async updateUserProfile(e,r,a){try{const l=r==="operator"?_t.OPERATORS:r==="supervisor"?_t.SUPERVISORS:_t.MANAGEMENT;return await Aa(tn(Ve,l,e),{...a,updatedAt:lr()}),{success:!0}}catch(l){return console.error("Error updating user profile:",l),{success:!1,error:l instanceof Error?l.message:"Update failed"}}}static async changePassword(e,r,a,l){try{return console.log("Password change requested for user:",e),{success:!0}}catch(c){return console.error("Error changing password:",c),{success:!1,error:c instanceof Error?c.message:"Password change failed"}}}static hasPermission(e,r){return e?e.role==="admin"||e.permissions.includes("*")?!0:e.permissions.includes(r):!1}static async validateSession(e,r){try{return await this.getUserById(e,r)}catch(a){return console.error("Session validation error:",a),{success:!1,error:"Session validation failed"}}}static onAuthStateChanged(e){return tT(jc,e)}}const cM=Object.freeze(Object.defineProperty({__proto__:null,AuthService:rw},Symbol.toStringTag,{value:"Module"})),Ah=U.lazy(()=>ue(()=>import("./OperatorDashboard.RLqm5wTP.js"),__vite__mapDeps([6,2,3,7,1,8,9,10,11,12,13,4,5,14])).then(i=>({default:i.OperatorDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"OperatorDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Dashboard temporarily unavailable")}))),Ch=U.lazy(()=>ue(()=>import("./SupervisorDashboard.CuDD3wb5.js"),__vite__mapDeps([15,2,3,7,1,8,9,10,11,12,13,4,5,14])).then(i=>({default:i.SupervisorDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"SupervisorDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Supervisor Dashboard temporarily unavailable")}))),uM=U.lazy(()=>ue(()=>import("./assignment-dashboard.DU5Td5Vb.js"),__vite__mapDeps([16,2,3,14,4,17,18,19,20,21,22,23,24,1,5,25,26])).then(i=>({default:i.AssignmentDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"AssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Assignment Dashboard temporarily unavailable")}))),dM=U.lazy(()=>ue(()=>import("./bundle-lifecycle-manager.DLZx403w.js"),__vite__mapDeps([27,2,3,28,29,30,31,32,5,4,33,34,35,1,36])).then(i=>({default:i.BundleLifecycleManager})).catch(i=>(ge.captureException(i,{tags:{component:"BundleLifecycleManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Lifecycle Manager temporarily unavailable")}))),fM=U.lazy(()=>ue(()=>import("./production-dashboard.D2HTz5IY.js"),__vite__mapDeps([37,2,3,29,36,4,38,5,1])).then(i=>({default:i.ProductionDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"ProductionDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Production Dashboard temporarily unavailable")}))),hM=U.lazy(()=>ue(()=>import("./quality-management-dashboard.CxsV81jm.js"),__vite__mapDeps([39,2,3,28,29,32,5,10,11,1,36,4,30,40,18])).then(i=>({default:i.QualityManagementDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"QualityManagementDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Quality Management Dashboard temporarily unavailable")}))),mM=U.lazy(()=>ue(()=>import("./earnings-dashboard.DlLwNSm9.js"),__vite__mapDeps([41,2,3,30,11,1,36,4,5,29,31,32,33,34,42,22,18])).then(i=>({default:i.EarningsDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"EarningsDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Earnings Dashboard temporarily unavailable")}))),gM=U.lazy(()=>ue(()=>import("./operator-management-dashboard.B34CemnU.js"),__vite__mapDeps([43,2,3,14,4,17,8,1,18,25,26,44,20,45,22,46,0,5,21])).then(i=>({default:i.default||i.OperatorManagementDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"OperatorManagementDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Management Dashboard temporarily unavailable")}))),pM=U.lazy(()=>ue(()=>import("./self-assignment-interface.Dpt77rcx.js"),__vite__mapDeps([47,2,3,14,4,17,23,24,1,5,25,19,18,22])).then(i=>({default:i.SelfAssignmentInterface})).catch(i=>(ge.captureException(i,{tags:{component:"SelfAssignmentInterface",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Self Assignment Interface temporarily unavailable")}))),yM=U.lazy(()=>ue(()=>import("./production-timer.-OhC5c-T.js"),__vite__mapDeps([48,2,3,42,34,32,5,4,1])).then(i=>({default:i.ProductionTimer})).catch(i=>(ge.captureException(i,{tags:{component:"ProductionTimer",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Production Timer temporarily unavailable")}))),vM=U.lazy(()=>ue(()=>import("./workflow-sequencer.DJk3b5QH.js"),__vite__mapDeps([49,2,3,18,50,51,4,1,5])).then(i=>({default:i.WorkflowSequencer})).catch(i=>(ge.captureException(i,{tags:{component:"WorkflowSequencer",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Workflow Sequencer temporarily unavailable")}))),_M=U.lazy(()=>ue(()=>import("./mobile-friendly-layout.CIZa2fIt.js"),__vite__mapDeps([52,2,3,32,5,33,34,4,29,53,36,54,55,56,57,58,19,59,21,50,1,60])).then(i=>({default:i.MobileFriendlyLayout})).catch(i=>{throw ge.captureException(i,{tags:{component:"MobileFriendlyLayout",type:"dynamic-import"},level:"error"}),i})),bM=U.lazy(()=>ue(()=>import("./mobile-test.CZfHslKS.js"),__vite__mapDeps([61,2,3])).then(i=>({default:i.MobileTest})).catch(i=>(ge.captureException(i,{tags:{component:"MobileTest",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Mobile Test temporarily unavailable")}))),N1=U.lazy(()=>ue(()=>import("./live-production-dashboard.BNzp2kZL.js"),__vite__mapDeps([62,2,3,58,19,63,22,4,1,5])).then(i=>({default:i.LiveProductionDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"LiveProductionDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Live Production Dashboard temporarily unavailable")}))),xM=U.lazy(()=>ue(()=>import("./CuttingDropletManager.CxgG1FSo.js"),__vite__mapDeps([64,2,3,28,29,1,36,4,5])).catch(i=>(ge.captureException(i,{tags:{component:"CuttingDropletManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Cutting Droplet Manager temporarily unavailable")}))),wM=U.lazy(()=>ue(()=>import("./ProductionLotManager.BJTh0AIT.js"),__vite__mapDeps([65,2,3,28,29,30,66,1,36,4,5])).catch(i=>(ge.captureException(i,{tags:{component:"ProductionLotManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Production Lot Manager temporarily unavailable")}))),EM=U.lazy(()=>ue(()=>import("./ProcessPricingManager.By1URqVf.js"),__vite__mapDeps([67,2,3,28,29,68,32,5,36,4,1])).catch(i=>(ge.captureException(i,{tags:{component:"ProcessPricingManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Process Pricing Manager temporarily unavailable")}))),SM=U.lazy(()=>ue(()=>import("./EnhancedOperatorDashboard.CP5lPkvu.js"),__vite__mapDeps([69,2,3,28,70,1,36,4,5])).catch(i=>(ge.captureException(i,{tags:{component:"EnhancedOperatorDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Enhanced Operator Dashboard temporarily unavailable")}))),TM=U.lazy(()=>ue(()=>import("./OperatorPieceTracker.DfTBwggh.js"),__vite__mapDeps([71,2,3,28,29,66,1,36,4,5])).catch(i=>(ge.captureException(i,{tags:{component:"OperatorPieceTracker",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Piece Tracker temporarily unavailable")}))),NM=U.lazy(()=>ue(()=>import("./BundleAssignmentManager.D7OD1GHu.js"),__vite__mapDeps([72,2,3,28,29,68,32,5,70,1,36,4])).catch(i=>(ge.captureException(i,{tags:{component:"BundleAssignmentManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Assignment Manager temporarily unavailable")}))),AM=U.lazy(()=>ue(()=>import("./sewing-template-manager.CEK5SiGB.js"),__vite__mapDeps([73,2,3,5,4,1])).then(i=>({default:i.default||i.SewingTemplateManager})).catch(i=>(ge.captureException(i,{tags:{component:"SewingTemplateManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Sewing Template Manager temporarily unavailable")}))),CM=U.lazy(()=>ue(()=>import("./bundle-assignment-dashboard.BfaLa2Q6.js"),__vite__mapDeps([74,2,3,14,4,18,75,25,1,5])).then(i=>({default:i.BundleAssignmentDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"BundleAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Assignment Dashboard temporarily unavailable")}))),A1=U.lazy(()=>ue(()=>import("./operator-work-dashboard.DAD6m0Pu.js"),__vite__mapDeps([76,2,3,14,4,50,75,77,19,56,18,1,5])).then(i=>({default:i.OperatorWorkDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"OperatorWorkDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Work Dashboard temporarily unavailable")}))),OM=U.lazy(()=>ue(()=>import("./operator-self-assignment.CZUp7zO2.js"),__vite__mapDeps([78,2,3,14,4,21,18,45,51,1,5])).then(i=>({default:i.OperatorSelfAssignment})).catch(i=>(ge.captureException(i,{tags:{component:"OperatorSelfAssignment",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Self Assignment temporarily unavailable")}))),RM=U.lazy(()=>ue(()=>import("./supervisor-parts-dashboard.BJvquMcg.js"),__vite__mapDeps([79,2,3,14,4,56,54,18,1,5])).then(i=>({default:i.SupervisorPartsDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"SupervisorPartsDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Supervisor Parts Dashboard temporarily unavailable")}))),DM=U.lazy(()=>ue(()=>import("./multi-strategy-assignment-dashboard.B_of-VLo.js"),__vite__mapDeps([80,2,3,14,4,21,81,55,18,26,25,1,5])).then(i=>({default:i.MultiStrategyAssignmentDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"MultiStrategyAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Multi Strategy Assignment Dashboard temporarily unavailable")}))),MM=U.lazy(()=>ue(()=>import("./bundle-batch-tracking-dashboard.DfCuW2U9.js"),__vite__mapDeps([82,2,3,14,4,57,19,81,63,83,18,75,40,1,5])).then(i=>({default:i.BundleBatchTrackingDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"BundleBatchTrackingDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Batch Tracking Dashboard temporarily unavailable")}))),jM=U.lazy(()=>ue(()=>import("./drag-drop-assignment-dashboard.DOTsVlVq.js"),__vite__mapDeps([84,2,3,53,14,4,85,1,5,18,59,75,21,51])).then(i=>({default:i.DragDropAssignmentDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"DragDropAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Drag Drop Assignment Dashboard temporarily unavailable")}))),kM=U.lazy(()=>ue(()=>import("./kanban-assignment-board.DWLFGd6R.js"),__vite__mapDeps([86,2,3,53,14,4,85,1,5,18,75,50,21,51])).then(i=>({default:i.KanbanAssignmentBoard})).catch(i=>(ge.captureException(i,{tags:{component:"KanbanAssignmentBoard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Kanban Assignment Board temporarily unavailable")}))),IM=U.lazy(()=>ue(()=>import("./supervisor-operator-buckets.BGIfeo4K.js"),__vite__mapDeps([87,2,3,14,4,21,18,1,5])).then(i=>({default:i.default})).catch(i=>(ge.captureException(i,{tags:{component:"SupervisorOperatorBuckets",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Supervisor Operator Buckets temporarily unavailable")}))),LM=U.lazy(()=>ue(()=>import("./smart-work-assignment-dashboard.BdqUzUiz.js"),__vite__mapDeps([88,2,3,14,4,85,1,5,25,83,89,75,18,21])).then(i=>({default:i.SmartWorkAssignmentDashboard})).catch(i=>(ge.captureException(i,{tags:{component:"SmartWorkAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Smart Work Assignment Dashboard temporarily unavailable")}))),UM=U.lazy(()=>ue(()=>import("./operator-profile-assignment.DetiEd0e.js"),__vite__mapDeps([90,2,3,14,4,19,18,77,21,20,45,89,59,1,5])).then(i=>({default:i.OperatorProfileAssignment})).catch(i=>(ge.captureException(i,{tags:{component:"OperatorProfileAssignment",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Profile Assignment temporarily unavailable")}))),BM=U.lazy(()=>ue(()=>import("./sequential-workflow-simple.BD2bC5eZ.js"),__vite__mapDeps([91,2,3,14,4,92,1,5])).then(i=>({default:i.SimpleSequentialWorkflow})).catch(i=>(ge.captureException(i,{tags:{component:"SimpleSequentialWorkflow",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Sequential Workflow temporarily unavailable")}))),PM=U.lazy(()=>ue(()=>import("./wip-entry-manager.D7HeMXAa.js"),__vite__mapDeps([93,2,3,14,4,92,1,5])).then(i=>({default:i.WipEntryManager})).catch(i=>(ge.captureException(i,{tags:{component:"WipEntryManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"WIP Entry Manager temporarily unavailable")}))),zM=U.lazy(()=>ue(()=>import("./LoginAnalyticsDashboard.DbBuasm-.js"),__vite__mapDeps([94,2,3,4,1,5])).catch(i=>(ge.captureException(i,{tags:{component:"LoginAnalyticsDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Login Analytics Dashboard temporarily unavailable")}))),qM=U.lazy(()=>ue(()=>import("./TrustedDeviceManager.C825MYdc.js"),__vite__mapDeps([95,2,3,36,4,1,5])).catch(i=>(ge.captureException(i,{tags:{component:"TrustedDeviceManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Trusted Device Manager temporarily unavailable")}))),HM=U.lazy(()=>ue(()=>import("./WorkflowNotificationDemo.exj1b0d_.js"),__vite__mapDeps([96,2,3,9,1,36,4,5])).catch(i=>(ge.captureException(i,{tags:{component:"WorkflowNotificationDemo",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Workflow Demo temporarily unavailable")}))),FM=U.lazy(()=>ue(()=>import("./AdminUserManagement.CUSWzFwi.js"),__vite__mapDeps([97,2,3,12,1,25,40,21,44,4,5])).catch(i=>(ge.captureException(i,{tags:{component:"AdminUserManagement",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Admin User Management temporarily unavailable")}))),VM=({text:i="Loading..."})=>g.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200"}),g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent absolute top-0 left-0"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-lg text-gray-700 animate-pulse",children:i}),g.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Please wait..."})]})]}),GM=new SS({defaultOptions:{queries:{retry:3,staleTime:300*1e3,refetchOnWindowFocus:!1}}}),$M=({onLogin:i})=>{const[e,r]=U.useState({username:"",password:""}),[a,l]=U.useState(!1),c=async d=>{d.preventDefault(),l(!0);try{const m=await rw.login({username:e.username,password:e.password});m.success&&m.data?i(m.data.username,m.data.role):alert(m.error||"Login failed")}catch(m){console.error("Login error:",m),alert("Login failed. Please try again.")}finally{l(!1)}};return g.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:g.jsxs("div",{className:"max-w-md w-full space-y-8",children:[g.jsxs("div",{children:[g.jsx("div",{className:"flex justify-center",children:g.jsx("img",{src:"/logo.png",alt:"TSA",className:"h-16 w-auto"})}),g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"🏢 TSA Intelligence Hub"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"🚀 Advanced Smart Manufacturing Command Center"}),g.jsx("p",{className:"text-center text-xs text-gray-500",children:"AI-Powered Analytics • Real-Time Intelligence • Predictive Operations"})]}),g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[g.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),g.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-brand-500 focus:border-brand-500 focus:z-10 sm:text-sm",placeholder:"Username",value:e.username,onChange:d=>r({...e,username:d.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),g.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-brand-500 focus:border-brand-500 focus:z-10 sm:text-sm",placeholder:"Password",value:e.password,onChange:d=>r({...e,password:d.target.value})})]})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50",children:a?g.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign In"})}),g.jsx("div",{className:"text-center",children:g.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[g.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Login Credentials:"}),g.jsxs("div",{className:"space-y-1 text-left",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"Supervisor:"})," sup / sup"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"Admin:"})," admin / admin"]})]})]})})]})]})})},YM=({userRole:i="operator",onLogout:e})=>{const[r,a]=U.useState("dashboard"),l=d=>{switch(d){case"operator":return"op-maya-001";case"supervisor":return"sup-john-001";case"manager":return"mgr-admin-001";default:return"op-maya-001"}},c=()=>{const d=l(i);switch(r){case"dashboard":switch(i){case"operator":return g.jsx(Ah,{operatorId:d});case"supervisor":return g.jsx(Ch,{supervisorId:d});case"management":return g.jsx(Ch,{supervisorId:d});case"admin":return g.jsx(Ch,{supervisorId:d});default:return g.jsx(Ah,{operatorId:d})}case"work-assignment":return i==="operator"?g.jsx(A1,{operatorId:d,operatorName:"Current Operator"}):g.jsx(uM,{});case"bundles":return g.jsx(dM,{mode:"view"});case"analytics":return g.jsx(fM,{});case"quality":return g.jsx(hM,{userRole:i});case"earnings":return g.jsx(mM,{userRole:i,operatorId:i==="operator"?d:void 0});case"operators":return g.jsx(gM,{userRole:i});case"self-assignment":return g.jsx(pM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current User",operatorSkills:{skillLevel:"intermediate",machineTypes:["sewing","overlock","cutting"],primaryMachine:"sewing",specializations:["precision-work","quality-control"]},maxConcurrentWork:3});case"timer":return g.jsxs("div",{className:"p-8",children:[g.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Production Timer"}),g.jsx(yM,{workItemId:"sample-work-item-001",operatorId:d,workItem:{id:"sample-work-item-001",bundleId:"bundle-001",workItemNumber:"WI-001",machineType:"sewing",operation:"Sample Production Task",operationCode:"OP-001",skillLevelRequired:"intermediate",targetPieces:50,completedPieces:0,rejectedPieces:0,reworkPieces:0,assignedOperatorId:d,assignmentMethod:"supervisor_assigned",estimatedDuration:120,status:"assigned"}})]});case"complete-wip-entry":return g.jsx(oM,{onComplete:async m=>{console.log("WIP Entry completed:",m);try{const{bundleService:y}=await ue(async()=>{const{bundleService:_}=await import("./bundle-service.NsTvV1td.js");return{bundleService:_}},__vite__mapDeps([35,1,2,3,4,5])),f={wipEntryId:`wip_${Date.now()}`,batchNumber:m.bundleNumber,articles:m.articles.map(_=>({articleId:_.id,articleNumber:_.articleNumber,articleStyle:_.style,templateId:_.selectedTemplateId,sizes:_.sizes.map(v=>({size:v.size,quantity:v.quantity}))})),fabricRolls:m.fabricRolls.map(_=>({rollId:_.id,rollNumber:_.rollNumber,color:_.color,weight:_.weight,layerCount:_.layerCount})),bundlePrefix:"BND",createdBy:i==="operator"?"Maya Patel":i==="supervisor"?"John Smith":"Admin User"},h=await y.generateBundles(f);if(h.success&&h.data){const _=h.data,v=m.articles.reduce((S,C)=>S+(C.sizes?.reduce((j,L)=>j+L.quantity,0)||0),0),b=_.reduce((S,C)=>S+C.totalValue,0),w=_.reduce((S,C)=>S+C.operations.length,0);alert(`✅ Production Bundles Created Successfully!
                  
🎯 Batch: ${m.bundleNumber}
📦 Bundles Generated: ${_.length}
📋 Articles: ${m.articles.length} 
🧵 Total Pieces: ${v}
⚡ Total Operations: ${w}
💰 Total Value: Rs. ${b.toFixed(2)}

Ready for supervisor assignment!`)}else alert(`❌ Failed to generate bundles: ${h.error}`)}catch(y){console.error("Bundle generation error:",y),alert("❌ Failed to generate production bundles. Please try again.")}a("dashboard")},onCancel:()=>a("dashboard")});case"live-dashboard":return g.jsx(N1,{displayMode:"desktop",autoRefresh:!0,refreshInterval:5e3,showAlerts:!0});case"tv-dashboard":return g.jsx(N1,{displayMode:"tv",autoRefresh:!0,refreshInterval:3e3,showAlerts:!0});case"barcode-scanner":return g.jsx(eM,{onScanSuccess:m=>{console.log("📱 Barcode scan result:",m),m.success&&m.data?alert(`Bundle Scanned!
Bundle: ${m.data.bundleNumber}
Lot: ${m.data.lotNumber}`):alert("Scan failed. Please try again.")},onClose:()=>a("dashboard"),allowManualEntry:!0,scanMode:"both",title:"Scan Bundle"});case"label-generator":return g.jsx(tM,{onLabelGenerated:m=>{console.log("🏷️ Label generated:",m)}});case"sewing-templates":return g.jsx(AM,{});case"workflow":return g.jsx(vM,{operations:[],onExecutePlan:m=>console.log("Executing plan:",m),onUpdateOperationStatus:(m,y)=>console.log("Operation status updated:",m,y)});case"cutting-droplet":return g.jsx(xM,{});case"production-lots":return g.jsx(wM,{mode:"create"});case"pricing-manager":return g.jsx(EM,{});case"enhanced-operator":return g.jsx(SM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator",machineTypes:["overlock","single_needle","flatlock"]});case"piece-tracker":return g.jsx(TM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator"});case"bundle-assignment":return g.jsx(NM,{});case"bundle-assignments":return g.jsx(CM,{userRole:i});case"my-work":return g.jsx(A1,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator"});case"self-assign":return g.jsx(OM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator",operatorMachineType:"overlock"});case"parts-issues":return g.jsx(RM,{});case"multi-assignment":return g.jsx(DM,{});case"bundle-analytics":return g.jsx(MM,{});case"drag-drop-assignment":return g.jsx(jM,{userRole:i});case"kanban-assignment":return g.jsx(kM,{userRole:i});case"operator-buckets":return g.jsx(IM,{userRole:i});case"smart-assignment":return g.jsx(LM,{userRole:i});case"operator-profile":return g.jsx(UM,{userRole:i});case"sequential-workflow":return g.jsx(BM,{userRole:i});case"wip-manager":return g.jsx(PM,{userRole:i});case"mobile-test":return g.jsx(bM,{});case"login-analytics":return g.jsx(zM,{});case"trusted-devices":return g.jsx(qM,{});case"user-management":return g.jsx(FM,{adminId:d});case"workflow-notifications":return g.jsx(HM,{});default:return g.jsx(Ah,{operatorId:d})}};return g.jsx(Hy,{onError:d=>{console.error("Error in MobileFriendlyLayout:",d)},children:g.jsx(_M,{currentUser:{name:i==="operator"?"Maya Patel":i==="supervisor"?"John Smith":"Admin User",role:i},currentView:r,onViewChange:a,onLogout:e,children:g.jsx(Hy,{children:c()})})})};function QM(){const[i,e]=U.useState(()=>localStorage.getItem("tsa_auth_token")==="authenticated"),[r,a]=U.useState(()=>localStorage.getItem("tsa_user_role")||"");U.useEffect(()=>{i&&r?(async()=>{await $v.initialize();const m=localStorage.getItem("tsa_auth_token"),y=localStorage.getItem("tsa_user_role"),f=localStorage.getItem("tsa_username");if(m==="authenticated"&&y&&f)try{try{const{AuthService:h}=await ue(async()=>{const{AuthService:v}=await Promise.resolve().then(()=>cM);return{AuthService:v}},void 0);if(!(await h.validateSession(f,y)).success){console.log("Session validation failed, logging out"),c();return}console.log("🛡️ Session validated successfully via Firebase")}catch(h){console.error("Firebase session validation error:",h),console.log("🛡️ Firebase validation failed, using localStorage fallback")}}catch(h){console.error("Session validation error:",h)}})():$v.initialize()},[i,r]),U.useEffect(()=>{const d=async m=>{if((m.ctrlKey||m.metaKey)&&m.shiftKey&&m.key==="R"){m.preventDefault();try{const{CacheManager:y}=await ue(async()=>{const{CacheManager:f}=await import("./cache-manager.CUz8vIoj.js");return{CacheManager:f}},[]);y.forceReload()}catch(y){console.error("Failed to load cache manager:",y),window.location.reload()}}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]);const l=(d,m)=>{a(m),e(!0),localStorage.setItem("tsa_auth_token","authenticated"),localStorage.setItem("tsa_user_role",m),localStorage.setItem("tsa_username",d)},c=()=>{e(!1),a(""),localStorage.removeItem("tsa_auth_token"),localStorage.removeItem("tsa_user_role"),localStorage.removeItem("tsa_username")};return g.jsx(TS,{client:GM,children:g.jsx(CS,{children:i?g.jsx(U.Suspense,{fallback:g.jsx(VM,{text:"Loading dashboard..."}),children:g.jsx(YM,{userRole:r,onLogout:c})}):g.jsx($M,{onLogin:l})})})}oT.createRoot(document.getElementById("root")).render(g.jsx(U.StrictMode,{children:g.jsx(QM,{})}));export{Kv as A,Je as B,At as C,nh as D,_a as E,kc as F,IR as G,Vx as H,gn as I,zx as J,sR as K,jc as L,vA as M,yA as N,Fv as O,Gv as P,cM as Q,yn as R,ue as _,Ct as a,Hx as b,qx as c,Fx as d,e3 as e,Ur as f,_t as g,Ve as h,Qv as i,DR as j,St as k,en as l,jR as m,VR as n,Pr as o,AR as p,BR as q,Zt as r,Jt as s,xA as t,pn as u,lM as v,Yh as w,uA as x,cA as y,Jc as z};
