import{j as e}from"./query-vendor.NFs8Lf8Y.js";import{r as i}from"./react-vendor.BcnQP8kQ.js";import{c as b,B as n,b as h,n as v}from"./index.B__xpDQO.js";import{L as w}from"./LoadingSpinner.BqqE1w83.js";import{F as I}from"./UserIcon.x-aGQUUd.js";import{F as f}from"./ClockIcon.DbOxfhcH.js";import{F as S}from"./StarIcon.B5IJFdRf.js";import{F as C}from"./ArrowRightIcon.xKte5yv4.js";import"./ui-vendor.BnTQXQPs.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.m6WcKfT_.js";const k=[{id:"BND-3233-M-001-OP-1",bundleId:"bundle_1",operationId:"op_1",name:"Shoulder Join",nameNepali:"काँध जोड्ने",description:"Join front and back shoulders",machineType:"overlock",sequenceOrder:1,pricePerPiece:2.5,smvMinutes:4.5,status:"pending",prerequisites:[],isOptional:!1,qualityCheckRequired:!0,defectTolerance:5,bundleInfo:{id:"bundle_1",bundleNumber:"BND-3233-M-001",articleId:"art_1",articleNumber:"3233",articleStyle:"Adult T-shirt",size:"M",rollId:"roll_1",rollNumber:"Roll1",rollColor:"Blue",templateId:"template_1",templateName:"3233 Template",templateCode:"3233",status:"created",priority:"normal",operations:[],createdAt:new Date,createdBy:"System",totalValue:9.5,totalSMV:16.5}},{id:"BND-3265-S-002-OP-2",bundleId:"bundle_2",operationId:"op_2",name:"Side Seam",nameNepali:"छेउ सिलाई",description:"Sew side seams",machineType:"overlock",sequenceOrder:2,pricePerPiece:3,smvMinutes:5,status:"pending",prerequisites:[],isOptional:!1,qualityCheckRequired:!0,defectTolerance:5,bundleInfo:{id:"bundle_2",bundleNumber:"BND-3265-S-002",articleId:"art_2",articleNumber:"3265",articleStyle:"Ladies Blouse",size:"S",rollId:"roll_2",rollNumber:"Roll2",rollColor:"Red",templateId:"template_2",templateName:"3265 Template",templateCode:"3265",status:"created",priority:"high",operations:[],createdAt:new Date,createdBy:"System",totalValue:12.5,totalSMV:18}},{id:"BND-3233-L-003-OP-4",bundleId:"bundle_3",operationId:"op_4",name:"Hem Finish",nameNepali:"तल्लो भाग सिलाई",description:"Finish bottom hem",machineType:"singleNeedle",sequenceOrder:4,pricePerPiece:1.5,smvMinutes:3,status:"pending",prerequisites:[],isOptional:!1,qualityCheckRequired:!1,defectTolerance:8,bundleInfo:{id:"bundle_3",bundleNumber:"BND-3233-L-003",articleId:"art_1",articleNumber:"3233",articleStyle:"Adult T-shirt",size:"L",rollId:"roll_1",rollNumber:"Roll1",rollColor:"Blue",templateId:"template_1",templateName:"3233 Template",templateCode:"3233",status:"created",priority:"normal",operations:[],createdAt:new Date,createdBy:"System",totalValue:9.5,totalSMV:16.5}}],L=({operatorId:P,operatorName:p,operatorMachineType:a})=>{const[r,m]=i.useState([]),[d,x]=i.useState(!1),[l,c]=i.useState(null),[N,o]=i.useState(!1);i.useEffect(()=>{const s=k.filter(t=>t.machineType===a&&t.status==="pending");m(s)},[a]);const j=async s=>{x(!0);try{await new Promise(t=>setTimeout(t,1500)),m(t=>t.filter(y=>y.id!==s.id)),o(!1),c(null),alert(`✅ You have successfully picked up ${s.name} for ${s.bundleInfo.bundleNumber}. The job is now assigned to you!`)}catch(t){console.error("Self assignment failed:",t),alert("❌ Failed to assign job. Please try again.")}finally{x(!1)}},g=s=>{switch(s){case"urgent":return"bg-red-500 text-white animate-pulse";case"high":return"bg-orange-500 text-white";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},u=s=>{switch(s){case"overlock":return"⚡";case"singleNeedle":return"🪡";case"doubleNeedle":return"🪡🪡";default:return"🔧"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(I,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Pick Your Next Job"}),e.jsxs("p",{className:"text-blue-100",children:["Welcome ",p,"! Choose available work for your ",a," machine"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-blue-500 bg-opacity-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold",children:r.length}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Available Jobs"})]}),e.jsxs("div",{className:"bg-blue-500 bg-opacity-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold",children:a}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Your Machine"})]}),e.jsxs("div",{className:"bg-blue-500 bg-opacity-50 rounded-lg p-3",children:[e.jsxs("div",{className:"text-xl font-bold",children:["Rs. ",r.reduce((s,t)=>s+t.pricePerPiece,0).toFixed(1)]}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Total Earnings"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(f,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{children:"Available Jobs for You"})]}),r.length===0?e.jsxs(b,{className:"p-8 text-center",children:[e.jsx(f,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No jobs available right now"}),e.jsxs("p",{className:"text-gray-500 mb-4",children:["Check back in a few minutes for new ",a," jobs."]}),e.jsx(n,{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700",children:"Refresh Jobs"})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(s=>e.jsxs(b,{className:"p-6 hover:shadow-lg transition-shadow border-2 hover:border-blue-200",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl mb-2",children:u(s.machineType)}),e.jsx(h,{variant:"secondary",className:"font-mono text-xs mb-2",children:s.bundleInfo.bundleNumber}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["(",s.nameNepali,")"]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Article:"}),e.jsxs("span",{className:"font-medium",children:[s.bundleInfo.articleNumber," (",s.bundleInfo.size,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"You will earn:"}),e.jsxs("span",{className:"font-bold text-green-600 text-lg",children:["Rs. ",s.pricePerPiece]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Time needed:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[s.smvMinutes," min"]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(h,{className:g(s.bundleInfo.priority),children:[s.bundleInfo.priority.toUpperCase()," PRIORITY"]})}),s.qualityCheckRequired&&e.jsxs("div",{className:"flex items-center justify-center text-xs text-yellow-700 bg-yellow-50 p-2 rounded",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Quality check required"]})]}),e.jsx(n,{onClick:()=>{c(s),o(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3",disabled:d,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{children:"Pick This Job"}),e.jsx(C,{className:"h-5 w-5"})]})})]},s.id))})]}),N&&l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),e.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-3",children:u(l.machineType)}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Confirm Job Assignment"}),e.jsx("p",{className:"text-gray-600",children:"Are you ready to start this job?"})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Job:"}),e.jsx("span",{children:l.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Bundle:"}),e.jsx("span",{className:"font-mono",children:l.bundleInfo.bundleNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Article:"}),e.jsxs("span",{children:[l.bundleInfo.articleNumber," (",l.bundleInfo.size,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Earnings:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["Rs. ",l.pricePerPiece]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Target Time:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[l.smvMinutes," minutes"]})]})]})}),l.description&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Instructions:"})," ",l.description]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(n,{variant:"outline",onClick:()=>{o(!1),c(null)},className:"flex-1",children:"Cancel"}),e.jsx(n,{onClick:()=>j(l),disabled:d,className:"flex-1 bg-green-600 hover:bg-green-700",children:d?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{size:"sm"}),e.jsx("span",{children:"Assigning..."})]}):"Yes, Assign to Me!"})]})]})]})})]})};export{L as OperatorSelfAssignment,L as default};
