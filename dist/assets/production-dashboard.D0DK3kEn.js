import{j as e}from"./query-vendor.NFs8Lf8Y.js";import{r as o}from"./react-vendor.BcnQP8kQ.js";import{c as r,t as i,B as P,v as l,w as c,x as y}from"./index.B__xpDQO.js";import{S as $}from"./select.D3GNnznR.js";import{t as h}from"./index.wyP5CHuk.js";import{j as F,f as I,D as K,P as U,k as R,g as G,C as u,T as g,U as N,l as Y}from"./ui-vendor.BnTQXQPs.js";import{R as S,L as _,C as H,X,Y as V,T as B,a as v,P as z,b as J,c as Z}from"./chart-vendor.KZhkbPib.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.m6WcKfT_.js";const x={getProductionMetrics:async n=>({success:!0,data:{totalProduction:0,efficiency:0,qualityRate:0,onTimeDelivery:0}}),getProductionTrends:async n=>({success:!0,data:{trend:"upward",data:Array.from({length:30},(s,f)=>({date:new Date(Date.now()-(29-f)*24*60*60*1e3).toISOString().split("T")[0],production:Math.floor(Math.random()*100)+50,efficiency:Math.floor(Math.random()*30)+70,quality:Math.floor(Math.random()*20)+80}))}}),getOperatorPerformance:async n=>({success:!0,data:[]}),getWorkTypeAnalysis:async n=>({success:!0,data:[{type:"Cutting",count:25,efficiency:85,avgTime:120},{type:"Sewing",count:40,efficiency:78,avgTime:180},{type:"Finishing",count:30,efficiency:92,avgTime:90},{type:"Quality Check",count:15,efficiency:95,avgTime:60}]}),getBundleAnalytics:async n=>({success:!0,data:{completionRate:0,efficiency:0,timeSpent:0}}),getQualityMetrics:async()=>({success:!0,data:{defectRate:0,reworkRate:0,qualityScore:0}}),generateReport:async(n,s)=>({success:!0,data:{reportId:"report-123",type:n,generatedAt:new Date,downloadUrl:"/api/reports/report-123.pdf"}})},j=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],ee={"A+":{score:95,color:"#10B981"},A:{score:85,color:"#3B82F6"},B:{score:75,color:"#F59E0B"},C:{score:65,color:"#EF4444"},D:{score:50,color:"#DC2626"}},oe=({timeRange:n="month"})=>{const[s,f]=o.useState(null),[b,E]=o.useState([]),[p,O]=o.useState([]),[m,M]=o.useState([]),[W,w]=o.useState(!0),[d,q]=o.useState(n),[k,A]=o.useState(!1);o.useEffect(()=>{C()},[d]);const C=async()=>{try{w(!0);const[t,a,T,D]=await Promise.all([x.getProductionMetrics(d),x.getProductionTrends(d),x.getOperatorPerformance(d),x.getWorkTypeAnalysis(d)]);f(t),E(a),O(Array.isArray(T)?T:[]),M(Array.isArray(D)?D:[])}catch(t){console.error("Error loading dashboard data:",t),h.error("Failed to load dashboard data")}finally{w(!1)}},Q=async()=>{A(!0),await C(),A(!1),h.success("Dashboard data refreshed")},L=async()=>{try{await x.exportProductionReport(d),h.success("Report exported successfully")}catch{h.error("Failed to export report")}};return W?e.jsx("div",{className:"space-y-6",children:[...Array(4)].map((t,a)=>e.jsx(r,{children:e.jsx(i,{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})},a))}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Production Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive production analytics and performance metrics"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($,{value:d,onValueChange:q,className:"w-40",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs(P,{variant:"outline",onClick:Q,disabled:k,children:[e.jsx(I,{className:`h-4 w-4 mr-2 ${k?"animate-spin":""}`}),"Refresh"]}),e.jsxs(P,{onClick:L,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Production"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.totalProduction?.toLocaleString()||"0"}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(R,{className:"h-3 w-3 mr-1 text-green-500"}),s?.dailyAverage?.toFixed(0)||"0"," pieces/day avg"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Efficiency"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s?.efficiency?.toFixed(1)||"0","%"]}),e.jsxs("div",{className:`flex items-center text-xs ${(s?.efficiency??0)>=80?"text-green-600":(s?.efficiency??0)>=60?"text-yellow-600":"text-red-600"}`,children:[(s?.efficiency??0)>=80?e.jsx(u,{className:"h-3 w-3 mr-1"}):e.jsx(g,{className:"h-3 w-3 mr-1"}),"Target: 80%"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Quality Score"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s?.qualityScore?.toFixed(1)||"0","%"]}),e.jsxs("div",{className:`flex items-center text-xs ${(s?.qualityScore??0)>=90?"text-green-600":(s?.qualityScore??0)>=80?"text-yellow-600":"text-red-600"}`,children:["Damage Rate: ",s?.damageRate?.toFixed(1)||"0","%"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Active Operators"}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.activeOperators||"0"}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s?.completedBundles||"0"," bundles completed"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"On-Time Delivery"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s?.onTimeDelivery?.toFixed(1)||"0","%"]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s?.pendingWork||"0"," pending"]})]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{children:"Production Trends"})]}),e.jsx(y,{children:"Daily production, quality, and efficiency trends"})]}),e.jsx(i,{children:e.jsx("div",{className:"h-80 w-full",children:e.jsx(S,{width:"100%",height:"100%",children:e.jsxs(_,{data:Array.isArray(b)?b:[],children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(X,{dataKey:"date"}),e.jsx(V,{}),e.jsx(B,{}),e.jsx(v,{type:"monotone",dataKey:"production",stroke:"#3B82F6",strokeWidth:2,name:"Production"}),e.jsx(v,{type:"monotone",dataKey:"quality",stroke:"#10B981",strokeWidth:2,name:"Quality %"}),e.jsx(v,{type:"monotone",dataKey:"efficiency",stroke:"#F59E0B",strokeWidth:2,name:"Efficiency %"})]})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{children:"Top Performers"})]}),e.jsxs(y,{children:["Highest performing operators this ",d]})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:Array.isArray(p)&&p.length>0?p.slice(0,5).map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${a===0?"bg-yellow-500":a===1?"bg-gray-400":a===2?"bg-amber-600":"bg-blue-500"}`,children:t.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.totalPieces," pieces | ",t.qualityScore.toFixed(1),"% quality"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[t.efficiency.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["₹",t.earnings.toFixed(0)]})]})]},t.operatorId)):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No operator performance data available"})]})})})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Work Type Analysis"})]}),e.jsx(y,{children:"Production breakdown by work type"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"h-64 w-full mb-4",children:e.jsx(S,{width:"100%",height:"100%",children:e.jsxs(z,{children:[e.jsx(J,{data:Array.isArray(m)?m:[],cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"count",children:(m||[]).map((t,a)=>e.jsx(Z,{fill:j[a%j.length]},`cell-${a}`))}),e.jsx(B,{})]})})}),e.jsx("div",{className:"space-y-2",children:(m||[]).map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:j[a%j.length]}}),e.jsx("span",{children:t.workType})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-muted-foreground",children:[e.jsxs("span",{children:[t.count," pieces"]}),e.jsxs("span",{children:[t.qualityScore.toFixed(1),"%"]}),e.jsxs("span",{children:["₹",t.earnings.toFixed(0)]})]})]},t.workType))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(c,{className:"text-lg",children:"Quality Metrics"})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Quality Score"}),e.jsxs("span",{className:"font-semibold",children:[s?.qualityScore?.toFixed(1)||"0","%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Damage Rate"}),e.jsxs("span",{className:`font-semibold ${(s?.damageRate??0)<=2?"text-green-600":(s?.damageRate??0)<=5?"text-yellow-600":"text-red-600"}`,children:[s?.damageRate?.toFixed(1)||"0","%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Rework Percentage"}),e.jsxs("span",{className:`font-semibold ${(s?.reworkPercentage??0)<=3?"text-green-600":(s?.reworkPercentage??0)<=7?"text-yellow-600":"text-red-600"}`,children:[s?.reworkPercentage?.toFixed(1)||"0","%"]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Quality Grade Distribution"}),e.jsx("div",{className:"space-y-1",children:Object.entries(ee).map(([t,a])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.color}}),e.jsxs("span",{children:["Grade ",t]})]}),e.jsx("span",{children:"25%"})]},t))})]})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(c,{className:"text-lg",children:"Performance Metrics"})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Efficiency"}),e.jsxs("span",{className:"font-semibold",children:[s?.efficiency?.toFixed(1)||"0","%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"On-Time Delivery"}),e.jsxs("span",{className:"font-semibold",children:[s?.onTimeDelivery?.toFixed(1)||"0","%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Daily Output"}),e.jsxs("span",{className:"font-semibold",children:[s?.dailyAverage?.toFixed(0)||"0"," pieces"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completed Bundles"}),e.jsx("span",{className:"font-semibold",children:s?.completedBundles||"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending Work"}),e.jsx("span",{className:`font-semibold ${(s?.pendingWork??0)<=10?"text-green-600":(s?.pendingWork??0)<=25?"text-yellow-600":"text-red-600"}`,children:s?.pendingWork||"0"})]})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(c,{className:"text-lg",children:"Alerts & Insights"})}),e.jsxs(i,{className:"space-y-3",children:[(s?.efficiency??0)<70&&e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-red-50 rounded-lg",children:[e.jsx(g,{className:"h-4 w-4 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Low Efficiency Alert"}),e.jsx("p",{className:"text-xs text-red-600",children:"Current efficiency is below target (70%)"})]})]}),(s?.damageRate??0)>5&&e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-yellow-50 rounded-lg",children:[e.jsx(g,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Quality Concern"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Damage rate is above acceptable threshold"})]})]}),(s?.onTimeDelivery??0)>=95&&e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-green-50 rounded-lg",children:[e.jsx(u,{className:"h-4 w-4 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Excellent Delivery"}),e.jsx("p",{className:"text-xs text-green-600",children:"On-time delivery rate exceeds target"})]})]}),(s?.pendingWork??0)<=5&&e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(u,{className:"h-4 w-4 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Low Backlog"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Minimal pending work items"})]})]})]})]})]})]}):e.jsx(r,{children:e.jsxs(i,{className:"text-center py-8",children:[e.jsx(F,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-muted-foreground",children:"Production data is not available for the selected period."})]})})};export{oe as ProductionDashboard,oe as default};
