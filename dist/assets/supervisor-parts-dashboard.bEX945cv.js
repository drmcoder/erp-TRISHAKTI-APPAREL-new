import{j as e}from"./query-vendor.DpsghfSz.js";import{r as x}from"./react-vendor.CfKEcsXX.js";import{C as c,i as P,F as C,a as o,B as p}from"./index.CLAiwwTT.js";import{L as u}from"./LoadingSpinner.1kukr6Vo.js";import{F as h}from"./WrenchIcon.W7PykwaY.js";import{F as B}from"./BellIcon.V4BrsRiS.js";import{F as A}from"./ClockIcon.B0z2Gpg3.js";import"./ui-vendor.EZF4ucWh.js";import"./firebase-vendor.D8xw0AXf.js";import"./utils-vendor.B0NEtgzl.js";const S=[{id:"complaint_1",bundleId:"bundle_1",operationId:"BND-3233-M-001-OP-2",bundleNumber:"BND-3233-M-001",reportedBy:"op_maya_001",reportedByName:"Maya Patel",reportedAt:new Date("2024-01-15T10:30:00"),issueType:"damaged",damagedParts:["Front Panel","Left Sleeve"],description:"Found tear in front panel and left sleeve has loose stitching that came apart during handling.",status:"reported",priority:"normal",replacedParts:[],resolution:"parts_replaced"},{id:"complaint_2",bundleId:"bundle_2",operationId:"BND-3265-L-001-OP-1",bundleNumber:"BND-3265-L-001",reportedBy:"op_rajesh_002",reportedByName:"Rajesh Kumar",reportedAt:new Date("2024-01-15T11:15:00"),issueType:"missing",damagedParts:["Right Sleeve","Collar"],description:"Right sleeve and collar pieces are missing from the bundle.",status:"acknowledged",priority:"high",acknowledgedBy:"supervisor_1",acknowledgedByName:"Ram Sharma",acknowledgedAt:new Date("2024-01-15T11:20:00"),estimatedReplacementTime:30,replacedParts:[],resolution:"parts_replaced"},{id:"complaint_3",bundleId:"bundle_3",operationId:"BND-3233-L-002-OP-3",bundleNumber:"BND-3233-L-002",reportedBy:"op_priya_003",reportedByName:"Priya Singh",reportedAt:new Date("2024-01-15T09:45:00"),issueType:"wrong_color",damagedParts:["Back Panel"],description:"Back panel is wrong color - received blue instead of red.",status:"replacing",priority:"urgent",acknowledgedBy:"supervisor_1",acknowledgedByName:"Ram Sharma",acknowledgedAt:new Date("2024-01-15T10:00:00"),replacementStartedAt:new Date("2024-01-15T10:15:00"),estimatedReplacementTime:20,replacedParts:[],resolution:"parts_replaced"}],U=()=>{const[a,N]=x.useState(S),[l,j]=x.useState(!1),[_,b]=x.useState(""),[T,y]=x.useState(null),m=async(s,i,d)=>{j(!0);try{await new Promise(r=>setTimeout(r,1e3)),N(r=>r.map(t=>{if(t.id!==s.id)return t;const n=new Date;switch(i){case"acknowledge":return{...t,status:"acknowledged",acknowledgedBy:"supervisor_1",acknowledgedByName:"Ram Sharma",acknowledgedAt:n,estimatedReplacementTime:30,supervisorNotes:d||""};case"start_replacement":return{...t,status:"replacing",replacementStartedAt:n,supervisorNotes:d||t.supervisorNotes};case"complete_replacement":return{...t,status:"resolved",replacementCompletedAt:n,resolvedAt:n,replacedParts:t.damagedParts,operatorNotified:!0,operatorNotifiedAt:n,replacementNotes:d||""};case"reject":return{...t,status:"rejected",resolvedAt:n,supervisorNotes:d||""};default:return t}})),i==="complete_replacement"&&alert(`Parts replacement completed for ${s.bundleNumber}! Operator ${s.reportedByName} has been notified and can continue work.`),b(""),y(null)}catch(r){console.error("Complaint action failed:",r),alert("Action failed. Please try again.")}finally{j(!1)}},v=s=>{switch(s){case"reported":return"bg-red-100 text-red-800";case"acknowledged":return"bg-yellow-100 text-yellow-800";case"replacing":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"rejected":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},f=s=>{switch(s){case"urgent":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},g=a.filter(s=>s.status==="reported"||s.status==="acknowledged"||s.status==="replacing").length,w=a.filter(s=>s.status==="reported").length,R=a.filter(s=>s.status==="replacing").length,k=a.filter(s=>s.status==="resolved").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[e.jsx(h,{className:"h-8 w-8 text-red-600"}),e.jsx("span",{children:"Parts Replacement Center"})]}),e.jsx("p",{className:"text-gray-600",children:"Manage operator parts complaints and replacement requests"})]}),g>0&&e.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 px-4 py-2 rounded-lg",children:[e.jsx(B,{className:"h-5 w-5 text-red-600"}),e.jsxs("span",{className:"text-red-800 font-medium",children:[g," pending request",g!==1?"s":""]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(P,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"New Reports"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:w})]})]})}),e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(A,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:R})]})]})}),e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Resolved"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:k})]})]})}),e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(h,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:a.length})]})]})})]}),e.jsxs(c,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Parts Replacement Requests"})}),a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No parts complaints"}),e.jsx("p",{className:"text-gray-500",children:"All operations are running smoothly without parts issues."})]}):e.jsx("div",{className:"space-y-4",children:a.sort((s,i)=>{const d={reported:0,acknowledged:1,replacing:2,resolved:3,rejected:4},r=d[s.status]-d[i.status];return r!==0?r:new Date(i.reportedAt).getTime()-new Date(s.reportedAt).getTime()}).map(s=>e.jsx("div",{className:`border rounded-lg p-4 ${s.status==="reported"?"border-red-300 bg-red-50":s.status==="acknowledged"||s.status==="replacing"?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(o,{variant:"secondary",className:"font-mono text-xs",children:s.bundleNumber}),e.jsx(o,{className:v(s.status),children:s.status.replace("_"," ").toUpperCase()}),e.jsxs(o,{className:f(s.priority),children:[s.priority.toUpperCase()," PRIORITY"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Reported by:"}),e.jsx("span",{className:"font-medium ml-2",children:s.reportedByName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Reported at:"}),e.jsx("span",{className:"font-medium ml-2",children:s.reportedAt.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Issue Type:"}),e.jsx("span",{className:"font-medium ml-2 capitalize",children:s.issueType.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Affected Parts:"}),e.jsx("span",{className:"font-medium ml-2",children:s.damagedParts.join(", ")})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Operator Description:"}),e.jsx("p",{className:"text-gray-900 mt-1 bg-white p-3 rounded border",children:s.description})]}),e.jsxs("div",{className:"space-y-2",children:[s.acknowledgedBy&&e.jsx("div",{className:"bg-yellow-50 p-3 rounded border-l-4 border-yellow-400",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("strong",{className:"text-yellow-800",children:["Acknowledged by ",s.acknowledgedByName]}),e.jsx("span",{className:"text-yellow-600 text-xs",children:s.acknowledgedAt?.toLocaleString()})]}),s.estimatedReplacementTime&&e.jsxs("div",{className:"text-yellow-700",children:["Estimated time: ",s.estimatedReplacementTime," minutes"]}),s.supervisorNotes&&e.jsxs("div",{className:"text-yellow-700 mt-1",children:[e.jsx("strong",{children:"Notes:"})," ",s.supervisorNotes]})]})}),s.replacementStartedAt&&e.jsx("div",{className:"bg-blue-50 p-3 rounded border-l-4 border-blue-400",children:e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("strong",{className:"text-blue-800",children:"Replacement in progress"}),e.jsx("span",{className:"text-blue-600 text-xs",children:s.replacementStartedAt.toLocaleString()})]})})}),s.status==="resolved"&&e.jsx("div",{className:"bg-green-50 p-3 rounded border-l-4 border-green-400",children:e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("strong",{children:"✅ Resolved - Parts Replaced"}),e.jsx("span",{className:"text-green-600 text-xs",children:s.resolvedAt?.toLocaleString()})]}),e.jsxs("div",{children:["Replaced parts: ",s.replacedParts.join(", ")]}),s.operatorNotified&&e.jsx("div",{children:"✅ Operator notified and can continue work"}),s.replacementNotes&&e.jsxs("div",{className:"mt-1",children:[e.jsx("strong",{children:"Notes:"})," ",s.replacementNotes]})]})}),s.status==="rejected"&&e.jsx("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-gray-400",children:e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("strong",{children:"❌ Request Rejected"}),e.jsx("span",{className:"text-gray-600 text-xs",children:s.resolvedAt?.toLocaleString()})]}),s.supervisorNotes&&e.jsxs("div",{children:["Reason: ",s.supervisorNotes]})]})})]})]}),e.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[s.status==="reported"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:()=>m(s,"acknowledge","Complaint acknowledged, will start replacement soon."),disabled:l,className:"bg-yellow-600 hover:bg-yellow-700",size:"sm",children:l?e.jsx(u,{size:"sm"}):"Acknowledge"}),e.jsx(p,{onClick:()=>m(s,"reject","Parts appear to be in acceptable condition."),disabled:l,variant:"outline",className:"text-red-600 border-red-300",size:"sm",children:"Reject"})]}),s.status==="acknowledged"&&e.jsx(p,{onClick:()=>m(s,"start_replacement","Started parts replacement process."),disabled:l,className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:l?e.jsx(u,{size:"sm"}):"Start Replacement"}),s.status==="replacing"&&e.jsx(p,{onClick:()=>m(s,"complete_replacement","Parts successfully replaced and quality checked."),disabled:l,className:"bg-green-600 hover:bg-green-700",size:"sm",children:l?e.jsx(u,{size:"sm"}):"Complete & Notify"}),s.status==="resolved"&&e.jsx(o,{className:"bg-green-100 text-green-800 text-center py-2",children:"✅ Completed"}),s.status==="rejected"&&e.jsx(o,{className:"bg-gray-100 text-gray-800 text-center py-2",children:"❌ Rejected"})]})]})},s.id))})]})]})};export{U as SupervisorPartsDashboard,U as default};
