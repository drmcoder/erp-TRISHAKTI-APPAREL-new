const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OperatorDashboard.Cg8Vfvit.js","assets/query-vendor.NFs8Lf8Y.js","assets/react-vendor.BcnQP8kQ.js","assets/index.nxVTfIuo.js","assets/firebase-vendor.m6WcKfT_.js","assets/operator-service.ea3XhWLu.js","assets/notification-service.CokO_XAL.js","assets/damage-report-service.CoCQ_gjd.js","assets/operator-wallet-service.BuDOx5T4.js","assets/LoadingSpinner.BqqE1w83.js","assets/ui-vendor.BnTQXQPs.js","assets/utils-vendor.B0NEtgzl.js","assets/SupervisorDashboard.CYxmuq1y.js","assets/assignment-dashboard.vYtIvnyU.js","assets/empty-state.1yXaqAKP.js","assets/ClockIcon.DbOxfhcH.js","assets/ChartBarIcon.BgzBpEol.js","assets/CalendarDaysIcon.BY1uKJse.js","assets/UserIcon.x-aGQUUd.js","assets/CpuChipIcon.DcT1uL6Q.js","assets/CurrencyRupeeIcon.CCku5vMm.js","assets/use-work-assignments.CN9QAhpq.js","assets/MagnifyingGlassIcon.BaFANGzr.js","assets/FunnelIcon.CqG3JKEJ.js","assets/bundle-lifecycle-manager.DLEi5-in.js","assets/label.Rpc_NHFh.js","assets/select.D3GNnznR.js","assets/separator.-Mk0nmhb.js","assets/popover.CIIVQvs5.js","assets/utils.k9sMftog.js","assets/index.BRFdYXwD.js","assets/bundle-service.DSxx9GIb.js","assets/index.wyP5CHuk.js","assets/production-dashboard.D0DK3kEn.js","assets/chart-vendor.KZhkbPib.js","assets/quality-management-dashboard.CzB2WT-B.js","assets/ShieldCheckIcon.DJ7tua4m.js","assets/earnings-dashboard.BSQ7D08E.js","assets/progress.DARxhUSM.js","assets/operator-management-dashboard.CGwVMvdu.js","assets/ArrowLeftIcon.BArH4jor.js","assets/StarIcon.B5IJFdRf.js","assets/form-vendor.Dt550VaX.js","assets/id-generation-service.zIwPYme0.js","assets/self-assignment-interface.DkWT4zJn.js","assets/production-timer.BawAFDLo.js","assets/workflow-sequencer.Bxz9p7T5.js","assets/PlayIcon.qCwfGLYk.js","assets/ArrowRightIcon.xKte5yv4.js","assets/mobile-friendly-layout.B48WWk3G.js","assets/BellIcon.C2iV9wIt.js","assets/AdjustmentsHorizontalIcon.BKTz13Ss.js","assets/WrenchIcon.B1gRXDBP.js","assets/DocumentChartBarIcon.DqzMHEQm.js","assets/TvIcon.HYtNgHRp.js","assets/HandRaisedIcon.iA2fgNMv.js","assets/mobile-test.CNs3Mmo2.js","assets/live-production-dashboard.D47sVL8p.js","assets/ArrowTrendingUpIcon.ZpLjQdky.js","assets/CuttingDropletManager.DcREifjs.js","assets/ProductionLotManager.DwmhSNXB.js","assets/production-lot-service.DtTp8_sT.js","assets/ProcessPricingManager.BNwM040y.js","assets/tabs.DkKuHoGY.js","assets/EnhancedOperatorDashboard.CRgf3Sq7.js","assets/enhanced-production-service.C9lU_1TR.js","assets/OperatorPieceTracker.BYO0MSv1.js","assets/BundleAssignmentManager.D1MngPiV.js","assets/sewing-template-manager.9SDFBS4y.js","assets/bundle-assignment-dashboard.vKQFdexs.js","assets/CurrencyDollarIcon.CyMFdc0e.js","assets/operator-work-dashboard.4IlNhYv2.js","assets/TrophyIcon.DZWf-I5C.js","assets/PauseIcon.DYeQ1VMN.js","assets/operator-self-assignment.BnksYfd8.js","assets/supervisor-parts-dashboard.B-DV87e0.js","assets/multi-strategy-assignment-dashboard.prfmduKP.js","assets/CalendarIcon.DeQZHRtH.js","assets/bundle-batch-tracking-dashboard.PsLGMLTO.js","assets/LightBulbIcon.BL5cAUDl.js","assets/drag-drop-assignment-dashboard.B1mTxQf0.js","assets/supervisor-operator-buckets.CW3BTjw-.js","assets/smart-work-assignment-dashboard.D6F-lN6C.js","assets/HashtagIcon.CVSe8Cf6.js","assets/operator-profile-assignment.CEOOCHCu.js","assets/sequential-workflow-assignment.BtYp6GOj.js","assets/LoginAnalyticsDashboard.BebPHl6l.js","assets/TrustedDeviceManager.B62mF4rI.js","assets/WorkflowNotificationDemo.DJVMu_Jp.js"])))=>i.map(i=>d[i]);
import{j as v,Q as nS,a as rS}from"./query-vendor.NFs8Lf8Y.js";import{b as iS,d as aS,r as j,c as wn,g as dv,B as sS}from"./react-vendor.BcnQP8kQ.js";import{T as lS,R as oS,L as cS,X as fv,E as uS,a as dS}from"./ui-vendor.BnTQXQPs.js";import{t as fS,c as hS}from"./utils-vendor.B0NEtgzl.js";import{L as hv,a as K,_ as Cr,C as Ar,r as Sn,s as tt,j as Ih,c as fn,b as ai,m as _c,d as mS,S as gS,e as pS,f as tl,g as ma,h as mv,i as yS,D as En,q as _S,k as vS,l as bS,n as fh,o as gv,p as xS,t as Ot,u as ES,v as Lc,w as wS,x as SS,y as Uc,z as di,A as pv,B as yv,E as _v,F as jh,G as vv,H as bv,I as xv,J as Lh,K as Uh,M as Bh,N as _f,O as Ev,P as wv,Q as Sv,R as TS,T as v1,U as Tv,V as Nv,W as Cv,X as NS,Y as Yn,Z as ws,$ as CS,a0 as Bs,a1 as hh,a2 as AS,a3 as vn,a4 as vf,a5 as bf,a6 as b1,a7 as x1,a8 as RS,a9 as E1,aa as OS,ab as mh,ac as DS,ad as MS}from"./firebase-vendor.m6WcKfT_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var xf={exports:{}},Ss={},Ef={exports:{}},wf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function kS(){return w1||(w1=1,(function(r){function t(B,te){var ae=B.length;B.push(te);e:for(;0<ae;){var Te=ae-1>>>1,we=B[Te];if(0<o(we,te))B[Te]=te,B[ae]=we,ae=Te;else break e}}function i(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var te=B[0],ae=B.pop();if(ae!==te){B[0]=ae;e:for(var Te=0,we=B.length,Ve=we>>>1;Te<Ve;){var L=2*(Te+1)-1,A=B[L],P=L+1,le=B[P];if(0>o(A,ae))P<we&&0>o(le,A)?(B[Te]=le,B[P]=ae,Te=P):(B[Te]=A,B[L]=ae,Te=L);else if(P<we&&0>o(le,ae))B[Te]=le,B[P]=ae,Te=P;else break e}}return te}function o(B,te){var ae=B.sortIndex-te.sortIndex;return ae!==0?ae:B.id-te.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var p=[],d=[],h=1,_=null,y=3,b=!1,E=!1,S=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function $(B){for(var te=i(d);te!==null;){if(te.callback===null)s(d);else if(te.startTime<=B)s(d),te.sortIndex=te.expirationTime,t(p,te);else break;te=i(d)}}function re(B){if(S=!1,$(B),!E)if(i(p)!==null)E=!0,W||(W=!0,X());else{var te=i(d);te!==null&&he(re,te.startTime-B)}}var W=!1,ee=-1,J=5,F=-1;function V(){return C?!0:!(r.unstable_now()-F<J)}function Q(){if(C=!1,W){var B=r.unstable_now();F=B;var te=!0;try{e:{E=!1,S&&(S=!1,U(ee),ee=-1),b=!0;var ae=y;try{t:{for($(B),_=i(p);_!==null&&!(_.expirationTime>B&&V());){var Te=_.callback;if(typeof Te=="function"){_.callback=null,y=_.priorityLevel;var we=Te(_.expirationTime<=B);if(B=r.unstable_now(),typeof we=="function"){_.callback=we,$(B),te=!0;break t}_===i(p)&&s(p),$(B)}else s(p);_=i(p)}if(_!==null)te=!0;else{var Ve=i(d);Ve!==null&&he(re,Ve.startTime-B),te=!1}}break e}finally{_=null,y=ae,b=!1}te=void 0}}finally{te?X():W=!1}}}var X;if(typeof Y=="function")X=function(){Y(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,H=Z.port2;Z.port1.onmessage=Q,X=function(){H.postMessage(null)}}else X=function(){M(Q,0)};function he(B,te){ee=M(function(){B(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(B){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ae=y;y=te;try{return B()}finally{y=ae}},r.unstable_requestPaint=function(){C=!0},r.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=y;y=B;try{return te()}finally{y=ae}},r.unstable_scheduleCallback=function(B,te,ae){var Te=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Te+ae:Te):ae=Te,B){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ae+we,B={id:h++,callback:te,priorityLevel:B,startTime:ae,expirationTime:we,sortIndex:-1},ae>Te?(B.sortIndex=ae,t(d,B),i(p)===null&&B===i(d)&&(S?(U(ee),ee=-1):S=!0,he(re,ae-Te))):(B.sortIndex=we,t(p,B),E||b||(E=!0,W||(W=!0,X()))),B},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(B){var te=y;return function(){var ae=y;y=te;try{return B.apply(this,arguments)}finally{y=ae}}}})(wf)),wf}var S1;function IS(){return S1||(S1=1,Ef.exports=kS()),Ef.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function jS(){if(T1)return Ss;T1=1;var r=IS(),t=iS(),i=aS();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,l=n;;){var u=a.return;if(u===null)break;var m=u.alternate;if(m===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===a)return g(u),e;if(m===l)return g(u),n;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=u,l=m;else{for(var x=!1,w=u.child;w;){if(w===a){x=!0,a=u,l=m;break}if(w===l){x=!0,l=u,a=m;break}w=w.sibling}if(!x){for(w=m.child;w;){if(w===a){x=!0,a=m,l=u;break}if(w===l){x=!0,l=m,a=u;break}w=w.sibling}if(!x)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function d(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=d(e),n!==null)return n;e=e.sibling}return null}var h=Object.assign,_=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Symbol.for("react.client.reference");function H(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Z?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case re:return"Suspense";case W:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case Y:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case $:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:H(e.type)||"Memo";case J:n=e._payload,e=e._init;try{return H(e(n))}catch{}}return null}var he=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Te=[],we=-1;function Ve(e){return{current:e}}function L(e){0>we||(e.current=Te[we],Te[we]=null,we--)}function A(e,n){we++,Te[we]=e.current,e.current=n}var P=Ve(null),le=Ve(null),Ie=Ve(null),je=Ve(null);function nt(e,n){switch(A(Ie,n),A(le,e),A(P,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Qp(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Qp(n),e=Xp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(P),A(P,e)}function yt(){L(P),L(le),L(Ie)}function An(e){e.memoizedState!==null&&A(je,e);var n=P.current,a=Xp(n,e.type);n!==a&&(A(le,e),A(P,a))}function Be(e){le.current===e&&(L(P),L(le)),je.current===e&&(L(je),_s._currentValue=ae)}var kr=Object.prototype.hasOwnProperty,iu=r.unstable_scheduleCallback,au=r.unstable_cancelCallback,Ix=r.unstable_shouldYield,jx=r.unstable_requestPaint,hn=r.unstable_now,Lx=r.unstable_getCurrentPriorityLevel,C0=r.unstable_ImmediatePriority,A0=r.unstable_UserBlockingPriority,hl=r.unstable_NormalPriority,Ux=r.unstable_LowPriority,R0=r.unstable_IdlePriority,Bx=r.log,zx=r.unstable_setDisableYieldValue,Na=null,Dt=null;function Wn(e){if(typeof Bx=="function"&&zx(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Na,e)}catch{}}var Mt=Math.clz32?Math.clz32:Hx,Px=Math.log,qx=Math.LN2;function Hx(e){return e>>>=0,e===0?32:31-(Px(e)/qx|0)|0}var ml=256,gl=4194304;function Ir(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pl(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var u=0,m=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?u=Ir(l):(x&=w,x!==0?u=Ir(x):a||(a=w&~e,a!==0&&(u=Ir(a))))):(w=l&~m,w!==0?u=Ir(w):x!==0?u=Ir(x):a||(a=l&~e,a!==0&&(u=Ir(a)))),u===0?0:n!==0&&n!==u&&(n&m)===0&&(m=u&-u,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:u}function Ca(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Gx(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O0(){var e=ml;return ml<<=1,(ml&4194048)===0&&(ml=256),e}function D0(){var e=gl;return gl<<=1,(gl&62914560)===0&&(gl=4194304),e}function su(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Aa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Vx(e,n,a,l,u,m){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,T=e.expirationTimes,D=e.hiddenUpdates;for(a=x&~a;0<a;){var z=31-Mt(a),G=1<<z;w[z]=0,T[z]=-1;var k=D[z];if(k!==null)for(D[z]=null,z=0;z<k.length;z++){var I=k[z];I!==null&&(I.lane&=-536870913)}a&=~G}l!==0&&M0(e,l,0),m!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=m&~(x&~n))}function M0(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Mt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function k0(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-Mt(a),u=1<<l;u&n|e[l]&n&&(e[l]|=n),a&=~u}}function lu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ou(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function I0(){var e=te.p;return e!==0?e:(e=window.event,e===void 0?32:h1(e.type))}function Fx(e,n){var a=te.p;try{return te.p=e,n()}finally{te.p=a}}var Jn=Math.random().toString(36).slice(2),mt="__reactFiber$"+Jn,wt="__reactProps$"+Jn,yi="__reactContainer$"+Jn,cu="__reactEvents$"+Jn,Yx="__reactListeners$"+Jn,Qx="__reactHandles$"+Jn,j0="__reactResources$"+Jn,Ra="__reactMarker$"+Jn;function uu(e){delete e[mt],delete e[wt],delete e[cu],delete e[Yx],delete e[Qx]}function _i(e){var n=e[mt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[yi]||a[mt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Wp(e);e!==null;){if(a=e[mt])return a;e=Wp(e)}return n}e=a,a=e.parentNode}return null}function vi(e){if(e=e[mt]||e[yi]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Oa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function bi(e){var n=e[j0];return n||(n=e[j0]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function rt(e){e[Ra]=!0}var L0=new Set,U0={};function jr(e,n){xi(e,n),xi(e+"Capture",n)}function xi(e,n){for(U0[e]=n,e=0;e<n.length;e++)L0.add(n[e])}var Xx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),B0={},z0={};function $x(e){return kr.call(z0,e)?!0:kr.call(B0,e)?!1:Xx.test(e)?z0[e]=!0:(B0[e]=!0,!1)}function yl(e,n,a){if($x(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function _l(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Rn(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}var du,P0;function Ei(e){if(du===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);du=n&&n[1]||"",P0=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+du+e+P0}var fu=!1;function hu(e,n){if(!e||fu)return"";fu=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(I){var k=I}Reflect.construct(e,[],G)}else{try{G.call()}catch(I){k=I}e.call(G.prototype)}}else{try{throw Error()}catch(I){k=I}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(I){if(I&&k&&typeof I.stack=="string")return[I.stack,k.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],w=m[1];if(x&&w){var T=x.split(`
`),D=w.split(`
`);for(u=l=0;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;for(;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;if(l===T.length||u===D.length)for(l=T.length-1,u=D.length-1;1<=l&&0<=u&&T[l]!==D[u];)u--;for(;1<=l&&0<=u;l--,u--)if(T[l]!==D[u]){if(l!==1||u!==1)do if(l--,u--,0>u||T[l]!==D[u]){var z=`
`+T[l].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=l&&0<=u);break}}}finally{fu=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ei(a):""}function Kx(e){switch(e.tag){case 26:case 27:case 5:return Ei(e.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return hu(e.type,!1);case 11:return hu(e.type.render,!1);case 1:return hu(e.type,!0);case 31:return Ei("Activity");default:return""}}function q0(e){try{var n="";do n+=Kx(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function H0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Zx(e){var n=H0(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,m=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(x){l=""+x,m.call(this,x)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function vl(e){e._valueTracker||(e._valueTracker=Zx(e))}function G0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=H0(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wx=/[\n"\\]/g;function Yt(e){return e.replace(Wx,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function mu(e,n,a,l,u,m,x,w){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),n!=null?x==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ft(n)):e.value!==""+Ft(n)&&(e.value=""+Ft(n)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),n!=null?gu(e,x,Ft(n)):a!=null?gu(e,x,Ft(a)):l!=null&&e.removeAttribute("value"),u==null&&m!=null&&(e.defaultChecked=!!m),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Ft(w):e.removeAttribute("name")}function V0(e,n,a,l,u,m,x,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null))return;a=a!=null?""+Ft(a):"",n=n!=null?""+Ft(n):a,w||n===e.value||(e.value=n),e.defaultValue=n}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x)}function gu(e,n,a){n==="number"&&bl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function wi(e,n,a,l){if(e=e.options,n){n={};for(var u=0;u<a.length;u++)n["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=n.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ft(a),n=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function F0(e,n,a){if(n!=null&&(n=""+Ft(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ft(a):""}function Y0(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(he(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ft(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Si(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Jx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Q0(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||Jx.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function X0(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in n)l=n[u],n.hasOwnProperty(u)&&a[u]!==l&&Q0(e,u,l)}else for(var m in n)n.hasOwnProperty(m)&&Q0(e,m,n[m])}function pu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xl(e){return tE.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var yu=null;function _u(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ti=null,Ni=null;function $0(e){var n=vi(e);if(n&&(e=n.stateNode)){var a=e[wt]||null;e:switch(e=n.stateNode,n.type){case"input":if(mu(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Yt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var u=l[wt]||null;if(!u)throw Error(s(90));mu(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&G0(l)}break e;case"textarea":F0(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&wi(e,!!a.multiple,n,!1)}}}var vu=!1;function K0(e,n,a){if(vu)return e(n,a);vu=!0;try{var l=e(n);return l}finally{if(vu=!1,(Ti!==null||Ni!==null)&&(so(),Ti&&(n=Ti,e=Ni,Ni=Ti=null,$0(n),e)))for(n=0;n<e.length;n++)$0(e[n])}}function Da(e,n){var a=e.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if(On)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{bu=!1}var er=null,xu=null,El=null;function Z0(){if(El)return El;var e,n=xu,a=n.length,l,u="value"in er?er.value:er.textContent,m=u.length;for(e=0;e<a&&n[e]===u[e];e++);var x=a-e;for(l=1;l<=x&&n[a-l]===u[m-l];l++);return El=u.slice(e,1<l?1-l:void 0)}function wl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Sl(){return!0}function W0(){return!1}function St(e){function n(a,l,u,m,x){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Sl:W0,this.isPropagationStopped=W0,this}return h(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),n}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=St(Lr),ka=h({},Lr,{view:0,detail:0}),nE=St(ka),Eu,wu,Ia,Nl=h({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ia&&(Ia&&e.type==="mousemove"?(Eu=e.screenX-Ia.screenX,wu=e.screenY-Ia.screenY):wu=Eu=0,Ia=e),Eu)},movementY:function(e){return"movementY"in e?e.movementY:wu}}),J0=St(Nl),rE=h({},Nl,{dataTransfer:0}),iE=St(rE),aE=h({},ka,{relatedTarget:0}),Su=St(aE),sE=h({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),lE=St(sE),oE=h({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cE=St(oE),uE=h({},Lr,{data:0}),em=St(uE),dE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mE(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=hE[e])?!!n[e]:!1}function Tu(){return mE}var gE=h({},ka,{key:function(e){if(e.key){var n=dE[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pE=St(gE),yE=h({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=St(yE),_E=h({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),vE=St(_E),bE=h({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xE=St(bE),EE=h({},Nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wE=St(EE),SE=h({},Lr,{newState:0,oldState:0}),TE=St(SE),NE=[9,13,27,32],Nu=On&&"CompositionEvent"in window,ja=null;On&&"documentMode"in document&&(ja=document.documentMode);var CE=On&&"TextEvent"in window&&!ja,nm=On&&(!Nu||ja&&8<ja&&11>=ja),rm=" ",im=!1;function am(e,n){switch(e){case"keyup":return NE.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ci=!1;function AE(e,n){switch(e){case"compositionend":return sm(n);case"keypress":return n.which!==32?null:(im=!0,rm);case"textInput":return e=n.data,e===rm&&im?null:e;default:return null}}function RE(e,n){if(Ci)return e==="compositionend"||!Nu&&am(e,n)?(e=Z0(),El=xu=er=null,Ci=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return nm&&n.locale!=="ko"?null:n.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!OE[e.type]:n==="textarea"}function om(e,n,a,l){Ti?Ni?Ni.push(l):Ni=[l]:Ti=l,n=ho(n,"onChange"),0<n.length&&(a=new Tl("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var La=null,Ua=null;function DE(e){Hp(e,0)}function Cl(e){var n=Oa(e);if(G0(n))return e}function cm(e,n){if(e==="change")return n}var um=!1;if(On){var Cu;if(On){var Au="oninput"in document;if(!Au){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),Au=typeof dm.oninput=="function"}Cu=Au}else Cu=!1;um=Cu&&(!document.documentMode||9<document.documentMode)}function fm(){La&&(La.detachEvent("onpropertychange",hm),Ua=La=null)}function hm(e){if(e.propertyName==="value"&&Cl(Ua)){var n=[];om(n,Ua,e,_u(e)),K0(DE,n)}}function ME(e,n,a){e==="focusin"?(fm(),La=n,Ua=a,La.attachEvent("onpropertychange",hm)):e==="focusout"&&fm()}function kE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cl(Ua)}function IE(e,n){if(e==="click")return Cl(n)}function jE(e,n){if(e==="input"||e==="change")return Cl(n)}function LE(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var kt=typeof Object.is=="function"?Object.is:LE;function Ba(e,n){if(kt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!kr.call(n,u)||!kt(e[u],n[u]))return!1}return!0}function mm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gm(e,n){var a=mm(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mm(a)}}function pm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?pm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ym(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=bl(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=bl(e.document)}return n}function Ru(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var UE=On&&"documentMode"in document&&11>=document.documentMode,Ai=null,Ou=null,za=null,Du=!1;function _m(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Du||Ai==null||Ai!==bl(l)||(l=Ai,"selectionStart"in l&&Ru(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),za&&Ba(za,l)||(za=l,l=ho(Ou,"onSelect"),0<l.length&&(n=new Tl("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Ai)))}function Ur(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ri={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionrun:Ur("Transition","TransitionRun"),transitionstart:Ur("Transition","TransitionStart"),transitioncancel:Ur("Transition","TransitionCancel"),transitionend:Ur("Transition","TransitionEnd")},Mu={},vm={};On&&(vm=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function Br(e){if(Mu[e])return Mu[e];if(!Ri[e])return e;var n=Ri[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in vm)return Mu[e]=n[a];return e}var bm=Br("animationend"),xm=Br("animationiteration"),Em=Br("animationstart"),BE=Br("transitionrun"),zE=Br("transitionstart"),PE=Br("transitioncancel"),wm=Br("transitionend"),Sm=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function rn(e,n){Sm.set(e,n),jr(n,[e])}var Tm=new WeakMap;function Qt(e,n){if(typeof e=="object"&&e!==null){var a=Tm.get(e);return a!==void 0?a:(n={value:e,source:n,stack:q0(n)},Tm.set(e,n),n)}return{value:e,source:n,stack:q0(n)}}var Xt=[],Oi=0,Iu=0;function Al(){for(var e=Oi,n=Iu=Oi=0;n<e;){var a=Xt[n];Xt[n++]=null;var l=Xt[n];Xt[n++]=null;var u=Xt[n];Xt[n++]=null;var m=Xt[n];if(Xt[n++]=null,l!==null&&u!==null){var x=l.pending;x===null?u.next=u:(u.next=x.next,x.next=u),l.pending=u}m!==0&&Nm(a,u,m)}}function Rl(e,n,a,l){Xt[Oi++]=e,Xt[Oi++]=n,Xt[Oi++]=a,Xt[Oi++]=l,Iu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ju(e,n,a,l){return Rl(e,n,a,l),Ol(e)}function Di(e,n){return Rl(e,null,null,n),Ol(e)}function Nm(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var u=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(u=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,u&&n!==null&&(u=31-Mt(a),e=m.hiddenUpdates,l=e[u],l===null?e[u]=[n]:l.push(n),n.lane=a|536870912),m):null}function Ol(e){if(50<us)throw us=0,qd=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Mi={};function qE(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,n,a,l){return new qE(e,n,a,l)}function Lu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Dn(e,n){var a=e.alternate;return a===null?(a=It(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Dl(e,n,a,l,u,m){var x=0;if(l=e,typeof e=="function")Lu(e)&&(x=1);else if(typeof e=="string")x=Gw(e,a,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case F:return e=It(31,a,n,u),e.elementType=F,e.lanes=m,e;case E:return zr(a.children,u,m,n);case S:x=8,u|=24;break;case C:return e=It(12,a,n,u|2),e.elementType=C,e.lanes=m,e;case re:return e=It(13,a,n,u),e.elementType=re,e.lanes=m,e;case W:return e=It(19,a,n,u),e.elementType=W,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:case Y:x=10;break e;case U:x=9;break e;case $:x=11;break e;case ee:x=14;break e;case J:x=16,l=null;break e}x=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=It(x,a,n,u),n.elementType=e,n.type=l,n.lanes=m,n}function zr(e,n,a,l){return e=It(7,e,l,n),e.lanes=a,e}function Uu(e,n,a){return e=It(6,e,null,n),e.lanes=a,e}function Bu(e,n,a){return n=It(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ki=[],Ii=0,Ml=null,kl=0,$t=[],Kt=0,Pr=null,Mn=1,kn="";function qr(e,n){ki[Ii++]=kl,ki[Ii++]=Ml,Ml=e,kl=n}function Am(e,n,a){$t[Kt++]=Mn,$t[Kt++]=kn,$t[Kt++]=Pr,Pr=e;var l=Mn;e=kn;var u=32-Mt(l)-1;l&=~(1<<u),a+=1;var m=32-Mt(n)+u;if(30<m){var x=u-u%5;m=(l&(1<<x)-1).toString(32),l>>=x,u-=x,Mn=1<<32-Mt(n)+u|a<<u|l,kn=m+e}else Mn=1<<m|a<<u|l,kn=e}function zu(e){e.return!==null&&(qr(e,1),Am(e,1,0))}function Pu(e){for(;e===Ml;)Ml=ki[--Ii],ki[Ii]=null,kl=ki[--Ii],ki[Ii]=null;for(;e===Pr;)Pr=$t[--Kt],$t[Kt]=null,kn=$t[--Kt],$t[Kt]=null,Mn=$t[--Kt],$t[Kt]=null}var _t=null,Fe=null,Se=!1,Hr=null,mn=!1,qu=Error(s(519));function Gr(e){var n=Error(s(418,""));throw Ha(Qt(n,e)),qu}function Rm(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[mt]=e,n[wt]=l,a){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(a=0;a<fs.length;a++)_e(fs[a],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":_e("invalid",n),V0(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),vl(n);break;case"select":_e("invalid",n);break;case"textarea":_e("invalid",n),Y0(n,l.value,l.defaultValue,l.children),vl(n)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Yp(n.textContent,a)?(l.popover!=null&&(_e("beforetoggle",n),_e("toggle",n)),l.onScroll!=null&&_e("scroll",n),l.onScrollEnd!=null&&_e("scrollend",n),l.onClick!=null&&(n.onclick=mo),n=!0):n=!1,n||Gr(e)}function Om(e){for(_t=e.return;_t;)switch(_t.tag){case 5:case 13:mn=!1;return;case 27:case 3:mn=!0;return;default:_t=_t.return}}function Pa(e){if(e!==_t)return!1;if(!Se)return Om(e),Se=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||rf(e.type,e.memoizedProps)),a=!a),a&&Fe&&Gr(e),Om(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){Fe=sn(e.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}Fe=null}}else n===27?(n=Fe,pr(e.type)?(e=of,of=null,Fe=e):Fe=n):Fe=_t?sn(e.stateNode.nextSibling):null;return!0}function qa(){Fe=_t=null,Se=!1}function Dm(){var e=Hr;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),Hr=null),e}function Ha(e){Hr===null?Hr=[e]:Hr.push(e)}var Hu=Ve(null),Vr=null,In=null;function tr(e,n,a){A(Hu,n._currentValue),n._currentValue=a}function jn(e){e._currentValue=Hu.current,L(Hu)}function Gu(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function Vu(e,n,a,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var m=u.dependencies;if(m!==null){var x=u.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=u;for(var T=0;T<n.length;T++)if(w.context===n[T]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Gu(m.return,a,e),l||(x=null);break e}m=w.next}}else if(u.tag===18){if(x=u.return,x===null)throw Error(s(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Gu(x,a,e),x=null}else x=u.child;if(x!==null)x.return=u;else for(x=u;x!==null;){if(x===e){x=null;break}if(u=x.sibling,u!==null){u.return=x.return,x=u;break}x=x.return}u=x}}function Ga(e,n,a,l){e=null;for(var u=n,m=!1;u!==null;){if(!m){if((u.flags&524288)!==0)m=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var x=u.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var w=u.type;kt(u.pendingProps.value,x.value)||(e!==null?e.push(w):e=[w])}}else if(u===je.current){if(x=u.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(_s):e=[_s])}u=u.return}e!==null&&Vu(n,e,a,l),n.flags|=262144}function Il(e){for(e=e.firstContext;e!==null;){if(!kt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fr(e){Vr=e,In=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return Mm(Vr,e)}function jl(e,n){return Vr===null&&Fr(e),Mm(e,n)}function Mm(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},In===null){if(e===null)throw Error(s(308));In=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else In=In.next=n;return a}var HE=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},GE=r.unstable_scheduleCallback,VE=r.unstable_NormalPriority,Je={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fu(){return{controller:new HE,data:new Map,refCount:0}}function Va(e){e.refCount--,e.refCount===0&&GE(VE,function(){e.controller.abort()})}var Fa=null,Yu=0,ji=0,Li=null;function FE(e,n){if(Fa===null){var a=Fa=[];Yu=0,ji=Xd(),Li={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yu++,n.then(km,km),n}function km(){if(--Yu===0&&Fa!==null){Li!==null&&(Li.status="fulfilled");var e=Fa;Fa=null,ji=0,Li=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function YE(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var u=0;u<a.length;u++)(0,a[u])(n)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var Im=B.S;B.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&FE(e,n),Im!==null&&Im(e,n)};var Yr=Ve(null);function Qu(){var e=Yr.current;return e!==null?e:Le.pooledCache}function Ll(e,n){n===null?A(Yr,Yr.current):A(Yr,n.pool)}function jm(){var e=Qu();return e===null?null:{parent:Je._currentValue,pool:e}}var Ya=Error(s(460)),Lm=Error(s(474)),Ul=Error(s(542)),Xu={then:function(){}};function Um(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bl(){}function Bm(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Bl,Bl),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Pm(e),e;default:if(typeof n.status=="string")n.then(Bl,Bl);else{if(e=Le,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=l}},function(l){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Pm(e),e}throw Qa=n,Ya}}var Qa=null;function zm(){if(Qa===null)throw Error(s(459));var e=Qa;return Qa=null,e}function Pm(e){if(e===Ya||e===Ul)throw Error(s(483))}var nr=!1;function $u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ku(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ir(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ne&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,n=Ol(e),Nm(e,null,a),n}return Rl(e,l,n,a),Ol(e)}function Xa(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,k0(e,a)}}function Zu(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?u=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?u=m=n:m=m.next=n}else u=m=n;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Wu=!1;function $a(){if(Wu){var e=Li;if(e!==null)throw e}}function Ka(e,n,a,l){Wu=!1;var u=e.updateQueue;nr=!1;var m=u.firstBaseUpdate,x=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var T=w,D=T.next;T.next=null,x===null?m=D:x.next=D,x=T;var z=e.alternate;z!==null&&(z=z.updateQueue,w=z.lastBaseUpdate,w!==x&&(w===null?z.firstBaseUpdate=D:w.next=D,z.lastBaseUpdate=T))}if(m!==null){var G=u.baseState;x=0,z=D=T=null,w=m;do{var k=w.lane&-536870913,I=k!==w.lane;if(I?(be&k)===k:(l&k)===k){k!==0&&k===ji&&(Wu=!0),z!==null&&(z=z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ue=e,se=w;k=n;var De=a;switch(se.tag){case 1:if(ue=se.payload,typeof ue=="function"){G=ue.call(De,G,k);break e}G=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=se.payload,k=typeof ue=="function"?ue.call(De,G,k):ue,k==null)break e;G=h({},G,k);break e;case 2:nr=!0}}k=w.callback,k!==null&&(e.flags|=64,I&&(e.flags|=8192),I=u.callbacks,I===null?u.callbacks=[k]:I.push(k))}else I={lane:k,tag:w.tag,payload:w.payload,callback:w.callback,next:null},z===null?(D=z=I,T=G):z=z.next=I,x|=k;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;I=w,w=I.next,I.next=null,u.lastBaseUpdate=I,u.shared.pending=null}}while(!0);z===null&&(T=G),u.baseState=T,u.firstBaseUpdate=D,u.lastBaseUpdate=z,m===null&&(u.shared.lanes=0),fr|=x,e.lanes=x,e.memoizedState=G}}function qm(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Hm(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)qm(a[e],n)}var Ui=Ve(null),zl=Ve(0);function Gm(e,n){e=Hn,A(zl,e),A(Ui,n),Hn=e|n.baseLanes}function Ju(){A(zl,Hn),A(Ui,Ui.current)}function ed(){Hn=zl.current,L(Ui),L(zl)}var ar=0,de=null,Re=null,Ze=null,Pl=!1,Bi=!1,Qr=!1,ql=0,Za=0,zi=null,QE=0;function $e(){throw Error(s(321))}function td(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!kt(e[a],n[a]))return!1;return!0}function nd(e,n,a,l,u,m){return ar=m,de=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=e===null||e.memoizedState===null?Ng:Cg,Qr=!1,m=a(l,u),Qr=!1,Bi&&(m=Fm(n,a,l,u)),Vm(e),m}function Vm(e){B.H=Ql;var n=Re!==null&&Re.next!==null;if(ar=0,Ze=Re=de=null,Pl=!1,Za=0,zi=null,n)throw Error(s(300));e===null||it||(e=e.dependencies,e!==null&&Il(e)&&(it=!0))}function Fm(e,n,a,l){de=e;var u=0;do{if(Bi&&(zi=null),Za=0,Bi=!1,25<=u)throw Error(s(301));if(u+=1,Ze=Re=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=ew,m=n(a,l)}while(Bi);return m}function XE(){var e=B.H,n=e.useState()[0];return n=typeof n.then=="function"?Wa(n):n,e=e.useState()[0],(Re!==null?Re.memoizedState:null)!==e&&(de.flags|=1024),n}function rd(){var e=ql!==0;return ql=0,e}function id(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function ad(e){if(Pl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Pl=!1}ar=0,Ze=Re=de=null,Bi=!1,Za=ql=0,zi=null}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?de.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function We(){if(Re===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var n=Ze===null?de.memoizedState:Ze.next;if(n!==null)Ze=n,Re=e;else{if(e===null)throw de.alternate===null?Error(s(467)):Error(s(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ze===null?de.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wa(e){var n=Za;return Za+=1,zi===null&&(zi=[]),e=Bm(zi,e,n),n=de,(Ze===null?n.memoizedState:Ze.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?Ng:Cg),e}function Hl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wa(e);if(e.$$typeof===Y)return gt(e)}throw Error(s(438,String(e)))}function ld(e){var n=null,a=de.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=de.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=sd(),de.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=V;return n.index++,a}function Ln(e,n){return typeof n=="function"?n(e):n}function Gl(e){var n=We();return od(n,Re,e)}function od(e,n,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var u=e.baseQueue,m=l.pending;if(m!==null){if(u!==null){var x=u.next;u.next=m.next,m.next=x}n.baseQueue=u=m,l.pending=null}if(m=e.baseState,u===null)e.memoizedState=m;else{n=u.next;var w=x=null,T=null,D=n,z=!1;do{var G=D.lane&-536870913;if(G!==D.lane?(be&G)===G:(ar&G)===G){var k=D.revertLane;if(k===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),G===ji&&(z=!0);else if((ar&k)===k){D=D.next,k===ji&&(z=!0);continue}else G={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},T===null?(w=T=G,x=m):T=T.next=G,de.lanes|=k,fr|=k;G=D.action,Qr&&a(m,G),m=D.hasEagerState?D.eagerState:a(m,G)}else k={lane:G,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},T===null?(w=T=k,x=m):T=T.next=k,de.lanes|=G,fr|=G;D=D.next}while(D!==null&&D!==n);if(T===null?x=m:T.next=w,!kt(m,e.memoizedState)&&(it=!0,z&&(a=Li,a!==null)))throw a;e.memoizedState=m,e.baseState=x,e.baseQueue=T,l.lastRenderedState=m}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function cd(e){var n=We(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,u=a.pending,m=n.memoizedState;if(u!==null){a.pending=null;var x=u=u.next;do m=e(m,x.action),x=x.next;while(x!==u);kt(m,n.memoizedState)||(it=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Ym(e,n,a){var l=de,u=We(),m=Se;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var x=!kt((Re||u).memoizedState,a);x&&(u.memoizedState=a,it=!0),u=u.queue;var w=$m.bind(null,l,u,e);if(Ja(2048,8,w,[e]),u.getSnapshot!==n||x||Ze!==null&&Ze.memoizedState.tag&1){if(l.flags|=2048,Pi(9,Vl(),Xm.bind(null,l,u,a,n),null),Le===null)throw Error(s(349));m||(ar&124)!==0||Qm(l,n,a)}return a}function Qm(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=de.updateQueue,n===null?(n=sd(),de.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Xm(e,n,a,l){n.value=a,n.getSnapshot=l,Km(n)&&Zm(e)}function $m(e,n,a){return a(function(){Km(n)&&Zm(e)})}function Km(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!kt(e,a)}catch{return!0}}function Zm(e){var n=Di(e,2);n!==null&&zt(n,e,2)}function ud(e){var n=Tt();if(typeof e=="function"){var a=e;if(e=a(),Qr){Wn(!0);try{a()}finally{Wn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:e},n}function Wm(e,n,a,l){return e.baseState=a,od(e,Re,typeof l=="function"?l:Ln)}function $E(e,n,a,l,u){if(Yl(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};B.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Jm(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Jm(e,n){var a=n.action,l=n.payload,u=e.state;if(n.isTransition){var m=B.T,x={};B.T=x;try{var w=a(u,l),T=B.S;T!==null&&T(x,w),eg(e,n,w)}catch(D){dd(e,n,D)}finally{B.T=m}}else try{m=a(u,l),eg(e,n,m)}catch(D){dd(e,n,D)}}function eg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){tg(e,n,l)},function(l){return dd(e,n,l)}):tg(e,n,a)}function tg(e,n,a){n.status="fulfilled",n.value=a,ng(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Jm(e,a)))}function dd(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,ng(n),n=n.next;while(n!==l)}e.action=null}function ng(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function rg(e,n){return n}function ig(e,n){if(Se){var a=Le.formState;if(a!==null){e:{var l=de;if(Se){if(Fe){t:{for(var u=Fe,m=mn;u.nodeType!==8;){if(!m){u=null;break t}if(u=sn(u.nextSibling),u===null){u=null;break t}}m=u.data,u=m==="F!"||m==="F"?u:null}if(u){Fe=sn(u.nextSibling),l=u.data==="F!";break e}}Gr(l)}l=!1}l&&(n=a[0])}}return a=Tt(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rg,lastRenderedState:n},a.queue=l,a=wg.bind(null,de,l),l.dispatch=a,l=ud(!1),m=pd.bind(null,de,!1,l.queue),l=Tt(),u={state:n,dispatch:null,action:e,pending:null},l.queue=u,a=$E.bind(null,de,u,m,a),u.dispatch=a,l.memoizedState=e,[n,a,!1]}function ag(e){var n=We();return sg(n,Re,e)}function sg(e,n,a){if(n=od(e,n,rg)[0],e=Gl(Ln)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Wa(n)}catch(x){throw x===Ya?Ul:x}else l=n;n=We();var u=n.queue,m=u.dispatch;return a!==n.memoizedState&&(de.flags|=2048,Pi(9,Vl(),KE.bind(null,u,a),null)),[l,m,e]}function KE(e,n){e.action=n}function lg(e){var n=We(),a=Re;if(a!==null)return sg(n,a,e);We(),n=n.memoizedState,a=We();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function Pi(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=de.updateQueue,n===null&&(n=sd(),de.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Vl(){return{destroy:void 0,resource:void 0}}function og(){return We().memoizedState}function Fl(e,n,a,l){var u=Tt();l=l===void 0?null:l,de.flags|=e,u.memoizedState=Pi(1|n,Vl(),a,l)}function Ja(e,n,a,l){var u=We();l=l===void 0?null:l;var m=u.memoizedState.inst;Re!==null&&l!==null&&td(l,Re.memoizedState.deps)?u.memoizedState=Pi(n,m,a,l):(de.flags|=e,u.memoizedState=Pi(1|n,m,a,l))}function cg(e,n){Fl(8390656,8,e,n)}function ug(e,n){Ja(2048,8,e,n)}function dg(e,n){return Ja(4,2,e,n)}function fg(e,n){return Ja(4,4,e,n)}function hg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function mg(e,n,a){a=a!=null?a.concat([e]):null,Ja(4,4,hg.bind(null,n,e),a)}function fd(){}function gg(e,n){var a=We();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&td(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function pg(e,n){var a=We();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&td(n,l[1]))return l[0];if(l=e(),Qr){Wn(!0);try{e()}finally{Wn(!1)}}return a.memoizedState=[l,n],l}function hd(e,n,a){return a===void 0||(ar&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=vp(),de.lanes|=e,fr|=e,a)}function yg(e,n,a,l){return kt(a,n)?a:Ui.current!==null?(e=hd(e,a,l),kt(e,n)||(it=!0),e):(ar&42)===0?(it=!0,e.memoizedState=a):(e=vp(),de.lanes|=e,fr|=e,n)}function _g(e,n,a,l,u){var m=te.p;te.p=m!==0&&8>m?m:8;var x=B.T,w={};B.T=w,pd(e,!1,n,a);try{var T=u(),D=B.S;if(D!==null&&D(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var z=YE(T,l);es(e,n,z,Bt(e))}else es(e,n,l,Bt(e))}catch(G){es(e,n,{then:function(){},status:"rejected",reason:G},Bt())}finally{te.p=m,B.T=x}}function ZE(){}function md(e,n,a,l){if(e.tag!==5)throw Error(s(476));var u=vg(e).queue;_g(e,u,n,ae,a===null?ZE:function(){return bg(e),a(l)})}function vg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:ae},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function bg(e){var n=vg(e).next.queue;es(e,n,{},Bt())}function gd(){return gt(_s)}function xg(){return We().memoizedState}function Eg(){return We().memoizedState}function WE(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Bt();e=rr(a);var l=ir(n,e,a);l!==null&&(zt(l,n,a),Xa(l,n,a)),n={cache:Fu()},e.payload=n;return}n=n.return}}function JE(e,n,a){var l=Bt();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Yl(e)?Sg(n,a):(a=ju(e,n,a,l),a!==null&&(zt(a,e,l),Tg(a,n,l)))}function wg(e,n,a){var l=Bt();es(e,n,a,l)}function es(e,n,a,l){var u={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yl(e))Sg(n,u);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,w=m(x,a);if(u.hasEagerState=!0,u.eagerState=w,kt(w,x))return Rl(e,n,u,0),Le===null&&Al(),!1}catch{}finally{}if(a=ju(e,n,u,l),a!==null)return zt(a,e,l),Tg(a,n,l),!0}return!1}function pd(e,n,a,l){if(l={lane:2,revertLane:Xd(),action:l,hasEagerState:!1,eagerState:null,next:null},Yl(e)){if(n)throw Error(s(479))}else n=ju(e,a,l,2),n!==null&&zt(n,e,2)}function Yl(e){var n=e.alternate;return e===de||n!==null&&n===de}function Sg(e,n){Bi=Pl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Tg(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,k0(e,a)}}var Ql={readContext:gt,use:Hl,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e},Ng={readContext:gt,use:Hl,useCallback:function(e,n){return Tt().memoizedState=[e,n===void 0?null:n],e},useContext:gt,useEffect:cg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Fl(4194308,4,hg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Fl(4194308,4,e,n)},useInsertionEffect:function(e,n){Fl(4,2,e,n)},useMemo:function(e,n){var a=Tt();n=n===void 0?null:n;var l=e();if(Qr){Wn(!0);try{e()}finally{Wn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=Tt();if(a!==void 0){var u=a(n);if(Qr){Wn(!0);try{a(n)}finally{Wn(!1)}}}else u=n;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=JE.bind(null,de,e),[l.memoizedState,e]},useRef:function(e){var n=Tt();return e={current:e},n.memoizedState=e},useState:function(e){e=ud(e);var n=e.queue,a=wg.bind(null,de,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:fd,useDeferredValue:function(e,n){var a=Tt();return hd(a,e,n)},useTransition:function(){var e=ud(!1);return e=_g.bind(null,de,e.queue,!0,!1),Tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=de,u=Tt();if(Se){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Le===null)throw Error(s(349));(be&124)!==0||Qm(l,n,a)}u.memoizedState=a;var m={value:a,getSnapshot:n};return u.queue=m,cg($m.bind(null,l,m,e),[e]),l.flags|=2048,Pi(9,Vl(),Xm.bind(null,l,m,a,n),null),a},useId:function(){var e=Tt(),n=Le.identifierPrefix;if(Se){var a=kn,l=Mn;a=(l&~(1<<32-Mt(l)-1)).toString(32)+a,n="«"+n+"R"+a,a=ql++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=QE++,n="«"+n+"r"+a.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:gd,useFormState:ig,useActionState:ig,useOptimistic:function(e){var n=Tt();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=pd.bind(null,de,!0,a),a.dispatch=n,[e,n]},useMemoCache:ld,useCacheRefresh:function(){return Tt().memoizedState=WE.bind(null,de)}},Cg={readContext:gt,use:Hl,useCallback:gg,useContext:gt,useEffect:ug,useImperativeHandle:mg,useInsertionEffect:dg,useLayoutEffect:fg,useMemo:pg,useReducer:Gl,useRef:og,useState:function(){return Gl(Ln)},useDebugValue:fd,useDeferredValue:function(e,n){var a=We();return yg(a,Re.memoizedState,e,n)},useTransition:function(){var e=Gl(Ln)[0],n=We().memoizedState;return[typeof e=="boolean"?e:Wa(e),n]},useSyncExternalStore:Ym,useId:xg,useHostTransitionStatus:gd,useFormState:ag,useActionState:ag,useOptimistic:function(e,n){var a=We();return Wm(a,Re,e,n)},useMemoCache:ld,useCacheRefresh:Eg},ew={readContext:gt,use:Hl,useCallback:gg,useContext:gt,useEffect:ug,useImperativeHandle:mg,useInsertionEffect:dg,useLayoutEffect:fg,useMemo:pg,useReducer:cd,useRef:og,useState:function(){return cd(Ln)},useDebugValue:fd,useDeferredValue:function(e,n){var a=We();return Re===null?hd(a,e,n):yg(a,Re.memoizedState,e,n)},useTransition:function(){var e=cd(Ln)[0],n=We().memoizedState;return[typeof e=="boolean"?e:Wa(e),n]},useSyncExternalStore:Ym,useId:xg,useHostTransitionStatus:gd,useFormState:lg,useActionState:lg,useOptimistic:function(e,n){var a=We();return Re!==null?Wm(a,Re,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ld,useCacheRefresh:Eg},qi=null,ts=0;function Xl(e){var n=ts;return ts+=1,qi===null&&(qi=[]),Bm(qi,e,n)}function ns(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function $l(e,n){throw n.$$typeof===_?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Ag(e){var n=e._init;return n(e._payload)}function Rg(e){function n(R,N){if(e){var O=R.deletions;O===null?(R.deletions=[N],R.flags|=16):O.push(N)}}function a(R,N){if(!e)return null;for(;N!==null;)n(R,N),N=N.sibling;return null}function l(R){for(var N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function u(R,N){return R=Dn(R,N),R.index=0,R.sibling=null,R}function m(R,N,O){return R.index=O,e?(O=R.alternate,O!==null?(O=O.index,O<N?(R.flags|=67108866,N):O):(R.flags|=67108866,N)):(R.flags|=1048576,N)}function x(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function w(R,N,O,q){return N===null||N.tag!==6?(N=Uu(O,R.mode,q),N.return=R,N):(N=u(N,O),N.return=R,N)}function T(R,N,O,q){var ne=O.type;return ne===E?z(R,N,O.props.children,q,O.key):N!==null&&(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&Ag(ne)===N.type)?(N=u(N,O.props),ns(N,O),N.return=R,N):(N=Dl(O.type,O.key,O.props,null,R.mode,q),ns(N,O),N.return=R,N)}function D(R,N,O,q){return N===null||N.tag!==4||N.stateNode.containerInfo!==O.containerInfo||N.stateNode.implementation!==O.implementation?(N=Bu(O,R.mode,q),N.return=R,N):(N=u(N,O.children||[]),N.return=R,N)}function z(R,N,O,q,ne){return N===null||N.tag!==7?(N=zr(O,R.mode,q,ne),N.return=R,N):(N=u(N,O),N.return=R,N)}function G(R,N,O){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Uu(""+N,R.mode,O),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case y:return O=Dl(N.type,N.key,N.props,null,R.mode,O),ns(O,N),O.return=R,O;case b:return N=Bu(N,R.mode,O),N.return=R,N;case J:var q=N._init;return N=q(N._payload),G(R,N,O)}if(he(N)||X(N))return N=zr(N,R.mode,O,null),N.return=R,N;if(typeof N.then=="function")return G(R,Xl(N),O);if(N.$$typeof===Y)return G(R,jl(R,N),O);$l(R,N)}return null}function k(R,N,O,q){var ne=N!==null?N.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ne!==null?null:w(R,N,""+O,q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case y:return O.key===ne?T(R,N,O,q):null;case b:return O.key===ne?D(R,N,O,q):null;case J:return ne=O._init,O=ne(O._payload),k(R,N,O,q)}if(he(O)||X(O))return ne!==null?null:z(R,N,O,q,null);if(typeof O.then=="function")return k(R,N,Xl(O),q);if(O.$$typeof===Y)return k(R,N,jl(R,O),q);$l(R,O)}return null}function I(R,N,O,q,ne){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return R=R.get(O)||null,w(N,R,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return R=R.get(q.key===null?O:q.key)||null,T(N,R,q,ne);case b:return R=R.get(q.key===null?O:q.key)||null,D(N,R,q,ne);case J:var me=q._init;return q=me(q._payload),I(R,N,O,q,ne)}if(he(q)||X(q))return R=R.get(O)||null,z(N,R,q,ne,null);if(typeof q.then=="function")return I(R,N,O,Xl(q),ne);if(q.$$typeof===Y)return I(R,N,O,jl(N,q),ne);$l(N,q)}return null}function ue(R,N,O,q){for(var ne=null,me=null,ie=N,oe=N=0,st=null;ie!==null&&oe<O.length;oe++){ie.index>oe?(st=ie,ie=null):st=ie.sibling;var xe=k(R,ie,O[oe],q);if(xe===null){ie===null&&(ie=st);break}e&&ie&&xe.alternate===null&&n(R,ie),N=m(xe,N,oe),me===null?ne=xe:me.sibling=xe,me=xe,ie=st}if(oe===O.length)return a(R,ie),Se&&qr(R,oe),ne;if(ie===null){for(;oe<O.length;oe++)ie=G(R,O[oe],q),ie!==null&&(N=m(ie,N,oe),me===null?ne=ie:me.sibling=ie,me=ie);return Se&&qr(R,oe),ne}for(ie=l(ie);oe<O.length;oe++)st=I(ie,R,oe,O[oe],q),st!==null&&(e&&st.alternate!==null&&ie.delete(st.key===null?oe:st.key),N=m(st,N,oe),me===null?ne=st:me.sibling=st,me=st);return e&&ie.forEach(function(xr){return n(R,xr)}),Se&&qr(R,oe),ne}function se(R,N,O,q){if(O==null)throw Error(s(151));for(var ne=null,me=null,ie=N,oe=N=0,st=null,xe=O.next();ie!==null&&!xe.done;oe++,xe=O.next()){ie.index>oe?(st=ie,ie=null):st=ie.sibling;var xr=k(R,ie,xe.value,q);if(xr===null){ie===null&&(ie=st);break}e&&ie&&xr.alternate===null&&n(R,ie),N=m(xr,N,oe),me===null?ne=xr:me.sibling=xr,me=xr,ie=st}if(xe.done)return a(R,ie),Se&&qr(R,oe),ne;if(ie===null){for(;!xe.done;oe++,xe=O.next())xe=G(R,xe.value,q),xe!==null&&(N=m(xe,N,oe),me===null?ne=xe:me.sibling=xe,me=xe);return Se&&qr(R,oe),ne}for(ie=l(ie);!xe.done;oe++,xe=O.next())xe=I(ie,R,oe,xe.value,q),xe!==null&&(e&&xe.alternate!==null&&ie.delete(xe.key===null?oe:xe.key),N=m(xe,N,oe),me===null?ne=xe:me.sibling=xe,me=xe);return e&&ie.forEach(function(tS){return n(R,tS)}),Se&&qr(R,oe),ne}function De(R,N,O,q){if(typeof O=="object"&&O!==null&&O.type===E&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case y:e:{for(var ne=O.key;N!==null;){if(N.key===ne){if(ne=O.type,ne===E){if(N.tag===7){a(R,N.sibling),q=u(N,O.props.children),q.return=R,R=q;break e}}else if(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&Ag(ne)===N.type){a(R,N.sibling),q=u(N,O.props),ns(q,O),q.return=R,R=q;break e}a(R,N);break}else n(R,N);N=N.sibling}O.type===E?(q=zr(O.props.children,R.mode,q,O.key),q.return=R,R=q):(q=Dl(O.type,O.key,O.props,null,R.mode,q),ns(q,O),q.return=R,R=q)}return x(R);case b:e:{for(ne=O.key;N!==null;){if(N.key===ne)if(N.tag===4&&N.stateNode.containerInfo===O.containerInfo&&N.stateNode.implementation===O.implementation){a(R,N.sibling),q=u(N,O.children||[]),q.return=R,R=q;break e}else{a(R,N);break}else n(R,N);N=N.sibling}q=Bu(O,R.mode,q),q.return=R,R=q}return x(R);case J:return ne=O._init,O=ne(O._payload),De(R,N,O,q)}if(he(O))return ue(R,N,O,q);if(X(O)){if(ne=X(O),typeof ne!="function")throw Error(s(150));return O=ne.call(O),se(R,N,O,q)}if(typeof O.then=="function")return De(R,N,Xl(O),q);if(O.$$typeof===Y)return De(R,N,jl(R,O),q);$l(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,N!==null&&N.tag===6?(a(R,N.sibling),q=u(N,O),q.return=R,R=q):(a(R,N),q=Uu(O,R.mode,q),q.return=R,R=q),x(R)):a(R,N)}return function(R,N,O,q){try{ts=0;var ne=De(R,N,O,q);return qi=null,ne}catch(ie){if(ie===Ya||ie===Ul)throw ie;var me=It(29,ie,null,R.mode);return me.lanes=q,me.return=R,me}finally{}}}var Hi=Rg(!0),Og=Rg(!1),Zt=Ve(null),gn=null;function sr(e){var n=e.alternate;A(et,et.current&1),A(Zt,e),gn===null&&(n===null||Ui.current!==null||n.memoizedState!==null)&&(gn=e)}function Dg(e){if(e.tag===22){if(A(et,et.current),A(Zt,e),gn===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(gn=e)}}else lr()}function lr(){A(et,et.current),A(Zt,Zt.current)}function Un(e){L(Zt),gn===e&&(gn=null),L(et)}var et=Ve(0);function Kl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||lf(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function yd(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:h({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var _d={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Bt(),u=rr(l);u.payload=n,a!=null&&(u.callback=a),n=ir(e,u,l),n!==null&&(zt(n,e,l),Xa(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Bt(),u=rr(l);u.tag=1,u.payload=n,a!=null&&(u.callback=a),n=ir(e,u,l),n!==null&&(zt(n,e,l),Xa(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Bt(),l=rr(a);l.tag=2,n!=null&&(l.callback=n),n=ir(e,l,a),n!==null&&(zt(n,e,a),Xa(n,e,a))}};function Mg(e,n,a,l,u,m,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,x):n.prototype&&n.prototype.isPureReactComponent?!Ba(a,l)||!Ba(u,m):!0}function kg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&_d.enqueueReplaceState(n,n.state,null)}function Xr(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=h({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}var Zl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Ig(e){Zl(e)}function jg(e){console.error(e)}function Lg(e){Zl(e)}function Wl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Ug(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function vd(e,n,a){return a=rr(a),a.tag=3,a.payload={element:null},a.callback=function(){Wl(e,n)},a}function Bg(e){return e=rr(e),e.tag=3,e}function zg(e,n,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var m=l.value;e.payload=function(){return u(m)},e.callback=function(){Ug(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){Ug(n,a,l),typeof u!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function tw(e,n,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ga(n,a,u,!0),a=Zt.current,a!==null){switch(a.tag){case 13:return gn===null?Gd():a.alternate===null&&Ye===0&&(Ye=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===Xu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Fd(e,l,u)),!1;case 22:return a.flags|=65536,l===Xu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Fd(e,l,u)),!1}throw Error(s(435,a.tag))}return Fd(e,l,u),Gd(),!1}if(Se)return n=Zt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,l!==qu&&(e=Error(s(422),{cause:l}),Ha(Qt(e,a)))):(l!==qu&&(n=Error(s(423),{cause:l}),Ha(Qt(n,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=Qt(l,a),u=vd(e.stateNode,l,u),Zu(e,u),Ye!==4&&(Ye=2)),!1;var m=Error(s(520),{cause:l});if(m=Qt(m,a),cs===null?cs=[m]:cs.push(m),Ye!==4&&(Ye=2),n===null)return!0;l=Qt(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=vd(a.stateNode,l,e),Zu(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(hr===null||!hr.has(m))))return a.flags|=65536,u&=-u,a.lanes|=u,u=Bg(u),zg(u,e,a,l),Zu(a,u),!1}a=a.return}while(a!==null);return!1}var Pg=Error(s(461)),it=!1;function dt(e,n,a,l){n.child=e===null?Og(n,null,a,l):Hi(n,e.child,a,l)}function qg(e,n,a,l,u){a=a.render;var m=n.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return Fr(n),l=nd(e,n,a,x,m,u),w=rd(),e!==null&&!it?(id(e,n,u),Bn(e,n,u)):(Se&&w&&zu(n),n.flags|=1,dt(e,n,l,u),n.child)}function Hg(e,n,a,l,u){if(e===null){var m=a.type;return typeof m=="function"&&!Lu(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,Gg(e,n,m,l,u)):(e=Dl(a.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!Cd(e,u)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ba,a(x,l)&&e.ref===n.ref)return Bn(e,n,u)}return n.flags|=1,e=Dn(m,l),e.ref=n.ref,e.return=n,n.child=e}function Gg(e,n,a,l,u){if(e!==null){var m=e.memoizedProps;if(Ba(m,l)&&e.ref===n.ref)if(it=!1,n.pendingProps=l=m,Cd(e,u))(e.flags&131072)!==0&&(it=!0);else return n.lanes=e.lanes,Bn(e,n,u)}return bd(e,n,a,l,u)}function Vg(e,n,a){var l=n.pendingProps,u=l.children,m=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,e!==null){for(u=n.child=e.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;n.childLanes=m&~l}else n.childLanes=0,n.child=null;return Fg(e,n,l,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ll(n,m!==null?m.cachePool:null),m!==null?Gm(n,m):Ju(),Dg(n);else return n.lanes=n.childLanes=536870912,Fg(e,n,m!==null?m.baseLanes|a:a,a)}else m!==null?(Ll(n,m.cachePool),Gm(n,m),lr(),n.memoizedState=null):(e!==null&&Ll(n,null),Ju(),lr());return dt(e,n,u,a),n.child}function Fg(e,n,a,l){var u=Qu();return u=u===null?null:{parent:Je._currentValue,pool:u},n.memoizedState={baseLanes:a,cachePool:u},e!==null&&Ll(n,null),Ju(),Dg(n),e!==null&&Ga(e,n,l,!0),null}function Jl(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function bd(e,n,a,l,u){return Fr(n),a=nd(e,n,a,l,void 0,u),l=rd(),e!==null&&!it?(id(e,n,u),Bn(e,n,u)):(Se&&l&&zu(n),n.flags|=1,dt(e,n,a,u),n.child)}function Yg(e,n,a,l,u,m){return Fr(n),n.updateQueue=null,a=Fm(n,l,a,u),Vm(e),l=rd(),e!==null&&!it?(id(e,n,m),Bn(e,n,m)):(Se&&l&&zu(n),n.flags|=1,dt(e,n,a,m),n.child)}function Qg(e,n,a,l,u){if(Fr(n),n.stateNode===null){var m=Mi,x=a.contextType;typeof x=="object"&&x!==null&&(m=gt(x)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=_d,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},$u(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?gt(x):Mi,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(yd(n,a,x,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&_d.enqueueReplaceState(m,m.state,null),Ka(n,l,m,u),$a(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){m=n.stateNode;var w=n.memoizedProps,T=Xr(a,w);m.props=T;var D=m.context,z=a.contextType;x=Mi,typeof z=="object"&&z!==null&&(x=gt(z));var G=a.getDerivedStateFromProps;z=typeof G=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||D!==x)&&kg(n,m,l,x),nr=!1;var k=n.memoizedState;m.state=k,Ka(n,l,m,u),$a(),D=n.memoizedState,w||k!==D||nr?(typeof G=="function"&&(yd(n,a,G,l),D=n.memoizedState),(T=nr||Mg(n,a,T,l,k,D,x))?(z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=D),m.props=l,m.state=D,m.context=x,l=T):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Ku(e,n),x=n.memoizedProps,z=Xr(a,x),m.props=z,G=n.pendingProps,k=m.context,D=a.contextType,T=Mi,typeof D=="object"&&D!==null&&(T=gt(D)),w=a.getDerivedStateFromProps,(D=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==G||k!==T)&&kg(n,m,l,T),nr=!1,k=n.memoizedState,m.state=k,Ka(n,l,m,u),$a();var I=n.memoizedState;x!==G||k!==I||nr||e!==null&&e.dependencies!==null&&Il(e.dependencies)?(typeof w=="function"&&(yd(n,a,w,l),I=n.memoizedState),(z=nr||Mg(n,a,z,l,k,I,T)||e!==null&&e.dependencies!==null&&Il(e.dependencies))?(D||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,I,T),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,I,T)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&k===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&k===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=I),m.props=l,m.state=I,m.context=T,l=z):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&k===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&k===e.memoizedState||(n.flags|=1024),l=!1)}return m=l,Jl(e,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&l?(n.child=Hi(n,e.child,null,u),n.child=Hi(n,null,a,u)):dt(e,n,a,u),n.memoizedState=m.state,e=n.child):e=Bn(e,n,u),e}function Xg(e,n,a,l){return qa(),n.flags|=256,dt(e,n,a,l),n.child}var xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(e){return{baseLanes:e,cachePool:jm()}}function wd(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Wt),e}function $g(e,n,a){var l=n.pendingProps,u=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=e!==null&&e.memoizedState===null?!1:(et.current&2)!==0),x&&(u=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,e===null){if(Se){if(u?sr(n):lr(),Se){var w=Fe,T;if(T=w){e:{for(T=w,w=mn;T.nodeType!==8;){if(!w){w=null;break e}if(T=sn(T.nextSibling),T===null){w=null;break e}}w=T}w!==null?(n.memoizedState={dehydrated:w,treeContext:Pr!==null?{id:Mn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},T=It(18,null,null,0),T.stateNode=w,T.return=n,n.child=T,_t=n,Fe=null,T=!0):T=!1}T||Gr(n)}if(w=n.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return lf(w)?n.lanes=32:n.lanes=536870912,null;Un(n)}return w=l.children,l=l.fallback,u?(lr(),u=n.mode,w=eo({mode:"hidden",children:w},u),l=zr(l,u,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,u=n.child,u.memoizedState=Ed(a),u.childLanes=wd(e,x,a),n.memoizedState=xd,l):(sr(n),Sd(n,w))}if(T=e.memoizedState,T!==null&&(w=T.dehydrated,w!==null)){if(m)n.flags&256?(sr(n),n.flags&=-257,n=Td(e,n,a)):n.memoizedState!==null?(lr(),n.child=e.child,n.flags|=128,n=null):(lr(),u=l.fallback,w=n.mode,l=eo({mode:"visible",children:l.children},w),u=zr(u,w,a,null),u.flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,Hi(n,e.child,null,a),l=n.child,l.memoizedState=Ed(a),l.childLanes=wd(e,x,a),n.memoizedState=xd,n=u);else if(sr(n),lf(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var D=x.dgst;x=D,l=Error(s(419)),l.stack="",l.digest=x,Ha({value:l,source:null,stack:null}),n=Td(e,n,a)}else if(it||Ga(e,n,a,!1),x=(a&e.childLanes)!==0,it||x){if(x=Le,x!==null&&(l=a&-a,l=(l&42)!==0?1:lu(l),l=(l&(x.suspendedLanes|a))!==0?0:l,l!==0&&l!==T.retryLane))throw T.retryLane=l,Di(e,l),zt(x,e,l),Pg;w.data==="$?"||Gd(),n=Td(e,n,a)}else w.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=T.treeContext,Fe=sn(w.nextSibling),_t=n,Se=!0,Hr=null,mn=!1,e!==null&&($t[Kt++]=Mn,$t[Kt++]=kn,$t[Kt++]=Pr,Mn=e.id,kn=e.overflow,Pr=n),n=Sd(n,l.children),n.flags|=4096);return n}return u?(lr(),u=l.fallback,w=n.mode,T=e.child,D=T.sibling,l=Dn(T,{mode:"hidden",children:l.children}),l.subtreeFlags=T.subtreeFlags&65011712,D!==null?u=Dn(D,u):(u=zr(u,w,a,null),u.flags|=2),u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,w=e.child.memoizedState,w===null?w=Ed(a):(T=w.cachePool,T!==null?(D=Je._currentValue,T=T.parent!==D?{parent:D,pool:D}:T):T=jm(),w={baseLanes:w.baseLanes|a,cachePool:T}),u.memoizedState=w,u.childLanes=wd(e,x,a),n.memoizedState=xd,l):(sr(n),a=e.child,e=a.sibling,a=Dn(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(x=n.deletions,x===null?(n.deletions=[e],n.flags|=16):x.push(e)),n.child=a,n.memoizedState=null,a)}function Sd(e,n){return n=eo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function eo(e,n){return e=It(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Td(e,n,a){return Hi(n,e.child,null,a),e=Sd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Kg(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Gu(e.return,n,a)}function Nd(e,n,a,l,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u}:(m.isBackwards=n,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=u)}function Zg(e,n,a){var l=n.pendingProps,u=l.revealOrder,m=l.tail;if(dt(e,n,l.children,a),l=et.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kg(e,a,n);else if(e.tag===19)Kg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(A(et,l),u){case"forwards":for(a=n.child,u=null;a!==null;)e=a.alternate,e!==null&&Kl(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=n.child,n.child=null):(u=a.sibling,a.sibling=null),Nd(n,!1,u,a,m);break;case"backwards":for(a=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&Kl(e)===null){n.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}Nd(n,!0,a,null,m);break;case"together":Nd(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Bn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),fr|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Ga(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Dn(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Dn(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Cd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Il(e)))}function nw(e,n,a){switch(n.tag){case 3:nt(n,n.stateNode.containerInfo),tr(n,Je,e.memoizedState.cache),qa();break;case 27:case 5:An(n);break;case 4:nt(n,n.stateNode.containerInfo);break;case 10:tr(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(sr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?$g(e,n,a):(sr(n),e=Bn(e,n,a),e!==null?e.sibling:null);sr(n);break;case 19:var u=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ga(e,n,a,!1),l=(a&n.childLanes)!==0),u){if(l)return Zg(e,n,a);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),A(et,et.current),l)break;return null;case 22:case 23:return n.lanes=0,Vg(e,n,a);case 24:tr(n,Je,e.memoizedState.cache)}return Bn(e,n,a)}function Wg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)it=!0;else{if(!Cd(e,a)&&(n.flags&128)===0)return it=!1,nw(e,n,a);it=(e.flags&131072)!==0}else it=!1,Se&&(n.flags&1048576)!==0&&Am(n,kl,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var l=n.elementType,u=l._init;if(l=u(l._payload),n.type=l,typeof l=="function")Lu(l)?(e=Xr(l,e),n.tag=1,n=Qg(null,n,l,e,a)):(n.tag=0,n=bd(null,n,l,e,a));else{if(l!=null){if(u=l.$$typeof,u===$){n.tag=11,n=qg(null,n,l,e,a);break e}else if(u===ee){n.tag=14,n=Hg(null,n,l,e,a);break e}}throw n=H(l)||l,Error(s(306,n,""))}}return n;case 0:return bd(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,u=Xr(l,n.pendingProps),Qg(e,n,l,u,a);case 3:e:{if(nt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var m=n.memoizedState;u=m.element,Ku(e,n),Ka(n,l,null,a);var x=n.memoizedState;if(l=x.cache,tr(n,Je,l),l!==m.cache&&Vu(n,[Je],a,!0),$a(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Xg(e,n,l,a);break e}else if(l!==u){u=Qt(Error(s(424)),n),Ha(u),n=Xg(e,n,l,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Fe=sn(e.firstChild),_t=n,Se=!0,Hr=null,mn=!0,a=Og(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qa(),l===u){n=Bn(e,n,a);break e}dt(e,n,l,a)}n=n.child}return n;case 26:return Jl(e,n),e===null?(a=n1(n.type,null,n.pendingProps,null))?n.memoizedState=a:Se||(a=n.type,e=n.pendingProps,l=go(Ie.current).createElement(a),l[mt]=n,l[wt]=e,ht(l,a,e),rt(l),n.stateNode=l):n.memoizedState=n1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return An(n),e===null&&Se&&(l=n.stateNode=Jp(n.type,n.pendingProps,Ie.current),_t=n,mn=!0,u=Fe,pr(n.type)?(of=u,Fe=sn(l.firstChild)):Fe=u),dt(e,n,n.pendingProps.children,a),Jl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Se&&((u=l=Fe)&&(l=Ow(l,n.type,n.pendingProps,mn),l!==null?(n.stateNode=l,_t=n,Fe=sn(l.firstChild),mn=!1,u=!0):u=!1),u||Gr(n)),An(n),u=n.type,m=n.pendingProps,x=e!==null?e.memoizedProps:null,l=m.children,rf(u,m)?l=null:x!==null&&rf(u,x)&&(n.flags|=32),n.memoizedState!==null&&(u=nd(e,n,XE,null,null,a),_s._currentValue=u),Jl(e,n),dt(e,n,l,a),n.child;case 6:return e===null&&Se&&((e=a=Fe)&&(a=Dw(a,n.pendingProps,mn),a!==null?(n.stateNode=a,_t=n,Fe=null,e=!0):e=!1),e||Gr(n)),null;case 13:return $g(e,n,a);case 4:return nt(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Hi(n,null,l,a):dt(e,n,l,a),n.child;case 11:return qg(e,n,n.type,n.pendingProps,a);case 7:return dt(e,n,n.pendingProps,a),n.child;case 8:return dt(e,n,n.pendingProps.children,a),n.child;case 12:return dt(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,tr(n,n.type,l.value),dt(e,n,l.children,a),n.child;case 9:return u=n.type._context,l=n.pendingProps.children,Fr(n),u=gt(u),l=l(u),n.flags|=1,dt(e,n,l,a),n.child;case 14:return Hg(e,n,n.type,n.pendingProps,a);case 15:return Gg(e,n,n.type,n.pendingProps,a);case 19:return Zg(e,n,a);case 31:return l=n.pendingProps,a=n.mode,l={mode:l.mode,children:l.children},e===null?(a=eo(l,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Dn(e.child,l),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Vg(e,n,a);case 24:return Fr(n),l=gt(Je),e===null?(u=Qu(),u===null&&(u=Le,m=Fu(),u.pooledCache=m,m.refCount++,m!==null&&(u.pooledCacheLanes|=a),u=m),n.memoizedState={parent:l,cache:u},$u(n),tr(n,Je,u)):((e.lanes&a)!==0&&(Ku(e,n),Ka(n,null,null,a),$a()),u=e.memoizedState,m=n.memoizedState,u.parent!==l?(u={parent:l,cache:l},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),tr(n,Je,l)):(l=m.cache,tr(n,Je,l),l!==u.cache&&Vu(n,[Je],a,!0))),dt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function zn(e){e.flags|=4}function Jg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!l1(n)){if(n=Zt.current,n!==null&&((be&4194048)===be?gn!==null:(be&62914560)!==be&&(be&536870912)===0||n!==gn))throw Qa=Xu,Lm;e.flags|=8192}}function to(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?D0():536870912,e.lanes|=n,Yi|=n)}function rs(e,n){if(!Se)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function rw(e,n,a){var l=n.pendingProps;switch(Pu(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(n),null;case 1:return qe(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),jn(Je),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Pa(n)?zn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Dm())),qe(n),null;case 26:return a=n.memoizedState,e===null?(zn(n),a!==null?(qe(n),Jg(n,a)):(qe(n),n.flags&=-16777217)):a?a!==e.memoizedState?(zn(n),qe(n),Jg(n,a)):(qe(n),n.flags&=-16777217):(e.memoizedProps!==l&&zn(n),qe(n),n.flags&=-16777217),null;case 27:Be(n),a=Ie.current;var u=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==l&&zn(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return qe(n),null}e=P.current,Pa(n)?Rm(n):(e=Jp(u,l,a),n.stateNode=e,zn(n))}return qe(n),null;case 5:if(Be(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&zn(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return qe(n),null}if(e=P.current,Pa(n))Rm(n);else{switch(u=go(Ie.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?u.createElement(a,{is:l.is}):u.createElement(a)}}e[mt]=n,e[wt]=l;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=e;e:switch(ht(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&zn(n)}}return qe(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&zn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=Ie.current,Pa(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,u=_t,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[mt]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Yp(e.nodeValue,a)),e||Gr(n)}else e=go(e).createTextNode(l),e[mt]=n,n.stateNode=e}return qe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Pa(n),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[mt]=n}else qa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),u=!1}else u=Dm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Un(n),n):(Un(n),null)}if(Un(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=n.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==u&&(l.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),to(n,n.updateQueue),qe(n),null;case 4:return yt(),e===null&&Wd(n.stateNode.containerInfo),qe(n),null;case 10:return jn(n.type),qe(n),null;case 19:if(L(et),u=n.memoizedState,u===null)return qe(n),null;if(l=(n.flags&128)!==0,m=u.rendering,m===null)if(l)rs(u,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=Kl(e),m!==null){for(n.flags|=128,rs(u,!1),e=m.updateQueue,n.updateQueue=e,to(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Cm(a,e),a=a.sibling;return A(et,et.current&1|2),n.child}e=e.sibling}u.tail!==null&&hn()>io&&(n.flags|=128,l=!0,rs(u,!1),n.lanes=4194304)}else{if(!l)if(e=Kl(m),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,to(n,e),rs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Se)return qe(n),null}else 2*hn()-u.renderingStartTime>io&&a!==536870912&&(n.flags|=128,l=!0,rs(u,!1),n.lanes=4194304);u.isBackwards?(m.sibling=n.child,n.child=m):(e=u.last,e!==null?e.sibling=m:n.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=hn(),n.sibling=null,e=et.current,A(et,l?e&1|2:e&1),n):(qe(n),null);case 22:case 23:return Un(n),ed(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(qe(n),n.subtreeFlags&6&&(n.flags|=8192)):qe(n),a=n.updateQueue,a!==null&&to(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&L(Yr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),jn(Je),qe(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function iw(e,n){switch(Pu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return jn(Je),yt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Be(n),null;case 13:if(Un(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));qa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return L(et),null;case 4:return yt(),null;case 10:return jn(n.type),null;case 22:case 23:return Un(n),ed(),e!==null&&L(Yr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return jn(Je),null;case 25:return null;default:return null}}function ep(e,n){switch(Pu(n),n.tag){case 3:jn(Je),yt();break;case 26:case 27:case 5:Be(n);break;case 4:yt();break;case 13:Un(n);break;case 19:L(et);break;case 10:jn(n.type);break;case 22:case 23:Un(n),ed(),e!==null&&L(Yr);break;case 24:jn(Je)}}function is(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&e)===e){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==u)}}catch(w){Me(n,n.return,w)}}function or(e,n,a){try{var l=n.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&e)===e){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,u=n;var T=a,D=w;try{D()}catch(z){Me(u,T,z)}}}l=l.next}while(l!==m)}}catch(z){Me(n,n.return,z)}}function tp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Hm(n,a)}catch(l){Me(e,e.return,l)}}}function np(e,n,a){a.props=Xr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Me(e,n,l)}}function as(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(u){Me(e,n,u)}}function pn(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){Me(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Me(e,n,u)}else a.current=null}function rp(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){Me(e,e.return,u)}}function Ad(e,n,a){try{var l=e.stateNode;Tw(l,e.type,a,n),l[wt]=n}catch(u){Me(e,e.return,u)}}function ip(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pr(e.type)||e.tag===4}function Rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ip(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Od(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=mo));else if(l!==4&&(l===27&&pr(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Od(e,n,a),e=e.sibling;e!==null;)Od(e,n,a),e=e.sibling}function no(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&pr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(no(e,n,a),e=e.sibling;e!==null;)no(e,n,a),e=e.sibling}function ap(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);ht(n,l,a),n[mt]=e,n[wt]=a}catch(m){Me(e,e.return,m)}}var Pn=!1,Ke=!1,Dd=!1,sp=typeof WeakSet=="function"?WeakSet:Set,at=null;function aw(e,n){if(e=e.containerInfo,tf=xo,e=ym(e),Ru(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,w=-1,T=-1,D=0,z=0,G=e,k=null;t:for(;;){for(var I;G!==a||u!==0&&G.nodeType!==3||(w=x+u),G!==m||l!==0&&G.nodeType!==3||(T=x+l),G.nodeType===3&&(x+=G.nodeValue.length),(I=G.firstChild)!==null;)k=G,G=I;for(;;){if(G===e)break t;if(k===a&&++D===u&&(w=x),k===m&&++z===l&&(T=x),(I=G.nextSibling)!==null)break;G=k,k=G.parentNode}G=I}a=w===-1||T===-1?null:{start:w,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(nf={focusedElem:e,selectionRange:a},xo=!1,at=n;at!==null;)if(n=at,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,at=e;else for(;at!==null;){switch(n=at,m=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,u=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ue=Xr(a.type,u,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ue,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(se){Me(a,a.return,se)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)sf(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,at=e;break}at=n.return}}function lp(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:cr(e,a),l&4&&is(5,a);break;case 1:if(cr(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(x){Me(a,a.return,x)}else{var u=Xr(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Me(a,a.return,x)}}l&64&&tp(a),l&512&&as(a,a.return);break;case 3:if(cr(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Hm(e,n)}catch(x){Me(a,a.return,x)}}break;case 27:n===null&&l&4&&ap(a);case 26:case 5:cr(e,a),n===null&&l&4&&rp(a),l&512&&as(a,a.return);break;case 12:cr(e,a);break;case 13:cr(e,a),l&4&&up(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=mw.bind(null,a),Mw(e,a))));break;case 22:if(l=a.memoizedState!==null||Pn,!l){n=n!==null&&n.memoizedState!==null||Ke,u=Pn;var m=Ke;Pn=l,(Ke=n)&&!m?ur(e,a,(a.subtreeFlags&8772)!==0):cr(e,a),Pn=u,Ke=m}break;case 30:break;default:cr(e,a)}}function op(e){var n=e.alternate;n!==null&&(e.alternate=null,op(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&uu(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ze=null,Nt=!1;function qn(e,n,a){for(a=a.child;a!==null;)cp(e,n,a),a=a.sibling}function cp(e,n,a){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Na,a)}catch{}switch(a.tag){case 26:Ke||pn(a,n),qn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ke||pn(a,n);var l=ze,u=Nt;pr(a.type)&&(ze=a.stateNode,Nt=!1),qn(e,n,a),ms(a.stateNode),ze=l,Nt=u;break;case 5:Ke||pn(a,n);case 6:if(l=ze,u=Nt,ze=null,qn(e,n,a),ze=l,Nt=u,ze!==null)if(Nt)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(a.stateNode)}catch(m){Me(a,n,m)}else try{ze.removeChild(a.stateNode)}catch(m){Me(a,n,m)}break;case 18:ze!==null&&(Nt?(e=ze,Zp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Es(e)):Zp(ze,a.stateNode));break;case 4:l=ze,u=Nt,ze=a.stateNode.containerInfo,Nt=!0,qn(e,n,a),ze=l,Nt=u;break;case 0:case 11:case 14:case 15:Ke||or(2,a,n),Ke||or(4,a,n),qn(e,n,a);break;case 1:Ke||(pn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&np(a,n,l)),qn(e,n,a);break;case 21:qn(e,n,a);break;case 22:Ke=(l=Ke)||a.memoizedState!==null,qn(e,n,a),Ke=l;break;default:qn(e,n,a)}}function up(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Es(e)}catch(a){Me(n,n.return,a)}}function sw(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new sp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new sp),n;default:throw Error(s(435,e.tag))}}function Md(e,n){var a=sw(e);n.forEach(function(l){var u=gw.bind(null,e,l);a.has(l)||(a.add(l),l.then(u,u))})}function jt(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],m=e,x=n,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(pr(w.type)){ze=w.stateNode,Nt=!1;break e}break;case 5:ze=w.stateNode,Nt=!1;break e;case 3:case 4:ze=w.stateNode.containerInfo,Nt=!0;break e}w=w.return}if(ze===null)throw Error(s(160));cp(m,x,u),ze=null,Nt=!1,m=u.alternate,m!==null&&(m.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)dp(n,e),n=n.sibling}var an=null;function dp(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jt(n,e),Lt(e),l&4&&(or(3,e,e.return),is(3,e),or(5,e,e.return));break;case 1:jt(n,e),Lt(e),l&512&&(Ke||a===null||pn(a,a.return)),l&64&&Pn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=an;if(jt(n,e),Lt(e),l&512&&(Ke||a===null||pn(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":m=u.getElementsByTagName("title")[0],(!m||m[Ra]||m[mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=u.createElement(l),u.head.insertBefore(m,u.querySelector("head > title"))),ht(m,l,a),m[mt]=e,rt(m),l=m;break e;case"link":var x=a1("link","href",u).get(l+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(m=x[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break t}}m=u.createElement(l),ht(m,l,a),u.head.appendChild(m);break;case"meta":if(x=a1("meta","content",u).get(l+(a.content||""))){for(w=0;w<x.length;w++)if(m=x[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break t}}m=u.createElement(l),ht(m,l,a),u.head.appendChild(m);break;default:throw Error(s(468,l))}m[mt]=e,rt(m),l=m}e.stateNode=l}else s1(u,e.type,e.stateNode);else e.stateNode=i1(u,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?s1(u,e.type,e.stateNode):i1(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ad(e,e.memoizedProps,a.memoizedProps)}break;case 27:jt(n,e),Lt(e),l&512&&(Ke||a===null||pn(a,a.return)),a!==null&&l&4&&Ad(e,e.memoizedProps,a.memoizedProps);break;case 5:if(jt(n,e),Lt(e),l&512&&(Ke||a===null||pn(a,a.return)),e.flags&32){u=e.stateNode;try{Si(u,"")}catch(I){Me(e,e.return,I)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,Ad(e,u,a!==null?a.memoizedProps:u)),l&1024&&(Dd=!0);break;case 6:if(jt(n,e),Lt(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(I){Me(e,e.return,I)}}break;case 3:if(_o=null,u=an,an=po(n.containerInfo),jt(n,e),an=u,Lt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Es(n.containerInfo)}catch(I){Me(e,e.return,I)}Dd&&(Dd=!1,fp(e));break;case 4:l=an,an=po(e.stateNode.containerInfo),jt(n,e),Lt(e),an=l;break;case 12:jt(n,e),Lt(e);break;case 13:jt(n,e),Lt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bd=hn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Md(e,l)));break;case 22:u=e.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,D=Pn,z=Ke;if(Pn=D||u,Ke=z||T,jt(n,e),Ke=z,Pn=D,Lt(e),l&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(a===null||T||Pn||Ke||$r(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){T=a=n;try{if(m=T.stateNode,u)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=T.stateNode;var G=T.memoizedProps.style,k=G!=null&&G.hasOwnProperty("display")?G.display:null;w.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(I){Me(T,T.return,I)}}}else if(n.tag===6){if(a===null){T=n;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(I){Me(T,T.return,I)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Md(e,a))));break;case 19:jt(n,e),Lt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Md(e,l)));break;case 30:break;case 21:break;default:jt(n,e),Lt(e)}}function Lt(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(ip(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var u=a.stateNode,m=Rd(e);no(e,m,u);break;case 5:var x=a.stateNode;a.flags&32&&(Si(x,""),a.flags&=-33);var w=Rd(e);no(e,w,x);break;case 3:case 4:var T=a.stateNode.containerInfo,D=Rd(e);Od(e,D,T);break;default:throw Error(s(161))}}catch(z){Me(e,e.return,z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function fp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;fp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function cr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)lp(e,n.alternate,n),n=n.sibling}function $r(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:or(4,n,n.return),$r(n);break;case 1:pn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&np(n,n.return,a),$r(n);break;case 27:ms(n.stateNode);case 26:case 5:pn(n,n.return),$r(n);break;case 22:n.memoizedState===null&&$r(n);break;case 30:$r(n);break;default:$r(n)}e=e.sibling}}function ur(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,u=e,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:ur(u,m,a),is(4,m);break;case 1:if(ur(u,m,a),l=m,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(D){Me(l,l.return,D)}if(l=m,u=l.updateQueue,u!==null){var w=l.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)qm(T[u],w)}catch(D){Me(l,l.return,D)}}a&&x&64&&tp(m),as(m,m.return);break;case 27:ap(m);case 26:case 5:ur(u,m,a),a&&l===null&&x&4&&rp(m),as(m,m.return);break;case 12:ur(u,m,a);break;case 13:ur(u,m,a),a&&x&4&&up(u,m);break;case 22:m.memoizedState===null&&ur(u,m,a),as(m,m.return);break;case 30:break;default:ur(u,m,a)}n=n.sibling}}function kd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Va(a))}function Id(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Va(e))}function yn(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hp(e,n,a,l),n=n.sibling}function hp(e,n,a,l){var u=n.flags;switch(n.tag){case 0:case 11:case 15:yn(e,n,a,l),u&2048&&is(9,n);break;case 1:yn(e,n,a,l);break;case 3:yn(e,n,a,l),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Va(e)));break;case 12:if(u&2048){yn(e,n,a,l),e=n.stateNode;try{var m=n.memoizedProps,x=m.id,w=m.onPostCommit;typeof w=="function"&&w(x,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Me(n,n.return,T)}}else yn(e,n,a,l);break;case 13:yn(e,n,a,l);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?yn(e,n,a,l):ss(e,n):m._visibility&2?yn(e,n,a,l):(m._visibility|=2,Gi(e,n,a,l,(n.subtreeFlags&10256)!==0)),u&2048&&kd(x,n);break;case 24:yn(e,n,a,l),u&2048&&Id(n.alternate,n);break;default:yn(e,n,a,l)}}function Gi(e,n,a,l,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var m=e,x=n,w=a,T=l,D=x.flags;switch(x.tag){case 0:case 11:case 15:Gi(m,x,w,T,u),is(8,x);break;case 23:break;case 22:var z=x.stateNode;x.memoizedState!==null?z._visibility&2?Gi(m,x,w,T,u):ss(m,x):(z._visibility|=2,Gi(m,x,w,T,u)),u&&D&2048&&kd(x.alternate,x);break;case 24:Gi(m,x,w,T,u),u&&D&2048&&Id(x.alternate,x);break;default:Gi(m,x,w,T,u)}n=n.sibling}}function ss(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,u=l.flags;switch(l.tag){case 22:ss(a,l),u&2048&&kd(l.alternate,l);break;case 24:ss(a,l),u&2048&&Id(l.alternate,l);break;default:ss(a,l)}n=n.sibling}}var ls=8192;function Vi(e){if(e.subtreeFlags&ls)for(e=e.child;e!==null;)mp(e),e=e.sibling}function mp(e){switch(e.tag){case 26:Vi(e),e.flags&ls&&e.memoizedState!==null&&Fw(an,e.memoizedState,e.memoizedProps);break;case 5:Vi(e);break;case 3:case 4:var n=an;an=po(e.stateNode.containerInfo),Vi(e),an=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=ls,ls=16777216,Vi(e),ls=n):Vi(e));break;default:Vi(e)}}function gp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function os(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];at=l,yp(l,e)}gp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pp(e),e=e.sibling}function pp(e){switch(e.tag){case 0:case 11:case 15:os(e),e.flags&2048&&or(9,e,e.return);break;case 3:os(e);break;case 12:os(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ro(e)):os(e);break;default:os(e)}}function ro(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];at=l,yp(l,e)}gp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:or(8,n,n.return),ro(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,ro(n));break;default:ro(n)}e=e.sibling}}function yp(e,n){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:or(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Va(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,at=l;else e:for(a=e;at!==null;){l=at;var u=l.sibling,m=l.return;if(op(l),l===a){at=null;break e}if(u!==null){u.return=m,at=u;break e}at=m}}}var lw={getCacheForType:function(e){var n=gt(Je),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},ow=typeof WeakMap=="function"?WeakMap:Map,Ne=0,Le=null,ye=null,be=0,Ce=0,Ut=null,dr=!1,Fi=!1,jd=!1,Hn=0,Ye=0,fr=0,Kr=0,Ld=0,Wt=0,Yi=0,cs=null,Ct=null,Ud=!1,Bd=0,io=1/0,ao=null,hr=null,ft=0,mr=null,Qi=null,Xi=0,zd=0,Pd=null,_p=null,us=0,qd=null;function Bt(){if((Ne&2)!==0&&be!==0)return be&-be;if(B.T!==null){var e=ji;return e!==0?e:Xd()}return I0()}function vp(){Wt===0&&(Wt=(be&536870912)===0||Se?O0():536870912);var e=Zt.current;return e!==null&&(e.flags|=32),Wt}function zt(e,n,a){(e===Le&&(Ce===2||Ce===9)||e.cancelPendingCommit!==null)&&($i(e,0),gr(e,be,Wt,!1)),Aa(e,a),((Ne&2)===0||e!==Le)&&(e===Le&&((Ne&2)===0&&(Kr|=a),Ye===4&&gr(e,be,Wt,!1)),_n(e))}function bp(e,n,a){if((Ne&6)!==0)throw Error(s(327));var l=!a&&(n&124)===0&&(n&e.expiredLanes)===0||Ca(e,n),u=l?dw(e,n):Vd(e,n,!0),m=l;do{if(u===0){Fi&&!l&&gr(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!cw(a)){u=Vd(e,n,!1),m=!1;continue}if(u===2){if(m=n,e.errorRecoveryDisabledLanes&m)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var w=e;u=cs;var T=w.current.memoizedState.isDehydrated;if(T&&($i(w,x).flags|=256),x=Vd(w,x,!1),x!==2){if(jd&&!T){w.errorRecoveryDisabledLanes|=m,Kr|=m,u=4;break e}m=Ct,Ct=u,m!==null&&(Ct===null?Ct=m:Ct.push.apply(Ct,m))}u=x}if(m=!1,u!==2)continue}}if(u===1){$i(e,0),gr(e,n,0,!0);break}e:{switch(l=e,m=u,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:gr(l,n,Wt,!dr);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(u=Bd+300-hn(),10<u)){if(gr(l,n,Wt,!dr),pl(l,0,!0)!==0)break e;l.timeoutHandle=$p(xp.bind(null,l,a,Ct,ao,Ud,n,Wt,Kr,Yi,dr,m,2,-0,0),u);break e}xp(l,a,Ct,ao,Ud,n,Wt,Kr,Yi,dr,m,0,-0,0)}}break}while(!0);_n(e)}function xp(e,n,a,l,u,m,x,w,T,D,z,G,k,I){if(e.timeoutHandle=-1,G=n.subtreeFlags,(G&8192||(G&16785408)===16785408)&&(ys={stylesheets:null,count:0,unsuspend:Vw},mp(n),G=Yw(),G!==null)){e.cancelPendingCommit=G(Ap.bind(null,e,n,m,a,l,u,x,w,T,z,1,k,I)),gr(e,m,x,!D);return}Ap(e,n,m,a,l,u,x,w,T)}function cw(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],m=u.getSnapshot;u=u.value;try{if(!kt(m(),u))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function gr(e,n,a,l){n&=~Ld,n&=~Kr,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var u=n;0<u;){var m=31-Mt(u),x=1<<m;l[m]=-1,u&=~x}a!==0&&M0(e,a,n)}function so(){return(Ne&6)===0?(ds(0),!1):!0}function Hd(){if(ye!==null){if(Ce===0)var e=ye.return;else e=ye,In=Vr=null,ad(e),qi=null,ts=0,e=ye;for(;e!==null;)ep(e.alternate,e),e=e.return;ye=null}}function $i(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Cw(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Hd(),Le=e,ye=a=Dn(e.current,null),be=n,Ce=0,Ut=null,dr=!1,Fi=Ca(e,n),jd=!1,Yi=Wt=Ld=Kr=fr=Ye=0,Ct=cs=null,Ud=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var u=31-Mt(l),m=1<<u;n|=e[u],l&=~m}return Hn=n,Al(),a}function Ep(e,n){de=null,B.H=Ql,n===Ya||n===Ul?(n=zm(),Ce=3):n===Lm?(n=zm(),Ce=4):Ce=n===Pg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ut=n,ye===null&&(Ye=1,Wl(e,Qt(n,e.current)))}function wp(){var e=B.H;return B.H=Ql,e===null?Ql:e}function Sp(){var e=B.A;return B.A=lw,e}function Gd(){Ye=4,dr||(be&4194048)!==be&&Zt.current!==null||(Fi=!0),(fr&134217727)===0&&(Kr&134217727)===0||Le===null||gr(Le,be,Wt,!1)}function Vd(e,n,a){var l=Ne;Ne|=2;var u=wp(),m=Sp();(Le!==e||be!==n)&&(ao=null,$i(e,n)),n=!1;var x=Ye;e:do try{if(Ce!==0&&ye!==null){var w=ye,T=Ut;switch(Ce){case 8:Hd(),x=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(n=!0);var D=Ce;if(Ce=0,Ut=null,Ki(e,w,T,D),a&&Fi){x=0;break e}break;default:D=Ce,Ce=0,Ut=null,Ki(e,w,T,D)}}uw(),x=Ye;break}catch(z){Ep(e,z)}while(!0);return n&&e.shellSuspendCounter++,In=Vr=null,Ne=l,B.H=u,B.A=m,ye===null&&(Le=null,be=0,Al()),x}function uw(){for(;ye!==null;)Tp(ye)}function dw(e,n){var a=Ne;Ne|=2;var l=wp(),u=Sp();Le!==e||be!==n?(ao=null,io=hn()+500,$i(e,n)):Fi=Ca(e,n);e:do try{if(Ce!==0&&ye!==null){n=ye;var m=Ut;t:switch(Ce){case 1:Ce=0,Ut=null,Ki(e,n,m,1);break;case 2:case 9:if(Um(m)){Ce=0,Ut=null,Np(n);break}n=function(){Ce!==2&&Ce!==9||Le!==e||(Ce=7),_n(e)},m.then(n,n);break e;case 3:Ce=7;break e;case 4:Ce=5;break e;case 7:Um(m)?(Ce=0,Ut=null,Np(n)):(Ce=0,Ut=null,Ki(e,n,m,7));break;case 5:var x=null;switch(ye.tag){case 26:x=ye.memoizedState;case 5:case 27:var w=ye;if(!x||l1(x)){Ce=0,Ut=null;var T=w.sibling;if(T!==null)ye=T;else{var D=w.return;D!==null?(ye=D,lo(D)):ye=null}break t}}Ce=0,Ut=null,Ki(e,n,m,5);break;case 6:Ce=0,Ut=null,Ki(e,n,m,6);break;case 8:Hd(),Ye=6;break e;default:throw Error(s(462))}}fw();break}catch(z){Ep(e,z)}while(!0);return In=Vr=null,B.H=l,B.A=u,Ne=a,ye!==null?0:(Le=null,be=0,Al(),Ye)}function fw(){for(;ye!==null&&!Ix();)Tp(ye)}function Tp(e){var n=Wg(e.alternate,e,Hn);e.memoizedProps=e.pendingProps,n===null?lo(e):ye=n}function Np(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Yg(a,n,n.pendingProps,n.type,void 0,be);break;case 11:n=Yg(a,n,n.pendingProps,n.type.render,n.ref,be);break;case 5:ad(n);default:ep(a,n),n=ye=Cm(n,Hn),n=Wg(a,n,Hn)}e.memoizedProps=e.pendingProps,n===null?lo(e):ye=n}function Ki(e,n,a,l){In=Vr=null,ad(n),qi=null,ts=0;var u=n.return;try{if(tw(e,u,n,a,be)){Ye=1,Wl(e,Qt(a,e.current)),ye=null;return}}catch(m){if(u!==null)throw ye=u,m;Ye=1,Wl(e,Qt(a,e.current)),ye=null;return}n.flags&32768?(Se||l===1?e=!0:Fi||(be&536870912)!==0?e=!1:(dr=e=!0,(l===2||l===9||l===3||l===6)&&(l=Zt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cp(n,e)):lo(n)}function lo(e){var n=e;do{if((n.flags&32768)!==0){Cp(n,dr);return}e=n.return;var a=rw(n.alternate,n,Hn);if(a!==null){ye=a;return}if(n=n.sibling,n!==null){ye=n;return}ye=n=e}while(n!==null);Ye===0&&(Ye=5)}function Cp(e,n){do{var a=iw(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);Ye=6,ye=null}function Ap(e,n,a,l,u,m,x,w,T){e.cancelPendingCommit=null;do oo();while(ft!==0);if((Ne&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=Iu,Vx(e,a,m,x,w,T),e===Le&&(ye=Le=null,be=0),Qi=n,mr=e,Xi=a,zd=m,Pd=u,_p=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,pw(hl,function(){return kp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,u=te.p,te.p=2,x=Ne,Ne|=4;try{aw(e,n,a)}finally{Ne=x,te.p=u,B.T=l}}ft=1,Rp(),Op(),Dp()}}function Rp(){if(ft===1){ft=0;var e=mr,n=Qi,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=te.p;te.p=2;var u=Ne;Ne|=4;try{dp(n,e);var m=nf,x=ym(e.containerInfo),w=m.focusedElem,T=m.selectionRange;if(x!==w&&w&&w.ownerDocument&&pm(w.ownerDocument.documentElement,w)){if(T!==null&&Ru(w)){var D=T.start,z=T.end;if(z===void 0&&(z=D),"selectionStart"in w)w.selectionStart=D,w.selectionEnd=Math.min(z,w.value.length);else{var G=w.ownerDocument||document,k=G&&G.defaultView||window;if(k.getSelection){var I=k.getSelection(),ue=w.textContent.length,se=Math.min(T.start,ue),De=T.end===void 0?se:Math.min(T.end,ue);!I.extend&&se>De&&(x=De,De=se,se=x);var R=gm(w,se),N=gm(w,De);if(R&&N&&(I.rangeCount!==1||I.anchorNode!==R.node||I.anchorOffset!==R.offset||I.focusNode!==N.node||I.focusOffset!==N.offset)){var O=G.createRange();O.setStart(R.node,R.offset),I.removeAllRanges(),se>De?(I.addRange(O),I.extend(N.node,N.offset)):(O.setEnd(N.node,N.offset),I.addRange(O))}}}}for(G=[],I=w;I=I.parentNode;)I.nodeType===1&&G.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<G.length;w++){var q=G[w];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}xo=!!tf,nf=tf=null}finally{Ne=u,te.p=l,B.T=a}}e.current=n,ft=2}}function Op(){if(ft===2){ft=0;var e=mr,n=Qi,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=te.p;te.p=2;var u=Ne;Ne|=4;try{lp(e,n.alternate,n)}finally{Ne=u,te.p=l,B.T=a}}ft=3}}function Dp(){if(ft===4||ft===3){ft=0,jx();var e=mr,n=Qi,a=Xi,l=_p;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,Qi=mr=null,Mp(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(hr=null),ou(a),n=n.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Na,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=B.T,u=te.p,te.p=2,B.T=null;try{for(var m=e.onRecoverableError,x=0;x<l.length;x++){var w=l[x];m(w.value,{componentStack:w.stack})}}finally{B.T=n,te.p=u}}(Xi&3)!==0&&oo(),_n(e),u=e.pendingLanes,(a&4194090)!==0&&(u&42)!==0?e===qd?us++:(us=0,qd=e):us=0,ds(0)}}function Mp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Va(n)))}function oo(e){return Rp(),Op(),Dp(),kp()}function kp(){if(ft!==5)return!1;var e=mr,n=zd;zd=0;var a=ou(Xi),l=B.T,u=te.p;try{te.p=32>a?32:a,B.T=null,a=Pd,Pd=null;var m=mr,x=Xi;if(ft=0,Qi=mr=null,Xi=0,(Ne&6)!==0)throw Error(s(331));var w=Ne;if(Ne|=4,pp(m.current),hp(m,m.current,x,a),Ne=w,ds(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Na,m)}catch{}return!0}finally{te.p=u,B.T=l,Mp(e,n)}}function Ip(e,n,a){n=Qt(a,n),n=vd(e.stateNode,n,2),e=ir(e,n,2),e!==null&&(Aa(e,2),_n(e))}function Me(e,n,a){if(e.tag===3)Ip(e,e,a);else for(;n!==null;){if(n.tag===3){Ip(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(hr===null||!hr.has(l))){e=Qt(a,e),a=Bg(2),l=ir(n,a,2),l!==null&&(zg(a,l,n,e),Aa(l,2),_n(l));break}}n=n.return}}function Fd(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new ow;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(a)||(jd=!0,u.add(a),e=hw.bind(null,e,n,a),n.then(e,e))}function hw(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Le===e&&(be&a)===a&&(Ye===4||Ye===3&&(be&62914560)===be&&300>hn()-Bd?(Ne&2)===0&&$i(e,0):Ld|=a,Yi===be&&(Yi=0)),_n(e)}function jp(e,n){n===0&&(n=D0()),e=Di(e,n),e!==null&&(Aa(e,n),_n(e))}function mw(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),jp(e,a)}function gw(e,n){var a=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),jp(e,a)}function pw(e,n){return iu(e,n)}var co=null,Zi=null,Yd=!1,uo=!1,Qd=!1,Zr=0;function _n(e){e!==Zi&&e.next===null&&(Zi===null?co=Zi=e:Zi=Zi.next=e),uo=!0,Yd||(Yd=!0,_w())}function ds(e,n){if(!Qd&&uo){Qd=!0;do for(var a=!1,l=co;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var m=0;else{var x=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-Mt(42|e)+1)-1,m&=u&~(x&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,zp(l,m))}else m=be,m=pl(l,l===Le?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Ca(l,m)||(a=!0,zp(l,m));l=l.next}while(a);Qd=!1}}function yw(){Lp()}function Lp(){uo=Yd=!1;var e=0;Zr!==0&&(Nw()&&(e=Zr),Zr=0);for(var n=hn(),a=null,l=co;l!==null;){var u=l.next,m=Up(l,n);m===0?(l.next=null,a===null?co=u:a.next=u,u===null&&(Zi=a)):(a=l,(e!==0||(m&3)!==0)&&(uo=!0)),l=u}ds(e)}function Up(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var x=31-Mt(m),w=1<<x,T=u[x];T===-1?((w&a)===0||(w&l)!==0)&&(u[x]=Gx(w,n)):T<=n&&(e.expiredLanes|=w),m&=~w}if(n=Le,a=be,a=pl(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Ce===2||Ce===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&au(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ca(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&au(l),ou(a)){case 2:case 8:a=A0;break;case 32:a=hl;break;case 268435456:a=R0;break;default:a=hl}return l=Bp.bind(null,e),a=iu(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&au(l),e.callbackPriority=2,e.callbackNode=null,2}function Bp(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(oo()&&e.callbackNode!==a)return null;var l=be;return l=pl(e,e===Le?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(bp(e,l,n),Up(e,hn()),e.callbackNode!=null&&e.callbackNode===a?Bp.bind(null,e):null)}function zp(e,n){if(oo())return null;bp(e,n,!0)}function _w(){Aw(function(){(Ne&6)!==0?iu(C0,yw):Lp()})}function Xd(){return Zr===0&&(Zr=O0()),Zr}function Pp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:xl(""+e)}function qp(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function vw(e,n,a,l,u){if(n==="submit"&&a&&a.stateNode===u){var m=Pp((u[wt]||null).action),x=l.submitter;x&&(n=(n=x[wt]||null)?Pp(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var w=new Tl("action","action",null,l,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zr!==0){var T=x?qp(u,x):new FormData(u);md(a,{pending:!0,data:T,method:u.method,action:m},null,T)}}else typeof m=="function"&&(w.preventDefault(),T=x?qp(u,x):new FormData(u),md(a,{pending:!0,data:T,method:u.method,action:m},m,T))},currentTarget:u}]})}}for(var $d=0;$d<ku.length;$d++){var Kd=ku[$d],bw=Kd.toLowerCase(),xw=Kd[0].toUpperCase()+Kd.slice(1);rn(bw,"on"+xw)}rn(bm,"onAnimationEnd"),rn(xm,"onAnimationIteration"),rn(Em,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(BE,"onTransitionRun"),rn(zE,"onTransitionStart"),rn(PE,"onTransitionCancel"),rn(wm,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fs));function Hp(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],u=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var x=l.length-1;0<=x;x--){var w=l[x],T=w.instance,D=w.currentTarget;if(w=w.listener,T!==m&&u.isPropagationStopped())break e;m=w,u.currentTarget=D;try{m(u)}catch(z){Zl(z)}u.currentTarget=null,m=T}else for(x=0;x<l.length;x++){if(w=l[x],T=w.instance,D=w.currentTarget,w=w.listener,T!==m&&u.isPropagationStopped())break e;m=w,u.currentTarget=D;try{m(u)}catch(z){Zl(z)}u.currentTarget=null,m=T}}}}function _e(e,n){var a=n[cu];a===void 0&&(a=n[cu]=new Set);var l=e+"__bubble";a.has(l)||(Gp(n,e,2,!1),a.add(l))}function Zd(e,n,a){var l=0;n&&(l|=4),Gp(a,e,l,n)}var fo="_reactListening"+Math.random().toString(36).slice(2);function Wd(e){if(!e[fo]){e[fo]=!0,L0.forEach(function(a){a!=="selectionchange"&&(Ew.has(a)||Zd(a,!1,e),Zd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[fo]||(n[fo]=!0,Zd("selectionchange",!1,n))}}function Gp(e,n,a,l){switch(h1(n)){case 2:var u=$w;break;case 8:u=Kw;break;default:u=hf}a=u.bind(null,n,a,e),u=void 0,!bu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,a,{capture:!0,passive:u}):e.addEventListener(n,a,!0):u!==void 0?e.addEventListener(n,a,{passive:u}):e.addEventListener(n,a,!1)}function Jd(e,n,a,l,u){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===u)break;if(x===4)for(x=l.return;x!==null;){var T=x.tag;if((T===3||T===4)&&x.stateNode.containerInfo===u)return;x=x.return}for(;w!==null;){if(x=_i(w),x===null)return;if(T=x.tag,T===5||T===6||T===26||T===27){l=m=x;continue e}w=w.parentNode}}l=l.return}K0(function(){var D=m,z=_u(a),G=[];e:{var k=Sm.get(e);if(k!==void 0){var I=Tl,ue=e;switch(e){case"keypress":if(wl(a)===0)break e;case"keydown":case"keyup":I=pE;break;case"focusin":ue="focus",I=Su;break;case"focusout":ue="blur",I=Su;break;case"beforeblur":case"afterblur":I=Su;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=J0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=vE;break;case bm:case xm:case Em:I=lE;break;case wm:I=xE;break;case"scroll":case"scrollend":I=nE;break;case"wheel":I=wE;break;case"copy":case"cut":case"paste":I=cE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=tm;break;case"toggle":case"beforetoggle":I=TE}var se=(n&4)!==0,De=!se&&(e==="scroll"||e==="scrollend"),R=se?k!==null?k+"Capture":null:k;se=[];for(var N=D,O;N!==null;){var q=N;if(O=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||O===null||R===null||(q=Da(N,R),q!=null&&se.push(hs(N,q,O))),De)break;N=N.return}0<se.length&&(k=new I(k,ue,null,a,z),G.push({event:k,listeners:se}))}}if((n&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",k&&a!==yu&&(ue=a.relatedTarget||a.fromElement)&&(_i(ue)||ue[yi]))break e;if((I||k)&&(k=z.window===z?z:(k=z.ownerDocument)?k.defaultView||k.parentWindow:window,I?(ue=a.relatedTarget||a.toElement,I=D,ue=ue?_i(ue):null,ue!==null&&(De=c(ue),se=ue.tag,ue!==De||se!==5&&se!==27&&se!==6)&&(ue=null)):(I=null,ue=D),I!==ue)){if(se=J0,q="onMouseLeave",R="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(se=tm,q="onPointerLeave",R="onPointerEnter",N="pointer"),De=I==null?k:Oa(I),O=ue==null?k:Oa(ue),k=new se(q,N+"leave",I,a,z),k.target=De,k.relatedTarget=O,q=null,_i(z)===D&&(se=new se(R,N+"enter",ue,a,z),se.target=O,se.relatedTarget=De,q=se),De=q,I&&ue)t:{for(se=I,R=ue,N=0,O=se;O;O=Wi(O))N++;for(O=0,q=R;q;q=Wi(q))O++;for(;0<N-O;)se=Wi(se),N--;for(;0<O-N;)R=Wi(R),O--;for(;N--;){if(se===R||R!==null&&se===R.alternate)break t;se=Wi(se),R=Wi(R)}se=null}else se=null;I!==null&&Vp(G,k,I,se,!1),ue!==null&&De!==null&&Vp(G,De,ue,se,!0)}}e:{if(k=D?Oa(D):window,I=k.nodeName&&k.nodeName.toLowerCase(),I==="select"||I==="input"&&k.type==="file")var ne=cm;else if(lm(k))if(um)ne=jE;else{ne=kE;var me=ME}else I=k.nodeName,!I||I.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?D&&pu(D.elementType)&&(ne=cm):ne=IE;if(ne&&(ne=ne(e,D))){om(G,ne,a,z);break e}me&&me(e,k,D),e==="focusout"&&D&&k.type==="number"&&D.memoizedProps.value!=null&&gu(k,"number",k.value)}switch(me=D?Oa(D):window,e){case"focusin":(lm(me)||me.contentEditable==="true")&&(Ai=me,Ou=D,za=null);break;case"focusout":za=Ou=Ai=null;break;case"mousedown":Du=!0;break;case"contextmenu":case"mouseup":case"dragend":Du=!1,_m(G,a,z);break;case"selectionchange":if(UE)break;case"keydown":case"keyup":_m(G,a,z)}var ie;if(Nu)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Ci?am(e,a)&&(oe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(oe="onCompositionStart");oe&&(nm&&a.locale!=="ko"&&(Ci||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Ci&&(ie=Z0()):(er=z,xu="value"in er?er.value:er.textContent,Ci=!0)),me=ho(D,oe),0<me.length&&(oe=new em(oe,e,null,a,z),G.push({event:oe,listeners:me}),ie?oe.data=ie:(ie=sm(a),ie!==null&&(oe.data=ie)))),(ie=CE?AE(e,a):RE(e,a))&&(oe=ho(D,"onBeforeInput"),0<oe.length&&(me=new em("onBeforeInput","beforeinput",null,a,z),G.push({event:me,listeners:oe}),me.data=ie)),vw(G,e,D,a,z)}Hp(G,n)})}function hs(e,n,a){return{instance:e,listener:n,currentTarget:a}}function ho(e,n){for(var a=n+"Capture",l=[];e!==null;){var u=e,m=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||m===null||(u=Da(e,a),u!=null&&l.unshift(hs(e,u,m)),u=Da(e,n),u!=null&&l.push(hs(e,u,m))),e.tag===3)return l;e=e.return}return[]}function Wi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vp(e,n,a,l,u){for(var m=n._reactName,x=[];a!==null&&a!==l;){var w=a,T=w.alternate,D=w.stateNode;if(w=w.tag,T!==null&&T===l)break;w!==5&&w!==26&&w!==27||D===null||(T=D,u?(D=Da(a,m),D!=null&&x.unshift(hs(a,D,T))):u||(D=Da(a,m),D!=null&&x.push(hs(a,D,T)))),a=a.return}x.length!==0&&e.push({event:n,listeners:x})}var ww=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function Fp(e){return(typeof e=="string"?e:""+e).replace(ww,`
`).replace(Sw,"")}function Yp(e,n){return n=Fp(n),Fp(e)===n}function mo(){}function Oe(e,n,a,l,u,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Si(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Si(e,""+l);break;case"className":_l(e,"class",l);break;case"tabIndex":_l(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_l(e,a,l);break;case"style":X0(e,l,m);break;case"data":if(n!=="object"){_l(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=xl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&Oe(e,n,"name",u.name,u,null),Oe(e,n,"formEncType",u.formEncType,u,null),Oe(e,n,"formMethod",u.formMethod,u,null),Oe(e,n,"formTarget",u.formTarget,u,null)):(Oe(e,n,"encType",u.encType,u,null),Oe(e,n,"method",u.method,u,null),Oe(e,n,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=xl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=mo);break;case"onScroll":l!=null&&_e("scroll",e);break;case"onScrollEnd":l!=null&&_e("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=xl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":_e("beforetoggle",e),_e("toggle",e),yl(e,"popover",l);break;case"xlinkActuate":Rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eE.get(a)||a,yl(e,a,l))}}function ef(e,n,a,l,u,m){switch(a){case"style":X0(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Si(e,l):(typeof l=="number"||typeof l=="bigint")&&Si(e,""+l);break;case"onScroll":l!=null&&_e("scroll",e);break;case"onScrollEnd":l!=null&&_e("scrollend",e);break;case"onClick":l!=null&&(e.onclick=mo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!U0.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),n=a.slice(2,u?a.length-7:void 0),m=e[wt]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,u),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,u);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):yl(e,a,l)}}}function ht(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",e),_e("load",e);var l=!1,u=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Oe(e,n,m,x,a,null)}}u&&Oe(e,n,"srcSet",a.srcSet,a,null),l&&Oe(e,n,"src",a.src,a,null);return;case"input":_e("invalid",e);var w=m=x=u=null,T=null,D=null;for(l in a)if(a.hasOwnProperty(l)){var z=a[l];if(z!=null)switch(l){case"name":u=z;break;case"type":x=z;break;case"checked":T=z;break;case"defaultChecked":D=z;break;case"value":m=z;break;case"defaultValue":w=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:Oe(e,n,l,z,a,null)}}V0(e,m,w,T,D,x,u,!1),vl(e);return;case"select":_e("invalid",e),l=x=m=null;for(u in a)if(a.hasOwnProperty(u)&&(w=a[u],w!=null))switch(u){case"value":m=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:Oe(e,n,u,w,a,null)}n=m,a=x,e.multiple=!!l,n!=null?wi(e,!!l,n,!1):a!=null&&wi(e,!!l,a,!0);return;case"textarea":_e("invalid",e),m=u=l=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":u=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Oe(e,n,x,w,a,null)}Y0(e,l,u,m),vl(e);return;case"option":for(T in a)if(a.hasOwnProperty(T)&&(l=a[T],l!=null))switch(T){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Oe(e,n,T,l,a,null)}return;case"dialog":_e("beforetoggle",e),_e("toggle",e),_e("cancel",e),_e("close",e);break;case"iframe":case"object":_e("load",e);break;case"video":case"audio":for(l=0;l<fs.length;l++)_e(fs[l],e);break;case"image":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"embed":case"source":case"link":_e("error",e),_e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Oe(e,n,D,l,a,null)}return;default:if(pu(n)){for(z in a)a.hasOwnProperty(z)&&(l=a[z],l!==void 0&&ef(e,n,z,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Oe(e,n,w,l,a,null))}function Tw(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,m=null,x=null,w=null,T=null,D=null,z=null;for(I in a){var G=a[I];if(a.hasOwnProperty(I)&&G!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":T=G;default:l.hasOwnProperty(I)||Oe(e,n,I,null,l,G)}}for(var k in l){var I=l[k];if(G=a[k],l.hasOwnProperty(k)&&(I!=null||G!=null))switch(k){case"type":m=I;break;case"name":u=I;break;case"checked":D=I;break;case"defaultChecked":z=I;break;case"value":x=I;break;case"defaultValue":w=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,n));break;default:I!==G&&Oe(e,n,k,I,l,G)}}mu(e,x,w,T,D,z,m,u);return;case"select":I=x=w=k=null;for(m in a)if(T=a[m],a.hasOwnProperty(m)&&T!=null)switch(m){case"value":break;case"multiple":I=T;default:l.hasOwnProperty(m)||Oe(e,n,m,null,l,T)}for(u in l)if(m=l[u],T=a[u],l.hasOwnProperty(u)&&(m!=null||T!=null))switch(u){case"value":k=m;break;case"defaultValue":w=m;break;case"multiple":x=m;default:m!==T&&Oe(e,n,u,m,l,T)}n=w,a=x,l=I,k!=null?wi(e,!!a,k,!1):!!l!=!!a&&(n!=null?wi(e,!!a,n,!0):wi(e,!!a,a?[]:"",!1));return;case"textarea":I=k=null;for(w in a)if(u=a[w],a.hasOwnProperty(w)&&u!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Oe(e,n,w,null,l,u)}for(x in l)if(u=l[x],m=a[x],l.hasOwnProperty(x)&&(u!=null||m!=null))switch(x){case"value":k=u;break;case"defaultValue":I=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==m&&Oe(e,n,x,u,l,m)}F0(e,k,I);return;case"option":for(var ue in a)if(k=a[ue],a.hasOwnProperty(ue)&&k!=null&&!l.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:Oe(e,n,ue,null,l,k)}for(T in l)if(k=l[T],I=a[T],l.hasOwnProperty(T)&&k!==I&&(k!=null||I!=null))switch(T){case"selected":e.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Oe(e,n,T,k,l,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in a)k=a[se],a.hasOwnProperty(se)&&k!=null&&!l.hasOwnProperty(se)&&Oe(e,n,se,null,l,k);for(D in l)if(k=l[D],I=a[D],l.hasOwnProperty(D)&&k!==I&&(k!=null||I!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(137,n));break;default:Oe(e,n,D,k,l,I)}return;default:if(pu(n)){for(var De in a)k=a[De],a.hasOwnProperty(De)&&k!==void 0&&!l.hasOwnProperty(De)&&ef(e,n,De,void 0,l,k);for(z in l)k=l[z],I=a[z],!l.hasOwnProperty(z)||k===I||k===void 0&&I===void 0||ef(e,n,z,k,l,I);return}}for(var R in a)k=a[R],a.hasOwnProperty(R)&&k!=null&&!l.hasOwnProperty(R)&&Oe(e,n,R,null,l,k);for(G in l)k=l[G],I=a[G],!l.hasOwnProperty(G)||k===I||k==null&&I==null||Oe(e,n,G,k,l,I)}var tf=null,nf=null;function go(e){return e.nodeType===9?e:e.ownerDocument}function Qp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function rf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var af=null;function Nw(){var e=window.event;return e&&e.type==="popstate"?e===af?!1:(af=e,!0):(af=null,!1)}var $p=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Kp=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof Kp<"u"?function(e){return Kp.resolve(null).then(e).catch(Rw)}:$p;function Rw(e){setTimeout(function(){throw e})}function pr(e){return e==="head"}function Zp(e,n){var a=n,l=0,u=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var x=e.ownerDocument;if(a&1&&ms(x.documentElement),a&2&&ms(x.body),a&4)for(a=x.head,ms(a),x=a.firstChild;x;){var w=x.nextSibling,T=x.nodeName;x[Ra]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=w}}if(u===0){e.removeChild(m),Es(n);return}u--}else a==="$"||a==="$?"||a==="$!"?u++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);Es(n)}function sf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sf(a),uu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ow(e,n,a,l){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ra])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function Dw(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=sn(e.nextSibling),e===null))return null;return e}function lf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Mw(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function sn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var of=null;function Wp(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Jp(e,n,a){switch(n=go(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ms(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);uu(e)}var Jt=new Map,e1=new Set;function po(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gn=te.d;te.d={f:kw,r:Iw,D:jw,C:Lw,L:Uw,m:Bw,X:Pw,S:zw,M:qw};function kw(){var e=Gn.f(),n=so();return e||n}function Iw(e){var n=vi(e);n!==null&&n.tag===5&&n.type==="form"?bg(n):Gn.r(e)}var Ji=typeof document>"u"?null:document;function t1(e,n,a){var l=Ji;if(l&&typeof n=="string"&&n){var u=Yt(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),e1.has(u)||(e1.add(u),e={rel:e,crossOrigin:a,href:n},l.querySelector(u)===null&&(n=l.createElement("link"),ht(n,"link",e),rt(n),l.head.appendChild(n)))}}function jw(e){Gn.D(e),t1("dns-prefetch",e,null)}function Lw(e,n){Gn.C(e,n),t1("preconnect",e,n)}function Uw(e,n,a){Gn.L(e,n,a);var l=Ji;if(l&&e&&n){var u='link[rel="preload"][as="'+Yt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+Yt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+Yt(a.imageSizes)+'"]')):u+='[href="'+Yt(e)+'"]';var m=u;switch(n){case"style":m=ea(e);break;case"script":m=ta(e)}Jt.has(m)||(e=h({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Jt.set(m,e),l.querySelector(u)!==null||n==="style"&&l.querySelector(gs(m))||n==="script"&&l.querySelector(ps(m))||(n=l.createElement("link"),ht(n,"link",e),rt(n),l.head.appendChild(n)))}}function Bw(e,n){Gn.m(e,n);var a=Ji;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Yt(l)+'"][href="'+Yt(e)+'"]',m=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ta(e)}if(!Jt.has(m)&&(e=h({rel:"modulepreload",href:e},n),Jt.set(m,e),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ps(m)))return}l=a.createElement("link"),ht(l,"link",e),rt(l),a.head.appendChild(l)}}}function zw(e,n,a){Gn.S(e,n,a);var l=Ji;if(l&&e){var u=bi(l).hoistableStyles,m=ea(e);n=n||"default";var x=u.get(m);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(gs(m)))w.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Jt.get(m))&&cf(e,a);var T=x=l.createElement("link");rt(T),ht(T,"link",e),T._p=new Promise(function(D,z){T.onload=D,T.onerror=z}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,yo(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:w},u.set(m,x)}}}function Pw(e,n){Gn.X(e,n);var a=Ji;if(a&&e){var l=bi(a).hoistableScripts,u=ta(e),m=l.get(u);m||(m=a.querySelector(ps(u)),m||(e=h({src:e,async:!0},n),(n=Jt.get(u))&&uf(e,n),m=a.createElement("script"),rt(m),ht(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(u,m))}}function qw(e,n){Gn.M(e,n);var a=Ji;if(a&&e){var l=bi(a).hoistableScripts,u=ta(e),m=l.get(u);m||(m=a.querySelector(ps(u)),m||(e=h({src:e,async:!0,type:"module"},n),(n=Jt.get(u))&&uf(e,n),m=a.createElement("script"),rt(m),ht(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(u,m))}}function n1(e,n,a,l){var u=(u=Ie.current)?po(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ea(a.href),a=bi(u).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ea(a.href);var m=bi(u).hoistableStyles,x=m.get(e);if(x||(u=u.ownerDocument||u,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,x),(m=u.querySelector(gs(e)))&&!m._p&&(x.instance=m,x.state.loading=5),Jt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jt.set(e,a),m||Hw(u,e,a,x.state))),n&&l===null)throw Error(s(528,""));return x}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ta(a),a=bi(u).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ea(e){return'href="'+Yt(e)+'"'}function gs(e){return'link[rel="stylesheet"]['+e+"]"}function r1(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Hw(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),ht(n,"link",a),rt(n),e.head.appendChild(n))}function ta(e){return'[src="'+Yt(e)+'"]'}function ps(e){return"script[async]"+e}function i1(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Yt(a.href)+'"]');if(l)return n.instance=l,rt(l),l;var u=h({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),ht(l,"style",u),yo(l,a.precedence,e),n.instance=l;case"stylesheet":u=ea(a.href);var m=e.querySelector(gs(u));if(m)return n.state.loading|=4,n.instance=m,rt(m),m;l=r1(a),(u=Jt.get(u))&&cf(l,u),m=(e.ownerDocument||e).createElement("link"),rt(m);var x=m;return x._p=new Promise(function(w,T){x.onload=w,x.onerror=T}),ht(m,"link",l),n.state.loading|=4,yo(m,a.precedence,e),n.instance=m;case"script":return m=ta(a.src),(u=e.querySelector(ps(m)))?(n.instance=u,rt(u),u):(l=a,(u=Jt.get(m))&&(l=h({},a),uf(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),rt(u),ht(u,"link",l),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,yo(l,a.precedence,e));return n.instance}function yo(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,m=u,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===n)m=w;else if(m!==u)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function cf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function uf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var _o=null;function a1(e,n,a){if(_o===null){var l=new Map,u=_o=new Map;u.set(a,l)}else u=_o,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var m=a[u];if(!(m[Ra]||m[mt]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=e+x;var w=l.get(x);w?w.push(m):l.set(x,[m])}}return l}function s1(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Gw(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function l1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ys=null;function Vw(){}function Fw(e,n,a){if(ys===null)throw Error(s(475));var l=ys;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=ea(a.href),m=e.querySelector(gs(u));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=vo.bind(l),e.then(l,l)),n.state.loading|=4,n.instance=m,rt(m);return}m=e.ownerDocument||e,a=r1(a),(u=Jt.get(u))&&cf(a,u),m=m.createElement("link"),rt(m);var x=m;x._p=new Promise(function(w,T){x.onload=w,x.onerror=T}),ht(m,"link",a),n.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=vo.bind(l),e.addEventListener("load",n),e.addEventListener("error",n))}}function Yw(){if(ys===null)throw Error(s(475));var e=ys;return e.stylesheets&&e.count===0&&df(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&df(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function vo(){if(this.count--,this.count===0){if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var bo=null;function df(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,bo=new Map,n.forEach(Qw,e),bo=null,vo.call(e))}function Qw(e,n){if(!(n.state.loading&4)){var a=bo.get(e);if(a)var l=a.get(null);else{a=new Map,bo.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<u.length;m++){var x=u[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}u=n.instance,x=u.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,u),a.set(x,u),this.count++,l=vo.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),m?m.parentNode.insertBefore(u,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var _s={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Xw(e,n,a,l,u,m,x,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=su(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.hiddenUpdates=su(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function o1(e,n,a,l,u,m,x,w,T,D,z,G){return e=new Xw(e,n,a,x,w,T,D,G),n=1,m===!0&&(n|=24),m=It(3,null,null,n),e.current=m,m.stateNode=e,n=Fu(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},$u(m),e}function c1(e){return e?(e=Mi,e):Mi}function u1(e,n,a,l,u,m){u=c1(u),l.context===null?l.context=u:l.pendingContext=u,l=rr(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ir(e,l,n),a!==null&&(zt(a,e,n),Xa(a,e,n))}function d1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function ff(e,n){d1(e,n),(e=e.alternate)&&d1(e,n)}function f1(e){if(e.tag===13){var n=Di(e,67108864);n!==null&&zt(n,e,67108864),ff(e,67108864)}}var xo=!0;function $w(e,n,a,l){var u=B.T;B.T=null;var m=te.p;try{te.p=2,hf(e,n,a,l)}finally{te.p=m,B.T=u}}function Kw(e,n,a,l){var u=B.T;B.T=null;var m=te.p;try{te.p=8,hf(e,n,a,l)}finally{te.p=m,B.T=u}}function hf(e,n,a,l){if(xo){var u=mf(l);if(u===null)Jd(e,n,l,Eo,a),m1(e,l);else if(Ww(u,e,n,a,l))l.stopPropagation();else if(m1(e,l),n&4&&-1<Zw.indexOf(e)){for(;u!==null;){var m=vi(u);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Ir(m.pendingLanes);if(x!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var T=1<<31-Mt(x);w.entanglements[1]|=T,x&=~T}_n(m),(Ne&6)===0&&(io=hn()+500,ds(0))}}break;case 13:w=Di(m,2),w!==null&&zt(w,m,2),so(),ff(m,2)}if(m=mf(l),m===null&&Jd(e,n,l,Eo,a),m===u)break;u=m}u!==null&&l.stopPropagation()}else Jd(e,n,l,null,a)}}function mf(e){return e=_u(e),gf(e)}var Eo=null;function gf(e){if(Eo=null,e=_i(e),e!==null){var n=c(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Eo=e,null}function h1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lx()){case C0:return 2;case A0:return 8;case hl:case Ux:return 32;case R0:return 268435456;default:return 32}default:return 32}}var pf=!1,yr=null,_r=null,vr=null,vs=new Map,bs=new Map,br=[],Zw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m1(e,n){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":vs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(n.pointerId)}}function xs(e,n,a,l,u,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[u]},n!==null&&(n=vi(n),n!==null&&f1(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function Ww(e,n,a,l,u){switch(n){case"focusin":return yr=xs(yr,e,n,a,l,u),!0;case"dragenter":return _r=xs(_r,e,n,a,l,u),!0;case"mouseover":return vr=xs(vr,e,n,a,l,u),!0;case"pointerover":var m=u.pointerId;return vs.set(m,xs(vs.get(m)||null,e,n,a,l,u)),!0;case"gotpointercapture":return m=u.pointerId,bs.set(m,xs(bs.get(m)||null,e,n,a,l,u)),!0}return!1}function g1(e){var n=_i(e.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,Fx(e.priority,function(){if(a.tag===13){var l=Bt();l=lu(l);var u=Di(a,l);u!==null&&zt(u,a,l),ff(a,l)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=mf(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);yu=l,a.target.dispatchEvent(l),yu=null}else return n=vi(a),n!==null&&f1(n),e.blockedOn=a,!1;n.shift()}return!0}function p1(e,n,a){wo(e)&&a.delete(n)}function Jw(){pf=!1,yr!==null&&wo(yr)&&(yr=null),_r!==null&&wo(_r)&&(_r=null),vr!==null&&wo(vr)&&(vr=null),vs.forEach(p1),bs.forEach(p1)}function So(e,n){e.blockedOn===n&&(e.blockedOn=null,pf||(pf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Jw)))}var To=null;function y1(e){To!==e&&(To=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){To===e&&(To=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],u=e[n+2];if(typeof l!="function"){if(gf(l||a)===null)continue;break}var m=vi(a);m!==null&&(e.splice(n,3),n-=3,md(m,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function Es(e){function n(T){return So(T,e)}yr!==null&&So(yr,e),_r!==null&&So(_r,e),vr!==null&&So(vr,e),vs.forEach(n),bs.forEach(n);for(var a=0;a<br.length;a++){var l=br[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<br.length&&(a=br[0],a.blockedOn===null);)g1(a),a.blockedOn===null&&br.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],m=a[l+1],x=u[wt]||null;if(typeof m=="function")x||y1(a);else if(x){var w=null;if(m&&m.hasAttribute("formAction")){if(u=m,x=m[wt]||null)w=x.formAction;else if(gf(u)!==null)continue}else w=x.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),y1(a)}}}function yf(e){this._internalRoot=e}No.prototype.render=yf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=Bt();u1(a,l,e,n,null,null)},No.prototype.unmount=yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;u1(e.current,2,null,e,null,null),so(),n[yi]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var n=I0();e={blockedOn:null,target:e,priority:n};for(var a=0;a<br.length&&n!==0&&n<br[a].priority;a++);br.splice(a,0,e),a===0&&g1(e)}};var _1=t.version;if(_1!=="19.1.1")throw Error(s(527,_1,"19.1.1"));te.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(n),e=e!==null?d(e):null,e=e===null?null:e.stateNode,e};var eS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Co.isDisabled&&Co.supportsFiber)try{Na=Co.inject(eS),Dt=Co}catch{}}return Ss.createRoot=function(e,n){if(!o(e))throw Error(s(299));var a=!1,l="",u=Ig,m=jg,x=Lg,w=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(w=n.unstable_transitionCallbacks)),n=o1(e,1,!1,null,null,a,l,u,m,x,w,null),e[yi]=n.current,Wd(e),new yf(n)},Ss.hydrateRoot=function(e,n,a){if(!o(e))throw Error(s(299));var l=!1,u="",m=Ig,x=jg,w=Lg,T=null,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(T=a.unstable_transitionCallbacks),a.formState!==void 0&&(D=a.formState)),n=o1(e,1,!0,n,a??null,l,u,m,x,w,T,D),n.context=c1(null),a=n.current,l=Bt(),l=lu(l),u=rr(l),u.callback=null,ir(a,u,l),a=l,n.current.lanes=a,Aa(n,a),_n(n),e[yi]=n.current,Wd(e),new No(n)},Ss.version="19.1.1",Ss}var N1;function LS(){if(N1)return xf.exports;N1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),xf.exports=jS(),xf.exports}var US=LS();const BS="modulepreload",zS=function(r){return"/"+r},C1={},ve=function(t,i,s){let o=Promise.resolve();if(i&&i.length>0){let p=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");o=p(i.map(d=>{if(d=zS(d),d in C1)return;C1[d]=!0;const h=d.endsWith(".css"),_=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":BS,h||(y.as="script"),y.crossOrigin="",y.href=d,g&&y.setAttribute("nonce",g),document.head.appendChild(y),h)return new Promise((b,E)=>{y.addEventListener("load",b),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&c(g.reason);return t().catch(c)})};class A1 extends j.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,i){console.error("ErrorBoundary caught an error:",t,i),this.setState({error:t,errorInfo:i}),this.props.onError?.(t,i)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{className:"text-center",children:[v.jsx(lS,{className:"mx-auto h-12 w-12 text-red-500"}),v.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Something went wrong"}),v.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"We're sorry, but something unexpected happened."}),!1]}),v.jsx("div",{children:v.jsxs("button",{onClick:this.handleRetry,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[v.jsx(oS,{className:"w-4 h-4 mr-2"}),"Try Again"]})})]})}):this.props.children}}function pt(...r){return fS(hS(r))}const PS={default:["bg-white border border-secondary-200 shadow-sm","dark:bg-secondary-900 dark:border-secondary-700"],outlined:["bg-white border-2 border-secondary-200 shadow-none","dark:bg-secondary-900 dark:border-secondary-700"],elevated:["bg-white border-0 shadow-lg","dark:bg-secondary-900"],filled:["bg-secondary-50 border border-secondary-200 shadow-none","dark:bg-secondary-800 dark:border-secondary-700"],glass:["bg-white/70 backdrop-blur-md border border-white/20 shadow-lg shadow-black/5","dark:bg-secondary-900/70 dark:border-secondary-700/30 dark:shadow-black/20"],neu:["bg-secondary-50 border-0","shadow-[8px_8px_16px_#d1d5db,-8px_-8px_16px_#ffffff]","dark:bg-secondary-800","dark:shadow-[8px_8px_16px_#111827,-8px_-8px_16px_#374151]"]},qS={sm:"p-4",md:"p-6",lg:"p-8"},Qn=wn.forwardRef(({className:r,variant:t="default",size:i="md",hoverable:s=!1,interactive:o=!1,children:c,...f},g)=>v.jsx("div",{ref:g,className:pt("rounded-lg transition-all duration-200",PS[t],qS[i],s&&["cursor-pointer","hover:shadow-md hover:scale-[1.02]",t==="outlined"&&"hover:border-primary-300",t==="elevated"&&"hover:shadow-xl",t==="glass"&&"glass-hover dark:glass-hover-dark",t==="neu"&&"hover:shadow-[4px_4px_8px_#d1d5db,-4px_-4px_8px_#ffffff] dark:hover:shadow-[4px_4px_8px_#111827,-4px_-4px_8px_#374151]"],o&&["card-hover","transform-gpu"],"focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-offset-2",r),...f,children:c}));Qn.displayName="Card";const Av=({className:r,children:t,...i})=>v.jsx("div",{className:pt("mb-4 pb-4 border-b border-secondary-200 dark:border-secondary-700",r),...i,children:t}),HS=({className:r,children:t,...i})=>v.jsx("div",{className:r,...i,children:t}),Rv=HS,bM=({className:r,children:t,...i})=>v.jsx("p",{className:pt("text-sm text-secondary-600 dark:text-secondary-400",r),...i,children:t}),Ov=({className:r,children:t,...i})=>v.jsx("h3",{className:pt("text-lg font-semibold text-secondary-900 dark:text-secondary-100",r),...i,children:t}),GS={primary:["bg-primary-500 text-white border-primary-500","hover:bg-primary-600 hover:border-primary-600","focus:ring-primary-500 focus:border-primary-600","active:bg-primary-700 active:border-primary-700","disabled:bg-primary-300 disabled:border-primary-300 disabled:cursor-not-allowed","dark:bg-primary-600 dark:border-primary-600","dark:hover:bg-primary-700 dark:hover:border-primary-700"],secondary:["bg-secondary-100 text-secondary-900 border-secondary-200","hover:bg-secondary-200 hover:border-secondary-300","focus:ring-secondary-500 focus:border-secondary-400","active:bg-secondary-300 active:border-secondary-400","disabled:bg-secondary-50 disabled:text-secondary-400 disabled:cursor-not-allowed","dark:bg-secondary-800 dark:text-secondary-100 dark:border-secondary-700","dark:hover:bg-secondary-700 dark:hover:border-secondary-600"],success:["bg-success-500 text-white border-success-500","hover:bg-success-600 hover:border-success-600","focus:ring-success-500 focus:border-success-600","active:bg-success-700 active:border-success-700","disabled:bg-success-300 disabled:border-success-300 disabled:cursor-not-allowed"],warning:["bg-warning-500 text-white border-warning-500","hover:bg-warning-600 hover:border-warning-600","focus:ring-warning-500 focus:border-warning-600","active:bg-warning-700 active:border-warning-700","disabled:bg-warning-300 disabled:border-warning-300 disabled:cursor-not-allowed"],danger:["bg-danger-500 text-white border-danger-500","hover:bg-danger-600 hover:border-danger-600","focus:ring-danger-500 focus:border-danger-600","active:bg-danger-700 active:border-danger-700","disabled:bg-danger-300 disabled:border-danger-300 disabled:cursor-not-allowed"],info:["bg-blue-500 text-white border-blue-500","hover:bg-blue-600 hover:border-blue-600","focus:ring-blue-500 focus:border-blue-600","active:bg-blue-700 active:border-blue-700","disabled:bg-blue-300 disabled:border-blue-300 disabled:cursor-not-allowed"],back:["bg-gray-500 text-white border-gray-500","hover:bg-gray-600 hover:border-gray-600","focus:ring-gray-500 focus:border-gray-600","active:bg-gray-700 active:border-gray-700","disabled:bg-gray-300 disabled:border-gray-300 disabled:cursor-not-allowed"],ghost:["bg-transparent text-secondary-700 border-transparent","hover:bg-secondary-100 hover:text-secondary-900","focus:ring-secondary-500 focus:bg-secondary-100","active:bg-secondary-200","disabled:text-secondary-400 disabled:cursor-not-allowed","dark:text-secondary-300","dark:hover:bg-secondary-800 dark:hover:text-secondary-100"],outline:["bg-transparent text-secondary-700 border-secondary-300","hover:bg-secondary-50 hover:border-secondary-400","focus:ring-secondary-500 focus:border-secondary-500","active:bg-secondary-100 active:border-secondary-500","disabled:text-secondary-400 disabled:border-secondary-200 disabled:cursor-not-allowed","dark:text-secondary-300 dark:border-secondary-600","dark:hover:bg-secondary-800 dark:hover:border-secondary-500"],link:["bg-transparent text-primary-600 border-transparent p-0","hover:text-primary-700 hover:underline","focus:ring-primary-500 focus:underline","active:text-primary-800","disabled:text-primary-400 disabled:cursor-not-allowed disabled:no-underline","dark:text-primary-400","dark:hover:text-primary-300"],glass:["bg-white/10 text-secondary-800 border border-white/20 backdrop-blur-md","hover:bg-white/20 hover:border-white/30","focus:ring-primary-500/50 focus:border-primary-300/50","active:bg-white/30","disabled:bg-white/5 disabled:text-secondary-400 disabled:cursor-not-allowed","dark:bg-secondary-900/30 dark:text-secondary-200 dark:border-secondary-700/30","dark:hover:bg-secondary-900/40"],neu:["bg-secondary-50 text-secondary-700 border-0","shadow-[4px_4px_8px_#d1d5db,-4px_-4px_8px_#ffffff]","hover:shadow-[2px_2px_4px_#d1d5db,-2px_-2px_4px_#ffffff]","active:shadow-[inset_2px_2px_4px_#d1d5db,inset_-2px_-2px_4px_#ffffff]","focus:ring-primary-500/30","disabled:text-secondary-400 disabled:cursor-not-allowed disabled:shadow-none","dark:bg-secondary-800 dark:text-secondary-300","dark:shadow-[4px_4px_8px_#111827,-4px_-4px_8px_#374151]","dark:hover:shadow-[2px_2px_4px_#111827,-2px_-2px_4px_#374151]","dark:active:shadow-[inset_2px_2px_4px_#111827,inset_-2px_-2px_4px_#374151]"]},VS={xs:"px-2 py-1 text-xs font-medium",sm:"px-3 py-1.5 text-sm font-medium",md:"px-4 py-2 text-sm font-medium",lg:"px-6 py-3 text-base font-medium",xl:"px-8 py-4 text-lg font-medium"},Xe=wn.forwardRef(({className:r,variant:t="primary",size:i="md",loading:s=!1,disabled:o=!1,leftIcon:c,rightIcon:f,fullWidth:g=!1,rounded:p=!1,interactive:d=!1,children:h,..._},y)=>{const b=o||s;return v.jsxs("button",{className:pt("inline-flex items-center justify-center","border font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","select-none",VS[i],GS[t],p?"rounded-full":"rounded-md",g&&"w-full",s&&"cursor-wait",d&&!b&&["button-press",t!=="neu"&&"hover-lift"],"min-h-[44px] md:min-h-[auto]","focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",r),disabled:b,ref:y,..._,children:[s&&v.jsx(cS,{className:pt("animate-spin",i==="xs"&&"w-3 h-3",i==="sm"&&"w-3 h-3",i==="md"&&"w-4 h-4",i==="lg"&&"w-4 h-4",i==="xl"&&"w-5 h-5",(c||h)&&"mr-2")}),c&&!s&&v.jsx("span",{className:pt("flex-shrink-0",h&&"mr-2"),children:c}),h&&v.jsx("span",{className:"truncate",children:h}),f&&!s&&v.jsx("span",{className:pt("flex-shrink-0",h&&"ml-2"),children:f})]})});Xe.displayName="Button";const Ao={default:{solid:"bg-secondary-100 text-secondary-800 dark:bg-secondary-800 dark:text-secondary-300",outline:"border border-secondary-300 text-secondary-700 bg-transparent dark:border-secondary-600 dark:text-secondary-400"},primary:{solid:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-300",outline:"border border-primary-300 text-primary-700 bg-transparent dark:border-primary-600 dark:text-primary-400"},secondary:{solid:"bg-secondary-200 text-secondary-800 dark:bg-secondary-700 dark:text-secondary-300",outline:"border border-secondary-400 text-secondary-700 bg-transparent dark:border-secondary-500 dark:text-secondary-400"},success:{solid:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-300",outline:"border border-success-300 text-success-700 bg-transparent dark:border-success-600 dark:text-success-400"},warning:{solid:"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-300",outline:"border border-warning-300 text-warning-700 bg-transparent dark:border-warning-600 dark:text-warning-400"},danger:{solid:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-300",outline:"border border-danger-300 text-danger-700 bg-transparent dark:border-danger-600 dark:text-danger-400"},info:{solid:"bg-info-100 text-info-800 dark:bg-info-900 dark:text-info-300",outline:"border border-info-300 text-info-700 bg-transparent dark:border-info-600 dark:text-info-400"},blue:{solid:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",outline:"border border-blue-300 text-blue-700 bg-transparent dark:border-blue-600 dark:text-blue-400"},green:{solid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",outline:"border border-green-300 text-green-700 bg-transparent dark:border-green-600 dark:text-green-400"},red:{solid:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",outline:"border border-red-300 text-red-700 bg-transparent dark:border-red-600 dark:text-red-400"},purple:{solid:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",outline:"border border-purple-300 text-purple-700 bg-transparent dark:border-purple-600 dark:text-purple-400"},gray:{solid:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",outline:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400"},outline:{solid:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400",outline:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400"},destructive:{solid:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",outline:"border border-red-300 text-red-700 bg-transparent dark:border-red-600 dark:text-red-400"}},FS={xs:"px-1.5 py-0.5 text-xs font-medium",sm:"px-2 py-0.5 text-xs font-medium",md:"px-2.5 py-1 text-xs font-medium",lg:"px-3 py-1.5 text-sm font-medium"},YS={rounded:"rounded",pill:"rounded-full",square:"rounded-none"},xn=wn.forwardRef(({className:r,variant:t="default",size:i="md",shape:s="rounded",outline:o=!1,dismissible:c=!1,onDismiss:f,children:g,...p},d)=>v.jsxs("span",{ref:d,className:pt("inline-flex items-center justify-center","font-medium whitespace-nowrap","transition-colors duration-200",FS[i],YS[s],o?Ao[t]?.outline||Ao.default.outline:Ao[t]?.solid||Ao.default.solid,r),...p,children:[v.jsx("span",{className:"truncate",children:g}),c&&v.jsx("button",{onClick:f,className:pt("ml-1 -mr-1 flex-shrink-0","hover:bg-black hover:bg-opacity-10 rounded-full","focus:outline-none focus:bg-black focus:bg-opacity-20","transition-colors duration-150",i==="xs"&&"w-2 h-2",i==="sm"&&"w-3 h-3",i==="md"&&"w-4 h-4",i==="lg"&&"w-5 h-5"),children:v.jsx(fv,{className:"w-full h-full"})})]}));xn.displayName="Badge";function QS({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const XS=j.forwardRef(QS);function $S({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const KS=j.forwardRef($S);function ZS({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const R1=j.forwardRef(ZS);function WS({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const gh=j.forwardRef(WS);function JS({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const eT=j.forwardRef(JS);function tT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const nT=j.forwardRef(tT);function rT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const iT=j.forwardRef(rT);function aT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const O1=j.forwardRef(aT);function sT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const lT=j.forwardRef(sT);function oT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const cT=j.forwardRef(oT);function uT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const dT=j.forwardRef(uT);function fT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Dv=j.forwardRef(fT);function hT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const mT=j.forwardRef(hT);function gT({title:r,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),r?j.createElement("title",{id:t},r):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ph=j.forwardRef(gT);var Ro={},Ts={},Oo={},D1;function Vt(){if(D1)return Oo;D1=1,Object.defineProperty(Oo,"__esModule",{value:!0});function r(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}var t=function i(s,o){r(this,i),this.data=s,this.text=o.text||s,this.options=o};return Oo.default=t,Oo}var M1;function pT(){if(M1)return Ts;M1=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.CODE39=void 0;var r=(function(){function S(C,M){for(var U=0;U<M.length;U++){var Y=M[U];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(C,Y.key,Y)}}return function(C,M,U){return M&&S(C.prototype,M),U&&S(C,U),C}})(),t=Vt(),i=s(t);function s(S){return S&&S.__esModule?S:{default:S}}function o(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function c(S,C){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:S}function f(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);S.prototype=Object.create(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(S,C):S.__proto__=C)}var g=(function(S){f(C,S);function C(M,U){return o(this,C),M=M.toUpperCase(),U.mod43&&(M+=y(E(M))),c(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,U))}return r(C,[{key:"encode",value:function(){for(var U=h("*"),Y=0;Y<this.data.length;Y++)U+=h(this.data[Y])+"0";return U+=h("*"),{data:U,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),C})(i.default),p=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],d=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function h(S){return _(b(S))}function _(S){return d[S].toString(2)}function y(S){return p[S]}function b(S){return p.indexOf(S)}function E(S){for(var C=0,M=0;M<S.length;M++)C+=b(S[M]);return C=C%43,C}return Ts.CODE39=g,Ts}var ln={},Do={},Mo={},Qe={},k1;function nl(){if(k1)return Qe;k1=1,Object.defineProperty(Qe,"__esModule",{value:!0});var r;function t(p,d,h){return d in p?Object.defineProperty(p,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[d]=h,p}var i=Qe.SET_A=0,s=Qe.SET_B=1,o=Qe.SET_C=2;Qe.SHIFT=98;var c=Qe.START_A=103,f=Qe.START_B=104,g=Qe.START_C=105;return Qe.MODULO=103,Qe.STOP=106,Qe.FNC1=207,Qe.SET_BY_CODE=(r={},t(r,c,i),t(r,f,s),t(r,g,o),r),Qe.SWAP={101:i,100:s,99:o},Qe.A_START_CHAR="Ð",Qe.B_START_CHAR="Ñ",Qe.C_START_CHAR="Ò",Qe.A_CHARS="[\0-_È-Ï]",Qe.B_CHARS="[ -È-Ï]",Qe.C_CHARS="(Ï*[0-9]{2}Ï*)",Qe.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Qe}var I1;function Bc(){if(I1)return Mo;I1=1,Object.defineProperty(Mo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=Vt(),i=o(t),s=nl();function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(_,y){c(this,h);var b=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_.substring(1),y));return b.bytes=_.split("").map(function(E){return E.charCodeAt(0)}),b}return r(h,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var y=this.bytes,b=y.shift()-105,E=s.SET_BY_CODE[b];if(E===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&y.unshift(s.FNC1);var S=h.next(y,1,E);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:h.getBar(b)+S.result+h.getBar((S.checksum+b)%s.MODULO)+h.getBar(s.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var y=this.options.ean128||!1;return typeof y=="string"&&(y=y.toLowerCase()==="true"),y}}],[{key:"getBar",value:function(y){return s.BARS[y]?s.BARS[y].toString():""}},{key:"correctIndex",value:function(y,b){if(b===s.SET_A){var E=y.shift();return E<32?E+64:E-32}else return b===s.SET_B?y.shift()-32:(y.shift()-48)*10+y.shift()-48}},{key:"next",value:function(y,b,E){if(!y.length)return{result:"",checksum:0};var S=void 0,C=void 0;if(y[0]>=200){C=y.shift()-105;var M=s.SWAP[C];M!==void 0?S=h.next(y,b+1,M):((E===s.SET_A||E===s.SET_B)&&C===s.SHIFT&&(y[0]=E===s.SET_A?y[0]>95?y[0]-96:y[0]:y[0]<32?y[0]+96:y[0]),S=h.next(y,b+1,E))}else C=h.correctIndex(y,E),S=h.next(y,b+1,E);var U=h.getBar(C),Y=C*b;return{result:U+S.result,checksum:Y+S.checksum}}}]),h})(i.default);return Mo.default=p,Mo}var ko={},j1;function yT(){if(j1)return ko;j1=1,Object.defineProperty(ko,"__esModule",{value:!0});var r=nl(),t=function(g){return g.match(new RegExp("^"+r.A_CHARS+"*"))[0].length},i=function(g){return g.match(new RegExp("^"+r.B_CHARS+"*"))[0].length},s=function(g){return g.match(new RegExp("^"+r.C_CHARS+"*"))[0]};function o(f,g){var p=g?r.A_CHARS:r.B_CHARS,d=f.match(new RegExp("^("+p+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(d)return d[1]+"Ì"+c(f.substring(d[1].length));var h=f.match(new RegExp("^"+p+"+"))[0];return h.length===f.length?f:h+String.fromCharCode(g?205:206)+o(f.substring(h.length),!g)}function c(f){var g=s(f),p=g.length;if(p===f.length)return f;f=f.substring(p);var d=t(f)>=i(f);return g+String.fromCharCode(d?206:205)+o(f,d)}return ko.default=function(f){var g=void 0,p=s(f).length;if(p>=2)g=r.C_START_CHAR+c(f);else{var d=t(f)>i(f);g=(d?r.A_START_CHAR:r.B_START_CHAR)+o(f,d)}return g.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(h,_){return"Ë"+_})},ko}var L1;function _T(){if(L1)return Do;L1=1,Object.defineProperty(Do,"__esModule",{value:!0});var r=Bc(),t=o(r),i=yT(),s=o(i);function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(_,y){if(c(this,h),/^[\x00-\x7F\xC8-\xD3]+$/.test(_))var b=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,(0,s.default)(_),y));else var b=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,y));return f(b)}return h})(t.default);return Do.default=p,Do}var Io={},U1;function vT(){if(U1)return Io;U1=1,Object.defineProperty(Io,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=Bc(),i=o(t),s=nl();function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(_,y){return c(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,s.A_START_CHAR+_,y))}return r(h,[{key:"valid",value:function(){return new RegExp("^"+s.A_CHARS+"+$").test(this.data)}}]),h})(i.default);return Io.default=p,Io}var jo={},B1;function bT(){if(B1)return jo;B1=1,Object.defineProperty(jo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=Bc(),i=o(t),s=nl();function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(_,y){return c(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,s.B_START_CHAR+_,y))}return r(h,[{key:"valid",value:function(){return new RegExp("^"+s.B_CHARS+"+$").test(this.data)}}]),h})(i.default);return jo.default=p,jo}var Lo={},z1;function xT(){if(z1)return Lo;z1=1,Object.defineProperty(Lo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=Bc(),i=o(t),s=nl();function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(_,y){return c(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,s.C_START_CHAR+_,y))}return r(h,[{key:"valid",value:function(){return new RegExp("^"+s.C_CHARS+"+$").test(this.data)}}]),h})(i.default);return Lo.default=p,Lo}var P1;function ET(){if(P1)return ln;P1=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.CODE128C=ln.CODE128B=ln.CODE128A=ln.CODE128=void 0;var r=_T(),t=p(r),i=vT(),s=p(i),o=bT(),c=p(o),f=xT(),g=p(f);function p(d){return d&&d.__esModule?d:{default:d}}return ln.CODE128=t.default,ln.CODE128A=s.default,ln.CODE128B=c.default,ln.CODE128C=g.default,ln}var vt={},Uo={},Vn={},q1;function rl(){return q1||(q1=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.SIDE_BIN="101",Vn.MIDDLE_BIN="01010",Vn.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},Vn.EAN2_STRUCTURE=["LL","LG","GL","GG"],Vn.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],Vn.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),Vn}var Bo={},zo={},H1;function il(){if(H1)return zo;H1=1,Object.defineProperty(zo,"__esModule",{value:!0});var r=rl(),t=function(s,o,c){var f=s.split("").map(function(p,d){return r.BINARIES[o[d]]}).map(function(p,d){return p?p[s[d]]:""});if(c){var g=s.length-1;f=f.map(function(p,d){return d<g?p+c:p})}return f.join("")};return zo.default=t,zo}var G1;function Mv(){if(G1)return Bo;G1=1,Object.defineProperty(Bo,"__esModule",{value:!0});var r=(function(){function _(y,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,b,E){return b&&_(y.prototype,b),E&&_(y,E),y}})(),t=rl(),i=il(),s=f(i),o=Vt(),c=f(o);function f(_){return _&&_.__esModule?_:{default:_}}function g(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function p(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function d(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var h=(function(_){d(y,_);function y(b,E){g(this,y);var S=p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b,E));return S.fontSize=!E.flat&&E.fontSize>E.width*10?E.width*10:E.fontSize,S.guardHeight=E.height+S.fontSize/2+E.textMargin,S}return r(y,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(E,S){return this.text.substr(E,S)}},{key:"leftEncode",value:function(E,S){return(0,s.default)(E,S)}},{key:"rightText",value:function(E,S){return this.text.substr(E,S)}},{key:"rightEncode",value:function(E,S){return(0,s.default)(E,S)}},{key:"encodeGuarded",value:function(){var E={fontSize:this.fontSize},S={height:this.guardHeight};return[{data:t.SIDE_BIN,options:S},{data:this.leftEncode(),text:this.leftText(),options:E},{data:t.MIDDLE_BIN,options:S},{data:this.rightEncode(),text:this.rightText(),options:E},{data:t.SIDE_BIN,options:S}]}},{key:"encodeFlat",value:function(){var E=[t.SIDE_BIN,this.leftEncode(),t.MIDDLE_BIN,this.rightEncode(),t.SIDE_BIN];return{data:E.join(""),text:this.text}}}]),y})(c.default);return Bo.default=h,Bo}var V1;function wT(){if(V1)return Uo;V1=1,Object.defineProperty(Uo,"__esModule",{value:!0});var r=(function(){function _(y,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,b,E){return b&&_(y.prototype,b),E&&_(y,E),y}})(),t=function _(y,b,E){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,b);if(S===void 0){var C=Object.getPrototypeOf(y);return C===null?void 0:_(C,b,E)}else{if("value"in S)return S.value;var M=S.get;return M===void 0?void 0:M.call(E)}},i=rl(),s=Mv(),o=c(s);function c(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function g(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function p(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var d=function(y){var b=y.substr(0,12).split("").map(function(E){return+E}).reduce(function(E,S,C){return C%2?E+S*3:E+S},0);return(10-b%10)%10},h=(function(_){p(y,_);function y(b,E){f(this,y),b.search(/^[0-9]{12}$/)!==-1&&(b+=d(b));var S=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b,E));return S.lastChar=E.lastChar,S}return r(y,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===d(this.data)}},{key:"leftText",value:function(){return t(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var E=this.data.substr(1,6),S=i.EAN13_STRUCTURE[this.data[0]];return t(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"leftEncode",this).call(this,E,S)}},{key:"rightText",value:function(){return t(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var E=this.data.substr(7,6);return t(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"rightEncode",this).call(this,E,"RRRRRR")}},{key:"encodeGuarded",value:function(){var E=t(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(E.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(E.push({data:"00"}),E.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),E}}]),y})(o.default);return Uo.default=h,Uo}var Po={},F1;function ST(){if(F1)return Po;F1=1,Object.defineProperty(Po,"__esModule",{value:!0});var r=(function(){function h(_,y){for(var b=0;b<y.length;b++){var E=y[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,y,b){return y&&h(_.prototype,y),b&&h(_,b),_}})(),t=function h(_,y,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,y);if(E===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:h(S,y,b)}else{if("value"in E)return E.value;var C=E.get;return C===void 0?void 0:C.call(b)}},i=Mv(),s=o(i);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function f(h,_){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:h}function g(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);h.prototype=Object.create(_&&_.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(h,_):h.__proto__=_)}var p=function(_){var y=_.substr(0,7).split("").map(function(b){return+b}).reduce(function(b,E,S){return S%2?b+E:b+E*3},0);return(10-y%10)%10},d=(function(h){g(_,h);function _(y,b){return c(this,_),y.search(/^[0-9]{7}$/)!==-1&&(y+=p(y)),f(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,y,b))}return r(_,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===p(this.data)}},{key:"leftText",value:function(){return t(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var b=this.data.substr(0,4);return t(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftEncode",this).call(this,b,"LLLL")}},{key:"rightText",value:function(){return t(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var b=this.data.substr(4,4);return t(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightEncode",this).call(this,b,"RRRR")}}]),_})(s.default);return Po.default=d,Po}var qo={},Y1;function TT(){if(Y1)return qo;Y1=1,Object.defineProperty(qo,"__esModule",{value:!0});var r=(function(){function y(b,E){for(var S=0;S<E.length;S++){var C=E[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,E,S){return E&&y(b.prototype,E),S&&y(b,S),b}})(),t=rl(),i=il(),s=f(i),o=Vt(),c=f(o);function f(y){return y&&y.__esModule?y:{default:y}}function g(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function d(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var h=function(b){var E=b.split("").map(function(S){return+S}).reduce(function(S,C,M){return M%2?S+C*9:S+C*3},0);return E%10},_=(function(y){d(b,y);function b(E,S){return g(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,E,S))}return r(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var S=t.EAN5_STRUCTURE[h(this.data)];return{data:"1011"+(0,s.default)(this.data,S,"01"),text:this.text}}}]),b})(c.default);return qo.default=_,qo}var Ho={},Q1;function NT(){if(Q1)return Ho;Q1=1,Object.defineProperty(Ho,"__esModule",{value:!0});var r=(function(){function _(y,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,b,E){return b&&_(y.prototype,b),E&&_(y,E),y}})(),t=rl(),i=il(),s=f(i),o=Vt(),c=f(o);function f(_){return _&&_.__esModule?_:{default:_}}function g(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function p(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function d(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var h=(function(_){d(y,_);function y(b,E){return g(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b,E))}return r(y,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var E=t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,s.default)(this.data,E,"01"),text:this.text}}}]),y})(c.default);return Ho.default=h,Ho}var Ns={},X1;function kv(){if(X1)return Ns;X1=1,Object.defineProperty(Ns,"__esModule",{value:!0});var r=(function(){function _(y,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,b,E){return b&&_(y.prototype,b),E&&_(y,E),y}})();Ns.checksum=h;var t=il(),i=c(t),s=Vt(),o=c(s);function c(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function g(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function p(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var d=(function(_){p(y,_);function y(b,E){f(this,y),b.search(/^[0-9]{11}$/)!==-1&&(b+=h(b));var S=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b,E));return S.displayValue=E.displayValue,E.fontSize>E.width*10?S.fontSize=E.width*10:S.fontSize=E.fontSize,S.guardHeight=E.height+S.fontSize/2+E.textMargin,S}return r(y,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==h(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var E="";return E+="101",E+=(0,i.default)(this.data.substr(0,6),"LLLLLL"),E+="01010",E+=(0,i.default)(this.data.substr(6,6),"RRRRRR"),E+="101",{data:E,text:this.text}}},{key:"guardedEncoding",value:function(){var E=[];return this.displayValue&&E.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),E.push({data:"101"+(0,i.default)(this.data[0],"L"),options:{height:this.guardHeight}}),E.push({data:(0,i.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),E.push({data:"01010",options:{height:this.guardHeight}}),E.push({data:(0,i.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),E.push({data:(0,i.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&E.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),E}}]),y})(o.default);function h(_){var y=0,b;for(b=1;b<11;b+=2)y+=parseInt(_[b]);for(b=0;b<11;b+=2)y+=parseInt(_[b])*3;return(10-y%10)%10}return Ns.default=d,Ns}var Go={},$1;function CT(){if($1)return Go;$1=1,Object.defineProperty(Go,"__esModule",{value:!0});var r=(function(){function E(S,C){for(var M=0;M<C.length;M++){var U=C[M];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(S,U.key,U)}}return function(S,C,M){return C&&E(S.prototype,C),M&&E(S,M),S}})(),t=il(),i=f(t),s=Vt(),o=f(s),c=kv();function f(E){return E&&E.__esModule?E:{default:E}}function g(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function p(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function d(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var h=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],_=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],y=(function(E){d(S,E);function S(C,M){g(this,S);var U=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,M));if(U.isValid=!1,C.search(/^[0-9]{6}$/)!==-1)U.middleDigits=C,U.upcA=b(C,"0"),U.text=M.text||""+U.upcA[0]+C+U.upcA[U.upcA.length-1],U.isValid=!0;else if(C.search(/^[01][0-9]{7}$/)!==-1)if(U.middleDigits=C.substring(1,C.length-1),U.upcA=b(U.middleDigits,C[0]),U.upcA[U.upcA.length-1]===C[C.length-1])U.isValid=!0;else return p(U);else return p(U);return U.displayValue=M.displayValue,M.fontSize>M.width*10?U.fontSize=M.width*10:U.fontSize=M.fontSize,U.guardHeight=M.height+U.fontSize/2+M.textMargin,U}return r(S,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var M="";return M+="101",M+=this.encodeMiddleDigits(),M+="010101",{data:M,text:this.text}}},{key:"guardedEncoding",value:function(){var M=[];return this.displayValue&&M.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),M.push({data:"101",options:{height:this.guardHeight}}),M.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),M.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&M.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),M}},{key:"encodeMiddleDigits",value:function(){var M=this.upcA[0],U=this.upcA[this.upcA.length-1],Y=_[parseInt(U)][parseInt(M)];return(0,i.default)(this.middleDigits,Y)}}]),S})(o.default);function b(E,S){for(var C=parseInt(E[E.length-1]),M=h[C],U="",Y=0,$=0;$<M.length;$++){var re=M[$];re==="X"?U+=E[Y++]:U+=re}return U=""+S+U,""+U+(0,c.checksum)(U)}return Go.default=y,Go}var K1;function AT(){if(K1)return vt;K1=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.UPCE=vt.UPC=vt.EAN2=vt.EAN5=vt.EAN8=vt.EAN13=void 0;var r=wT(),t=y(r),i=ST(),s=y(i),o=TT(),c=y(o),f=NT(),g=y(f),p=kv(),d=y(p),h=CT(),_=y(h);function y(b){return b&&b.__esModule?b:{default:b}}return vt.EAN13=t.default,vt.EAN8=s.default,vt.EAN5=c.default,vt.EAN2=g.default,vt.UPC=d.default,vt.UPCE=_.default,vt}var Wr={},Vo={},na={},Z1;function RT(){return Z1||(Z1=1,Object.defineProperty(na,"__esModule",{value:!0}),na.START_BIN="1010",na.END_BIN="11101",na.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),na}var W1;function Iv(){if(W1)return Vo;W1=1,Object.defineProperty(Vo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=RT(),i=Vt(),s=o(i);function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(){return c(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return r(h,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var y=this,b=this.data.match(/.{2}/g).map(function(E){return y.encodePair(E)}).join("");return{data:t.START_BIN+b+t.END_BIN,text:this.text}}},{key:"encodePair",value:function(y){var b=t.BINARIES[y[1]];return t.BINARIES[y[0]].split("").map(function(E,S){return(E==="1"?"111":"1")+(b[S]==="1"?"000":"0")}).join("")}}]),h})(s.default);return Vo.default=p,Vo}var Fo={},J1;function OT(){if(J1)return Fo;J1=1,Object.defineProperty(Fo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=Iv(),i=s(t);function s(d){return d&&d.__esModule?d:{default:d}}function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function c(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function f(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var g=function(h){var _=h.substr(0,13).split("").map(function(y){return parseInt(y,10)}).reduce(function(y,b,E){return y+b*(3-E%2*2)},0);return Math.ceil(_/10)*10-_},p=(function(d){f(h,d);function h(_,y){return o(this,h),_.search(/^[0-9]{13}$/)!==-1&&(_+=g(_)),c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,y))}return r(h,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===g(this.data)}}]),h})(i.default);return Fo.default=p,Fo}var ey;function DT(){if(ey)return Wr;ey=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.ITF14=Wr.ITF=void 0;var r=Iv(),t=o(r),i=OT(),s=o(i);function o(c){return c&&c.__esModule?c:{default:c}}return Wr.ITF=t.default,Wr.ITF14=s.default,Wr}var Pt={},Yo={},ty;function al(){if(ty)return Yo;ty=1,Object.defineProperty(Yo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=Vt(),i=s(t);function s(d){return d&&d.__esModule?d:{default:d}}function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function c(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function f(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var g=(function(d){f(h,d);function h(_,y){return o(this,h),c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,y))}return r(h,[{key:"encode",value:function(){for(var y="110",b=0;b<this.data.length;b++){var E=parseInt(this.data[b]),S=E.toString(2);S=p(S,4-S.length);for(var C=0;C<S.length;C++)y+=S[C]=="0"?"100":"110"}return y+="1001",{data:y,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),h})(i.default);function p(d,h){for(var _=0;_<h;_++)d="0"+d;return d}return Yo.default=g,Yo}var Qo={},Cs={},ny;function zc(){if(ny)return Cs;ny=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.mod10=r,Cs.mod11=t;function r(i){for(var s=0,o=0;o<i.length;o++){var c=parseInt(i[o]);(o+i.length)%2===0?s+=c:s+=c*2%10+Math.floor(c*2/10)}return(10-s%10)%10}function t(i){for(var s=0,o=[2,3,4,5,6,7],c=0;c<i.length;c++){var f=parseInt(i[i.length-1-c]);s+=o[c%o.length]*f}return(11-s%11)%11}return Cs}var ry;function MT(){if(ry)return Qo;ry=1,Object.defineProperty(Qo,"__esModule",{value:!0});var r=al(),t=s(r),i=zc();function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){return o(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h+(0,i.mod10)(h),_))}return d})(t.default);return Qo.default=g,Qo}var Xo={},iy;function kT(){if(iy)return Xo;iy=1,Object.defineProperty(Xo,"__esModule",{value:!0});var r=al(),t=s(r),i=zc();function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){return o(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h+(0,i.mod11)(h),_))}return d})(t.default);return Xo.default=g,Xo}var $o={},ay;function IT(){if(ay)return $o;ay=1,Object.defineProperty($o,"__esModule",{value:!0});var r=al(),t=s(r),i=zc();function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){return o(this,d),h+=(0,i.mod10)(h),h+=(0,i.mod10)(h),c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h,_))}return d})(t.default);return $o.default=g,$o}var Ko={},sy;function jT(){if(sy)return Ko;sy=1,Object.defineProperty(Ko,"__esModule",{value:!0});var r=al(),t=s(r),i=zc();function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){return o(this,d),h+=(0,i.mod11)(h),h+=(0,i.mod10)(h),c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h,_))}return d})(t.default);return Ko.default=g,Ko}var ly;function LT(){if(ly)return Pt;ly=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.MSI1110=Pt.MSI1010=Pt.MSI11=Pt.MSI10=Pt.MSI=void 0;var r=al(),t=h(r),i=MT(),s=h(i),o=kT(),c=h(o),f=IT(),g=h(f),p=jT(),d=h(p);function h(_){return _&&_.__esModule?_:{default:_}}return Pt.MSI=t.default,Pt.MSI10=s.default,Pt.MSI11=c.default,Pt.MSI1010=g.default,Pt.MSI1110=d.default,Pt}var As={},oy;function UT(){if(oy)return As;oy=1,Object.defineProperty(As,"__esModule",{value:!0}),As.pharmacode=void 0;var r=(function(){function p(d,h){for(var _=0;_<h.length;_++){var y=h[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,h,_){return h&&p(d.prototype,h),_&&p(d,_),d}})(),t=Vt(),i=s(t);function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){o(this,d);var y=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h,_));return y.number=parseInt(h,10),y}return r(d,[{key:"encode",value:function(){for(var _=this.number,y="";!isNaN(_)&&_!=0;)_%2===0?(y="11100"+y,_=(_-2)/2):(y="100"+y,_=(_-1)/2);return y=y.slice(0,-2),{data:y,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),d})(i.default);return As.pharmacode=g,As}var Rs={},cy;function BT(){if(cy)return Rs;cy=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.codabar=void 0;var r=(function(){function p(d,h){for(var _=0;_<h.length;_++){var y=h[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,h,_){return h&&p(d.prototype,h),_&&p(d,_),d}})(),t=Vt(),i=s(t);function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){o(this,d),h.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(h="A"+h+"A");var y=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h.toUpperCase(),_));return y.text=y.options.text||y.text.replace(/[A-D]/g,""),y}return r(d,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var _=[],y=this.getEncodings(),b=0;b<this.data.length;b++)_.push(y[this.data.charAt(b)]),b!==this.data.length-1&&_.push("0");return{text:this.text,data:_.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),d})(i.default);return Rs.codabar=g,Rs}var Jr={},Zo={},ra={},uy;function zT(){return uy||(uy=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"],ra.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],ra.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),ra}var dy;function jv(){if(dy)return Zo;dy=1,Object.defineProperty(Zo,"__esModule",{value:!0});var r=(function(){function d(h,_){for(var y=0;y<_.length;y++){var b=_[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,y){return _&&d(h.prototype,_),y&&d(h,y),h}})(),t=zT(),i=Vt(),s=o(i);function o(d){return d&&d.__esModule?d:{default:d}}function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function f(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function g(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var p=(function(d){g(h,d);function h(_,y){return c(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,y))}return r(h,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var y=this.data.split("").flatMap(function(C){return t.MULTI_SYMBOLS[C]||C}),b=y.map(function(C){return h.getEncoding(C)}).join(""),E=h.checksum(y,20),S=h.checksum(y.concat(E),15);return{text:this.text,data:h.getEncoding("ÿ")+b+h.getEncoding(E)+h.getEncoding(S)+h.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(y){return t.BINARIES[h.symbolValue(y)]}},{key:"getSymbol",value:function(y){return t.SYMBOLS[y]}},{key:"symbolValue",value:function(y){return t.SYMBOLS.indexOf(y)}},{key:"checksum",value:function(y,b){var E=y.slice().reverse().reduce(function(S,C,M){var U=M%b+1;return S+h.symbolValue(C)*U},0);return h.getSymbol(E%47)}}]),h})(s.default);return Zo.default=p,Zo}var Wo={},fy;function PT(){if(fy)return Wo;fy=1,Object.defineProperty(Wo,"__esModule",{value:!0});var r=(function(){function p(d,h){for(var _=0;_<h.length;_++){var y=h[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,h,_){return h&&p(d.prototype,h),_&&p(d,_),d}})(),t=jv(),i=s(t);function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){return o(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h,_))}return r(d,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),d})(i.default);return Wo.default=g,Wo}var hy;function qT(){if(hy)return Jr;hy=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.CODE93FullASCII=Jr.CODE93=void 0;var r=jv(),t=o(r),i=PT(),s=o(i);function o(c){return c&&c.__esModule?c:{default:c}}return Jr.CODE93=t.default,Jr.CODE93FullASCII=s.default,Jr}var Os={},my;function HT(){if(my)return Os;my=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.GenericBarcode=void 0;var r=(function(){function p(d,h){for(var _=0;_<h.length;_++){var y=h[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,h,_){return h&&p(d.prototype,h),_&&p(d,_),d}})(),t=Vt(),i=s(t);function s(p){return p&&p.__esModule?p:{default:p}}function o(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function c(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var g=(function(p){f(d,p);function d(h,_){return o(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h,_))}return r(d,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),d})(i.default);return Os.GenericBarcode=g,Os}var gy;function GT(){if(gy)return Ro;gy=1,Object.defineProperty(Ro,"__esModule",{value:!0});var r=pT(),t=ET(),i=AT(),s=DT(),o=LT(),c=UT(),f=BT(),g=qT(),p=HT();return Ro.default={CODE39:r.CODE39,CODE128:t.CODE128,CODE128A:t.CODE128A,CODE128B:t.CODE128B,CODE128C:t.CODE128C,EAN13:i.EAN13,EAN8:i.EAN8,EAN5:i.EAN5,EAN2:i.EAN2,UPC:i.UPC,UPCE:i.UPCE,ITF14:s.ITF14,ITF:s.ITF,MSI:o.MSI,MSI10:o.MSI10,MSI11:o.MSI11,MSI1010:o.MSI1010,MSI1110:o.MSI1110,pharmacode:c.pharmacode,codabar:f.codabar,CODE93:g.CODE93,CODE93FullASCII:g.CODE93FullASCII,GenericBarcode:p.GenericBarcode},Ro}var Jo={},py;function Pc(){if(py)return Jo;py=1,Object.defineProperty(Jo,"__esModule",{value:!0});var r=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t};return Jo.default=function(t,i){return r({},t,i)},Jo}var ec={},yy;function VT(){if(yy)return ec;yy=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.default=r;function r(t){var i=[];function s(o){if(Array.isArray(o))for(var c=0;c<o.length;c++)s(o[c]);else o.text=o.text||"",o.data=o.data||"",i.push(o)}return s(t),i}return ec}var tc={},_y;function FT(){if(_y)return tc;_y=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.default=r;function r(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}return tc}var nc={},rc={},ic={},vy;function Lv(){if(vy)return ic;vy=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.default=r;function r(t){var i=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var s in i)i.hasOwnProperty(s)&&(s=i[s],typeof t[s]=="string"&&(t[s]=parseInt(t[s],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}return ic}var ac={},by;function Uv(){if(by)return ac;by=1,Object.defineProperty(ac,"__esModule",{value:!0});var r={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return ac.default=r,ac}var xy;function YT(){if(xy)return rc;xy=1,Object.defineProperty(rc,"__esModule",{value:!0});var r=Lv(),t=o(r),i=Uv(),s=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function c(f){var g={};for(var p in s.default)s.default.hasOwnProperty(p)&&(f.hasAttribute("jsbarcode-"+p.toLowerCase())&&(g[p]=f.getAttribute("jsbarcode-"+p.toLowerCase())),f.hasAttribute("data-"+p.toLowerCase())&&(g[p]=f.getAttribute("data-"+p.toLowerCase())));return g.value=f.getAttribute("jsbarcode-value")||f.getAttribute("data-value"),g=(0,t.default)(g),g}return rc.default=c,rc}var sc={},lc={},qt={},Ey;function Bv(){if(Ey)return qt;Ey=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.getTotalWidthOfEncodings=qt.calculateEncodingAttributes=qt.getBarcodePadding=qt.getEncodingHeight=qt.getMaximumHeightOfEncodings=void 0;var r=Pc(),t=i(r);function i(d){return d&&d.__esModule?d:{default:d}}function s(d,h){return h.height+(h.displayValue&&d.text.length>0?h.fontSize+h.textMargin:0)+h.marginTop+h.marginBottom}function o(d,h,_){if(_.displayValue&&h<d){if(_.textAlign=="center")return Math.floor((d-h)/2);if(_.textAlign=="left")return 0;if(_.textAlign=="right")return Math.floor(d-h)}return 0}function c(d,h,_){for(var y=0;y<d.length;y++){var b=d[y],E=(0,t.default)(h,b.options),S;E.displayValue?S=p(b.text,E,_):S=0;var C=b.data.length*E.width;b.width=Math.ceil(Math.max(S,C)),b.height=s(b,E),b.barcodePadding=o(S,C,E)}}function f(d){for(var h=0,_=0;_<d.length;_++)h+=d[_].width;return h}function g(d){for(var h=0,_=0;_<d.length;_++)d[_].height>h&&(h=d[_].height);return h}function p(d,h,_){var y;if(_)y=_;else if(typeof document<"u")y=document.createElement("canvas").getContext("2d");else return 0;y.font=h.fontOptions+" "+h.fontSize+"px "+h.font;var b=y.measureText(d);if(!b)return 0;var E=b.width;return E}return qt.getMaximumHeightOfEncodings=g,qt.getEncodingHeight=s,qt.getBarcodePadding=o,qt.calculateEncodingAttributes=c,qt.getTotalWidthOfEncodings=f,qt}var wy;function QT(){if(wy)return lc;wy=1,Object.defineProperty(lc,"__esModule",{value:!0});var r=(function(){function g(p,d){for(var h=0;h<d.length;h++){var _=d[h];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,d,h){return d&&g(p.prototype,d),h&&g(p,h),p}})(),t=Pc(),i=o(t),s=Bv();function o(g){return g&&g.__esModule?g:{default:g}}function c(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}var f=(function(){function g(p,d,h){c(this,g),this.canvas=p,this.encodings=d,this.options=h}return r(g,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var d=0;d<this.encodings.length;d++){var h=(0,i.default)(this.options,this.encodings[d].options);this.drawCanvasBarcode(h,this.encodings[d]),this.drawCanvasText(h,this.encodings[d]),this.moveCanvasDrawing(this.encodings[d])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var d=this.canvas.getContext("2d");d.save(),(0,s.calculateEncodingAttributes)(this.encodings,this.options,d);var h=(0,s.getTotalWidthOfEncodings)(this.encodings),_=(0,s.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=h+this.options.marginLeft+this.options.marginRight,this.canvas.height=_,d.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(d.fillStyle=this.options.background,d.fillRect(0,0,this.canvas.width,this.canvas.height)),d.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(d,h){var _=this.canvas.getContext("2d"),y=h.data,b;d.textPosition=="top"?b=d.marginTop+d.fontSize+d.textMargin:b=d.marginTop,_.fillStyle=d.lineColor;for(var E=0;E<y.length;E++){var S=E*d.width+h.barcodePadding;y[E]==="1"?_.fillRect(S,b,d.width,d.height):y[E]&&_.fillRect(S,b,d.width,d.height*y[E])}}},{key:"drawCanvasText",value:function(d,h){var _=this.canvas.getContext("2d"),y=d.fontOptions+" "+d.fontSize+"px "+d.font;if(d.displayValue){var b,E;d.textPosition=="top"?E=d.marginTop+d.fontSize-d.textMargin:E=d.height+d.textMargin+d.marginTop+d.fontSize,_.font=y,d.textAlign=="left"||h.barcodePadding>0?(b=0,_.textAlign="left"):d.textAlign=="right"?(b=h.width-1,_.textAlign="right"):(b=h.width/2,_.textAlign="center"),_.fillText(h.text,b,E)}}},{key:"moveCanvasDrawing",value:function(d){var h=this.canvas.getContext("2d");h.translate(d.width,0)}},{key:"restoreCanvas",value:function(){var d=this.canvas.getContext("2d");d.restore()}}]),g})();return lc.default=f,lc}var oc={},Sy;function XT(){if(Sy)return oc;Sy=1,Object.defineProperty(oc,"__esModule",{value:!0});var r=(function(){function p(d,h){for(var _=0;_<h.length;_++){var y=h[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,h,_){return h&&p(d.prototype,h),_&&p(d,_),d}})(),t=Pc(),i=o(t),s=Bv();function o(p){return p&&p.__esModule?p:{default:p}}function c(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}var f="http://www.w3.org/2000/svg",g=(function(){function p(d,h,_){c(this,p),this.svg=d,this.encodings=h,this.options=_,this.document=_.xmlDocument||document}return r(p,[{key:"render",value:function(){var h=this.options.marginLeft;this.prepareSVG();for(var _=0;_<this.encodings.length;_++){var y=this.encodings[_],b=(0,i.default)(this.options,y.options),E=this.createGroup(h,b.marginTop,this.svg);this.setGroupOptions(E,b),this.drawSvgBarcode(E,b,y),this.drawSVGText(E,b,y),h+=y.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,s.calculateEncodingAttributes)(this.encodings,this.options);var h=(0,s.getTotalWidthOfEncodings)(this.encodings),_=(0,s.getMaximumHeightOfEncodings)(this.encodings),y=h+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(y,_),this.options.background&&this.drawRect(0,0,y,_,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(h,_,y){var b=y.data,E;_.textPosition=="top"?E=_.fontSize+_.textMargin:E=0;for(var S=0,C=0,M=0;M<b.length;M++)C=M*_.width+y.barcodePadding,b[M]==="1"?S++:S>0&&(this.drawRect(C-_.width*S,E,_.width*S,_.height,h),S=0);S>0&&this.drawRect(C-_.width*(S-1),E,_.width*S,_.height,h)}},{key:"drawSVGText",value:function(h,_,y){var b=this.document.createElementNS(f,"text");if(_.displayValue){var E,S;b.setAttribute("style","font:"+_.fontOptions+" "+_.fontSize+"px "+_.font),_.textPosition=="top"?S=_.fontSize-_.textMargin:S=_.height+_.textMargin+_.fontSize,_.textAlign=="left"||y.barcodePadding>0?(E=0,b.setAttribute("text-anchor","start")):_.textAlign=="right"?(E=y.width-1,b.setAttribute("text-anchor","end")):(E=y.width/2,b.setAttribute("text-anchor","middle")),b.setAttribute("x",E),b.setAttribute("y",S),b.appendChild(this.document.createTextNode(y.text)),h.appendChild(b)}}},{key:"setSvgAttributes",value:function(h,_){var y=this.svg;y.setAttribute("width",h+"px"),y.setAttribute("height",_+"px"),y.setAttribute("x","0px"),y.setAttribute("y","0px"),y.setAttribute("viewBox","0 0 "+h+" "+_),y.setAttribute("xmlns",f),y.setAttribute("version","1.1"),y.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(h,_,y){var b=this.document.createElementNS(f,"g");return b.setAttribute("transform","translate("+h+", "+_+")"),y.appendChild(b),b}},{key:"setGroupOptions",value:function(h,_){h.setAttribute("style","fill:"+_.lineColor+";")}},{key:"drawRect",value:function(h,_,y,b,E){var S=this.document.createElementNS(f,"rect");return S.setAttribute("x",h),S.setAttribute("y",_),S.setAttribute("width",y),S.setAttribute("height",b),E.appendChild(S),S}}]),p})();return oc.default=g,oc}var cc={},Ty;function $T(){if(Ty)return cc;Ty=1,Object.defineProperty(cc,"__esModule",{value:!0});var r=(function(){function s(o,c){for(var f=0;f<c.length;f++){var g=c[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}return function(o,c,f){return c&&s(o.prototype,c),f&&s(o,f),o}})();function t(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}var i=(function(){function s(o,c,f){t(this,s),this.object=o,this.encodings=c,this.options=f}return r(s,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),s})();return cc.default=i,cc}var Ny;function KT(){if(Ny)return sc;Ny=1,Object.defineProperty(sc,"__esModule",{value:!0});var r=QT(),t=f(r),i=XT(),s=f(i),o=$T(),c=f(o);function f(g){return g&&g.__esModule?g:{default:g}}return sc.default={CanvasRenderer:t.default,SVGRenderer:s.default,ObjectRenderer:c.default},sc}var ia={},Cy;function zv(){if(Cy)return ia;Cy=1,Object.defineProperty(ia,"__esModule",{value:!0});function r(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function t(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function i(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var s=(function(f){i(g,f);function g(p,d){r(this,g);var h=t(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return h.name="InvalidInputException",h.symbology=p,h.input=d,h.message='"'+h.input+'" is not a valid input for '+h.symbology,h}return g})(Error),o=(function(f){i(g,f);function g(){r(this,g);var p=t(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return p.name="InvalidElementException",p.message="Not supported type to render on",p}return g})(Error),c=(function(f){i(g,f);function g(){r(this,g);var p=t(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return p.name="NoElementException",p.message="No element to render on.",p}return g})(Error);return ia.InvalidInputException=s,ia.InvalidElementException=o,ia.NoElementException=c,ia}var Ay;function ZT(){if(Ay)return nc;Ay=1,Object.defineProperty(nc,"__esModule",{value:!0});var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},t=YT(),i=f(t),s=KT(),o=f(s),c=zv();function f(h){return h&&h.__esModule?h:{default:h}}function g(h){if(typeof h=="string")return p(h);if(Array.isArray(h)){for(var _=[],y=0;y<h.length;y++)_.push(g(h[y]));return _}else{if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLImageElement)return d(h);if(h&&h.nodeName&&h.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&h instanceof SVGElement)return{element:h,options:(0,i.default)(h),renderer:o.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement)return{element:h,options:(0,i.default)(h),renderer:o.default.CanvasRenderer};if(h&&h.getContext)return{element:h,renderer:o.default.CanvasRenderer};if(h&&(typeof h>"u"?"undefined":r(h))==="object"&&!h.nodeName)return{element:h,renderer:o.default.ObjectRenderer};throw new c.InvalidElementException}}function p(h){var _=document.querySelectorAll(h);if(_.length!==0){for(var y=[],b=0;b<_.length;b++)y.push(g(_[b]));return y}}function d(h){var _=document.createElement("canvas");return{element:_,options:(0,i.default)(h),renderer:o.default.CanvasRenderer,afterRender:function(){h.setAttribute("src",_.toDataURL())}}}return nc.default=g,nc}var uc={},Ry;function WT(){if(Ry)return uc;Ry=1,Object.defineProperty(uc,"__esModule",{value:!0});var r=(function(){function s(o,c){for(var f=0;f<c.length;f++){var g=c[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}return function(o,c,f){return c&&s(o.prototype,c),f&&s(o,f),o}})();function t(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}var i=(function(){function s(o){t(this,s),this.api=o}return r(s,[{key:"handleCatch",value:function(c){if(c.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw c.message;else throw c;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(c){try{var f=c.apply(void 0,arguments);return this.api._options.valid(!0),f}catch(g){return this.handleCatch(g),this.api}}}]),s})();return uc.default=i,uc}var Sf,Oy;function JT(){if(Oy)return Sf;Oy=1;var r=GT(),t=M(r),i=Pc(),s=M(i),o=VT(),c=M(o),f=FT(),g=M(f),p=ZT(),d=M(p),h=Lv(),_=M(h),y=WT(),b=M(y),E=zv(),S=Uv(),C=M(S);function M(F){return F&&F.__esModule?F:{default:F}}var U=function(){},Y=function(V,Q,X){var Z=new U;if(typeof V>"u")throw Error("No element to render on was provided.");return Z._renderProperties=(0,d.default)(V),Z._encodings=[],Z._options=C.default,Z._errorHandler=new b.default(Z),typeof Q<"u"&&(X=X||{},X.format||(X.format=ee()),Z.options(X)[X.format](Q,X).render()),Z};Y.getModule=function(F){return t.default[F]};for(var $ in t.default)t.default.hasOwnProperty($)&&re(t.default,$);function re(F,V){U.prototype[V]=U.prototype[V.toUpperCase()]=U.prototype[V.toLowerCase()]=function(Q,X){var Z=this;return Z._errorHandler.wrapBarcodeCall(function(){X.text=typeof X.text>"u"?void 0:""+X.text;var H=(0,s.default)(Z._options,X);H=(0,_.default)(H);var he=F[V],B=W(Q,he,H);return Z._encodings.push(B),Z})}}function W(F,V,Q){F=""+F;var X=new V(F,Q);if(!X.valid())throw new E.InvalidInputException(X.constructor.name,F);var Z=X.encode();Z=(0,c.default)(Z);for(var H=0;H<Z.length;H++)Z[H].options=(0,s.default)(Q,Z[H].options);return Z}function ee(){return t.default.CODE128?"CODE128":Object.keys(t.default)[0]}U.prototype.options=function(F){return this._options=(0,s.default)(this._options,F),this},U.prototype.blank=function(F){var V=new Array(F+1).join("0");return this._encodings.push({data:V}),this},U.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var F;for(var V in this._renderProperties){F=this._renderProperties[V];var Q=(0,s.default)(this._options,F.options);Q.format=="auto"&&(Q.format=ee()),this._errorHandler.wrapBarcodeCall(function(){var X=Q.value,Z=t.default[Q.format.toUpperCase()],H=W(X,Z,Q);J(F,H,Q)})}}},U.prototype.render=function(){if(!this._renderProperties)throw new E.NoElementException;if(Array.isArray(this._renderProperties))for(var F=0;F<this._renderProperties.length;F++)J(this._renderProperties[F],this._encodings,this._options);else J(this._renderProperties,this._encodings,this._options);return this},U.prototype._defaults=C.default;function J(F,V,Q){V=(0,c.default)(V);for(var X=0;X<V.length;X++)V[X].options=(0,s.default)(Q,V[X].options),(0,g.default)(V[X].options);(0,g.default)(Q);var Z=F.renderer,H=new Z(F.element,V,Q);H.render(),F.afterRender&&F.afterRender()}return typeof window<"u"&&(window.JsBarcode=Y),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(F,V){var Q=[];return jQuery(this).each(function(){Q.push(this)}),Y(Q,F,V)}),Sf=Y,Sf}var eN=JT();const Dy=dv(eN);var aa={},Tf,My;function tN(){return My||(My=1,Tf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Tf}var Nf={},Er={},ky;function fi(){if(ky)return Er;ky=1;let r;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Er.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17},Er.getSymbolTotalCodewords=function(s){return t[s]},Er.getBCHDigit=function(i){let s=0;for(;i!==0;)s++,i>>>=1;return s},Er.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');r=s},Er.isKanjiModeEnabled=function(){return typeof r<"u"},Er.toSJIS=function(s){return r(s)},Er}var Cf={},Iy;function zh(){return Iy||(Iy=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+i)}}r.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},r.from=function(s,o){if(r.isValid(s))return s;try{return t(s)}catch{return o}}})(Cf)),Cf}var Af,jy;function nN(){if(jy)return Af;jy=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(t){const i=Math.floor(t/8);return(this.buffer[i]>>>7-t%8&1)===1},put:function(t,i){for(let s=0;s<i;s++)this.putBit((t>>>i-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),t&&(this.buffer[i]|=128>>>this.length%8),this.length++}},Af=r,Af}var Rf,Ly;function rN(){if(Ly)return Rf;Ly=1;function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return r.prototype.set=function(t,i,s,o){const c=t*this.size+i;this.data[c]=s,o&&(this.reservedBit[c]=!0)},r.prototype.get=function(t,i){return this.data[t*this.size+i]},r.prototype.xor=function(t,i,s){this.data[t*this.size+i]^=s},r.prototype.isReserved=function(t,i){return this.reservedBit[t*this.size+i]},Rf=r,Rf}var Of={},Uy;function iN(){return Uy||(Uy=1,(function(r){const t=fi().getSymbolSize;r.getRowColCoords=function(s){if(s===1)return[];const o=Math.floor(s/7)+2,c=t(s),f=c===145?26:Math.ceil((c-13)/(2*o-2))*2,g=[c-7];for(let p=1;p<o-1;p++)g[p]=g[p-1]-f;return g.push(6),g.reverse()},r.getPositions=function(s){const o=[],c=r.getRowColCoords(s),f=c.length;for(let g=0;g<f;g++)for(let p=0;p<f;p++)g===0&&p===0||g===0&&p===f-1||g===f-1&&p===0||o.push([c[g],c[p]]);return o}})(Of)),Of}var Df={},By;function aN(){if(By)return Df;By=1;const r=fi().getSymbolSize,t=7;return Df.getPositions=function(s){const o=r(s);return[[0,0],[o-t,0],[0,o-t]]},Df}var Mf={},zy;function sN(){return zy||(zy=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},r.from=function(o){return r.isValid(o)?parseInt(o,10):void 0},r.getPenaltyN1=function(o){const c=o.size;let f=0,g=0,p=0,d=null,h=null;for(let _=0;_<c;_++){g=p=0,d=h=null;for(let y=0;y<c;y++){let b=o.get(_,y);b===d?g++:(g>=5&&(f+=t.N1+(g-5)),d=b,g=1),b=o.get(y,_),b===h?p++:(p>=5&&(f+=t.N1+(p-5)),h=b,p=1)}g>=5&&(f+=t.N1+(g-5)),p>=5&&(f+=t.N1+(p-5))}return f},r.getPenaltyN2=function(o){const c=o.size;let f=0;for(let g=0;g<c-1;g++)for(let p=0;p<c-1;p++){const d=o.get(g,p)+o.get(g,p+1)+o.get(g+1,p)+o.get(g+1,p+1);(d===4||d===0)&&f++}return f*t.N2},r.getPenaltyN3=function(o){const c=o.size;let f=0,g=0,p=0;for(let d=0;d<c;d++){g=p=0;for(let h=0;h<c;h++)g=g<<1&2047|o.get(d,h),h>=10&&(g===1488||g===93)&&f++,p=p<<1&2047|o.get(h,d),h>=10&&(p===1488||p===93)&&f++}return f*t.N3},r.getPenaltyN4=function(o){let c=0;const f=o.data.length;for(let p=0;p<f;p++)c+=o.data[p];return Math.abs(Math.ceil(c*100/f/5)-10)*t.N4};function i(s,o,c){switch(s){case r.Patterns.PATTERN000:return(o+c)%2===0;case r.Patterns.PATTERN001:return o%2===0;case r.Patterns.PATTERN010:return c%3===0;case r.Patterns.PATTERN011:return(o+c)%3===0;case r.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(c/3))%2===0;case r.Patterns.PATTERN101:return o*c%2+o*c%3===0;case r.Patterns.PATTERN110:return(o*c%2+o*c%3)%2===0;case r.Patterns.PATTERN111:return(o*c%3+(o+c)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}r.applyMask=function(o,c){const f=c.size;for(let g=0;g<f;g++)for(let p=0;p<f;p++)c.isReserved(p,g)||c.xor(p,g,i(o,p,g))},r.getBestMask=function(o,c){const f=Object.keys(r.Patterns).length;let g=0,p=1/0;for(let d=0;d<f;d++){c(d),r.applyMask(d,o);const h=r.getPenaltyN1(o)+r.getPenaltyN2(o)+r.getPenaltyN3(o)+r.getPenaltyN4(o);r.applyMask(d,o),h<p&&(p=h,g=d)}return g}})(Mf)),Mf}var dc={},Py;function Pv(){if(Py)return dc;Py=1;const r=zh(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return dc.getBlocksCount=function(o,c){switch(c){case r.L:return t[(o-1)*4+0];case r.M:return t[(o-1)*4+1];case r.Q:return t[(o-1)*4+2];case r.H:return t[(o-1)*4+3];default:return}},dc.getTotalCodewordsCount=function(o,c){switch(c){case r.L:return i[(o-1)*4+0];case r.M:return i[(o-1)*4+1];case r.Q:return i[(o-1)*4+2];case r.H:return i[(o-1)*4+3];default:return}},dc}var kf={},Ds={},qy;function lN(){if(qy)return Ds;qy=1;const r=new Uint8Array(512),t=new Uint8Array(256);return(function(){let s=1;for(let o=0;o<255;o++)r[o]=s,t[s]=o,s<<=1,s&256&&(s^=285);for(let o=255;o<512;o++)r[o]=r[o-255]})(),Ds.log=function(s){if(s<1)throw new Error("log("+s+")");return t[s]},Ds.exp=function(s){return r[s]},Ds.mul=function(s,o){return s===0||o===0?0:r[t[s]+t[o]]},Ds}var Hy;function oN(){return Hy||(Hy=1,(function(r){const t=lN();r.mul=function(s,o){const c=new Uint8Array(s.length+o.length-1);for(let f=0;f<s.length;f++)for(let g=0;g<o.length;g++)c[f+g]^=t.mul(s[f],o[g]);return c},r.mod=function(s,o){let c=new Uint8Array(s);for(;c.length-o.length>=0;){const f=c[0];for(let p=0;p<o.length;p++)c[p]^=t.mul(o[p],f);let g=0;for(;g<c.length&&c[g]===0;)g++;c=c.slice(g)}return c},r.generateECPolynomial=function(s){let o=new Uint8Array([1]);for(let c=0;c<s;c++)o=r.mul(o,new Uint8Array([1,t.exp(c)]));return o}})(kf)),kf}var If,Gy;function cN(){if(Gy)return If;Gy=1;const r=oN();function t(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(s){this.degree=s,this.genPoly=r.generateECPolynomial(this.degree)},t.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(s.length+this.degree);o.set(s);const c=r.mod(o,this.genPoly),f=this.degree-c.length;if(f>0){const g=new Uint8Array(this.degree);return g.set(c,f),g}return c},If=t,If}var jf={},Lf={},Uf={},Vy;function qv(){return Vy||(Vy=1,Uf.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Uf}var bn={},Fy;function Hv(){if(Fy)return bn;Fy=1;const r="[0-9]+",t="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;bn.KANJI=new RegExp(i,"g"),bn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),bn.BYTE=new RegExp(s,"g"),bn.NUMERIC=new RegExp(r,"g"),bn.ALPHANUMERIC=new RegExp(t,"g");const o=new RegExp("^"+i+"$"),c=new RegExp("^"+r+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return bn.testKanji=function(p){return o.test(p)},bn.testNumeric=function(p){return c.test(p)},bn.testAlphanumeric=function(p){return f.test(p)},bn}var Yy;function hi(){return Yy||(Yy=1,(function(r){const t=qv(),i=Hv();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(c,f){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!t.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?c.ccBits[0]:f<27?c.ccBits[1]:c.ccBits[2]},r.getBestModeForData=function(c){return i.testNumeric(c)?r.NUMERIC:i.testAlphanumeric(c)?r.ALPHANUMERIC:i.testKanji(c)?r.KANJI:r.BYTE},r.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},r.isValid=function(c){return c&&c.bit&&c.ccBits};function s(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+o)}}r.from=function(c,f){if(r.isValid(c))return c;try{return s(c)}catch{return f}}})(Lf)),Lf}var Qy;function uN(){return Qy||(Qy=1,(function(r){const t=fi(),i=Pv(),s=zh(),o=hi(),c=qv(),f=7973,g=t.getBCHDigit(f);function p(y,b,E){for(let S=1;S<=40;S++)if(b<=r.getCapacity(S,E,y))return S}function d(y,b){return o.getCharCountIndicator(y,b)+4}function h(y,b){let E=0;return y.forEach(function(S){const C=d(S.mode,b);E+=C+S.getBitsLength()}),E}function _(y,b){for(let E=1;E<=40;E++)if(h(y,E)<=r.getCapacity(E,b,o.MIXED))return E}r.from=function(b,E){return c.isValid(b)?parseInt(b,10):E},r.getCapacity=function(b,E,S){if(!c.isValid(b))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=o.BYTE);const C=t.getSymbolTotalCodewords(b),M=i.getTotalCodewordsCount(b,E),U=(C-M)*8;if(S===o.MIXED)return U;const Y=U-d(S,b);switch(S){case o.NUMERIC:return Math.floor(Y/10*3);case o.ALPHANUMERIC:return Math.floor(Y/11*2);case o.KANJI:return Math.floor(Y/13);case o.BYTE:default:return Math.floor(Y/8)}},r.getBestVersionForData=function(b,E){let S;const C=s.from(E,s.M);if(Array.isArray(b)){if(b.length>1)return _(b,C);if(b.length===0)return 1;S=b[0]}else S=b;return p(S.mode,S.getLength(),C)},r.getEncodedBits=function(b){if(!c.isValid(b)||b<7)throw new Error("Invalid QR Code version");let E=b<<12;for(;t.getBCHDigit(E)-g>=0;)E^=f<<t.getBCHDigit(E)-g;return b<<12|E}})(jf)),jf}var Bf={},Xy;function dN(){if(Xy)return Bf;Xy=1;const r=fi(),t=1335,i=21522,s=r.getBCHDigit(t);return Bf.getEncodedBits=function(c,f){const g=c.bit<<3|f;let p=g<<10;for(;r.getBCHDigit(p)-s>=0;)p^=t<<r.getBCHDigit(p)-s;return(g<<10|p)^i},Bf}var zf={},Pf,$y;function fN(){if($y)return Pf;$y=1;const r=hi();function t(i){this.mode=r.NUMERIC,this.data=i.toString()}return t.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let o,c,f;for(o=0;o+3<=this.data.length;o+=3)c=this.data.substr(o,3),f=parseInt(c,10),s.put(f,10);const g=this.data.length-o;g>0&&(c=this.data.substr(o),f=parseInt(c,10),s.put(f,g*3+1))},Pf=t,Pf}var qf,Ky;function hN(){if(Ky)return qf;Ky=1;const r=hi(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(s){this.mode=r.ALPHANUMERIC,this.data=s}return i.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){let c;for(c=0;c+2<=this.data.length;c+=2){let f=t.indexOf(this.data[c])*45;f+=t.indexOf(this.data[c+1]),o.put(f,11)}this.data.length%2&&o.put(t.indexOf(this.data[c]),6)},qf=i,qf}var Hf,Zy;function mN(){if(Zy)return Hf;Zy=1;const r=hi();function t(i){this.mode=r.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return t.getBitsLength=function(s){return s*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){for(let s=0,o=this.data.length;s<o;s++)i.put(this.data[s],8)},Hf=t,Hf}var Gf,Wy;function gN(){if(Wy)return Gf;Wy=1;const r=hi(),t=fi();function i(s){this.mode=r.KANJI,this.data=s}return i.getBitsLength=function(o){return o*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(s){let o;for(o=0;o<this.data.length;o++){let c=t.toSJIS(this.data[o]);if(c>=33088&&c<=40956)c-=33088;else if(c>=57408&&c<=60351)c-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);c=(c>>>8&255)*192+(c&255),s.put(c,13)}},Gf=i,Gf}var Vf={exports:{}},Jy;function pN(){return Jy||(Jy=1,(function(r){var t={single_source_shortest_paths:function(i,s,o){var c={},f={};f[s]=0;var g=t.PriorityQueue.make();g.push(s,0);for(var p,d,h,_,y,b,E,S,C;!g.empty();){p=g.pop(),d=p.value,_=p.cost,y=i[d]||{};for(h in y)y.hasOwnProperty(h)&&(b=y[h],E=_+b,S=f[h],C=typeof f[h]>"u",(C||S>E)&&(f[h]=E,g.push(h,E),c[h]=d))}if(typeof o<"u"&&typeof f[o]>"u"){var M=["Could not find a path from ",s," to ",o,"."].join("");throw new Error(M)}return c},extract_shortest_path_from_predecessor_list:function(i,s){for(var o=[],c=s;c;)o.push(c),i[c],c=i[c];return o.reverse(),o},find_path:function(i,s,o){var c=t.single_source_shortest_paths(i,s,o);return t.extract_shortest_path_from_predecessor_list(c,o)},PriorityQueue:{make:function(i){var s=t.PriorityQueue,o={},c;i=i||{};for(c in s)s.hasOwnProperty(c)&&(o[c]=s[c]);return o.queue=[],o.sorter=i.sorter||s.default_sorter,o},default_sorter:function(i,s){return i.cost-s.cost},push:function(i,s){var o={value:i,cost:s};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(Vf)),Vf.exports}var e_;function yN(){return e_||(e_=1,(function(r){const t=hi(),i=fN(),s=hN(),o=mN(),c=gN(),f=Hv(),g=fi(),p=pN();function d(M){return unescape(encodeURIComponent(M)).length}function h(M,U,Y){const $=[];let re;for(;(re=M.exec(Y))!==null;)$.push({data:re[0],index:re.index,mode:U,length:re[0].length});return $}function _(M){const U=h(f.NUMERIC,t.NUMERIC,M),Y=h(f.ALPHANUMERIC,t.ALPHANUMERIC,M);let $,re;return g.isKanjiModeEnabled()?($=h(f.BYTE,t.BYTE,M),re=h(f.KANJI,t.KANJI,M)):($=h(f.BYTE_KANJI,t.BYTE,M),re=[]),U.concat(Y,$,re).sort(function(ee,J){return ee.index-J.index}).map(function(ee){return{data:ee.data,mode:ee.mode,length:ee.length}})}function y(M,U){switch(U){case t.NUMERIC:return i.getBitsLength(M);case t.ALPHANUMERIC:return s.getBitsLength(M);case t.KANJI:return c.getBitsLength(M);case t.BYTE:return o.getBitsLength(M)}}function b(M){return M.reduce(function(U,Y){const $=U.length-1>=0?U[U.length-1]:null;return $&&$.mode===Y.mode?(U[U.length-1].data+=Y.data,U):(U.push(Y),U)},[])}function E(M){const U=[];for(let Y=0;Y<M.length;Y++){const $=M[Y];switch($.mode){case t.NUMERIC:U.push([$,{data:$.data,mode:t.ALPHANUMERIC,length:$.length},{data:$.data,mode:t.BYTE,length:$.length}]);break;case t.ALPHANUMERIC:U.push([$,{data:$.data,mode:t.BYTE,length:$.length}]);break;case t.KANJI:U.push([$,{data:$.data,mode:t.BYTE,length:d($.data)}]);break;case t.BYTE:U.push([{data:$.data,mode:t.BYTE,length:d($.data)}])}}return U}function S(M,U){const Y={},$={start:{}};let re=["start"];for(let W=0;W<M.length;W++){const ee=M[W],J=[];for(let F=0;F<ee.length;F++){const V=ee[F],Q=""+W+F;J.push(Q),Y[Q]={node:V,lastCount:0},$[Q]={};for(let X=0;X<re.length;X++){const Z=re[X];Y[Z]&&Y[Z].node.mode===V.mode?($[Z][Q]=y(Y[Z].lastCount+V.length,V.mode)-y(Y[Z].lastCount,V.mode),Y[Z].lastCount+=V.length):(Y[Z]&&(Y[Z].lastCount=V.length),$[Z][Q]=y(V.length,V.mode)+4+t.getCharCountIndicator(V.mode,U))}}re=J}for(let W=0;W<re.length;W++)$[re[W]].end=0;return{map:$,table:Y}}function C(M,U){let Y;const $=t.getBestModeForData(M);if(Y=t.from(U,$),Y!==t.BYTE&&Y.bit<$.bit)throw new Error('"'+M+'" cannot be encoded with mode '+t.toString(Y)+`.
 Suggested mode is: `+t.toString($));switch(Y===t.KANJI&&!g.isKanjiModeEnabled()&&(Y=t.BYTE),Y){case t.NUMERIC:return new i(M);case t.ALPHANUMERIC:return new s(M);case t.KANJI:return new c(M);case t.BYTE:return new o(M)}}r.fromArray=function(U){return U.reduce(function(Y,$){return typeof $=="string"?Y.push(C($,null)):$.data&&Y.push(C($.data,$.mode)),Y},[])},r.fromString=function(U,Y){const $=_(U,g.isKanjiModeEnabled()),re=E($),W=S(re,Y),ee=p.find_path(W.map,"start","end"),J=[];for(let F=1;F<ee.length-1;F++)J.push(W.table[ee[F]].node);return r.fromArray(b(J))},r.rawSplit=function(U){return r.fromArray(_(U,g.isKanjiModeEnabled()))}})(zf)),zf}var t_;function _N(){if(t_)return Nf;t_=1;const r=fi(),t=zh(),i=nN(),s=rN(),o=iN(),c=aN(),f=sN(),g=Pv(),p=cN(),d=uN(),h=dN(),_=hi(),y=yN();function b(W,ee){const J=W.size,F=c.getPositions(ee);for(let V=0;V<F.length;V++){const Q=F[V][0],X=F[V][1];for(let Z=-1;Z<=7;Z++)if(!(Q+Z<=-1||J<=Q+Z))for(let H=-1;H<=7;H++)X+H<=-1||J<=X+H||(Z>=0&&Z<=6&&(H===0||H===6)||H>=0&&H<=6&&(Z===0||Z===6)||Z>=2&&Z<=4&&H>=2&&H<=4?W.set(Q+Z,X+H,!0,!0):W.set(Q+Z,X+H,!1,!0))}}function E(W){const ee=W.size;for(let J=8;J<ee-8;J++){const F=J%2===0;W.set(J,6,F,!0),W.set(6,J,F,!0)}}function S(W,ee){const J=o.getPositions(ee);for(let F=0;F<J.length;F++){const V=J[F][0],Q=J[F][1];for(let X=-2;X<=2;X++)for(let Z=-2;Z<=2;Z++)X===-2||X===2||Z===-2||Z===2||X===0&&Z===0?W.set(V+X,Q+Z,!0,!0):W.set(V+X,Q+Z,!1,!0)}}function C(W,ee){const J=W.size,F=d.getEncodedBits(ee);let V,Q,X;for(let Z=0;Z<18;Z++)V=Math.floor(Z/3),Q=Z%3+J-8-3,X=(F>>Z&1)===1,W.set(V,Q,X,!0),W.set(Q,V,X,!0)}function M(W,ee,J){const F=W.size,V=h.getEncodedBits(ee,J);let Q,X;for(Q=0;Q<15;Q++)X=(V>>Q&1)===1,Q<6?W.set(Q,8,X,!0):Q<8?W.set(Q+1,8,X,!0):W.set(F-15+Q,8,X,!0),Q<8?W.set(8,F-Q-1,X,!0):Q<9?W.set(8,15-Q-1+1,X,!0):W.set(8,15-Q-1,X,!0);W.set(F-8,8,1,!0)}function U(W,ee){const J=W.size;let F=-1,V=J-1,Q=7,X=0;for(let Z=J-1;Z>0;Z-=2)for(Z===6&&Z--;;){for(let H=0;H<2;H++)if(!W.isReserved(V,Z-H)){let he=!1;X<ee.length&&(he=(ee[X]>>>Q&1)===1),W.set(V,Z-H,he),Q--,Q===-1&&(X++,Q=7)}if(V+=F,V<0||J<=V){V-=F,F=-F;break}}}function Y(W,ee,J){const F=new i;J.forEach(function(H){F.put(H.mode.bit,4),F.put(H.getLength(),_.getCharCountIndicator(H.mode,W)),H.write(F)});const V=r.getSymbolTotalCodewords(W),Q=g.getTotalCodewordsCount(W,ee),X=(V-Q)*8;for(F.getLengthInBits()+4<=X&&F.put(0,4);F.getLengthInBits()%8!==0;)F.putBit(0);const Z=(X-F.getLengthInBits())/8;for(let H=0;H<Z;H++)F.put(H%2?17:236,8);return $(F,W,ee)}function $(W,ee,J){const F=r.getSymbolTotalCodewords(ee),V=g.getTotalCodewordsCount(ee,J),Q=F-V,X=g.getBlocksCount(ee,J),Z=F%X,H=X-Z,he=Math.floor(F/X),B=Math.floor(Q/X),te=B+1,ae=he-B,Te=new p(ae);let we=0;const Ve=new Array(X),L=new Array(X);let A=0;const P=new Uint8Array(W.buffer);for(let yt=0;yt<X;yt++){const An=yt<H?B:te;Ve[yt]=P.slice(we,we+An),L[yt]=Te.encode(Ve[yt]),we+=An,A=Math.max(A,An)}const le=new Uint8Array(F);let Ie=0,je,nt;for(je=0;je<A;je++)for(nt=0;nt<X;nt++)je<Ve[nt].length&&(le[Ie++]=Ve[nt][je]);for(je=0;je<ae;je++)for(nt=0;nt<X;nt++)le[Ie++]=L[nt][je];return le}function re(W,ee,J,F){let V;if(Array.isArray(W))V=y.fromArray(W);else if(typeof W=="string"){let he=ee;if(!he){const B=y.rawSplit(W);he=d.getBestVersionForData(B,J)}V=y.fromString(W,he||40)}else throw new Error("Invalid data");const Q=d.getBestVersionForData(V,J);if(!Q)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ee)ee=Q;else if(ee<Q)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+Q+`.
`);const X=Y(ee,J,V),Z=r.getSymbolSize(ee),H=new s(Z);return b(H,ee),E(H),S(H,ee),M(H,J,0),ee>=7&&C(H,ee),U(H,X),isNaN(F)&&(F=f.getBestMask(H,M.bind(null,H,J))),f.applyMask(F,H),M(H,J,F),{modules:H,version:ee,errorCorrectionLevel:J,maskPattern:F,segments:V}}return Nf.create=function(ee,J){if(typeof ee>"u"||ee==="")throw new Error("No input text");let F=t.M,V,Q;return typeof J<"u"&&(F=t.from(J.errorCorrectionLevel,t.M),V=d.from(J.version),Q=f.from(J.maskPattern),J.toSJISFunc&&r.setToSJISFunction(J.toSJISFunc)),re(ee,V,F,Q)},Nf}var Ff={},Yf={},n_;function Gv(){return n_||(n_=1,(function(r){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let s=i.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+i);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(c){return[c,c]}))),s.length===6&&s.push("F","F");const o=parseInt(s.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+s.slice(0,6).join("")}}r.getOptions=function(s){s||(s={}),s.color||(s.color={});const o=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,c=s.width&&s.width>=21?s.width:void 0,f=s.scale||4;return{width:c,scale:c?4:f,margin:o,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},r.getScale=function(s,o){return o.width&&o.width>=s+o.margin*2?o.width/(s+o.margin*2):o.scale},r.getImageWidth=function(s,o){const c=r.getScale(s,o);return Math.floor((s+o.margin*2)*c)},r.qrToImageData=function(s,o,c){const f=o.modules.size,g=o.modules.data,p=r.getScale(f,c),d=Math.floor((f+c.margin*2)*p),h=c.margin*p,_=[c.color.light,c.color.dark];for(let y=0;y<d;y++)for(let b=0;b<d;b++){let E=(y*d+b)*4,S=c.color.light;if(y>=h&&b>=h&&y<d-h&&b<d-h){const C=Math.floor((y-h)/p),M=Math.floor((b-h)/p);S=_[g[C*f+M]?1:0]}s[E++]=S.r,s[E++]=S.g,s[E++]=S.b,s[E]=S.a}}})(Yf)),Yf}var r_;function vN(){return r_||(r_=1,(function(r){const t=Gv();function i(o,c,f){o.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=f,c.width=f,c.style.height=f+"px",c.style.width=f+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(c,f,g){let p=g,d=f;typeof p>"u"&&(!f||!f.getContext)&&(p=f,f=void 0),f||(d=s()),p=t.getOptions(p);const h=t.getImageWidth(c.modules.size,p),_=d.getContext("2d"),y=_.createImageData(h,h);return t.qrToImageData(y.data,c,p),i(_,d,h),_.putImageData(y,0,0),d},r.renderToDataURL=function(c,f,g){let p=g;typeof p>"u"&&(!f||!f.getContext)&&(p=f,f=void 0),p||(p={});const d=r.render(c,f,p),h=p.type||"image/png",_=p.rendererOpts||{};return d.toDataURL(h,_.quality)}})(Ff)),Ff}var Qf={},i_;function bN(){if(i_)return Qf;i_=1;const r=Gv();function t(o,c){const f=o.a/255,g=c+'="'+o.hex+'"';return f<1?g+" "+c+'-opacity="'+f.toFixed(2).slice(1)+'"':g}function i(o,c,f){let g=o+c;return typeof f<"u"&&(g+=" "+f),g}function s(o,c,f){let g="",p=0,d=!1,h=0;for(let _=0;_<o.length;_++){const y=Math.floor(_%c),b=Math.floor(_/c);!y&&!d&&(d=!0),o[_]?(h++,_>0&&y>0&&o[_-1]||(g+=d?i("M",y+f,.5+b+f):i("m",p,0),p=0,d=!1),y+1<c&&o[_+1]||(g+=i("h",h),h=0)):p++}return g}return Qf.render=function(c,f,g){const p=r.getOptions(f),d=c.modules.size,h=c.modules.data,_=d+p.margin*2,y=p.color.light.a?"<path "+t(p.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",b="<path "+t(p.color.dark,"stroke")+' d="'+s(h,d,p.margin)+'"/>',E='viewBox="0 0 '+_+" "+_+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(p.width?'width="'+p.width+'" height="'+p.width+'" ':"")+E+' shape-rendering="crispEdges">'+y+b+`</svg>
`;return typeof g=="function"&&g(null,C),C},Qf}var a_;function xN(){if(a_)return aa;a_=1;const r=tN(),t=_N(),i=vN(),s=bN();function o(c,f,g,p,d){const h=[].slice.call(arguments,1),_=h.length,y=typeof h[_-1]=="function";if(!y&&!r())throw new Error("Callback required as last argument");if(y){if(_<2)throw new Error("Too few arguments provided");_===2?(d=g,g=f,f=p=void 0):_===3&&(f.getContext&&typeof d>"u"?(d=p,p=void 0):(d=p,p=g,g=f,f=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(g=f,f=p=void 0):_===2&&!f.getContext&&(p=g,g=f,f=void 0),new Promise(function(b,E){try{const S=t.create(g,p);b(c(S,f,p))}catch(S){E(S)}})}try{const b=t.create(g,p);d(null,c(b,f,p))}catch(b){d(b)}}return aa.create=t.create,aa.toCanvas=o.bind(null,i.render),aa.toDataURL=o.bind(null,i.renderToDataURL),aa.toString=o.bind(null,function(c,f,g){return s.render(c,g)}),aa}var EN=xN();const s_=dv(EN);class wN{canvas=null;printerConfig;scannerStream=null;isScanning=!1;constructor(){this.canvas=this.createCanvas(),this.printerConfig={printerName:"Default",labelSize:"medium",dpi:203,darknessSetting:10,printSpeed:6}}async generateBundleLabel(t){try{const i=this.generateBarcodeString(t.bundleId,t.lotNumber),s=JSON.stringify({bundleId:t.bundleId,bundleNumber:t.bundleNumber,lotNumber:t.lotNumber,articleName:t.articleName,size:t.size,color:t.color,pieces:t.pieces,cutDate:t.cutDate.toISOString(),type:"bundle",version:"1.0"}),o=await s_.toDataURL(s,{width:128,margin:1,errorCorrectionLevel:"M"});return{...t,barcode:i,qrCode:o}}catch(i){throw console.error("Error generating bundle label:",i),i}}generateBarcodeString(t,i){const s=Date.now().toString().slice(-6),o=this.calculateChecksum(t+i);return`${i}${t.slice(-3)}${s}${o}`}async generateBarcodeImage(t,i="CODE128"){try{if(!this.canvas)throw new Error("Canvas not available");return Dy(this.canvas,t,{format:i,width:2,height:40,displayValue:!0,fontSize:12,margin:5}),this.canvas.toDataURL("image/png")}catch(s){throw console.error("Error generating barcode image:",s),s}}async generateQRCode(t,i=128){try{const s=typeof t=="string"?t:JSON.stringify(t);return await s_.toDataURL(s,{width:i,margin:2,errorCorrectionLevel:"M",type:"image/png"})}catch(s){throw console.error("Error generating QR code:",s),s}}generateLabelHTML(t,i="thermal"){return{thermal:this.getThermalLabelTemplate(t),laser:this.getLaserLabelTemplate(t),inkjet:this.getInkjetLabelTemplate(t)}[i]}getThermalLabelTemplate(t){return`
      <div style="width: 4in; height: 2.5in; padding: 0.1in; font-family: Arial, sans-serif; border: 1px solid #000;">
        <!-- Header -->
        <div style="text-align: center; font-size: 14px; font-weight: bold; border-bottom: 1px solid #000; padding-bottom: 2px; margin-bottom: 4px;">
          📦 BUNDLE LABEL
        </div>
        
        <!-- Bundle Info -->
        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
          <div style="font-size: 12px;">
            <strong>Bundle:</strong> ${t.bundleNumber}<br>
            <strong>Lot:</strong> ${t.lotNumber}<br>
            <strong>Article:</strong> ${t.articleName}
          </div>
          <div style="text-align: right; font-size: 12px;">
            <strong>Size:</strong> ${t.size}<br>
            <strong>Color:</strong> ${t.color}<br>
            <strong>Pieces:</strong> ${t.pieces}
          </div>
        </div>
        
        <!-- Barcode -->
        <div style="text-align: center; margin: 8px 0;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(t.barcode)}" alt="Barcode" style="max-width: 3in; height: 0.5in;">
          <div style="font-size: 10px; font-family: monospace;">${t.barcode}</div>
        </div>
        
        <!-- QR Code and Additional Info -->
        <div style="display: flex; justify-content: space-between; align-items: flex-end;">
          <div style="font-size: 10px;">
            <strong>Operation:</strong> ${t.operation}<br>
            <strong>Cut by:</strong> ${t.cutBy}<br>
            <strong>Date:</strong> ${t.cutDate.toLocaleDateString()}
            ${t.operatorAssigned?`<br><strong>Assigned:</strong> ${t.operatorAssigned}`:""}
          </div>
          ${t.qrCode?`<img src="${t.qrCode}" alt="QR Code" style="width: 0.8in; height: 0.8in;">`:""}
        </div>
      </div>
    `}getLaserLabelTemplate(t){return`
      <div style="width: 4in; height: 3in; padding: 0.15in; font-family: 'Helvetica', sans-serif; border: 2px solid #000;">
        <div style="text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 8px; background: #000; color: #fff; padding: 4px;">
          PRODUCTION BUNDLE
        </div>
        
        <table style="width: 100%; font-size: 11px; margin-bottom: 8px;">
          <tr>
            <td><strong>Bundle #:</strong></td>
            <td>${t.bundleNumber}</td>
            <td><strong>Lot #:</strong></td>
            <td>${t.lotNumber}</td>
          </tr>
          <tr>
            <td><strong>Article:</strong></td>
            <td colspan="3">${t.articleName}</td>
          </tr>
          <tr>
            <td><strong>Size:</strong></td>
            <td>${t.size}</td>
            <td><strong>Color:</strong></td>
            <td>${t.color}</td>
          </tr>
          <tr>
            <td><strong>Pieces:</strong></td>
            <td>${t.pieces}</td>
            <td><strong>Operation:</strong></td>
            <td>${t.operation}</td>
          </tr>
        </table>
        
        <div style="text-align: center; margin: 10px 0;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(t.barcode)}" alt="Barcode" style="max-width: 3.5in; height: 0.6in;">
          <div style="font-size: 9px; font-family: 'Courier New', monospace; margin-top: 2px;">${t.barcode}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 9px;">
          <div>
            Cut by: <strong>${t.cutBy}</strong><br>
            Date: <strong>${t.cutDate.toLocaleDateString()}</strong>
          </div>
          ${t.qrCode?`<img src="${t.qrCode}" alt="QR" style="width: 1in; height: 1in; border: 1px solid #ccc;">`:""}
        </div>
      </div>
    `}getInkjetLabelTemplate(t){return`
      <div style="width: 4in; height: 3in; padding: 0.2in; font-family: 'Arial', sans-serif; background: #f9f9f9; border: 2px solid #333; border-radius: 8px;">
        <div style="text-align: center; font-size: 18px; font-weight: bold; color: #fff; background: linear-gradient(45deg, #007bff, #0056b3); padding: 6px; border-radius: 4px; margin-bottom: 10px;">
          🏭 TSA Production Bundle
        </div>
        
        <div style="background: #fff; padding: 8px; border-radius: 4px; margin-bottom: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 11px;">
            <div><span style="color: #666;">Bundle:</span> <strong>${t.bundleNumber}</strong></div>
            <div><span style="color: #666;">Lot:</span> <strong>${t.lotNumber}</strong></div>
            <div><span style="color: #666;">Article:</span> <strong>${t.articleName}</strong></div>
            <div><span style="color: #666;">Operation:</span> <strong>${t.operation}</strong></div>
            <div><span style="color: #666;">Size:</span> <span style="background: #e3f2fd; padding: 2px 6px; border-radius: 3px;"><strong>${t.size}</strong></span></div>
            <div><span style="color: #666;">Color:</span> <span style="background: #fff3e0; padding: 2px 6px; border-radius: 3px;"><strong>${t.color}</strong></span></div>
          </div>
          <div style="text-align: center; font-size: 14px; color: #007bff; font-weight: bold; margin-top: 6px;">
            ${t.pieces} Pieces
          </div>
        </div>
        
        <div style="text-align: center; background: #fff; padding: 6px; border-radius: 4px; margin-bottom: 8px;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(t.barcode)}" alt="Barcode" style="max-width: 3in; height: 0.5in;">
          <div style="font-size: 8px; font-family: 'Courier New', monospace; color: #666; margin-top: 2px;">${t.barcode}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 9px; color: #666;">
          <div style="background: #fff; padding: 4px; border-radius: 3px;">
            <div>Cut by: <strong style="color: #333;">${t.cutBy}</strong></div>
            <div>Date: <strong style="color: #333;">${t.cutDate.toLocaleDateString()}</strong></div>
          </div>
          ${t.qrCode?`<img src="${t.qrCode}" alt="QR" style="width: 0.8in; height: 0.8in; border: 2px solid #007bff; border-radius: 4px;">`:""}
        </div>
      </div>
    `}async printLabel(t,i){try{const s={...this.printerConfig,...i},o=this.generateLabelHTML(t,"thermal");if(window.print&&document){const c=window.open("","_blank","width=400,height=300");if(!c)throw new Error("Unable to open print window");c.document.write(`
          <html>
            <head>
              <title>Bundle Label - ${t.bundleNumber}</title>
              <style>
                @media print {
                  @page { margin: 0; size: 4in 3in; }
                  body { margin: 0; padding: 0; }
                }
                body { font-family: Arial, sans-serif; }
              </style>
            </head>
            <body>
              ${o}
              <script>
                window.onload = function() {
                  window.print();
                  window.close();
                };
              <\/script>
            </body>
          </html>
        `),c.document.close()}else await this.downloadLabelAsImage(t)}catch(s){throw console.error("Error printing label:",s),s}}async downloadLabelAsImage(t){try{const i=document.createElement("canvas");i.width=400,i.height=300;const s=i.getContext("2d");if(!s)throw new Error("Canvas context not available");s.fillStyle="#ffffff",s.fillRect(0,0,i.width,i.height),s.strokeStyle="#000000",s.lineWidth=2,s.strokeRect(0,0,i.width,i.height),s.fillStyle="#000000",s.font="bold 16px Arial",s.textAlign="center",s.fillText("BUNDLE LABEL",i.width/2,25),s.font="12px Arial",s.textAlign="left",s.fillText(`Bundle: ${t.bundleNumber}`,20,60),s.fillText(`Lot: ${t.lotNumber}`,20,80),s.fillText(`Article: ${t.articleName}`,20,100),s.fillText(`Size: ${t.size}`,20,120),s.fillText(`Color: ${t.color}`,200,120),s.fillText(`Pieces: ${t.pieces}`,20,140);const o=new Image;o.onload=()=>{s.drawImage(o,50,160,300,40),s.font="10px Arial",s.fillText(`Cut by: ${t.cutBy}`,20,230),s.fillText(`Date: ${t.cutDate.toLocaleDateString()}`,20,245),s.fillText(`Operation: ${t.operation}`,20,260),i.toBlob(c=>{if(c){const f=URL.createObjectURL(c),g=document.createElement("a");g.href=f,g.download=`bundle_${t.bundleNumber}_label.png`,g.click(),URL.revokeObjectURL(f)}})},o.src=await this.generateBarcodeImage(t.barcode)}catch(i){throw console.error("Error downloading label as image:",i),i}}async startBarcodeScanning(t,i,s){try{this.isScanning&&await this.stopScanning();const o={video:{facingMode:s?.facingMode||"environment",width:{ideal:s?.width||1280},height:{ideal:s?.height||720}}};this.scannerStream=await navigator.mediaDevices.getUserMedia(o),t.srcObject=this.scannerStream,await new Promise(c=>{t.onloadedmetadata=()=>{t.play(),c()}}),this.isScanning=!0,this.startScanLoop(t,i)}catch(o){throw console.error("Error starting barcode scanning:",o),o}}async stopScanning(){this.isScanning=!1,this.scannerStream&&(this.scannerStream.getTracks().forEach(t=>t.stop()),this.scannerStream=null)}startScanLoop(t,i){const s=document.createElement("canvas"),o=s.getContext("2d");if(!o){i({success:!1,error:"Canvas context not available"});return}const c=()=>{if(!this.isScanning)return;s.width=t.videoWidth,s.height=t.videoHeight,o.drawImage(t,0,0);const f=o.getImageData(0,0,s.width,s.height),g=this.processImageForBarcode(f);g.success?i(g):requestAnimationFrame(c)};requestAnimationFrame(c)}processImageForBarcode(t){try{return Math.random()>.95?{success:!0,data:{bundleId:"B001",bundleNumber:"LOT-2024-B001",lotNumber:"LOT-2024",type:"bundle",additionalInfo:{scannedAt:new Date,confidence:.95}}}:{success:!1}}catch{return{success:!1,error:"Error processing image for barcode"}}}parseBarcodeManually(t){try{const i=/^([A-Z0-9\-]+)([A-Z0-9]{3})(\d{6})(\d{2})$/,s=t.match(i);if(!s)return{success:!1,error:"Invalid barcode format"};const[,o,c,f,g]=s,p=this.calculateChecksum(o+c);return parseInt(g)!==p?{success:!1,error:"Invalid barcode checksum"}:{success:!0,data:{bundleId:c,bundleNumber:`${o}-${c}`,lotNumber:o,type:"bundle",additionalInfo:{timestamp:f,manualEntry:!0}}}}catch{return{success:!1,error:"Error parsing barcode"}}}createCanvas(){return typeof document>"u"?{}:document.createElement("canvas")}calculateChecksum(t){let i=0;for(let s=0;s<t.length;s++)i+=t.charCodeAt(s);return i%100}generateBarcodeBase64(t){try{return this.canvas?(Dy(this.canvas,t,{format:"CODE128",width:1,height:30,displayValue:!1}),this.canvas.toDataURL("image/png").split(",")[1]):""}catch(i){return console.error("Error generating barcode base64:",i),""}}updatePrinterConfig(t){this.printerConfig={...this.printerConfig,...t}}getPrinterConfig(){return{...this.printerConfig}}validateBarcodeFormat(t){return/^[A-Z0-9\-]{10,30}$/.test(t)}async generateMultipleBarcodes(t){const i=[];for(const s of t){const o=await this.generateBundleLabel(s);i.push(o)}return i}async printMultipleLabels(t){for(const i of t)await this.printLabel(i),await new Promise(s=>setTimeout(s,500))}}const Xn=new wN,SN=({onScanSuccess:r,onClose:t,allowManualEntry:i=!0,scanMode:s="both",title:o="Scan Bundle",className:c=""})=>{const f=j.useRef(null),[g,p]=j.useState(!1),[d,h]=j.useState(null),[_,y]=j.useState(""),[b,E]=j.useState(""),[S,C]=j.useState("pending"),[M,U]=j.useState("environment");j.useEffect(()=>{Y()},[]);const Y=async()=>{try{if(navigator.permissions){const V=await navigator.permissions.query({name:"camera"});C(V.state),V.onchange=()=>{C(V.state)}}}catch(V){console.error("Permission API error:",V),console.log("Permission API not supported"),C("pending")}},$=async()=>{if(f.current)try{y(""),h(null),p(!0),await Xn.startBarcodeScanning(f.current,W,{facingMode:M,width:1280,height:720}),C("granted")}catch(V){console.error("Error starting scanner:",V),y("Unable to access camera. Please check permissions."),C("denied"),p(!1)}},re=async()=>{try{await Xn.stopScanning(),p(!1)}catch(V){console.error("Error stopping scanner:",V)}},W=V=>{h(V),V.success?setTimeout(()=>{r(V)},1500):V.error&&y(V.error)},ee=()=>{if(!b.trim()){y("Please enter a barcode");return}const V=Xn.parseBarcodeManually(b.trim());h(V),V.success?setTimeout(()=>{r(V)},1e3):y(V.error||"Invalid barcode format")},J=()=>{U(V=>V==="user"?"environment":"user"),g&&(re(),setTimeout($,500))},F=()=>d?v.jsxs("div",{className:`p-4 rounded-lg border-2 ${d.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.success?v.jsx(gh,{className:"h-5 w-5 text-green-600"}):v.jsx(O1,{className:"h-5 w-5 text-red-600"}),v.jsx("span",{className:`font-semibold ${d.success?"text-green-800":"text-red-800"}`,children:d.success?"Scan Successful!":"Scan Failed"})]}),d.success&&d.data&&v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Bundle ID:"})," ",d.data.bundleId]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Bundle Number:"})," ",d.data.bundleNumber]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Lot Number:"})," ",d.data.lotNumber]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Type:"})," ",v.jsx(xn,{variant:"secondary",outline:!0,children:d.data.type})]}),d.data.additionalInfo?.manualEntry&&v.jsx("div",{className:"text-blue-600",children:"✏️ Manual Entry"})]}),d.error&&v.jsx("div",{className:"text-red-600 text-sm",children:d.error})]}):null;return v.jsxs(Qn,{className:`max-w-md mx-auto ${c}`,children:[v.jsxs(Av,{children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs(Ov,{className:"flex items-center gap-2",children:[v.jsx(Dv,{className:"h-5 w-5"}),o]}),t&&v.jsx(Xe,{variant:"outline",size:"sm",onClick:t,className:"h-8 w-8 p-0",children:v.jsx(ph,{className:"h-4 w-4"})})]}),v.jsxs("div",{className:"text-sm text-gray-600",children:[s==="both"&&"Scan barcode or QR code",s==="barcode"&&"Scan barcode only",s==="qr"&&"Scan QR code only"]})]}),v.jsxs(Rv,{className:"space-y-4",children:[v.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative",children:[v.jsx("video",{ref:f,className:"w-full h-64 object-cover",playsInline:!0,muted:!0,style:{display:g?"block":"none"}}),!g&&v.jsxs("div",{className:"w-full h-64 bg-gray-100 flex flex-col items-center justify-center",children:[v.jsx(R1,{className:"h-16 w-16 text-gray-400 mb-4"}),v.jsx("p",{className:"text-gray-600 text-center mb-4",children:S==="denied"?"Camera access denied. Please enable camera permissions.":"Position barcode in camera view"})]}),g&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsxs("div",{className:"border-2 border-red-500 bg-transparent animate-pulse",style:{width:"200px",height:"100px"},children:[v.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-red-500"}),v.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-red-500"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-red-500"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-red-500"})]})})]}),v.jsxs("div",{className:"flex gap-2",children:[g?v.jsxs(Xe,{onClick:re,variant:"outline",className:"flex-1",children:[v.jsx(ph,{className:"h-4 w-4 mr-2"}),"Stop Scanning"]}):v.jsxs(Xe,{onClick:$,className:"flex-1",disabled:S==="denied",children:[v.jsx(R1,{className:"h-4 w-4 mr-2"}),"Start Scanning"]}),v.jsx(Xe,{onClick:J,variant:"outline",size:"sm",disabled:!g,className:"px-3",children:v.jsx(KS,{className:"h-4 w-4"})})]}),i&&v.jsxs("div",{className:"border-t pt-4",children:[v.jsx("div",{className:"text-sm font-medium mb-2",children:"Manual Entry"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:"Enter barcode manually",value:b,onChange:V=>E(V.target.value),onKeyDown:V=>V.key==="Enter"&&ee(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),v.jsx(Xe,{onClick:ee,size:"sm",disabled:!b.trim(),children:"✓"})]})]}),_&&v.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(O1,{className:"h-4 w-4 text-red-600"}),v.jsx("span",{className:"text-red-800 text-sm",children:_})]})}),F(),v.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:v.jsxs("div",{className:"text-sm text-blue-800",children:[v.jsx("div",{className:"font-medium mb-1",children:"📱 Scanning Tips:"}),v.jsxs("ul",{className:"text-xs space-y-1",children:[v.jsx("li",{children:"• Hold device steady and ensure good lighting"}),v.jsx("li",{children:"• Keep barcode flat and fully visible in frame"}),v.jsx("li",{children:"• Try moving closer or further from barcode"}),v.jsx("li",{children:"• Use manual entry if scanning fails"})]})]})}),v.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("span",{children:["Camera: ",M==="environment"?"Back":"Front"]}),v.jsxs("span",{children:["Mode: ",s.toUpperCase()]})]}),v.jsx("div",{className:`h-2 w-2 rounded-full ${g?"bg-green-500 animate-pulse":"bg-gray-300"}`})]})]})]})},TN=({bundleData:r,onLabelGenerated:t,className:i=""})=>{const[s,o]=j.useState(null),[c,f]=j.useState(!1),[g,p]=j.useState(!1),[d,h]=j.useState(!1),[_,y]=j.useState(!1),[b,E]=j.useState(Xn.getPrinterConfig()),[S,C]=j.useState("thermal"),[M,U]=j.useState(""),[Y,$]=j.useState(""),[re,W]=j.useState({bundleId:"",bundleNumber:"",lotNumber:"",articleName:"",size:"",color:"",pieces:0,operation:"",cutBy:"",cutDate:new Date,operatorAssigned:""});j.useEffect(()=>{r&&(W({...r,operatorAssigned:r.operatorAssigned||""}),ee({...r,operatorAssigned:r.operatorAssigned||""}))},[r]);const ee=async H=>{try{f(!0),U("");const he=H||re;if(!he.bundleId||!he.bundleNumber||!he.lotNumber)throw new Error("Bundle ID, Bundle Number, and Lot Number are required");const B=await Xn.generateBundleLabel(he);o(B),$("Label generated successfully!"),t?.(B)}catch(he){console.error("Error generating label:",he),U(he instanceof Error?he.message:"Error generating label")}finally{f(!1)}},J=async()=>{if(s)try{p(!0),U(""),await Xn.printLabel(s,b),$("Label printed successfully!")}catch(H){console.error("Error printing label:",H),U(H instanceof Error?H.message:"Error printing label")}finally{p(!1)}},F=async()=>{if(s)try{await Xn.downloadLabelAsImage(s),$("Label downloaded successfully!")}catch(H){console.error("Error downloading label:",H),U(H instanceof Error?H.message:"Error downloading label")}},V=H=>{const he={...b,...H};E(he),Xn.updatePrinterConfig(he)},Q=(H,he)=>{W(B=>({...B,[H]:he})),$("")};j.useEffect(()=>{if(Y){const H=setTimeout(()=>$(""),3e3);return()=>clearTimeout(H)}},[Y]),j.useEffect(()=>{if(M){const H=setTimeout(()=>U(""),5e3);return()=>clearTimeout(H)}},[M]);const X=()=>{if(!s||!d)return null;const H=Xn.generateLabelHTML(s,S);return v.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-white",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("h4",{className:"font-semibold text-sm",children:"Label Preview"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("select",{value:S,onChange:he=>C(he.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[v.jsx("option",{value:"thermal",children:"Thermal"}),v.jsx("option",{value:"laser",children:"Laser"}),v.jsx("option",{value:"inkjet",children:"Inkjet"})]}),v.jsx(Xe,{size:"sm",variant:"outline",onClick:()=>h(!1),className:"h-6 w-6 p-0",children:"✕"})]})]}),v.jsx("div",{className:"border border-gray-300 rounded bg-white transform scale-75 origin-top-left",style:{width:"133%",height:"auto"},dangerouslySetInnerHTML:{__html:H}})]})},Z=()=>_?v.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-4 bg-blue-50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("h4",{className:"font-semibold text-sm",children:"Printer Settings"}),v.jsx(Xe,{size:"sm",variant:"outline",onClick:()=>y(!1),className:"h-6 w-6 p-0",children:"✕"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Printer Name"}),v.jsx("input",{type:"text",value:b.printerName,onChange:H=>V({printerName:H.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Label Size"}),v.jsxs("select",{value:b.labelSize,onChange:H=>V({labelSize:H.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[v.jsx("option",{value:"small",children:'Small (2"×1.5")'}),v.jsx("option",{value:"medium",children:'Medium (4"×2.5")'}),v.jsx("option",{value:"large",children:'Large (4"×3")'})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"DPI"}),v.jsxs("select",{value:b.dpi,onChange:H=>V({dpi:parseInt(H.target.value)}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[v.jsx("option",{value:203,children:"203 DPI"}),v.jsx("option",{value:300,children:"300 DPI"}),v.jsx("option",{value:600,children:"600 DPI"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Print Speed"}),v.jsx("select",{value:b.printSpeed,onChange:H=>V({printSpeed:parseInt(H.target.value)}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[2,3,4,5,6,7,8,9,10,11,12].map(H=>v.jsxs("option",{value:H,children:[H," ips"]},H))})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Darkness (",b.darknessSetting,")"]}),v.jsx("input",{type:"range",min:"1",max:"15",value:b.darknessSetting,onChange:H=>V({darknessSetting:parseInt(H.target.value)}),className:"w-full"})]})]})]}):null;return v.jsxs(Qn,{className:`max-w-2xl mx-auto ${i}`,children:[v.jsxs(Av,{children:[v.jsxs(Ov,{className:"flex items-center gap-2",children:[v.jsx(Dv,{className:"h-5 w-5"}),"Bundle Label Generator"]}),v.jsx("p",{className:"text-sm text-gray-600",children:"Generate barcodes and QR codes for production bundles"})]}),v.jsxs(Rv,{className:"space-y-6",children:[!r&&v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle ID*"}),v.jsx("input",{type:"text",value:re.bundleId,onChange:H=>Q("bundleId",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"B001"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle Number*"}),v.jsx("input",{type:"text",value:re.bundleNumber,onChange:H=>Q("bundleNumber",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LOT-2024-B001"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Number*"}),v.jsx("input",{type:"text",value:re.lotNumber,onChange:H=>Q("lotNumber",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LOT-2024"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Article Name"}),v.jsx("input",{type:"text",value:re.articleName,onChange:H=>Q("articleName",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Men's T-Shirt"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),v.jsx("input",{type:"text",value:re.size,onChange:H=>Q("size",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"M"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),v.jsx("input",{type:"text",value:re.color,onChange:H=>Q("color",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Blue"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pieces"}),v.jsx("input",{type:"number",value:re.pieces,onChange:H=>Q("pieces",parseInt(H.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50",min:"1"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operation"}),v.jsx("input",{type:"text",value:re.operation,onChange:H=>Q("operation",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Sewing"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cut By"}),v.jsx("input",{type:"text",value:re.cutBy,onChange:H=>Q("cutBy",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Operator Name"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator Assigned"}),v.jsx("input",{type:"text",value:re.operatorAssigned,onChange:H=>Q("operatorAssigned",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),r&&v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[v.jsx("h4",{className:"font-semibold mb-3",children:"Bundle Information"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Bundle:"})," ",r.bundleNumber]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Lot:"})," ",r.lotNumber]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Article:"})," ",r.articleName]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Operation:"})," ",r.operation]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Size:"})," ",v.jsx(xn,{outline:!0,children:r.size})]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Color:"})," ",v.jsx(xn,{outline:!0,children:r.color})]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Pieces:"})," ",r.pieces]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Cut by:"})," ",r.cutBy]})]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx(Xe,{onClick:()=>ee(),disabled:c,className:"flex-1",children:c?"⏳ Generating...":"🏷️ Generate Label"}),v.jsxs(Xe,{onClick:()=>h(!0),variant:"outline",disabled:!s,children:[v.jsx(lT,{className:"h-4 w-4 mr-1"}),"Preview"]}),v.jsxs(Xe,{onClick:()=>y(!0),variant:"outline",children:[v.jsx(eT,{className:"h-4 w-4 mr-1"}),"Settings"]})]}),s&&v.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("h4",{className:"font-semibold text-green-800",children:"✅ Label Generated"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(Xe,{onClick:J,disabled:g,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[g?"⏳":v.jsx(dT,{className:"h-4 w-4 mr-1"}),"Print"]}),v.jsxs(Xe,{onClick:F,size:"sm",variant:"outline",children:[v.jsx(XS,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Barcode:"})," ",v.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:s.barcode})]}),v.jsxs("div",{children:[v.jsx("strong",{children:"QR Code:"})," ",s.qrCode?"✅ Generated":"❌ Failed"]})]}),s.qrCode&&v.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[v.jsx("img",{src:s.qrCode,alt:"QR Code",className:"w-16 h-16 border border-gray-300 rounded"}),v.jsx("div",{className:"text-xs text-gray-600",children:"QR code contains complete bundle information including ID, lot number, article details, and production data."})]})]}),M&&v.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-red-600",children:"❌"}),v.jsx("span",{className:"text-red-800 text-sm",children:M})]})}),Y&&v.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-green-600",children:"✅"}),v.jsx("span",{className:"text-green-800 text-sm",children:Y})]})}),Z(),X(),v.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:v.jsxs("div",{className:"text-sm text-blue-800",children:[v.jsx("div",{className:"font-medium mb-1",children:"💡 Tips:"}),v.jsxs("ul",{className:"text-xs space-y-1",children:[v.jsx("li",{children:"• Ensure all required fields are filled before generating"}),v.jsx("li",{children:"• Use preview to check label layout before printing"}),v.jsx("li",{children:"• Configure printer settings for optimal print quality"}),v.jsx("li",{children:"• QR codes contain complete bundle information for scanning"}),v.jsx("li",{children:"• Download labels as backup for reprinting if needed"})]})]})})]})]})},NN={sm:"px-3 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"},CN={default:["bg-white border-secondary-300","focus:border-primary-500 focus:ring-primary-500","disabled:bg-secondary-50 disabled:text-secondary-500","dark:bg-secondary-900 dark:border-secondary-600","dark:focus:border-primary-400 dark:focus:ring-primary-400","dark:disabled:bg-secondary-800"],filled:["bg-secondary-50 border-secondary-200","focus:bg-white focus:border-primary-500 focus:ring-primary-500","disabled:bg-secondary-100 disabled:text-secondary-500","dark:bg-secondary-800 dark:border-secondary-700","dark:focus:bg-secondary-900 dark:focus:border-primary-400"],borderless:["bg-transparent border-0 border-b border-secondary-300","focus:border-primary-500 focus:ring-0 focus:ring-offset-0","rounded-none px-0","disabled:bg-transparent disabled:text-secondary-500","dark:border-secondary-600","dark:focus:border-primary-400"]},tn=wn.forwardRef(({className:r,label:t,error:i,hint:s,leftIcon:o,rightIcon:c,size:f="md",variant:g="default",clearable:p=!1,onClear:d,disabled:h,value:_,type:y="text",id:b,...E},S)=>{const[C,M]=wn.useState(!1),U=wn.useId(),Y=b||`input-${U}`,$=y==="password",re=$?C?"text":"password":y,ee=p&&(_!==void 0&&_!=="")&&!h,J=$&&!h,F=()=>{d?.(),E.onChange&&E.onChange({target:{value:""}})};return v.jsxs("div",{className:"w-full",children:[t&&v.jsx("label",{htmlFor:Y,className:pt("block text-sm font-medium mb-2",i?"text-danger-700":"text-secondary-700",h&&"text-secondary-500","dark:text-secondary-300"),children:t}),v.jsxs("div",{className:"relative",children:[o&&v.jsx("div",{className:pt("absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400",f==="sm"&&"left-2",f==="lg"&&"left-4"),children:o}),v.jsx("input",{ref:S,id:Y,type:re,disabled:h,className:pt("block w-full border rounded-md shadow-sm","placeholder-secondary-400","focus:outline-none focus:ring-1","transition-colors duration-200","disabled:cursor-not-allowed",NN[f],CN[g],o&&g!=="borderless"&&(f==="sm"?"pl-8":f==="lg"?"pl-12":"pl-10"),(c||ee||J)&&g!=="borderless"&&(f==="sm"?"pr-8":f==="lg"?"pr-12":"pr-10"),i&&["border-danger-300 text-danger-900","focus:border-danger-500 focus:ring-danger-500","dark:border-danger-600"],r),...E}),(c||ee||J)&&v.jsxs("div",{className:pt("absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",f==="sm"&&"right-2",f==="lg"&&"right-4"),children:[ee&&v.jsx("button",{type:"button",onClick:F,className:"text-secondary-400 hover:text-secondary-600 focus:outline-none",children:v.jsx(fv,{className:"w-4 h-4"})}),J&&v.jsx("button",{type:"button",onClick:()=>M(!C),className:"text-secondary-400 hover:text-secondary-600 focus:outline-none",children:C?v.jsx(uS,{className:"w-4 h-4"}):v.jsx(dS,{className:"w-4 h-4"})}),c&&!ee&&!J&&v.jsx("div",{className:"text-secondary-400",children:c})]})]}),(i||s)&&v.jsx("div",{className:"mt-1",children:i?v.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400",children:i}):s?v.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:s}):null})]})});tn.displayName="Input";const AN=wn.forwardRef(({className:r,label:t,error:i,hint:s,resize:o="vertical",disabled:c,id:f,...g},p)=>{const d=wn.useId(),h=f||`textarea-${d}`;return v.jsxs("div",{className:"w-full",children:[t&&v.jsx("label",{htmlFor:h,className:pt("block text-sm font-medium mb-2",i?"text-danger-700":"text-secondary-700",c&&"text-secondary-500","dark:text-secondary-300"),children:t}),v.jsx("textarea",{ref:p,id:h,disabled:c,className:pt("block w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm","placeholder-secondary-400 text-sm","focus:outline-none focus:ring-1 focus:border-primary-500 focus:ring-primary-500","transition-colors duration-200","disabled:cursor-not-allowed disabled:bg-secondary-50 disabled:text-secondary-500",o==="none"&&"resize-none",o==="both"&&"resize",o==="horizontal"&&"resize-x",o==="vertical"&&"resize-y","dark:bg-secondary-900 dark:border-secondary-600","dark:focus:border-primary-400 dark:focus:ring-primary-400","dark:disabled:bg-secondary-800",i&&["border-danger-300 text-danger-900","focus:border-danger-500 focus:ring-danger-500","dark:border-danger-600"],r),...g}),(i||s)&&v.jsx("div",{className:"mt-1",children:i?v.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400",children:i}):s?v.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:s}):null})]})});AN.displayName="Textarea";var l_={};const o_="@firebase/database",c_="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vv="";function RN(r){Vv=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),tt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Ih(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return fn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ON(t)}}catch{}return new DN},ri=Fv("localStorage"),MN=Fv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new hv("@firebase/database"),Yv=(function(){let r=1;return function(){return r++}})(),Qv=function(r){const t=mS(r),i=new gS;i.update(t);const s=i.digest();return pS.encodeByteArray(s)},sl=function(...r){let t="";for(let i=0;i<r.length;i++){const s=r[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=sl.apply(null,s):typeof s=="object"?t+=tt(s):t+=s,t+=" "}return t};let Ps=null,u_=!0;const kN=function(r,t){K(!0,"Can't turn on custom loggers persistently."),fa.logLevel=yS.VERBOSE,Ps=fa.log.bind(fa)},ct=function(...r){if(u_===!0&&(u_=!1,Ps===null&&MN.get("logging_enabled")===!0&&kN()),Ps){const t=sl.apply(null,r);Ps(t)}},ll=function(r){return function(...t){ct(r,...t)}},yh=function(...r){const t="FIREBASE INTERNAL ERROR: "+sl(...r);fa.error(t)},Zn=function(...r){const t=`FIREBASE FATAL ERROR: ${sl(...r)}`;throw fa.error(t),new Error(t)},xt=function(...r){const t="FIREBASE WARNING: "+sl(...r);fa.warn(t)},IN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},qc=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},jN=function(r){if(document.readyState==="complete")r();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},ga="[MIN_NAME]",si="[MAX_NAME]",mi=function(r,t){if(r===t)return 0;if(r===ga||t===si)return-1;if(t===ga||r===si)return 1;{const i=d_(r),s=d_(t);return i!==null?s!==null?i-s===0?r.length-t.length:i-s:-1:s!==null?1:r<t?-1:1}},LN=function(r,t){return r===t?0:r<t?-1:1},Ms=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+tt(t))},Ph=function(r){if(typeof r!="object"||r===null)return tt(r);const t=[];for(const s in r)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=tt(t[s]),i+=":",i+=Ph(r[t[s]]);return i+="}",i},Xv=function(r,t){const i=r.length;if(i<=t)return[r];const s=[];for(let o=0;o<i;o+=t)o+t>i?s.push(r.substring(o,i)):s.push(r.substring(o,o+t));return s};function ut(r,t){for(const i in r)r.hasOwnProperty(i)&&t(i,r[i])}const $v=function(r){K(!qc(r),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let o,c,f,g,p;r===0?(c=0,f=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-s)?(g=Math.min(Math.floor(Math.log(r)/Math.LN2),s),c=g+s,f=Math.round(r*Math.pow(2,i-g)-Math.pow(2,i))):(c=0,f=Math.round(r/Math.pow(2,1-s-i))));const d=[];for(p=i;p;p-=1)d.push(f%2?1:0),f=Math.floor(f/2);for(p=t;p;p-=1)d.push(c%2?1:0),c=Math.floor(c/2);d.push(o?1:0),d.reverse();const h=d.join("");let _="";for(p=0;p<64;p+=8){let y=parseInt(h.substr(p,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},UN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},BN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zN(r,t){let i="Unknown Error";r==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?i="Client doesn't have permission to access the desired data.":r==="unavailable"&&(i="The service is unavailable");const s=new Error(r+" at "+t._path.toString()+": "+i);return s.code=r.toUpperCase(),s}const PN=new RegExp("^-?(0*)\\d{1,10}$"),qN=-2147483648,HN=2147483647,d_=function(r){if(PN.test(r)){const t=Number(r);if(t>=qN&&t<=HN)return t}return null},xa=function(r){try{r()}catch(t){setTimeout(()=>{const i=t.stack||"";throw xt("Exception was thrown by user callback.",i),t},Math.floor(0))}},GN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qs=function(r,t){const i=setTimeout(r,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,mv(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(s=>this.appCheck=s)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){xt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xt(t)}}class yc{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}yc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="5",Kv="v",Zv="s",Wv="r",Jv="f",eb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tb="ls",nb="p",_h="ac",rb="websocket",ib="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,i,s,o,c=!1,f="",g=!1,p=!1,d=null){this.secure=i,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=f,this.includeNamespaceInQueryParams=g,this.isUsingEmulator=p,this.emulatorOptions=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ri.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ri.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function YN(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function sb(r,t,i){K(typeof t=="string","typeof type must == string"),K(typeof i=="object","typeof params must == object");let s;if(t===rb)s=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(t===ib)s=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);YN(r)&&(i.ns=r.namespace);const o=[];return ut(i,(c,f)=>{o.push(c+"="+f)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.counters_={}}incrementCounter(t,i=1){fn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return ES(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf={},$f={};function Hh(r){const t=r.toString();return Xf[t]||(Xf[t]=new QN),Xf[t]}function XN(r,t){const i=r.toString();return $f[i]||($f[i]=t()),$f[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&xa(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="start",KN="close",ZN="pLPCommand",WN="pRTLPCB",lb="id",ob="pw",cb="ser",JN="cb",e2="seg",t2="ts",n2="d",r2="dframe",ub=1870,db=30,i2=ub-db,a2=25e3,s2=3e4;class ca{constructor(t,i,s,o,c,f,g){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.transportSessionId=f,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ll(t),this.stats_=Hh(i),this.urlFn=p=>(this.appCheckToken&&(p[_h]=this.appCheckToken),sb(i,ib,p))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new $N(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(s2)),jN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gh((...c)=>{const[f,g,p,d,h]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===f_)this.id=g,this.password=p;else if(f===KN)g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...c)=>{const[f,g]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(f,g)},()=>{this.onClosed_()},this.urlFn);const s={};s[f_]="t",s[cb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[JN]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Kv]=qh,this.transportSessionId&&(s[Zv]=this.transportSessionId),this.lastSessionId&&(s[tb]=this.lastSessionId),this.applicationId&&(s[nb]=this.applicationId),this.appCheckToken&&(s[_h]=this.appCheckToken),typeof location<"u"&&location.hostname&&eb.test(location.hostname)&&(s[Wv]=Jv);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ca.forceAllow_=!0}static forceDisallow(){ca.forceDisallow_=!0}static isAvailable(){return ca.forceAllow_?!0:!ca.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!UN()&&!BN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=tt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=wS(i),o=Xv(s,i2);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[r2]="t",s[lb]=t,s[ob]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=tt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Gh{constructor(t,i,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Yv(),window[ZN+this.uniqueCallbackIdentifier]=t,window[WN+this.uniqueCallbackIdentifier]=i,this.myIFrame=Gh.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(g){ct("frame writing exception"),g.stack&&ct(g.stack),ct(g)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ct("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[lb]=this.myID,t[ob]=this.myPW,t[cb]=this.currentSerial;let i=this.urlFn(t),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+db+s.length<=ub;){const f=this.pendingSegs.shift();s=s+"&"+e2+o+"="+f.seg+"&"+t2+o+"="+f.ts+"&"+n2+o+"="+f.d,o++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(s,Math.floor(a2)),c=()=>{clearTimeout(o),s()};this.addTag(t,c)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{ct("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=16384,o2=45e3;let vc=null;typeof MozWebSocket<"u"?vc=MozWebSocket:typeof WebSocket<"u"&&(vc=WebSocket);class on{constructor(t,i,s,o,c,f,g){this.connId=t,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ll(this.connId),this.stats_=Hh(i),this.connURL=on.connectionURL_(i,f,g,o,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,o,c){const f={};return f[Kv]=qh,typeof location<"u"&&location.hostname&&eb.test(location.hostname)&&(f[Wv]=Jv),i&&(f[Zv]=i),s&&(f[tb]=s),o&&(f[_h]=o),c&&(f[nb]=c),sb(t,rb,f)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ri.set("previous_websocket_failure",!0);try{let s;SS(),this.mySock=new vc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){on.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&vc!==null&&!on.forceDisallow_}static previouslyFailed(){return ri.isInMemoryStorage||ri.get("previous_websocket_failure")===!0}markConnectionHealthy(){ri.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=Ih(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(K(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=tt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Xv(i,l2);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(o2))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}on.responsesRequiredToBeHealthy=2;on.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{static get ALL_TRANSPORTS(){return[ca,on]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=on&&on.isAvailable();let s=i&&!on.previouslyFailed();if(t.webSocketOnly&&(i||xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[on];else{const o=this.transports_=[];for(const c of Ys.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);Ys.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ys.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=6e4,u2=5e3,d2=10*1024,f2=100*1024,Kf="t",h_="d",h2="s",m_="r",m2="e",g_="o",p_="a",y_="n",__="p",g2="h";class p2{constructor(t,i,s,o,c,f,g,p,d,h){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=f,this.onReady_=g,this.onDisconnect_=p,this.onKill_=d,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ll("c:"+this.id+":"),this.transportManager_=new Ys(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=qs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>f2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>d2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Kf in t){const i=t[Kf];i===p_?this.upgradeIfSecondaryHealthy_():i===m_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===g_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=Ms("t",t),s=Ms("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:__,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:p_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:y_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=Ms("t",t),s=Ms("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=Ms(Kf,t);if(h_ in t){const s=t[h_];if(i===g2){const o={...s};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===y_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===h2?this.onConnectionShutdown_(s):i===m_?this.onReset_(s):i===m2?yh("Server Error: "+s):i===g_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yh("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),qh!==s&&xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),qs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(c2))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(u2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:__,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ri.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{put(t,i,s,o){}merge(t,i,s,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t){this.allowedEvents_=t,this.listeners_={},K(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const o=this.getInitialEvent(t);o&&i.apply(s,o)}off(t,i,s){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let c=0;c<o.length;c++)if(o[c].callback===i&&(!s||s===o[c].context)){o.splice(c,1);return}}validateEventType_(t){K(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends hb{static getInstance(){return new bc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return K(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=32,b_=768;class Ae{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function Ee(){return new Ae("")}function fe(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Rr(r){return r.pieces_.length-r.pieceNum_}function ke(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new Ae(r.pieces_,t)}function Vh(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function y2(r){let t="";for(let i=r.pieceNum_;i<r.pieces_.length;i++)r.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(r.pieces_[i])));return t||"/"}function Qs(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function mb(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let i=r.pieceNum_;i<r.pieces_.length-1;i++)t.push(r.pieces_[i]);return new Ae(t,0)}function Ge(r,t){const i=[];for(let s=r.pieceNum_;s<r.pieces_.length;s++)i.push(r.pieces_[s]);if(t instanceof Ae)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&i.push(s[o])}return new Ae(i,0)}function ge(r){return r.pieceNum_>=r.pieces_.length}function bt(r,t){const i=fe(r),s=fe(t);if(i===null)return t;if(i===s)return bt(ke(r),ke(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function _2(r,t){const i=Qs(r,0),s=Qs(t,0);for(let o=0;o<i.length&&o<s.length;o++){const c=mi(i[o],s[o]);if(c!==0)return c}return i.length===s.length?0:i.length<s.length?-1:1}function Fh(r,t){if(Rr(r)!==Rr(t))return!1;for(let i=r.pieceNum_,s=t.pieceNum_;i<=r.pieces_.length;i++,s++)if(r.pieces_[i]!==t.pieces_[s])return!1;return!0}function nn(r,t){let i=r.pieceNum_,s=t.pieceNum_;if(Rr(r)>Rr(t))return!1;for(;i<r.pieces_.length;){if(r.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class v2{constructor(t,i){this.errorPrefix_=i,this.parts_=Qs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Lc(this.parts_[s]);gb(this)}}function b2(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=Lc(t),gb(r)}function x2(r){const t=r.parts_.pop();r.byteLength_-=Lc(t),r.parts_.length>0&&(r.byteLength_-=1)}function gb(r){if(r.byteLength_>b_)throw new Error(r.errorPrefix_+"has a key path longer than "+b_+" bytes ("+r.byteLength_+").");if(r.parts_.length>v_)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+v_+") or object contains a cycle "+ni(r))}function ni(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends hb{static getInstance(){return new Yh}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(t){return K(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=1e3,E2=300*1e3,x_=30*1e3,w2=1.3,S2=3e4,T2="server_kill",E_=3;class Kn extends fb{constructor(t,i,s,o,c,f,g,p){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=p,this.id=Kn.nextPersistentConnectionId_++,this.log_=ll("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ks,this.maxReconnectDelay_=E2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yh.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&bc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const o=++this.requestNumber_,c={r:o,a:t,b:i};this.log_(tt(c)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[o]=s)}get(t){this.initConnection_();const i=new En,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;f.s==="ok"?i.resolve(g):i.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),i.promise}listen(t,i,s,o){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:i,query:t,tag:s};this.listens.get(f).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+s+" for "+o);const c={p:s},f="q";t.tag&&(c.q=i._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest(f,c,g=>{const p=g.d,d=g.s;Kn.warnOnListenWarnings_(p,i),(this.listens.get(s)&&this.listens.get(s).get(o))===t&&(this.log_("listen response",g),d!=="ok"&&this.removeListen_(s,o),t.onComplete&&t.onComplete(d,p))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&fn(t,"w")){const s=ai(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||vS(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=x_)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=bS(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,o=>{const c=o.s,f=o.d||"error";this.authToken_===t&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,t._queryObject,i)}sendUnlisten_(t,i,s,o){this.log_("Unlisten on "+t+" for "+i);const c={p:t},f="n";o&&(c.q=s,c.t=o),this.sendRequest(f,c)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,o){const c={p:i,d:s};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,i,s,o){this.putInternal("p",t,i,s,o)}merge(t,i,s,o){this.putInternal("m",t,i,s,o)}putInternal(t,i,s,o,c){this.initConnection_();const f={p:i,d:s};c!==void 0&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++;const g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const c=s.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+tt(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):yh("Unrecognized action received from server: "+tt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ks,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ks,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>S2&&(this.reconnectDelay_=ks),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*w2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Kn.nextConnectionId_++,c=this.lastSessionId;let f=!1,g=null;const p=function(){g?g.close():(f=!0,s())},d=function(_){K(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(_)};this.realtime_={close:p,sendRequest:d};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);f?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,g=new p2(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,b=>{xt(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(T2)},c))}catch(_){this.log_("Failed to get token: "+_),f||(this.repoInfo_.nodeAdmin&&xt(_),p())}}}interrupt(t){ct("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ct("Resuming connection for reason: "+t),delete this.interruptReasons_[t],fh(this.interruptReasons_)&&(this.reconnectDelay_=ks,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(c=>Ph(c)).join("$"):s="default";const o=this.removeListen_(t,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const s=new Ae(t).toString();let o;if(this.listens.has(s)){const c=this.listens.get(s);o=c.get(i),c.delete(i),c.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(t,i){ct("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=E_&&(this.reconnectDelay_=x_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ct("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=E_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Vv.replace(/\./g,"-")]=1,gv()?t["framework.cordova"]=1:xS()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=bc.getInstance().currentlyOnline();return fh(this.interruptReasons_)&&t}}Kn.nextPersistentConnectionId_=0;Kn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new pe(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new pe(ga,t),o=new pe(ga,i);return this.compare(s,o)!==0}minPost(){return pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc;class pb extends Hc{static get __EMPTY_NODE(){return fc}static set __EMPTY_NODE(t){fc=t}compare(t,i){return mi(t.name,i.name)}isDefinedOn(t){throw tl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return pe.MIN}maxPost(){return new pe(si,fc)}makePost(t,i){return K(typeof t=="string","KeyIndex indexValue must always be a string."),new pe(t,fc)}toString(){return".key"}}const ha=new pb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,i,s,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=i?s(t.key,i):1,o&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ot{constructor(t,i,s,o,c){this.key=t,this.value=i,this.color=s??ot.RED,this.left=o??At.EMPTY_NODE,this.right=c??At.EMPTY_NODE}copy(t,i,s,o,c){return new ot(t??this.key,i??this.value,s??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const c=s(t,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(t,i,s),null):c===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,o;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return At.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ot.RED=!0;ot.BLACK=!1;class N2{copy(t,i,s,o,c){return this}insert(t,i,s){return new ot(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class At{constructor(t,i=At.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new At(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,ot.BLACK,null,null))}remove(t){return new At(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ot.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,o=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new hc(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new hc(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new hc(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new hc(this.root_,null,this.comparator_,!0,t)}}At.EMPTY_NODE=new N2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(r,t){return mi(r.name,t.name)}function Qh(r,t){return mi(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh;function A2(r){vh=r}const yb=function(r){return typeof r=="number"?"number:"+$v(r):"string:"+r},_b=function(r){if(r.isLeafNode()){const t=r.val();K(typeof t=="string"||typeof t=="number"||typeof t=="object"&&fn(t,".sv"),"Priority must be a string or number.")}else K(r===vh||r.isEmpty(),"priority of unexpected type.");K(r===vh||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w_;class lt{static set __childrenNodeConstructor(t){w_=t}static get __childrenNodeConstructor(){return w_}constructor(t,i=lt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_b(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new lt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ge(t)?this:fe(t)===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:lt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=fe(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(K(s!==".priority"||Rr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,lt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yb(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=$v(this.value_):t+=this.value_,this.lazyHash_=Qv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===lt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof lt.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,o=lt.VALUE_TYPE_ORDER.indexOf(i),c=lt.VALUE_TYPE_ORDER.indexOf(s);return K(o>=0,"Unknown leaf type: "+i),K(c>=0,"Unknown leaf type: "+s),o===c?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}lt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vb,bb;function R2(r){vb=r}function O2(r){bb=r}class D2 extends Hc{compare(t,i){const s=t.node.getPriority(),o=i.node.getPriority(),c=s.compareTo(o);return c===0?mi(t.name,i.name):c}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return pe.MIN}maxPost(){return new pe(si,new lt("[PRIORITY-POST]",bb))}makePost(t,i){const s=vb(t);return new pe(i,new lt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Pe=new D2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=Math.log(2);class k2{constructor(t){const i=c=>parseInt(Math.log(c)/M2,10),s=c=>parseInt(Array(c+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=s(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const xc=function(r,t,i,s){r.sort(t);const o=function(p,d){const h=d-p;let _,y;if(h===0)return null;if(h===1)return _=r[p],y=i?i(_):_,new ot(y,_.node,ot.BLACK,null,null);{const b=parseInt(h/2,10)+p,E=o(p,b),S=o(b+1,d);return _=r[b],y=i?i(_):_,new ot(y,_.node,ot.BLACK,E,S)}},c=function(p){let d=null,h=null,_=r.length;const y=function(E,S){const C=_-E,M=_;_-=E;const U=o(C+1,M),Y=r[C],$=i?i(Y):Y;b(new ot($,Y.node,S,null,U))},b=function(E){d?(d.left=E,d=E):(h=E,d=E)};for(let E=0;E<p.count;++E){const S=p.nextBitIsOne(),C=Math.pow(2,p.count-(E+1));S?y(C,ot.BLACK):(y(C,ot.BLACK),y(C,ot.RED))}return h},f=new k2(r.length),g=c(f);return new At(s||t,g)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf;const sa={};class $n{static get Default(){return K(sa&&Pe,"ChildrenNode.ts has not been loaded"),Zf=Zf||new $n({".priority":sa},{".priority":Pe}),Zf}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=ai(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof At?i:null}hasIndex(t){return fn(this.indexSet_,t.toString())}addIndex(t,i){K(t!==ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const c=i.getIterator(pe.Wrap);let f=c.getNext();for(;f;)o=o||t.isDefinedOn(f.node),s.push(f),f=c.getNext();let g;o?g=xc(s,t.getCompare()):g=sa;const p=t.toString(),d={...this.indexSet_};d[p]=t;const h={...this.indexes_};return h[p]=g,new $n(h,d)}addToIndexes(t,i){const s=_c(this.indexes_,(o,c)=>{const f=ai(this.indexSet_,c);if(K(f,"Missing index implementation for "+c),o===sa)if(f.isDefinedOn(t.node)){const g=[],p=i.getIterator(pe.Wrap);let d=p.getNext();for(;d;)d.name!==t.name&&g.push(d),d=p.getNext();return g.push(t),xc(g,f.getCompare())}else return sa;else{const g=i.get(t.name);let p=o;return g&&(p=p.remove(new pe(t.name,g))),p.insert(t,t.node)}});return new $n(s,this.indexSet_)}removeFromIndexes(t,i){const s=_c(this.indexes_,o=>{if(o===sa)return o;{const c=i.get(t.name);return c?o.remove(new pe(t.name,c)):o}});return new $n(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is;class ce{static get EMPTY_NODE(){return Is||(Is=new ce(new At(Qh),null,$n.Default))}constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&_b(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Is}updatePriority(t){return this.children_.isEmpty()?this:new ce(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?Is:i}}getChild(t){const i=fe(t);return i===null?this:this.getImmediateChild(i).getChild(ke(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(K(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new pe(t,i);let o,c;i.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(t,i),c=this.indexMap_.addToIndexes(s,this.children_));const f=o.isEmpty()?Is:this.priorityNode_;return new ce(o,f,c)}}updateChild(t,i){const s=fe(t);if(s===null)return i;{K(fe(t)!==".priority"||Rr(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(ke(t),i);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,o=0,c=!0;if(this.forEachChild(Pe,(f,g)=>{i[f]=g.val(t),s++,c&&ce.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):c=!1}),!t&&c&&o<2*s){const f=[];for(const g in i)f[g]=i[g];return f}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+yb(this.getPriority().val())+":"),this.forEachChild(Pe,(i,s)=>{const o=s.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":Qv(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const o=this.resolveIndex_(s);if(o){const c=o.getPredecessorKey(new pe(t,i));return c?c.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new pe(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new pe(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,pe.Wrap);let c=o.peek();for(;c!=null&&i.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,pe.Wrap);let c=o.peek();for(;c!=null&&i.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ol?-1:0}withIndex(t){if(t===ha||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new ce(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ha||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(Pe),o=i.getIterator(Pe);let c=s.getNext(),f=o.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=s.getNext(),f=o.getNext()}return c===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===ha?null:this.indexMap_.get(t.toString())}}ce.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class I2 extends ce{constructor(){super(new At(Qh),ce.EMPTY_NODE,$n.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ce.EMPTY_NODE}isEmpty(){return!1}}const ol=new I2;Object.defineProperties(pe,{MIN:{value:new pe(ga,ce.EMPTY_NODE)},MAX:{value:new pe(si,ol)}});pb.__EMPTY_NODE=ce.EMPTY_NODE;lt.__childrenNodeConstructor=ce;A2(ol);O2(ol);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=!0;function He(r,t=null){if(r===null)return ce.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(t=r[".priority"]),K(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const i=r;return new lt(i,He(t))}if(!(r instanceof Array)&&j2){const i=[];let s=!1;if(ut(r,(f,g)=>{if(f.substring(0,1)!=="."){const p=He(g);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),i.push(new pe(f,p)))}}),i.length===0)return ce.EMPTY_NODE;const c=xc(i,C2,f=>f.name,Qh);if(s){const f=xc(i,Pe.getCompare());return new ce(c,He(t),new $n({".priority":f},{".priority":Pe}))}else return new ce(c,He(t),$n.Default)}else{let i=ce.EMPTY_NODE;return ut(r,(s,o)=>{if(fn(r,s)&&s.substring(0,1)!=="."){const c=He(o);(c.isLeafNode()||!c.isEmpty())&&(i=i.updateImmediateChild(s,c))}}),i.updatePriority(He(t))}}R2(He);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2 extends Hc{constructor(t){super(),this.indexPath_=t,K(!ge(t)&&fe(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),o=this.extractChild(i.node),c=s.compareTo(o);return c===0?mi(t.name,i.name):c}makePost(t,i){const s=He(t),o=ce.EMPTY_NODE.updateChild(this.indexPath_,s);return new pe(i,o)}maxPost(){const t=ce.EMPTY_NODE.updateChild(this.indexPath_,ol);return new pe(si,t)}toString(){return Qs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2 extends Hc{compare(t,i){const s=t.node.compareTo(i.node);return s===0?mi(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return pe.MIN}maxPost(){return pe.MAX}makePost(t,i){const s=He(t);return new pe(i,s)}toString(){return".value"}}const B2=new U2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(r){return{type:"value",snapshotNode:r}}function pa(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function Xs(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function $s(r,t,i){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:i}}function z2(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t){this.index_=t}updateChild(t,i,s,o,c,f){K(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=t.getImmediateChild(i);return g.getChild(o).equals(s.getChild(o))&&g.isEmpty()===s.isEmpty()||(f!=null&&(s.isEmpty()?t.hasChild(i)?f.trackChildChange(Xs(i,g)):K(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?f.trackChildChange(pa(i,s)):f.trackChildChange($s(i,s,g))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(Pe,(o,c)=>{i.hasChild(o)||s.trackChildChange(Xs(o,c))}),i.isLeafNode()||i.forEachChild(Pe,(o,c)=>{if(t.hasChild(o)){const f=t.getImmediateChild(o);f.equals(c)||s.trackChildChange($s(o,c,f))}else s.trackChildChange(pa(o,c))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?ce.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t){this.indexedFilter_=new Xh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ks.getStartPost_(t),this.endPost_=Ks.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,s=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&s}updateChild(t,i,s,o,c,f){return this.matches(new pe(i,s))||(s=ce.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,o,c,f)}updateFullNode(t,i,s){i.isLeafNode()&&(i=ce.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(ce.EMPTY_NODE);const c=this;return i.forEachChild(Pe,(f,g)=>{c.matches(new pe(f,g))||(o=o.updateImmediateChild(f,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=i=>{const s=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ks(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,s,o,c,f){return this.rangedFilter_.matches(new pe(i,s))||(s=ce.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,o,c,f):this.fullLimitUpdateChild_(t,i,s,c,f)}updateFullNode(t,i,s){let o;if(i.isLeafNode()||i.isEmpty())o=ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=ce.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;c.hasNext()&&f<this.limit_;){const g=c.getNext();if(this.withinDirectionalStart(g))if(this.withinDirectionalEnd(g))o=o.updateImmediateChild(g.name,g.node),f++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(ce.EMPTY_NODE);let c;this.reverse_?c=o.getReverseIterator(this.index_):c=o.getIterator(this.index_);let f=0;for(;c.hasNext();){const g=c.getNext();f<this.limit_&&this.withinDirectionalStart(g)&&this.withinDirectionalEnd(g)?f++:o=o.updateImmediateChild(g.name,ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,o,c){let f;if(this.reverse_){const _=this.index_.getCompare();f=(y,b)=>_(b,y)}else f=this.index_.getCompare();const g=t;K(g.numChildren()===this.limit_,"");const p=new pe(i,s),d=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),h=this.rangedFilter_.matches(p);if(g.hasChild(i)){const _=g.getImmediateChild(i);let y=o.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===i||g.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const b=y==null?1:f(y,p);if(h&&!s.isEmpty()&&b>=0)return c?.trackChildChange($s(i,s,_)),g.updateImmediateChild(i,s);{c?.trackChildChange(Xs(i,_));const S=g.updateImmediateChild(i,ce.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(c?.trackChildChange(pa(y.name,y.node)),S.updateImmediateChild(y.name,y.node)):S}}else return s.isEmpty()?t:h&&f(d,p)>=0?(c!=null&&(c.trackChildChange(Xs(d.name,d.node)),c.trackChildChange(pa(i,s))),g.updateImmediateChild(i,s).updateImmediateChild(d.name,ce.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ga}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:si}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pe}copy(){const t=new $h;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function q2(r){return r.loadsAllData()?new Xh(r.getIndex()):r.hasLimit()?new P2(r):new Ks(r)}function S_(r){const t={};if(r.isDefault())return t;let i;if(r.index_===Pe?i="$priority":r.index_===B2?i="$value":r.index_===ha?i="$key":(K(r.index_ instanceof L2,"Unrecognized index type!"),i=r.index_.toString()),t.orderBy=tt(i),r.startSet_){const s=r.startAfterSet_?"startAfter":"startAt";t[s]=tt(r.indexStartValue_),r.startNameSet_&&(t[s]+=","+tt(r.indexStartName_))}if(r.endSet_){const s=r.endBeforeSet_?"endBefore":"endAt";t[s]=tt(r.indexEndValue_),r.endNameSet_&&(t[s]+=","+tt(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function T_(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_),t.sin=!r.startAfterSet_),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_),t.ein=!r.endBeforeSet_),r.limitSet_){t.l=r.limit_;let i=r.viewFrom_;i===""&&(r.isViewFromLeft()?i="l":i="r"),t.vf=i}return r.index_!==Pe&&(t.i=r.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends fb{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(K(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,s,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=ll("p:rest:"),this.listens_={}}listen(t,i,s,o){const c=t._path.toString();this.log_("Listen called for "+c+" "+t._queryIdentifier);const f=Ec.getListenId_(t,s),g={};this.listens_[f]=g;const p=S_(t._queryParams);this.restRequest_(c+".json",p,(d,h)=>{let _=h;if(d===404&&(_=null,d=null),d===null&&this.onDataUpdate_(c,_,!1,s),ai(this.listens_,f)===g){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",o(y,null)}})}unlisten(t,i){const s=Ec.getListenId_(t,i);delete this.listens_[s]}get(t){const i=S_(t._queryParams),s=t._path.toString(),o=new En;return this.restRequest_(s+".json",i,(c,f)=>{let g=f;c===404&&(g=null,c=null),c===null?(this.onDataUpdate_(s,g,!1,null),o.resolve(g)):o.reject(new Error(g))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(i.auth=o.accessToken),c&&c.token&&(i.ac=c.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+_S(i);this.log_("Sending REST request for "+f);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(s&&g.readyState===4){this.log_("REST Response for "+f+" received. status:",g.status,"response:",g.responseText);let p=null;if(g.status>=200&&g.status<300){try{p=Ih(g.responseText)}catch{xt("Failed to parse JSON response for "+f+": "+g.responseText)}s(null,p)}else g.status!==401&&g.status!==404&&xt("Got unsuccessful REST response for "+f+" Status: "+g.status),s(g.status);s=null}},g.open("GET",f,!0),g.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(){return{value:null,children:new Map}}function Ea(r,t,i){if(ge(t))r.value=i,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(t,i);else{const s=fe(t);r.children.has(s)||r.children.set(s,wc());const o=r.children.get(s);t=ke(t),Ea(o,t,i)}}function bh(r,t){if(ge(t))return r.value=null,r.children.clear(),!0;if(r.value!==null){if(r.value.isLeafNode())return!1;{const i=r.value;return r.value=null,i.forEachChild(Pe,(s,o)=>{Ea(r,new Ae(s),o)}),bh(r,t)}}else if(r.children.size>0){const i=fe(t);return t=ke(t),r.children.has(i)&&bh(r.children.get(i),t)&&r.children.delete(i),r.children.size===0}else return!0}function xh(r,t,i){r.value!==null?i(t,r.value):G2(r,(s,o)=>{const c=new Ae(t.toString()+"/"+s);xh(o,c,i)})}function G2(r,t){r.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i={...t};return this.last_&&ut(this.last_,(s,o)=>{i[s]=i[s]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=10*1e3,F2=30*1e3,Y2=300*1e3;class Q2{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new V2(t);const s=N_+(F2-N_)*Math.random();qs(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;ut(t,(o,c)=>{c>0&&fn(this.statsToReport_,o)&&(i[o]=c,s=!0)}),s&&this.server_.reportStats(i),qs(this.reportStats_.bind(this),Math.floor(Math.random()*2*Y2))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cn||(cn={}));function Kh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wh(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=cn.ACK_USER_WRITE,this.source=Kh()}operationForChild(t){if(ge(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Ae(t));return new Sc(Ee(),i,this.revert)}}else return K(fe(this.path)===t,"operationForChild called for unrelated child."),new Sc(ke(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,i){this.source=t,this.path=i,this.type=cn.LISTEN_COMPLETE}operationForChild(t){return ge(this.path)?new Zs(this.source,Ee()):new Zs(this.source,ke(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=cn.OVERWRITE}operationForChild(t){return ge(this.path)?new li(this.source,Ee(),this.snap.getImmediateChild(t)):new li(this.source,ke(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=cn.MERGE}operationForChild(t){if(ge(this.path)){const i=this.children.subtree(new Ae(t));return i.isEmpty()?null:i.value?new li(this.source,Ee(),i.value):new ya(this.source,Ee(),i)}else return K(fe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ya(this.source,ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ge(t))return this.isFullyInitialized()&&!this.filtered_;const i=fe(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function $2(r,t,i,s){const o=[],c=[];return t.forEach(f=>{f.type==="child_changed"&&r.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&c.push(z2(f.childName,f.snapshotNode))}),js(r,o,"child_removed",t,s,i),js(r,o,"child_added",t,s,i),js(r,o,"child_moved",c,s,i),js(r,o,"child_changed",t,s,i),js(r,o,"value",t,s,i),o}function js(r,t,i,s,o,c){const f=s.filter(g=>g.type===i);f.sort((g,p)=>Z2(r,g,p)),f.forEach(g=>{const p=K2(r,g,c);o.forEach(d=>{d.respondsTo(g.type)&&t.push(d.createEvent(p,r.query_))})})}function K2(r,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}function Z2(r,t,i){if(t.childName==null||i.childName==null)throw tl("Should only compare child_ events.");const s=new pe(t.childName,t.snapshotNode),o=new pe(i.childName,i.snapshotNode);return r.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(r,t){return{eventCache:r,serverCache:t}}function Hs(r,t,i,s){return Gc(new Or(t,i,s),r.serverCache)}function Eb(r,t,i,s){return Gc(r.eventCache,new Or(t,i,s))}function Tc(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function oi(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf;const W2=()=>(Wf||(Wf=new At(LN)),Wf);class Ue{static fromObject(t){let i=new Ue(null);return ut(t,(s,o)=>{i=i.set(new Ae(s),o)}),i}constructor(t,i=W2()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:Ee(),value:this.value};if(ge(t))return null;{const s=fe(t),o=this.children.get(s);if(o!==null){const c=o.findRootMostMatchingPathAndValue(ke(t),i);return c!=null?{path:Ge(new Ae(s),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ge(t))return this;{const i=fe(t),s=this.children.get(i);return s!==null?s.subtree(ke(t)):new Ue(null)}}set(t,i){if(ge(t))return new Ue(i,this.children);{const s=fe(t),c=(this.children.get(s)||new Ue(null)).set(ke(t),i),f=this.children.insert(s,c);return new Ue(this.value,f)}}remove(t){if(ge(t))return this.children.isEmpty()?new Ue(null):new Ue(null,this.children);{const i=fe(t),s=this.children.get(i);if(s){const o=s.remove(ke(t));let c;return o.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,o),this.value===null&&c.isEmpty()?new Ue(null):new Ue(this.value,c)}else return this}}get(t){if(ge(t))return this.value;{const i=fe(t),s=this.children.get(i);return s?s.get(ke(t)):null}}setTree(t,i){if(ge(t))return i;{const s=fe(t),c=(this.children.get(s)||new Ue(null)).setTree(ke(t),i);let f;return c.isEmpty()?f=this.children.remove(s):f=this.children.insert(s,c),new Ue(this.value,f)}}fold(t){return this.fold_(Ee(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((o,c)=>{s[o]=c.fold_(Ge(t,o),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,Ee(),i)}findOnPath_(t,i,s){const o=this.value?s(i,this.value):!1;if(o)return o;if(ge(t))return null;{const c=fe(t),f=this.children.get(c);return f?f.findOnPath_(ke(t),Ge(i,c),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,Ee(),i)}foreachOnPath_(t,i,s){if(ge(t))return this;{this.value&&s(i,this.value);const o=fe(t),c=this.children.get(o);return c?c.foreachOnPath_(ke(t),Ge(i,o),s):new Ue(null)}}foreach(t){this.foreach_(Ee(),t)}foreach_(t,i){this.children.inorderTraversal((s,o)=>{o.foreach_(Ge(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.writeTree_=t}static empty(){return new dn(new Ue(null))}}function Gs(r,t,i){if(ge(t))return new dn(new Ue(i));{const s=r.writeTree_.findRootMostValueAndPath(t);if(s!=null){const o=s.path;let c=s.value;const f=bt(o,t);return c=c.updateChild(f,i),new dn(r.writeTree_.set(o,c))}else{const o=new Ue(i),c=r.writeTree_.setTree(t,o);return new dn(c)}}}function Eh(r,t,i){let s=r;return ut(i,(o,c)=>{s=Gs(s,Ge(t,o),c)}),s}function C_(r,t){if(ge(t))return dn.empty();{const i=r.writeTree_.setTree(t,new Ue(null));return new dn(i)}}function wh(r,t){return gi(r,t)!=null}function gi(r,t){const i=r.writeTree_.findRootMostValueAndPath(t);return i!=null?r.writeTree_.get(i.path).getChild(bt(i.path,t)):null}function A_(r){const t=[],i=r.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Pe,(s,o)=>{t.push(new pe(s,o))}):r.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&t.push(new pe(s,o.value))}),t}function Tr(r,t){if(ge(t))return r;{const i=gi(r,t);return i!=null?new dn(new Ue(i)):new dn(r.writeTree_.subtree(t))}}function Sh(r){return r.writeTree_.isEmpty()}function _a(r,t){return wb(Ee(),r.writeTree_,t)}function wb(r,t,i){if(t.value!=null)return i.updateChild(r,t.value);{let s=null;return t.children.inorderTraversal((o,c)=>{o===".priority"?(K(c.value!==null,"Priority writes must always be leaf nodes"),s=c.value):i=wb(Ge(r,o),c,i)}),!i.getChild(r).isEmpty()&&s!==null&&(i=i.updateChild(Ge(r,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,t){return Cb(t,r)}function J2(r,t,i,s,o){K(s>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:t,snap:i,writeId:s,visible:o}),o&&(r.visibleWrites=Gs(r.visibleWrites,t,i)),r.lastWriteId=s}function eC(r,t,i,s){K(s>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:i,writeId:s,visible:!0}),r.visibleWrites=Eh(r.visibleWrites,t,i),r.lastWriteId=s}function tC(r,t){for(let i=0;i<r.allWrites.length;i++){const s=r.allWrites[i];if(s.writeId===t)return s}return null}function nC(r,t){const i=r.allWrites.findIndex(g=>g.writeId===t);K(i>=0,"removeWrite called with nonexistent writeId.");const s=r.allWrites[i];r.allWrites.splice(i,1);let o=s.visible,c=!1,f=r.allWrites.length-1;for(;o&&f>=0;){const g=r.allWrites[f];g.visible&&(f>=i&&rC(g,s.path)?o=!1:nn(s.path,g.path)&&(c=!0)),f--}if(o){if(c)return iC(r),!0;if(s.snap)r.visibleWrites=C_(r.visibleWrites,s.path);else{const g=s.children;ut(g,p=>{r.visibleWrites=C_(r.visibleWrites,Ge(s.path,p))})}return!0}else return!1}function rC(r,t){if(r.snap)return nn(r.path,t);for(const i in r.children)if(r.children.hasOwnProperty(i)&&nn(Ge(r.path,i),t))return!0;return!1}function iC(r){r.visibleWrites=Sb(r.allWrites,aC,Ee()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function aC(r){return r.visible}function Sb(r,t,i){let s=dn.empty();for(let o=0;o<r.length;++o){const c=r[o];if(t(c)){const f=c.path;let g;if(c.snap)nn(i,f)?(g=bt(i,f),s=Gs(s,g,c.snap)):nn(f,i)&&(g=bt(f,i),s=Gs(s,Ee(),c.snap.getChild(g)));else if(c.children){if(nn(i,f))g=bt(i,f),s=Eh(s,g,c.children);else if(nn(f,i))if(g=bt(f,i),ge(g))s=Eh(s,Ee(),c.children);else{const p=ai(c.children,fe(g));if(p){const d=p.getChild(ke(g));s=Gs(s,Ee(),d)}}}else throw tl("WriteRecord should have .snap or .children")}}return s}function Tb(r,t,i,s,o){if(!s&&!o){const c=gi(r.visibleWrites,t);if(c!=null)return c;{const f=Tr(r.visibleWrites,t);if(Sh(f))return i;if(i==null&&!wh(f,Ee()))return null;{const g=i||ce.EMPTY_NODE;return _a(f,g)}}}else{const c=Tr(r.visibleWrites,t);if(!o&&Sh(c))return i;if(!o&&i==null&&!wh(c,Ee()))return null;{const f=function(d){return(d.visible||o)&&(!s||!~s.indexOf(d.writeId))&&(nn(d.path,t)||nn(t,d.path))},g=Sb(r.allWrites,f,t),p=i||ce.EMPTY_NODE;return _a(g,p)}}}function sC(r,t,i){let s=ce.EMPTY_NODE;const o=gi(r.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Pe,(c,f)=>{s=s.updateImmediateChild(c,f)}),s;if(i){const c=Tr(r.visibleWrites,t);return i.forEachChild(Pe,(f,g)=>{const p=_a(Tr(c,new Ae(f)),g);s=s.updateImmediateChild(f,p)}),A_(c).forEach(f=>{s=s.updateImmediateChild(f.name,f.node)}),s}else{const c=Tr(r.visibleWrites,t);return A_(c).forEach(f=>{s=s.updateImmediateChild(f.name,f.node)}),s}}function lC(r,t,i,s,o){K(s||o,"Either existingEventSnap or existingServerSnap must exist");const c=Ge(t,i);if(wh(r.visibleWrites,c))return null;{const f=Tr(r.visibleWrites,c);return Sh(f)?o.getChild(i):_a(f,o.getChild(i))}}function oC(r,t,i,s){const o=Ge(t,i),c=gi(r.visibleWrites,o);if(c!=null)return c;if(s.isCompleteForChild(i)){const f=Tr(r.visibleWrites,o);return _a(f,s.getNode().getImmediateChild(i))}else return null}function cC(r,t){return gi(r.visibleWrites,t)}function uC(r,t,i,s,o,c,f){let g;const p=Tr(r.visibleWrites,t),d=gi(p,Ee());if(d!=null)g=d;else if(i!=null)g=_a(p,i);else return[];if(g=g.withIndex(f),!g.isEmpty()&&!g.isLeafNode()){const h=[],_=f.getCompare(),y=c?g.getReverseIteratorFrom(s,f):g.getIteratorFrom(s,f);let b=y.getNext();for(;b&&h.length<o;)_(b,s)!==0&&h.push(b),b=y.getNext();return h}else return[]}function dC(){return{visibleWrites:dn.empty(),allWrites:[],lastWriteId:-1}}function Nc(r,t,i,s){return Tb(r.writeTree,r.treePath,t,i,s)}function Jh(r,t){return sC(r.writeTree,r.treePath,t)}function R_(r,t,i,s){return lC(r.writeTree,r.treePath,t,i,s)}function Cc(r,t){return cC(r.writeTree,Ge(r.treePath,t))}function fC(r,t,i,s,o,c){return uC(r.writeTree,r.treePath,t,i,s,o,c)}function e0(r,t,i){return oC(r.writeTree,r.treePath,t,i)}function Nb(r,t){return Cb(Ge(r.treePath,t),r.writeTree)}function Cb(r,t){return{treePath:r,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;K(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),K(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const c=o.type;if(i==="child_added"&&c==="child_removed")this.changeMap.set(s,$s(s,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&c==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&c==="child_changed")this.changeMap.set(s,Xs(s,o.oldSnap));else if(i==="child_changed"&&c==="child_added")this.changeMap.set(s,pa(s,t.snapshotNode));else if(i==="child_changed"&&c==="child_changed")this.changeMap.set(s,$s(s,t.snapshotNode,o.oldSnap));else throw tl("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const Ab=new mC;class t0{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new Or(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return e0(this.writes_,t,s)}}getChildAfterChild(t,i,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:oi(this.viewCache_),c=fC(this.writes_,o,i,1,s,t);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(r){return{filter:r}}function pC(r,t){K(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),K(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function yC(r,t,i,s,o){const c=new hC;let f,g;if(i.type===cn.OVERWRITE){const d=i;d.source.fromUser?f=Th(r,t,d.path,d.snap,s,o,c):(K(d.source.fromServer,"Unknown source."),g=d.source.tagged||t.serverCache.isFiltered()&&!ge(d.path),f=Ac(r,t,d.path,d.snap,s,o,g,c))}else if(i.type===cn.MERGE){const d=i;d.source.fromUser?f=vC(r,t,d.path,d.children,s,o,c):(K(d.source.fromServer,"Unknown source."),g=d.source.tagged||t.serverCache.isFiltered(),f=Nh(r,t,d.path,d.children,s,o,g,c))}else if(i.type===cn.ACK_USER_WRITE){const d=i;d.revert?f=EC(r,t,d.path,s,o,c):f=bC(r,t,d.path,d.affectedTree,s,o,c)}else if(i.type===cn.LISTEN_COMPLETE)f=xC(r,t,i.path,s,c);else throw tl("Unknown operation type: "+i.type);const p=c.getChanges();return _C(t,f,p),{viewCache:f,changes:p}}function _C(r,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=Tc(r);(i.length>0||!r.eventCache.isFullyInitialized()||o&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&i.push(xb(Tc(t)))}}function Rb(r,t,i,s,o,c){const f=t.eventCache;if(Cc(s,i)!=null)return t;{let g,p;if(ge(i))if(K(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const d=oi(t),h=d instanceof ce?d:ce.EMPTY_NODE,_=Jh(s,h);g=r.filter.updateFullNode(t.eventCache.getNode(),_,c)}else{const d=Nc(s,oi(t));g=r.filter.updateFullNode(t.eventCache.getNode(),d,c)}else{const d=fe(i);if(d===".priority"){K(Rr(i)===1,"Can't have a priority with additional path components");const h=f.getNode();p=t.serverCache.getNode();const _=R_(s,i,h,p);_!=null?g=r.filter.updatePriority(h,_):g=f.getNode()}else{const h=ke(i);let _;if(f.isCompleteForChild(d)){p=t.serverCache.getNode();const y=R_(s,i,f.getNode(),p);y!=null?_=f.getNode().getImmediateChild(d).updateChild(h,y):_=f.getNode().getImmediateChild(d)}else _=e0(s,d,t.serverCache);_!=null?g=r.filter.updateChild(f.getNode(),d,_,h,o,c):g=f.getNode()}}return Hs(t,g,f.isFullyInitialized()||ge(i),r.filter.filtersNodes())}}function Ac(r,t,i,s,o,c,f,g){const p=t.serverCache;let d;const h=f?r.filter:r.filter.getIndexedFilter();if(ge(i))d=h.updateFullNode(p.getNode(),s,null);else if(h.filtersNodes()&&!p.isFiltered()){const b=p.getNode().updateChild(i,s);d=h.updateFullNode(p.getNode(),b,null)}else{const b=fe(i);if(!p.isCompleteForPath(i)&&Rr(i)>1)return t;const E=ke(i),C=p.getNode().getImmediateChild(b).updateChild(E,s);b===".priority"?d=h.updatePriority(p.getNode(),C):d=h.updateChild(p.getNode(),b,C,E,Ab,null)}const _=Eb(t,d,p.isFullyInitialized()||ge(i),h.filtersNodes()),y=new t0(o,_,c);return Rb(r,_,i,o,y,g)}function Th(r,t,i,s,o,c,f){const g=t.eventCache;let p,d;const h=new t0(o,t,c);if(ge(i))d=r.filter.updateFullNode(t.eventCache.getNode(),s,f),p=Hs(t,d,!0,r.filter.filtersNodes());else{const _=fe(i);if(_===".priority")d=r.filter.updatePriority(t.eventCache.getNode(),s),p=Hs(t,d,g.isFullyInitialized(),g.isFiltered());else{const y=ke(i),b=g.getNode().getImmediateChild(_);let E;if(ge(y))E=s;else{const S=h.getCompleteChild(_);S!=null?Vh(y)===".priority"&&S.getChild(mb(y)).isEmpty()?E=S:E=S.updateChild(y,s):E=ce.EMPTY_NODE}if(b.equals(E))p=t;else{const S=r.filter.updateChild(g.getNode(),_,E,y,h,f);p=Hs(t,S,g.isFullyInitialized(),r.filter.filtersNodes())}}}return p}function O_(r,t){return r.eventCache.isCompleteForChild(t)}function vC(r,t,i,s,o,c,f){let g=t;return s.foreach((p,d)=>{const h=Ge(i,p);O_(t,fe(h))&&(g=Th(r,g,h,d,o,c,f))}),s.foreach((p,d)=>{const h=Ge(i,p);O_(t,fe(h))||(g=Th(r,g,h,d,o,c,f))}),g}function D_(r,t,i){return i.foreach((s,o)=>{t=t.updateChild(s,o)}),t}function Nh(r,t,i,s,o,c,f,g){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let p=t,d;ge(i)?d=s:d=new Ue(null).setTree(i,s);const h=t.serverCache.getNode();return d.children.inorderTraversal((_,y)=>{if(h.hasChild(_)){const b=t.serverCache.getNode().getImmediateChild(_),E=D_(r,b,y);p=Ac(r,p,new Ae(_),E,o,c,f,g)}}),d.children.inorderTraversal((_,y)=>{const b=!t.serverCache.isCompleteForChild(_)&&y.value===null;if(!h.hasChild(_)&&!b){const E=t.serverCache.getNode().getImmediateChild(_),S=D_(r,E,y);p=Ac(r,p,new Ae(_),S,o,c,f,g)}}),p}function bC(r,t,i,s,o,c,f){if(Cc(o,i)!=null)return t;const g=t.serverCache.isFiltered(),p=t.serverCache;if(s.value!=null){if(ge(i)&&p.isFullyInitialized()||p.isCompleteForPath(i))return Ac(r,t,i,p.getNode().getChild(i),o,c,g,f);if(ge(i)){let d=new Ue(null);return p.getNode().forEachChild(ha,(h,_)=>{d=d.set(new Ae(h),_)}),Nh(r,t,i,d,o,c,g,f)}else return t}else{let d=new Ue(null);return s.foreach((h,_)=>{const y=Ge(i,h);p.isCompleteForPath(y)&&(d=d.set(h,p.getNode().getChild(y)))}),Nh(r,t,i,d,o,c,g,f)}}function xC(r,t,i,s,o){const c=t.serverCache,f=Eb(t,c.getNode(),c.isFullyInitialized()||ge(i),c.isFiltered());return Rb(r,f,i,s,Ab,o)}function EC(r,t,i,s,o,c){let f;if(Cc(s,i)!=null)return t;{const g=new t0(s,t,o),p=t.eventCache.getNode();let d;if(ge(i)||fe(i)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=Nc(s,oi(t));else{const _=t.serverCache.getNode();K(_ instanceof ce,"serverChildren would be complete if leaf node"),h=Jh(s,_)}h=h,d=r.filter.updateFullNode(p,h,c)}else{const h=fe(i);let _=e0(s,h,t.serverCache);_==null&&t.serverCache.isCompleteForChild(h)&&(_=p.getImmediateChild(h)),_!=null?d=r.filter.updateChild(p,h,_,ke(i),g,c):t.eventCache.getNode().hasChild(h)?d=r.filter.updateChild(p,h,ce.EMPTY_NODE,ke(i),g,c):d=p,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=Nc(s,oi(t)),f.isLeafNode()&&(d=r.filter.updateFullNode(d,f,c)))}return f=t.serverCache.isFullyInitialized()||Cc(s,Ee())!=null,Hs(t,d,f,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Xh(s.getIndex()),c=q2(s);this.processor_=gC(c);const f=i.serverCache,g=i.eventCache,p=o.updateFullNode(ce.EMPTY_NODE,f.getNode(),null),d=c.updateFullNode(ce.EMPTY_NODE,g.getNode(),null),h=new Or(p,f.isFullyInitialized(),o.filtersNodes()),_=new Or(d,g.isFullyInitialized(),c.filtersNodes());this.viewCache_=Gc(_,h),this.eventGenerator_=new X2(this.query_)}get query(){return this.query_}}function SC(r){return r.viewCache_.serverCache.getNode()}function TC(r){return Tc(r.viewCache_)}function NC(r,t){const i=oi(r.viewCache_);return i&&(r.query._queryParams.loadsAllData()||!ge(t)&&!i.getImmediateChild(fe(t)).isEmpty())?i.getChild(t):null}function M_(r){return r.eventRegistrations_.length===0}function CC(r,t){r.eventRegistrations_.push(t)}function k_(r,t,i){const s=[];if(i){K(t==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(c=>{const f=c.createCancelEvent(i,o);f&&s.push(f)})}if(t){let o=[];for(let c=0;c<r.eventRegistrations_.length;++c){const f=r.eventRegistrations_[c];if(!f.matches(t))o.push(f);else if(t.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(c+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return s}function I_(r,t,i,s){t.type===cn.MERGE&&t.source.queryId!==null&&(K(oi(r.viewCache_),"We should always have a full cache before handling merges"),K(Tc(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,c=yC(r.processor_,o,t,i,s);return pC(r.processor_,c.viewCache),K(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=c.viewCache,Ob(r,c.changes,c.viewCache.eventCache.getNode(),null)}function AC(r,t){const i=r.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Pe,(c,f)=>{s.push(pa(c,f))}),i.isFullyInitialized()&&s.push(xb(i.getNode())),Ob(r,s,i.getNode(),t)}function Ob(r,t,i,s){const o=s?[s]:r.eventRegistrations_;return $2(r.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc;class Db{constructor(){this.views=new Map}}function RC(r){K(!Rc,"__referenceConstructor has already been defined"),Rc=r}function OC(){return K(Rc,"Reference.ts has not been loaded"),Rc}function DC(r){return r.views.size===0}function n0(r,t,i,s){const o=t.source.queryId;if(o!==null){const c=r.views.get(o);return K(c!=null,"SyncTree gave us an op for an invalid query."),I_(c,t,i,s)}else{let c=[];for(const f of r.views.values())c=c.concat(I_(f,t,i,s));return c}}function Mb(r,t,i,s,o){const c=t._queryIdentifier,f=r.views.get(c);if(!f){let g=Nc(i,o?s:null),p=!1;g?p=!0:s instanceof ce?(g=Jh(i,s),p=!1):(g=ce.EMPTY_NODE,p=!1);const d=Gc(new Or(g,p,!1),new Or(s,o,!1));return new wC(t,d)}return f}function MC(r,t,i,s,o,c){const f=Mb(r,t,s,o,c);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,f),CC(f,i),AC(f,i)}function kC(r,t,i,s){const o=t._queryIdentifier,c=[];let f=[];const g=Dr(r);if(o==="default")for(const[p,d]of r.views.entries())f=f.concat(k_(d,i,s)),M_(d)&&(r.views.delete(p),d.query._queryParams.loadsAllData()||c.push(d.query));else{const p=r.views.get(o);p&&(f=f.concat(k_(p,i,s)),M_(p)&&(r.views.delete(o),p.query._queryParams.loadsAllData()||c.push(p.query)))}return g&&!Dr(r)&&c.push(new(OC())(t._repo,t._path)),{removed:c,events:f}}function kb(r){const t=[];for(const i of r.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Nr(r,t){let i=null;for(const s of r.views.values())i=i||NC(s,t);return i}function Ib(r,t){if(t._queryParams.loadsAllData())return Fc(r);{const s=t._queryIdentifier;return r.views.get(s)}}function jb(r,t){return Ib(r,t)!=null}function Dr(r){return Fc(r)!=null}function Fc(r){for(const t of r.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc;function IC(r){K(!Oc,"__referenceConstructor has already been defined"),Oc=r}function jC(){return K(Oc,"Reference.ts has not been loaded"),Oc}let LC=1;class j_{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ue(null),this.pendingWriteTree_=dC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r0(r,t,i,s,o){return J2(r.pendingWriteTree_,t,i,s,o),o?wa(r,new li(Kh(),t,i)):[]}function UC(r,t,i,s){eC(r.pendingWriteTree_,t,i,s);const o=Ue.fromObject(i);return wa(r,new ya(Kh(),t,o))}function Sr(r,t,i=!1){const s=tC(r.pendingWriteTree_,t);if(nC(r.pendingWriteTree_,t)){let c=new Ue(null);return s.snap!=null?c=c.set(Ee(),!0):ut(s.children,f=>{c=c.set(new Ae(f),!0)}),wa(r,new Sc(s.path,c,i))}else return[]}function cl(r,t,i){return wa(r,new li(Zh(),t,i))}function BC(r,t,i){const s=Ue.fromObject(i);return wa(r,new ya(Zh(),t,s))}function zC(r,t){return wa(r,new Zs(Zh(),t))}function PC(r,t,i){const s=i0(r,i);if(s){const o=a0(s),c=o.path,f=o.queryId,g=bt(c,t),p=new Zs(Wh(f),g);return s0(r,c,p)}else return[]}function Dc(r,t,i,s,o=!1){const c=t._path,f=r.syncPointTree_.get(c);let g=[];if(f&&(t._queryIdentifier==="default"||jb(f,t))){const p=kC(f,t,i,s);DC(f)&&(r.syncPointTree_=r.syncPointTree_.remove(c));const d=p.removed;if(g=p.events,!o){const h=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(c,(y,b)=>Dr(b));if(h&&!_){const y=r.syncPointTree_.subtree(c);if(!y.isEmpty()){const b=GC(y);for(let E=0;E<b.length;++E){const S=b[E],C=S.query,M=zb(r,S);r.listenProvider_.startListening(Vs(C),Ws(r,C),M.hashFn,M.onComplete)}}}!_&&d.length>0&&!s&&(h?r.listenProvider_.stopListening(Vs(t),null):d.forEach(y=>{const b=r.queryToTagMap.get(Qc(y));r.listenProvider_.stopListening(Vs(y),b)}))}VC(r,d)}return g}function Lb(r,t,i,s){const o=i0(r,s);if(o!=null){const c=a0(o),f=c.path,g=c.queryId,p=bt(f,t),d=new li(Wh(g),p,i);return s0(r,f,d)}else return[]}function qC(r,t,i,s){const o=i0(r,s);if(o){const c=a0(o),f=c.path,g=c.queryId,p=bt(f,t),d=Ue.fromObject(i),h=new ya(Wh(g),p,d);return s0(r,f,h)}else return[]}function Ch(r,t,i,s=!1){const o=t._path;let c=null,f=!1;r.syncPointTree_.foreachOnPath(o,(y,b)=>{const E=bt(y,o);c=c||Nr(b,E),f=f||Dr(b)});let g=r.syncPointTree_.get(o);g?(f=f||Dr(g),c=c||Nr(g,Ee())):(g=new Db,r.syncPointTree_=r.syncPointTree_.set(o,g));let p;c!=null?p=!0:(p=!1,c=ce.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((b,E)=>{const S=Nr(E,Ee());S&&(c=c.updateImmediateChild(b,S))}));const d=jb(g,t);if(!d&&!t._queryParams.loadsAllData()){const y=Qc(t);K(!r.queryToTagMap.has(y),"View does not exist, but we have a tag");const b=FC();r.queryToTagMap.set(y,b),r.tagToQueryMap.set(b,y)}const h=Vc(r.pendingWriteTree_,o);let _=MC(g,t,i,h,c,p);if(!d&&!f&&!s){const y=Ib(g,t);_=_.concat(YC(r,t,y))}return _}function Yc(r,t,i){const o=r.pendingWriteTree_,c=r.syncPointTree_.findOnPath(t,(f,g)=>{const p=bt(f,t),d=Nr(g,p);if(d)return d});return Tb(o,t,c,i,!0)}function HC(r,t){const i=t._path;let s=null;r.syncPointTree_.foreachOnPath(i,(d,h)=>{const _=bt(d,i);s=s||Nr(h,_)});let o=r.syncPointTree_.get(i);o?s=s||Nr(o,Ee()):(o=new Db,r.syncPointTree_=r.syncPointTree_.set(i,o));const c=s!=null,f=c?new Or(s,!0,!1):null,g=Vc(r.pendingWriteTree_,t._path),p=Mb(o,t,g,c?f.getNode():ce.EMPTY_NODE,c);return TC(p)}function wa(r,t){return Ub(t,r.syncPointTree_,null,Vc(r.pendingWriteTree_,Ee()))}function Ub(r,t,i,s){if(ge(r.path))return Bb(r,t,i,s);{const o=t.get(Ee());i==null&&o!=null&&(i=Nr(o,Ee()));let c=[];const f=fe(r.path),g=r.operationForChild(f),p=t.children.get(f);if(p&&g){const d=i?i.getImmediateChild(f):null,h=Nb(s,f);c=c.concat(Ub(g,p,d,h))}return o&&(c=c.concat(n0(o,r,s,i))),c}}function Bb(r,t,i,s){const o=t.get(Ee());i==null&&o!=null&&(i=Nr(o,Ee()));let c=[];return t.children.inorderTraversal((f,g)=>{const p=i?i.getImmediateChild(f):null,d=Nb(s,f),h=r.operationForChild(f);h&&(c=c.concat(Bb(h,g,p,d)))}),o&&(c=c.concat(n0(o,r,s,i))),c}function zb(r,t){const i=t.query,s=Ws(r,i);return{hashFn:()=>(SC(t)||ce.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?PC(r,i._path,s):zC(r,i._path);{const c=zN(o,i);return Dc(r,i,null,c)}}}}function Ws(r,t){const i=Qc(t);return r.queryToTagMap.get(i)}function Qc(r){return r._path.toString()+"$"+r._queryIdentifier}function i0(r,t){return r.tagToQueryMap.get(t)}function a0(r){const t=r.indexOf("$");return K(t!==-1&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new Ae(r.substr(0,t))}}function s0(r,t,i){const s=r.syncPointTree_.get(t);K(s,"Missing sync point for query tag that we're tracking");const o=Vc(r.pendingWriteTree_,t);return n0(s,i,o,null)}function GC(r){return r.fold((t,i,s)=>{if(i&&Dr(i))return[Fc(i)];{let o=[];return i&&(o=kb(i)),ut(s,(c,f)=>{o=o.concat(f)}),o}})}function Vs(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(jC())(r._repo,r._path):r}function VC(r,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const o=Qc(s),c=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(c)}}}function FC(){return LC++}function YC(r,t,i){const s=t._path,o=Ws(r,t),c=zb(r,i),f=r.listenProvider_.startListening(Vs(t),o,c.hashFn,c.onComplete),g=r.syncPointTree_.subtree(s);if(o)K(!Dr(g.value),"If we're adding a query, it shouldn't be shadowed");else{const p=g.fold((d,h,_)=>{if(!ge(d)&&h&&Dr(h))return[Fc(h).query];{let y=[];return h&&(y=y.concat(kb(h).map(b=>b.query))),ut(_,(b,E)=>{y=y.concat(E)}),y}});for(let d=0;d<p.length;++d){const h=p[d];r.listenProvider_.stopListening(Vs(h),Ws(r,h))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new l0(i)}node(){return this.node_}}class o0{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Ge(this.path_,t);return new o0(this.syncTree_,i)}node(){return Yc(this.syncTree_,this.path_)}}const QC=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},L_=function(r,t,i){if(!r||typeof r!="object")return r;if(K(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return XC(r[".sv"],t,i);if(typeof r[".sv"]=="object")return $C(r[".sv"],t);K(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},XC=function(r,t,i){switch(r){case"timestamp":return i.timestamp;default:K(!1,"Unexpected server value: "+r)}},$C=function(r,t,i){r.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const s=r.increment;typeof s!="number"&&K(!1,"Unexpected increment value: "+s);const o=t.node();if(K(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const f=o.getValue();return typeof f!="number"?s:f+s},Pb=function(r,t,i,s){return u0(t,new o0(i,r),s)},c0=function(r,t,i){return u0(r,new l0(t),i)};function u0(r,t,i){const s=r.getPriority().val(),o=L_(s,t.getImmediateChild(".priority"),i);let c;if(r.isLeafNode()){const f=r,g=L_(f.getValue(),t,i);return g!==f.getValue()||o!==f.getPriority().val()?new lt(g,He(o)):r}else{const f=r;return c=f,o!==f.getPriority().val()&&(c=c.updatePriority(new lt(o))),f.forEachChild(Pe,(g,p)=>{const d=u0(p,t.getImmediateChild(g),i);d!==p&&(c=c.updateImmediateChild(g,d))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function Xc(r,t){let i=t instanceof Ae?t:new Ae(t),s=r,o=fe(i);for(;o!==null;){const c=ai(s.node.children,o)||{children:{},childCount:0};s=new d0(o,s,c),i=ke(i),o=fe(i)}return s}function pi(r){return r.node.value}function f0(r,t){r.node.value=t,Ah(r)}function qb(r){return r.node.childCount>0}function KC(r){return pi(r)===void 0&&!qb(r)}function $c(r,t){ut(r.node.children,(i,s)=>{t(new d0(i,r,s))})}function Hb(r,t,i,s){i&&t(r),$c(r,o=>{Hb(o,t,!0)})}function ZC(r,t,i){let s=r.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function ul(r){return new Ae(r.parent===null?r.name:ul(r.parent)+"/"+r.name)}function Ah(r){r.parent!==null&&WC(r.parent,r.name,r)}function WC(r,t,i){const s=KC(i),o=fn(r.node.children,t);s&&o?(delete r.node.children[t],r.node.childCount--,Ah(r)):!s&&!o&&(r.node.children[t]=i.node,r.node.childCount++,Ah(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=/[\[\].#$\/\u0000-\u001F\u007F]/,eA=/[\[\].#$\u0000-\u001F\u007F]/,Jf=10*1024*1024,h0=function(r){return typeof r=="string"&&r.length!==0&&!JC.test(r)},Gb=function(r){return typeof r=="string"&&r.length!==0&&!eA.test(r)},tA=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Gb(r)},m0=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!qc(r)||r&&typeof r=="object"&&fn(r,".sv")},Rh=function(r,t,i,s){dl(ma(r,"value"),t,i)},dl=function(r,t,i){const s=i instanceof Ae?new v2(i,r):i;if(t===void 0)throw new Error(r+"contains undefined "+ni(s));if(typeof t=="function")throw new Error(r+"contains a function "+ni(s)+" with contents = "+t.toString());if(qc(t))throw new Error(r+"contains "+t.toString()+" "+ni(s));if(typeof t=="string"&&t.length>Jf/3&&Lc(t)>Jf)throw new Error(r+"contains a string greater than "+Jf+" utf8 bytes "+ni(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,c=!1;if(ut(t,(f,g)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(c=!0,!h0(f)))throw new Error(r+" contains an invalid key ("+f+") "+ni(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);b2(s,f),dl(r,g,s),x2(s)}),o&&c)throw new Error(r+' contains ".value" child '+ni(s)+" in addition to actual children.")}},nA=function(r,t){let i,s;for(i=0;i<t.length;i++){s=t[i];const c=Qs(s);for(let f=0;f<c.length;f++)if(!(c[f]===".priority"&&f===c.length-1)){if(!h0(c[f]))throw new Error(r+"contains an invalid key ("+c[f]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(_2);let o=null;for(i=0;i<t.length;i++){if(s=t[i],o!==null&&nn(o,s))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},Vb=function(r,t,i,s){const o=ma(r,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const c=[];ut(t,(f,g)=>{const p=new Ae(f);if(dl(o,g,Ge(i,p)),Vh(p)===".priority"&&!m0(g))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(p)}),nA(o,c)},rA=function(r,t,i){if(qc(t))throw new Error(ma(r,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!m0(t))throw new Error(ma(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Fb=function(r,t,i,s){if(!Gb(i))throw new Error(ma(r,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},iA=function(r,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Fb(r,t,i)},ua=function(r,t){if(fe(t)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},aA=function(r,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!h0(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!tA(i))throw new Error(ma(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kc(r,t){let i=null;for(let s=0;s<t.length;s++){const o=t[s],c=o.getPath();i!==null&&!Fh(c,i.path)&&(r.eventLists_.push(i),i=null),i===null&&(i={events:[],path:c}),i.events.push(o)}i&&r.eventLists_.push(i)}function Yb(r,t,i){Kc(r,i),Qb(r,s=>Fh(s,t))}function Gt(r,t,i){Kc(r,i),Qb(r,s=>nn(s,t)||nn(t,s))}function Qb(r,t){r.recursionDepth_++;let i=!0;for(let s=0;s<r.eventLists_.length;s++){const o=r.eventLists_[s];if(o){const c=o.path;t(c)?(lA(r.eventLists_[s]),r.eventLists_[s]=null):i=!1}}i&&(r.eventLists_=[]),r.recursionDepth_--}function lA(r){for(let t=0;t<r.events.length;t++){const i=r.events[t];if(i!==null){r.events[t]=null;const s=i.getEventRunner();Ps&&ct("event: "+i.toString()),xa(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="repo_interrupt",oA=25;class cA{constructor(t,i,s,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wc(),this.transactionQueueTree_=new d0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uA(r,t,i){if(r.stats_=Hh(r.repoInfo_),r.forceRestClient_||GN())r.server_=new Ec(r.repoInfo_,(s,o,c,f)=>{U_(r,s,o,c,f)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>B_(r,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tt(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}r.persistentConnection_=new Kn(r.repoInfo_,t,(s,o,c,f)=>{U_(r,s,o,c,f)},s=>{B_(r,s)},s=>{fA(r,s)},r.authTokenProvider_,r.appCheckProvider_,i),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(s=>{r.server_.refreshAuthToken(s)}),r.appCheckProvider_.addTokenChangeListener(s=>{r.server_.refreshAppCheckToken(s.token)}),r.statsReporter_=XN(r.repoInfo_,()=>new Q2(r.stats_,r.server_)),r.infoData_=new H2,r.infoSyncTree_=new j_({startListening:(s,o,c,f)=>{let g=[];const p=r.infoData_.getNode(s._path);return p.isEmpty()||(g=cl(r.infoSyncTree_,s._path,p),setTimeout(()=>{f("ok")},0)),g},stopListening:()=>{}}),g0(r,"connected",!1),r.serverSyncTree_=new j_({startListening:(s,o,c,f)=>(r.server_.listen(s,c,o,(g,p)=>{const d=f(g,p);Gt(r.eventQueue_,s._path,d)}),[]),stopListening:(s,o)=>{r.server_.unlisten(s,o)}})}function dA(r){const i=r.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function fl(r){return QC({timestamp:dA(r)})}function U_(r,t,i,s,o){r.dataUpdateCount++;const c=new Ae(t);i=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,i):i;let f=[];if(o)if(s){const p=_c(i,d=>He(d));f=qC(r.serverSyncTree_,c,p,o)}else{const p=He(i);f=Lb(r.serverSyncTree_,c,p,o)}else if(s){const p=_c(i,d=>He(d));f=BC(r.serverSyncTree_,c,p)}else{const p=He(i);f=cl(r.serverSyncTree_,c,p)}let g=c;f.length>0&&(g=va(r,c)),Gt(r.eventQueue_,g,f)}function B_(r,t){g0(r,"connected",t),t===!1&&pA(r)}function fA(r,t){ut(t,(i,s)=>{g0(r,i,s)})}function g0(r,t,i){const s=new Ae("/.info/"+t),o=He(i);r.infoData_.updateSnapshot(s,o);const c=cl(r.infoSyncTree_,s,o);Gt(r.eventQueue_,s,c)}function Zc(r){return r.nextWriteId_++}function hA(r,t,i){const s=HC(r.serverSyncTree_,t);return s!=null?Promise.resolve(s):r.server_.get(t).then(o=>{const c=He(o).withIndex(t._queryParams.getIndex());Ch(r.serverSyncTree_,t,i,!0);let f;if(t._queryParams.loadsAllData())f=cl(r.serverSyncTree_,t._path,c);else{const g=Ws(r.serverSyncTree_,t);f=Lb(r.serverSyncTree_,t._path,c,g)}return Gt(r.eventQueue_,t._path,f),Dc(r.serverSyncTree_,t,i,null,!0),c},o=>(Sa(r,"get for query "+tt(t)+" failed: "+o),Promise.reject(new Error(o))))}function mA(r,t,i,s,o){Sa(r,"set",{path:t.toString(),value:i,priority:s});const c=fl(r),f=He(i,s),g=Yc(r.serverSyncTree_,t),p=c0(f,g,c),d=Zc(r),h=r0(r.serverSyncTree_,t,p,d,!0);Kc(r.eventQueue_,h),r.server_.put(t.toString(),f.val(!0),(y,b)=>{const E=y==="ok";E||xt("set at "+t+" failed: "+y);const S=Sr(r.serverSyncTree_,d,!E);Gt(r.eventQueue_,t,S),Mr(r,o,y,b)});const _=y0(r,t);va(r,_),Gt(r.eventQueue_,_,[])}function gA(r,t,i,s){Sa(r,"update",{path:t.toString(),value:i});let o=!0;const c=fl(r),f={};if(ut(i,(g,p)=>{o=!1,f[g]=Pb(Ge(t,g),He(p),r.serverSyncTree_,c)}),o)ct("update() called with empty data.  Don't do anything."),Mr(r,s,"ok",void 0);else{const g=Zc(r),p=UC(r.serverSyncTree_,t,f,g);Kc(r.eventQueue_,p),r.server_.merge(t.toString(),i,(d,h)=>{const _=d==="ok";_||xt("update at "+t+" failed: "+d);const y=Sr(r.serverSyncTree_,g,!_),b=y.length>0?va(r,t):t;Gt(r.eventQueue_,b,y),Mr(r,s,d,h)}),ut(i,d=>{const h=y0(r,Ge(t,d));va(r,h)}),Gt(r.eventQueue_,t,[])}}function pA(r){Sa(r,"onDisconnectEvents");const t=fl(r),i=wc();xh(r.onDisconnect_,Ee(),(o,c)=>{const f=Pb(o,c,r.serverSyncTree_,t);Ea(i,o,f)});let s=[];xh(i,Ee(),(o,c)=>{s=s.concat(cl(r.serverSyncTree_,o,c));const f=y0(r,o);va(r,f)}),r.onDisconnect_=wc(),Gt(r.eventQueue_,Ee(),s)}function yA(r,t,i){r.server_.onDisconnectCancel(t.toString(),(s,o)=>{s==="ok"&&bh(r.onDisconnect_,t),Mr(r,i,s,o)})}function z_(r,t,i,s){const o=He(i);r.server_.onDisconnectPut(t.toString(),o.val(!0),(c,f)=>{c==="ok"&&Ea(r.onDisconnect_,t,o),Mr(r,s,c,f)})}function _A(r,t,i,s,o){const c=He(i,s);r.server_.onDisconnectPut(t.toString(),c.val(!0),(f,g)=>{f==="ok"&&Ea(r.onDisconnect_,t,c),Mr(r,o,f,g)})}function vA(r,t,i,s){if(fh(i)){ct("onDisconnect().update() called with empty data.  Don't do anything."),Mr(r,s,"ok",void 0);return}r.server_.onDisconnectMerge(t.toString(),i,(o,c)=>{o==="ok"&&ut(i,(f,g)=>{const p=He(g);Ea(r.onDisconnect_,Ge(t,f),p)}),Mr(r,s,o,c)})}function bA(r,t,i){let s;fe(t._path)===".info"?s=Ch(r.infoSyncTree_,t,i):s=Ch(r.serverSyncTree_,t,i),Yb(r.eventQueue_,t._path,s)}function Oh(r,t,i){let s;fe(t._path)===".info"?s=Dc(r.infoSyncTree_,t,i):s=Dc(r.serverSyncTree_,t,i),Yb(r.eventQueue_,t._path,s)}function $b(r){r.persistentConnection_&&r.persistentConnection_.interrupt(Xb)}function xA(r){r.persistentConnection_&&r.persistentConnection_.resume(Xb)}function Sa(r,...t){let i="";r.persistentConnection_&&(i=r.persistentConnection_.id+":"),ct(i,...t)}function Mr(r,t,i,s){t&&xa(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let c=o;s&&(c+=": "+s);const f=new Error(c);f.code=o,t(f)}})}function EA(r,t,i,s,o,c){Sa(r,"transaction on "+t);const f={path:t,update:i,onComplete:s,status:null,order:Yv(),applyLocally:c,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=p0(r,t,void 0);f.currentInputSnapshot=g;const p=f.update(g.val());if(p===void 0)f.unwatcher(),f.currentOutputSnapshotRaw=null,f.currentOutputSnapshotResolved=null,f.onComplete&&f.onComplete(null,!1,f.currentInputSnapshot);else{dl("transaction failed: Data returned ",p,f.path),f.status=0;const d=Xc(r.transactionQueueTree_,t),h=pi(d)||[];h.push(f),f0(d,h);let _;typeof p=="object"&&p!==null&&fn(p,".priority")?(_=ai(p,".priority"),K(m0(_),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):_=(Yc(r.serverSyncTree_,t)||ce.EMPTY_NODE).getPriority().val();const y=fl(r),b=He(p,_),E=c0(b,g,y);f.currentOutputSnapshotRaw=b,f.currentOutputSnapshotResolved=E,f.currentWriteId=Zc(r);const S=r0(r.serverSyncTree_,t,E,f.currentWriteId,f.applyLocally);Gt(r.eventQueue_,t,S),Wc(r,r.transactionQueueTree_)}}function p0(r,t,i){return Yc(r.serverSyncTree_,t,i)||ce.EMPTY_NODE}function Wc(r,t=r.transactionQueueTree_){if(t||Jc(r,t),pi(t)){const i=Zb(r,t);K(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&wA(r,ul(t),i)}else qb(t)&&$c(t,i=>{Wc(r,i)})}function wA(r,t,i){const s=i.map(d=>d.currentWriteId),o=p0(r,t,s);let c=o;const f=o.hash();for(let d=0;d<i.length;d++){const h=i[d];K(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const _=bt(t,h.path);c=c.updateChild(_,h.currentOutputSnapshotRaw)}const g=c.val(!0),p=t;r.server_.put(p.toString(),g,d=>{Sa(r,"transaction put response",{path:p.toString(),status:d});let h=[];if(d==="ok"){const _=[];for(let y=0;y<i.length;y++)i[y].status=2,h=h.concat(Sr(r.serverSyncTree_,i[y].currentWriteId)),i[y].onComplete&&_.push(()=>i[y].onComplete(null,!0,i[y].currentOutputSnapshotResolved)),i[y].unwatcher();Jc(r,Xc(r.transactionQueueTree_,t)),Wc(r,r.transactionQueueTree_),Gt(r.eventQueue_,t,h);for(let y=0;y<_.length;y++)xa(_[y])}else{if(d==="datastale")for(let _=0;_<i.length;_++)i[_].status===3?i[_].status=4:i[_].status=0;else{xt("transaction at "+p.toString()+" failed: "+d);for(let _=0;_<i.length;_++)i[_].status=4,i[_].abortReason=d}va(r,t)}},f)}function va(r,t){const i=Kb(r,t),s=ul(i),o=Zb(r,i);return SA(r,o,s),s}function SA(r,t,i){if(t.length===0)return;const s=[];let o=[];const f=t.filter(g=>g.status===0).map(g=>g.currentWriteId);for(let g=0;g<t.length;g++){const p=t[g],d=bt(i,p.path);let h=!1,_;if(K(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)h=!0,_=p.abortReason,o=o.concat(Sr(r.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=oA)h=!0,_="maxretry",o=o.concat(Sr(r.serverSyncTree_,p.currentWriteId,!0));else{const y=p0(r,p.path,f);p.currentInputSnapshot=y;const b=t[g].update(y.val());if(b!==void 0){dl("transaction failed: Data returned ",b,p.path);let E=He(b);typeof b=="object"&&b!=null&&fn(b,".priority")||(E=E.updatePriority(y.getPriority()));const C=p.currentWriteId,M=fl(r),U=c0(E,y,M);p.currentOutputSnapshotRaw=E,p.currentOutputSnapshotResolved=U,p.currentWriteId=Zc(r),f.splice(f.indexOf(C),1),o=o.concat(r0(r.serverSyncTree_,p.path,U,p.currentWriteId,p.applyLocally)),o=o.concat(Sr(r.serverSyncTree_,C,!0))}else h=!0,_="nodata",o=o.concat(Sr(r.serverSyncTree_,p.currentWriteId,!0))}Gt(r.eventQueue_,i,o),o=[],h&&(t[g].status=2,(function(y){setTimeout(y,Math.floor(0))})(t[g].unwatcher),t[g].onComplete&&(_==="nodata"?s.push(()=>t[g].onComplete(null,!1,t[g].currentInputSnapshot)):s.push(()=>t[g].onComplete(new Error(_),!1,null))))}Jc(r,r.transactionQueueTree_);for(let g=0;g<s.length;g++)xa(s[g]);Wc(r,r.transactionQueueTree_)}function Kb(r,t){let i,s=r.transactionQueueTree_;for(i=fe(t);i!==null&&pi(s)===void 0;)s=Xc(s,i),t=ke(t),i=fe(t);return s}function Zb(r,t){const i=[];return Wb(r,t,i),i.sort((s,o)=>s.order-o.order),i}function Wb(r,t,i){const s=pi(t);if(s)for(let o=0;o<s.length;o++)i.push(s[o]);$c(t,o=>{Wb(r,o,i)})}function Jc(r,t){const i=pi(t);if(i){let s=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[s]=i[o],s++);i.length=s,f0(t,i.length>0?i:void 0)}$c(t,s=>{Jc(r,s)})}function y0(r,t){const i=ul(Kb(r,t)),s=Xc(r.transactionQueueTree_,t);return ZC(s,o=>{eh(r,o)}),eh(r,s),Hb(s,o=>{eh(r,o)}),i}function eh(r,t){const i=pi(t);if(i){const s=[];let o=[],c=-1;for(let f=0;f<i.length;f++)i[f].status===3||(i[f].status===1?(K(c===f-1,"All SENT items should be at beginning of queue."),c=f,i[f].status=3,i[f].abortReason="set"):(K(i[f].status===0,"Unexpected transaction status in abort"),i[f].unwatcher(),o=o.concat(Sr(r.serverSyncTree_,i[f].currentWriteId,!0)),i[f].onComplete&&s.push(i[f].onComplete.bind(null,new Error("set"),!1,null))));c===-1?f0(t,void 0):i.length=c+1,Gt(r.eventQueue_,ul(t),o);for(let f=0;f<s.length;f++)xa(s[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(r){let t="";const i=r.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let o=i[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function NA(r){const t={};r.charAt(0)==="?"&&(r=r.substring(1));for(const i of r.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):xt(`Invalid query segment '${i}' in query '${r}'`)}return t}const P_=function(r,t){const i=CA(r),s=i.namespace;i.domain==="firebase.com"&&Zn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&Zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||IN();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new ab(i.host,i.secure,s,o,t,"",s!==i.subdomain),path:new Ae(i.pathString)}},CA=function(r){let t="",i="",s="",o="",c="",f=!0,g="https",p=443;if(typeof r=="string"){let d=r.indexOf("//");d>=0&&(g=r.substring(0,d-1),r=r.substring(d+2));let h=r.indexOf("/");h===-1&&(h=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),t=r.substring(0,Math.min(h,_)),h<_&&(o=TA(r.substring(h,_)));const y=NA(r.substring(Math.min(r.length,_)));d=t.indexOf(":"),d>=0?(f=g==="https"||g==="wss",p=parseInt(t.substring(d+1),10)):d=t.length;const b=t.slice(0,d);if(b.toLowerCase()==="localhost")i="localhost";else if(b.split(".").length<=2)i=b;else{const E=t.indexOf(".");s=t.substring(0,E).toLowerCase(),i=t.substring(E+1),c=s}"ns"in y&&(c=y.ns)}return{host:t,port:p,domain:i,subdomain:s,secure:f,scheme:g,pathString:o,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t,i,s,o){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tt(this.snapshot.exportVal())}}class RA{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,i){this._repo=t,this._path=i}cancel(){const t=new En;return yA(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ua("OnDisconnect.remove",this._path);const t=new En;return z_(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ua("OnDisconnect.set",this._path),Rh("OnDisconnect.set",t,this._path);const i=new En;return z_(this._repo,this._path,t,i.wrapCallback(()=>{})),i.promise}setWithPriority(t,i){ua("OnDisconnect.setWithPriority",this._path),Rh("OnDisconnect.setWithPriority",t,this._path),rA("OnDisconnect.setWithPriority",i);const s=new En;return _A(this._repo,this._path,t,i,s.wrapCallback(()=>{})),s.promise}update(t){ua("OnDisconnect.update",this._path),Vb("OnDisconnect.update",t,this._path);const i=new En;return vA(this._repo,this._path,t,i.wrapCallback(()=>{})),i.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t,i,s,o){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=o}get key(){return ge(this._path)?null:Vh(this._path)}get ref(){return new Nn(this._repo,this._path)}get _queryIdentifier(){const t=T_(this._queryParams),i=Ph(t);return i==="{}"?"default":i}get _queryObject(){return T_(this._queryParams)}isEqual(t){if(t=Ot(t),!(t instanceof _0))return!1;const i=this._repo===t._repo,s=Fh(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+y2(this._path)}}class Nn extends _0{constructor(t,i){super(t,i,new $h,!1)}get parent(){const t=mb(this._path);return t===null?null:new Nn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class ba{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Ae(t),s=Dh(this.ref,t);return new ba(this._node.getChild(i),s,Pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>t(new ba(o,Dh(this.ref,s),Pe)))}hasChild(t){const i=new Ae(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ls(r,t){return r=Ot(r),r._checkNotDeleted("ref"),t!==void 0?Dh(r._root,t):r._root}function Dh(r,t){return r=Ot(r),fe(r._path)===null?iA("child","path",t):Fb("child","path",t),new Nn(r._repo,Ge(r._path,t))}function DA(r){return r=Ot(r),new OA(r._repo,r._path)}function ei(r,t){r=Ot(r),ua("set",r._path),Rh("set",t,r._path);const i=new En;return mA(r._repo,r._path,t,null,i.wrapCallback(()=>{})),i.promise}function xM(r,t){Vb("update",t,r._path);const i=new En;return gA(r._repo,r._path,t,i.wrapCallback(()=>{})),i.promise}function EM(r){r=Ot(r);const t=new Jb(()=>{}),i=new eu(t);return hA(r._repo,r,i).then(s=>new ba(s,new Nn(r._repo,r._path),r._queryParams.getIndex()))}class eu{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new AA("value",this,new ba(t.snapshotNode,new Nn(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new RA(this,t,i):null}matches(t){return t instanceof eu?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function MA(r,t,i,s,o){let c;if(typeof s=="object"&&(c=void 0,o=s),typeof s=="function"&&(c=s),o&&o.onlyOnce){const p=i,d=(h,_)=>{Oh(r._repo,r,g),p(h,_)};d.userCallback=i.userCallback,d.context=i.context,i=d}const f=new Jb(i,c||void 0),g=new eu(f);return bA(r._repo,r,g),()=>Oh(r._repo,r,g)}function zs(r,t,i,s){return MA(r,"value",t,i,s)}function wM(r,t,i){Oh(r._repo,r,null)}RC(Nn);IC(Nn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="FIREBASE_DATABASE_EMULATOR_HOST",Mh={};let IA=!1;function jA(r,t,i,s){const o=t.lastIndexOf(":"),c=t.substring(0,o),f=jh(c);r.repoInfo_=new ab(t,f,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,i),s&&(r.authTokenProvider_=s)}function LA(r,t,i,s,o){let c=s||r.options.databaseURL;c===void 0&&(r.options.projectId||Zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",r.options.projectId),c=`${r.options.projectId}-default-rtdb.firebaseio.com`);let f=P_(c,o),g=f.repoInfo,p;typeof process<"u"&&l_&&(p=l_[kA]),p?(c=`http://${p}?ns=${g.namespace}`,f=P_(c,o),g=f.repoInfo):f.repoInfo.secure;const d=new FN(r.name,r.options,t);aA("Invalid Firebase Database URL",f),ge(f.path)||Zn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=BA(g,r,d,new VN(r,i));return new zA(h,r)}function UA(r,t){const i=Mh[t];(!i||i[r.key]!==r)&&Zn(`Database ${t}(${r.repoInfo_}) has already been deleted.`),$b(r),delete i[r.key]}function BA(r,t,i,s){let o=Mh[t.name];o||(o={},Mh[t.name]=o);let c=o[r.toURLString()];return c&&Zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new cA(r,IA,i,s),o[r.toURLString()]=c,c}class zA{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nn(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(UA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Zn("Cannot call "+t+" on a deleted database.")}}function ex(r=Uc(),t){const i=di(r,"database").getImmediate({identifier:t});if(!i._instanceStarted){const s=pv("database");s&&PA(i,...s)}return i}function PA(r,t,i,s={}){r=Ot(r),r._checkNotDeleted("useEmulator");const o=`${t}:${i}`,c=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&yv(s,c.repoInfo_.emulatorOptions))return;Zn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(c.repoInfo_.nodeAdmin)s.mockUserToken&&Zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new yc(yc.OWNER);else if(s.mockUserToken){const g=typeof s.mockUserToken=="string"?s.mockUserToken:_v(s.mockUserToken,r.app.options.projectId);f=new yc(g)}jh(t)&&(vv(t),bv("Database",!0)),jA(c,o,s,f)}function SM(r){r=Ot(r),r._checkNotDeleted("goOffline"),$b(r._repo)}function TM(r){r=Ot(r),r._checkNotDeleted("goOnline"),xA(r._repo)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(r){RN(xv),Cr(new Ar("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),c=t.getProvider("app-check-internal");return LA(s,o,c,i)},"PUBLIC").setMultipleInstances(!0)),Sn(o_,c_,r),Sn(o_,c_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={".sv":"timestamp"};function ti(){return HA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(t,i){this.committed=t,this.snapshot=i}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function NM(r,t,i){if(r=Ot(r),ua("Reference.transaction",r._path),r.key===".length"||r.key===".keys")throw"Reference.transaction failed: "+r.key+" is a read-only object.";const s=!0,o=new En,c=(g,p,d)=>{let h=null;g?o.reject(g):(h=new ba(d,new Nn(r._repo,r._path),Pe),o.resolve(new GA(p,h)))},f=zs(r,()=>{});return EA(r._repo,r._path,t,c,f,s),o.promise}Kn.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)};Kn.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)};qA();const tx="@firebase/installations",v0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=1e4,rx=`w:${v0}`,ix="FIS_v2",VA="https://firebaseinstallations.googleapis.com/v1",FA=3600*1e3,YA="installations",QA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ci=new Lh(YA,QA,XA);function ax(r){return r instanceof Bh&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx({projectId:r}){return`${VA}/projects/${r}/installations`}function lx(r){return{token:r.token,requestStatus:2,expiresIn:KA(r.expiresIn),creationTime:Date.now()}}async function ox(r,t){const s=(await t.json()).error;return ci.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function cx({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function $A(r,{refreshToken:t}){const i=cx(r);return i.append("Authorization",ZA(t)),i}async function ux(r){const t=await r();return t.status>=500&&t.status<600?r():t}function KA(r){return Number(r.replace("s","000"))}function ZA(r){return`${ix} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA({appConfig:r,heartbeatServiceProvider:t},{fid:i}){const s=sx(r),o=cx(r),c=t.getImmediate({optional:!0});if(c){const d=await c.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const f={fid:i,authVersion:ix,appId:r.appId,sdkVersion:rx},g={method:"POST",headers:o,body:JSON.stringify(f)},p=await ux(()=>fetch(s,g));if(p.ok){const d=await p.json();return{fid:d.fid||i,registrationStatus:2,refreshToken:d.refreshToken,authToken:lx(d.authToken)}}else throw await ox("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(r){return new Promise(t=>{setTimeout(t,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=/^[cdef][\w-]{21}$/,kh="";function tR(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const i=nR(r);return eR.test(i)?i:kh}catch{return kh}}function nR(r){return JA(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Map;function hx(r,t){const i=tu(r);mx(i,t),rR(i,t)}function mx(r,t){const i=fx.get(r);if(i)for(const s of i)s(t)}function rR(r,t){const i=iR();i&&i.postMessage({key:r,fid:t}),aR()}let ii=null;function iR(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=r=>{mx(r.data.key,r.data.fid)}),ii}function aR(){fx.size===0&&ii&&(ii.close(),ii=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebase-installations-database",lR=1,ui="firebase-installations-store";let th=null;function b0(){return th||(th=Uh(sR,lR,{upgrade:(r,t)=>{switch(t){case 0:r.createObjectStore(ui)}}})),th}async function Mc(r,t){const i=tu(r),o=(await b0()).transaction(ui,"readwrite"),c=o.objectStore(ui),f=await c.get(i);return await c.put(t,i),await o.done,(!f||f.fid!==t.fid)&&hx(r,t.fid),t}async function gx(r){const t=tu(r),s=(await b0()).transaction(ui,"readwrite");await s.objectStore(ui).delete(t),await s.done}async function nu(r,t){const i=tu(r),o=(await b0()).transaction(ui,"readwrite"),c=o.objectStore(ui),f=await c.get(i),g=t(f);return g===void 0?await c.delete(i):await c.put(g,i),await o.done,g&&(!f||f.fid!==g.fid)&&hx(r,g.fid),g}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0(r){let t;const i=await nu(r.appConfig,s=>{const o=oR(s),c=cR(r,o);return t=c.registrationPromise,c.installationEntry});return i.fid===kh?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function oR(r){const t=r||{fid:tR(),registrationStatus:0};return px(t)}function cR(r,t){if(t.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ci.create("app-offline"));return{installationEntry:t,registrationPromise:o}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=uR(r,i);return{installationEntry:i,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:dR(r)}:{installationEntry:t}}async function uR(r,t){try{const i=await WA(r,t);return Mc(r.appConfig,i)}catch(i){throw ax(i)&&i.customData.serverCode===409?await gx(r.appConfig):await Mc(r.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function dR(r){let t=await q_(r.appConfig);for(;t.registrationStatus===1;)await dx(100),t=await q_(r.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:s}=await x0(r);return s||i}return t}function q_(r){return nu(r,t=>{if(!t)throw ci.create("installation-not-found");return px(t)})}function px(r){return fR(r)?{fid:r.fid,registrationStatus:0}:r}function fR(r){return r.registrationStatus===1&&r.registrationTime+nx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR({appConfig:r,heartbeatServiceProvider:t},i){const s=mR(r,i),o=$A(r,i),c=t.getImmediate({optional:!0});if(c){const d=await c.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const f={installation:{sdkVersion:rx,appId:r.appId}},g={method:"POST",headers:o,body:JSON.stringify(f)},p=await ux(()=>fetch(s,g));if(p.ok){const d=await p.json();return lx(d)}else throw await ox("Generate Auth Token",p)}function mR(r,{fid:t}){return`${sx(r)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(r,t=!1){let i;const s=await nu(r.appConfig,c=>{if(!yx(c))throw ci.create("not-registered");const f=c.authToken;if(!t&&yR(f))return c;if(f.requestStatus===1)return i=gR(r,t),c;{if(!navigator.onLine)throw ci.create("app-offline");const g=vR(c);return i=pR(r,g),g}});return i?await i:s.authToken}async function gR(r,t){let i=await H_(r.appConfig);for(;i.authToken.requestStatus===1;)await dx(100),i=await H_(r.appConfig);const s=i.authToken;return s.requestStatus===0?E0(r,t):s}function H_(r){return nu(r,t=>{if(!yx(t))throw ci.create("not-registered");const i=t.authToken;return bR(i)?{...t,authToken:{requestStatus:0}}:t})}async function pR(r,t){try{const i=await hR(r,t),s={...t,authToken:i};return await Mc(r.appConfig,s),i}catch(i){if(ax(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await gx(r.appConfig);else{const s={...t,authToken:{requestStatus:0}};await Mc(r.appConfig,s)}throw i}}function yx(r){return r!==void 0&&r.registrationStatus===2}function yR(r){return r.requestStatus===2&&!_R(r)}function _R(r){const t=Date.now();return t<r.creationTime||r.creationTime+r.expiresIn<t+FA}function vR(r){const t={requestStatus:1,requestTime:Date.now()};return{...r,authToken:t}}function bR(r){return r.requestStatus===1&&r.requestTime+nx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(r){const t=r,{installationEntry:i,registrationPromise:s}=await x0(t);return s?s.catch(console.error):E0(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(r,t=!1){const i=r;return await wR(i),(await E0(i,t)).token}async function wR(r){const{registrationPromise:t}=await x0(r);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(r){if(!r||!r.options)throw nh("App Configuration");if(!r.name)throw nh("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!r.options[i])throw nh(i);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function nh(r){return ci.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="installations",TR="installations-internal",NR=r=>{const t=r.getProvider("app").getImmediate(),i=SR(t),s=di(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},CR=r=>{const t=r.getProvider("app").getImmediate(),i=di(t,_x).getImmediate();return{getId:()=>xR(i),getToken:o=>ER(i,o)}};function AR(){Cr(new Ar(_x,NR,"PUBLIC")),Cr(new Ar(TR,CR,"PRIVATE"))}AR();Sn(tx,v0);Sn(tx,v0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="/firebase-messaging-sw.js",OR="/firebase-cloud-messaging-push-scope",vx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",DR="https://fcmregistrations.googleapis.com/v1",bx="google.c.a.c_id",MR="google.c.a.c_l",kR="google.c.a.ts",IR="google.c.a.e",G_=1e4;var V_;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(V_||(V_={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Js;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(Js||(Js={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r){const t=new Uint8Array(r);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jR(r){const t="=".repeat((4-r.length%4)%4),i=(r+t).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(i),o=new Uint8Array(s.length);for(let c=0;c<s.length;++c)o[c]=s.charCodeAt(c);return o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="fcm_token_details_db",LR=5,F_="fcm_token_object_Store";async function UR(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(rh))return null;let t=null;return(await Uh(rh,LR,{upgrade:async(s,o,c,f)=>{if(o<2||!s.objectStoreNames.contains(F_))return;const g=f.objectStore(F_),p=await g.index("fcmSenderId").get(r);if(await g.clear(),!!p){if(o===2){const d=p;if(!d.auth||!d.p256dh||!d.endpoint)return;t={token:d.fcmToken,createTime:d.createTime??Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Fn(d.vapidKey)}}}else if(o===3){const d=p;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Fn(d.auth),p256dh:Fn(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Fn(d.vapidKey)}}}else if(o===4){const d=p;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Fn(d.auth),p256dh:Fn(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Fn(d.vapidKey)}}}}}})).close(),await _f(rh),await _f("fcm_vapid_details_db"),await _f("undefined"),BR(t)?t:null}function BR(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:t}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebase-messaging-database",PR=1,el="firebase-messaging-store";let ih=null;function xx(){return ih||(ih=Uh(zR,PR,{upgrade:(r,t)=>{switch(t){case 0:r.createObjectStore(el)}}})),ih}async function qR(r){const t=Ex(r),s=await(await xx()).transaction(el).objectStore(el).get(t);if(s)return s;{const o=await UR(r.appConfig.senderId);if(o)return await w0(r,o),o}}async function w0(r,t){const i=Ex(r),o=(await xx()).transaction(el,"readwrite");return await o.objectStore(el).put(t,i),await o.done,t}function Ex({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Et=new Lh("messaging","Messaging",HR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(r,t){const i=await T0(r),s=wx(t),o={method:"POST",headers:i,body:JSON.stringify(s)};let c;try{c=await(await fetch(S0(r.appConfig),o)).json()}catch(f){throw Et.create("token-subscribe-failed",{errorInfo:f?.toString()})}if(c.error){const f=c.error.message;throw Et.create("token-subscribe-failed",{errorInfo:f})}if(!c.token)throw Et.create("token-subscribe-no-token");return c.token}async function VR(r,t){const i=await T0(r),s=wx(t.subscriptionOptions),o={method:"PATCH",headers:i,body:JSON.stringify(s)};let c;try{c=await(await fetch(`${S0(r.appConfig)}/${t.token}`,o)).json()}catch(f){throw Et.create("token-update-failed",{errorInfo:f?.toString()})}if(c.error){const f=c.error.message;throw Et.create("token-update-failed",{errorInfo:f})}if(!c.token)throw Et.create("token-update-no-token");return c.token}async function FR(r,t){const s={method:"DELETE",headers:await T0(r)};try{const c=await(await fetch(`${S0(r.appConfig)}/${t}`,s)).json();if(c.error){const f=c.error.message;throw Et.create("token-unsubscribe-failed",{errorInfo:f})}}catch(o){throw Et.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}}function S0({projectId:r}){return`${DR}/projects/${r}/registrations`}async function T0({appConfig:r,installations:t}){const i=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})}function wx({p256dh:r,auth:t,endpoint:i,vapidKey:s}){const o={web:{endpoint:i,auth:t,p256dh:r}};return s!==vx&&(o.web.applicationPubKey=s),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=10080*60*1e3;async function QR(r){const t=await $R(r.swRegistration,r.vapidKey),i={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:t.endpoint,auth:Fn(t.getKey("auth")),p256dh:Fn(t.getKey("p256dh"))},s=await qR(r.firebaseDependencies);if(s){if(KR(s.subscriptionOptions,i))return Date.now()>=s.createTime+YR?XR(r,{token:s.token,createTime:Date.now(),subscriptionOptions:i}):s.token;try{await FR(r.firebaseDependencies,s.token)}catch(o){console.warn(o)}return Y_(r.firebaseDependencies,i)}else return Y_(r.firebaseDependencies,i)}async function XR(r,t){try{const i=await VR(r.firebaseDependencies,t),s={...t,token:i,createTime:Date.now()};return await w0(r.firebaseDependencies,s),i}catch(i){throw i}}async function Y_(r,t){const s={token:await GR(r,t),createTime:Date.now(),subscriptionOptions:t};return await w0(r,s),s.token}async function $R(r,t){const i=await r.pushManager.getSubscription();return i||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jR(t)})}function KR(r,t){const i=t.vapidKey===r.vapidKey,s=t.endpoint===r.endpoint,o=t.auth===r.auth,c=t.p256dh===r.p256dh;return i&&s&&o&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(r){const t={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return ZR(t,r),WR(t,r),JR(t,r),t}function ZR(r,t){if(!t.notification)return;r.notification={};const i=t.notification.title;i&&(r.notification.title=i);const s=t.notification.body;s&&(r.notification.body=s);const o=t.notification.image;o&&(r.notification.image=o);const c=t.notification.icon;c&&(r.notification.icon=c)}function WR(r,t){t.data&&(r.data=t.data)}function JR(r,t){if(!t.fcmOptions&&!t.notification?.click_action)return;r.fcmOptions={};const i=t.fcmOptions?.link??t.notification?.click_action;i&&(r.fcmOptions.link=i);const s=t.fcmOptions?.analytics_label;s&&(r.fcmOptions.analyticsLabel=s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(r){return typeof r=="object"&&!!r&&bx in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(r){if(!r||!r.options)throw ah("App Configuration Object");if(!r.name)throw ah("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:i}=r;for(const s of t)if(!i[s])throw ah(s);return{appName:r.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function ah(r){return Et.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(t,i,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=tO(t);this.firebaseDependencies={app:t,appConfig:o,installations:i,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(r){try{r.swRegistration=await navigator.serviceWorker.register(RR,{scope:OR}),r.swRegistration.update().catch(()=>{}),await iO(r.swRegistration)}catch(t){throw Et.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function iO(r){return new Promise((t,i)=>{const s=setTimeout(()=>i(new Error(`Service worker not registered after ${G_} ms`)),G_),o=r.installing||r.waiting;r.active?(clearTimeout(s),t()):o?o.onstatechange=c=>{c.target?.state==="activated"&&(o.onstatechange=null,clearTimeout(s),t())}:(clearTimeout(s),i(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(r,t){if(!t&&!r.swRegistration&&await rO(r),!(!t&&r.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw Et.create("invalid-sw-registration");r.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(r,t){t?r.vapidKey=t:r.vapidKey||(r.vapidKey=vx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(r,t){if(!navigator)throw Et.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Et.create("permission-blocked");return await sO(r,t?.vapidKey),await aO(r,t?.serviceWorkerRegistration),QR(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(r,t,i){const s=cO(t);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:i[bx],message_name:i[MR],message_time:i[kR],message_device_time:Math.floor(Date.now()/1e3)})}function cO(r){switch(r){case Js.NOTIFICATION_CLICKED:return"notification_open";case Js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(r,t){const i=t.data;if(!i.isFirebaseMessaging)return;r.onMessageHandler&&i.messageType===Js.PUSH_RECEIVED&&(typeof r.onMessageHandler=="function"?r.onMessageHandler(Q_(i)):r.onMessageHandler.next(Q_(i)));const s=i.data;eO(s)&&s[IR]==="1"&&await oO(r,i.messageType,s)}const X_="@firebase/messaging",$_="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=r=>{const t=new nO(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",i=>uO(t,i)),t},fO=r=>{const t=r.getProvider("messaging").getImmediate();return{getToken:s=>lO(t,s)}};function hO(){Cr(new Ar("messaging",dO,"PUBLIC")),Cr(new Ar("messaging-internal",fO,"PRIVATE")),Sn(X_,$_),Sn(X_,$_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(){try{await Ev()}catch{return!1}return typeof window<"u"&&wv()&&Sv()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(r=Uc()){return Sx().then(t=>{if(!t)throw Et.create("unsupported-browser")},t=>{throw Et.create("indexed-db-unsupported")}),di(Ot(r),"messaging").getImmediate()}hO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="firebasestorage.googleapis.com",gO="storageBucket",pO=120*1e3,yO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends Bh{constructor(t,i,s=0){super(sh(t),`Firebase Storage: ${i} (${sh(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return sh(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tn;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tn||(Tn={}));function sh(r){return"storage/"+r}function _O(){const r="An unknown error occurred, please check the error payload for server response.";return new Cn(Tn.UNKNOWN,r)}function vO(){return new Cn(Tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bO(){return new Cn(Tn.CANCELED,"User canceled the upload/download.")}function xO(r){return new Cn(Tn.INVALID_URL,"Invalid URL '"+r+"'.")}function EO(r){return new Cn(Tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function K_(r){return new Cn(Tn.INVALID_ARGUMENT,r)}function Nx(){return new Cn(Tn.APP_DELETED,"The Firebase app was deleted.")}function wO(r){return new Cn(Tn.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t,i){this.bucket=t,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,i){let s;try{s=un.makeFromUrl(t,i)}catch{return new un(t,"")}if(s.path==="")return s;throw EO(t)}static makeFromUrl(t,i){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const f="(/(.*))?$",g=new RegExp("^gs://"+o+f,"i"),p={bucket:1,path:3};function d($){$.path_=decodeURIComponent($.path)}const h="v[A-Za-z0-9_]+",_=i.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${_}/${h}/b/${o}/o${y}`,"i"),E={bucket:1,path:3},S=i===Tx?"(?:storage.googleapis.com|storage.cloud.google.com)":i,C="([^?#]*)",M=new RegExp(`^https?://${S}/${o}/${C}`,"i"),Y=[{regex:g,indices:p,postModify:c},{regex:b,indices:E,postModify:d},{regex:M,indices:{bucket:1,path:2},postModify:d}];for(let $=0;$<Y.length;$++){const re=Y[$],W=re.regex.exec(t);if(W){const ee=W[re.indices.bucket];let J=W[re.indices.path];J||(J=""),s=new un(ee,J),re.postModify(s);break}}if(s==null)throw xO(t);return s}}class SO{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(r,t,i){let s=1,o=null,c=null,f=!1,g=0;function p(){return g===2}let d=!1;function h(...C){d||(d=!0,t.apply(null,C))}function _(C){o=setTimeout(()=>{o=null,r(b,p())},C)}function y(){c&&clearTimeout(c)}function b(C,...M){if(d){y();return}if(C){y(),h.call(null,C,...M);return}if(p()||f){y(),h.call(null,C,...M);return}s<64&&(s*=2);let Y;g===1?(g=2,Y=0):Y=(s+Math.random())*1e3,_(Y)}let E=!1;function S(C){E||(E=!0,y(),!d&&(o!==null?(C||(g=2),clearTimeout(o),_(0)):C||(g=1)))}return _(0),c=setTimeout(()=>{f=!0,S(!0)},i),S}function NO(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(r){return r!==void 0}function Z_(r,t,i,s){if(s<t)throw K_(`Invalid value for '${r}'. Expected ${t} or greater.`);if(s>i)throw K_(`Invalid value for '${r}'. Expected ${i} or less.`)}function AO(r){const t=encodeURIComponent;let i="?";for(const s in r)if(r.hasOwnProperty(s)){const o=t(s)+"="+t(r[s]);i=i+o+"&"}return i=i.slice(0,-1),i}var kc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(kc||(kc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(r,t){const i=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=t.indexOf(r)!==-1;return i||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(t,i,s,o,c,f,g,p,d,h,_,y=!0,b=!1){this.url_=t,this.method_=i,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=g,this.errorCallback_=p,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=_,this.retry=y,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const t=(s,o)=>{if(o){s(!1,new mc(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=g=>{const p=g.loaded,d=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,d)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const g=c.getErrorCode()===kc.NO_ERROR,p=c.getStatus();if(!g||RO(p,this.additionalRetryCodes_)&&this.retry){const h=c.getErrorCode()===kc.ABORT;s(!1,new mc(!1,null,h));return}const d=this.successCodes_.indexOf(p)!==-1;s(!0,new mc(d,c))})},i=(s,o)=>{const c=this.resolve_,f=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(g,g.getResponse());CO(p)?c(p):c()}catch(p){f(p)}else if(g!==null){const p=_O();p.serverResponse=g.getErrorText(),this.errorCallback_?f(this.errorCallback_(g,p)):f(p)}else if(o.canceled){const p=this.appDelete_?Nx():bO();f(p)}else{const p=vO();f(p)}};this.canceled_?i(!1,new mc(!1,null,!0)):this.backoffId_=TO(t,i,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&NO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mc{constructor(t,i,s){this.wasSuccessCode=t,this.connection=i,this.canceled=!!s}}function DO(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function MO(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function kO(r,t){t&&(r["X-Firebase-GMPID"]=t)}function IO(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function jO(r,t,i,s,o,c,f=!0,g=!1){const p=AO(r.urlParams),d=r.url+p,h=Object.assign({},r.headers);return kO(h,t),DO(h,i),MO(h,c),IO(h,s),new OO(d,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function UO(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,i){this._service=t,i instanceof un?this._location=i:this._location=un.makeFromUrl(i,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,i){return new Ic(t,i)}get root(){const t=new un(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UO(this._location.path)}get storage(){return this._service}get parent(){const t=LO(this._location.path);if(t===null)return null;const i=new un(this._location.bucket,t);return new Ic(this._service,i)}_throwIfRoot(t){if(this._location.path==="")throw wO(t)}}function W_(r,t){const i=t?.[gO];return i==null?null:un.makeFromBucketSpec(i,r)}function BO(r,t,i,s={}){r.host=`${t}:${i}`;const o=jh(t);o&&(vv(`https://${r.host}/b`),bv("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(r._overrideAuthToken=typeof c=="string"?c:_v(c,r.app.options.projectId))}class zO{constructor(t,i,s,o,c,f=!1){this.app=t,this._authProvider=i,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=Tx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pO,this._maxUploadRetryTime=yO,this._requests=new Set,o!=null?this._bucket=un.makeFromBucketSpec(o,this._host):this._bucket=W_(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,t):this._bucket=W_(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Z_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Z_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const i=await t.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(mv(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ic(this,t)}_makeRequest(t,i,s,o,c=!0){if(this._deleted)return new SO(Nx());{const f=jO(t,this._appId,s,o,i,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(t,i){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,i,s,o).getPromise()}}const J_="@firebase/storage",ev="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="storage";function PO(r=Uc(),t){r=Ot(r);const s=di(r,Cx).getImmediate({identifier:t}),o=pv("storage");return o&&qO(s,...o),s}function qO(r,t,i,s={}){BO(r,t,i,s)}function HO(r,{instanceIdentifier:t}){const i=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new zO(i,s,o,t,xv)}function GO(){Cr(new Ar(Cx,HO,"PUBLIC").setMultipleInstances(!0)),Sn(J_,ev,""),Sn(J_,ev,"esm2020")}GO();const VO=()=>{const r="production",t=r==="development";return{environment:r,isDevelopment:t,isProduction:r==="production",isTesting:r==="testing",firebase:{apiKey:"AIzaSyB8Z4GdoLZsBW6bfmAh_BSTftpTRUXPZMw",authDomain:"erp-for-tsa.firebaseapp.com",databaseURL:"https://erp-for-tsa-default-rtdb.firebaseio.com",projectId:"erp-for-tsa",storageBucket:"erp-for-tsa.firebasestorage.app",messagingSenderId:"271232983905",appId:"1:271232983905:web:7d06c8f5ec269824759b20",measurementId:"G-6CYWPS4N0G"},api:{baseUrl:"https://erp-for-tsa.web.app/api",timeout:3e4,retries:3},app:{name:"TSA Production ERP",version:"1.0.0",enableMockData:t,autoRefreshInterval:parseInt("60000")},features:{enableDevTools:t,enablePWA:!0,enableAnalytics:!0,enableOfflineMode:!0,enablePushNotifications:!0,enableErrorReporting:!0,enablePerformanceMonitoring:!0,enableHotReload:t,useFirebaseEmulators:!1},logging:{level:"error",debugMode:t},build:{legacySupport:!0,sourcemap:t}}},wr=VO(),FO=()=>{const r=[];return{valid:r.length===0,errors:r}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="analytics",YO="firebase_id",QO="origin",XO=60*1e3,$O="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",N0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new hv("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ht=new Lh("analytics","Analytics",KO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(r){if(!r.startsWith(N0)){const t=Ht.create("invalid-gtag-resource",{gtagURL:r});return Rt.warn(t.message),""}return r}function Ax(r){return Promise.all(r.map(t=>t.catch(i=>i)))}function WO(r,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(r,t)),i}function JO(r,t){const i=WO("firebase-js-sdk-policy",{createScriptURL:ZO}),s=document.createElement("script"),o=`${N0}?l=${r}&id=${t}`;s.src=i?i?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function eD(r){let t=[];return Array.isArray(window[r])?t=window[r]:window[r]=t,t}async function tD(r,t,i,s,o,c){const f=s[o];try{if(f)await t[f];else{const p=(await Ax(i)).find(d=>d.measurementId===o);p&&await t[p.appId]}}catch(g){Rt.error(g)}r("config",o,c)}async function nD(r,t,i,s,o){try{let c=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const g=await Ax(i);for(const p of f){const d=g.find(_=>_.measurementId===p),h=d&&t[d.appId];if(h)c.push(h);else{c=[];break}}}c.length===0&&(c=Object.values(t)),await Promise.all(c),r("event",s,o||{})}catch(c){Rt.error(c)}}function rD(r,t,i,s){async function o(c,...f){try{if(c==="event"){const[g,p]=f;await nD(r,t,i,g,p)}else if(c==="config"){const[g,p]=f;await tD(r,t,i,s,g,p)}else if(c==="consent"){const[g,p]=f;r("consent",g,p)}else if(c==="get"){const[g,p,d]=f;r("get",g,p,d)}else if(c==="set"){const[g]=f;r("set",g)}else r(c,...f)}catch(g){Rt.error(g)}}return o}function iD(r,t,i,s,o){let c=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=rD(c,r,t,i),{gtagCore:c,wrappedGtag:window[o]}}function aD(r){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(N0)&&i.src.includes(r))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=30,lD=1e3;class oD{constructor(t={},i=lD){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Rx=new oD;function cD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function uD(r){const{appId:t,apiKey:i}=r,s={method:"GET",headers:cD(i)},o=$O.replace("{app-id}",t),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();g.error?.message&&(f=g.error.message)}catch{}throw Ht.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function dD(r,t=Rx,i){const{appId:s,apiKey:o,measurementId:c}=r.options;if(!s)throw Ht.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:s};throw Ht.create("no-api-key")}const f=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new mD;return setTimeout(async()=>{g.abort()},XO),Ox({appId:s,apiKey:o,measurementId:c},f,g,t)}async function Ox(r,{throttleEndTimeMillis:t,backoffCount:i},s,o=Rx){const{appId:c,measurementId:f}=r;try{await fD(s,t)}catch(g){if(f)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:f};throw g}try{const g=await uD(r);return o.deleteThrottleMetadata(c),g}catch(g){const p=g;if(!hD(p)){if(o.deleteThrottleMetadata(c),f)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:f};throw g}const d=Number(p?.customData?.httpStatus)===503?v1(i,o.intervalMillis,sD):v1(i,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:i+1};return o.setThrottleMetadata(c,h),Rt.debug(`Calling attemptFetch again in ${d} millis`),Ox(r,h,s,o)}}function fD(r,t){return new Promise((i,s)=>{const o=Math.max(t-Date.now(),0),c=setTimeout(i,o);r.addEventListener(()=>{clearTimeout(c),s(Ht.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function hD(r){if(!(r instanceof Bh)||!r.customData)return!1;const t=Number(r.customData.httpStatus);return t===429||t===500||t===503||t===504}class mD{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function gD(r,t,i,s,o){if(o&&o.global){r("event",i,s);return}else{const c=await t,f={...s,send_to:c};r("event",i,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(){if(wv())try{await Ev()}catch(r){return Rt.warn(Ht.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return Rt.warn(Ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function yD(r,t,i,s,o,c,f){const g=dD(r);g.then(y=>{i[y.measurementId]=y.appId,r.options.measurementId&&y.measurementId!==r.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Rt.error(y)),t.push(g);const p=pD().then(y=>{if(y)return s.getId()}),[d,h]=await Promise.all([g,p]);aD(c)||JO(c,d.measurementId),o("js",new Date);const _=f?.config??{};return _[QO]="firebase",_.update=!0,h!=null&&(_[YO]=h),o("config",d.measurementId,_),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(t){this.app=t}_delete(){return delete Fs[this.app.options.appId],Promise.resolve()}}let Fs={},tv=[];const nv={};let lh="dataLayer",vD="gtag",rv,Dx,iv=!1;function bD(){const r=[];if(TS()&&r.push("This is a browser extension environment."),Sv()||r.push("Cookies are not available."),r.length>0){const t=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),i=Ht.create("invalid-analytics-context",{errorInfo:t});Rt.warn(i.message)}}function xD(r,t,i){bD();const s=r.options.appId;if(!s)throw Ht.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ht.create("no-api-key");if(Fs[s]!=null)throw Ht.create("already-exists",{id:s});if(!iv){eD(lh);const{wrappedGtag:c,gtagCore:f}=iD(Fs,tv,nv,lh,vD);Dx=c,rv=f,iv=!0}return Fs[s]=yD(r,tv,nv,t,rv,lh,i),new _D(r)}function Mx(r=Uc()){r=Ot(r);const t=di(r,jc);return t.isInitialized()?t.getImmediate():ED(r)}function ED(r,t={}){const i=di(r,jc);if(i.isInitialized()){const o=i.getImmediate();if(yv(t,i.getOptions()))return o;throw Ht.create("already-initialized")}return i.initialize({options:t})}function wD(r,t,i,s){r=Ot(r),gD(Dx,Fs[r.app.options.appId],t,i,s).catch(o=>Rt.error(o))}const av="@firebase/analytics",sv="0.10.18";function SD(){Cr(new Ar(jc,(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("installations-internal").getImmediate();return xD(s,o,i)},"PUBLIC")),Cr(new Ar("analytics-internal",r,"PRIVATE")),Sn(av,sv),Sn(av,sv,"esm2020");function r(t){try{const i=t.getProvider(jc).getImmediate();return{logEvent:(s,o,c)=>wD(i,s,o,c)}}catch(i){throw Ht.create("interop-component-reg-failed",{reason:i})}}}SD();const oh=FO();if(!oh.valid)throw console.error("❌ Environment Configuration Errors:",oh.errors),new Error(`Invalid production configuration: ${oh.errors.join(", ")}`);const TD={apiKey:wr.firebase.apiKey,authDomain:wr.firebase.authDomain,databaseURL:wr.firebase.databaseURL,projectId:wr.firebase.projectId,storageBucket:wr.firebase.storageBucket,messagingSenderId:wr.firebase.messagingSenderId,appId:wr.firebase.appId,measurementId:wr.firebase.measurementId},Ta=Tv(TD),gc=Nv(Ta),CM=Cv(Ta),Us=ex(Ta);PO(Ta);typeof window<"u"&&Mx(Ta);typeof window<"u"&&Sx().then(r=>{r&&mO(Ta)});const AM={OPERATORS:"operators",SUPERVISORS:"supervisors",MANAGEMENT:"management",BUNDLES:"bundles",WORK_ASSIGNMENTS:"workAssignments",WORK_ITEMS:"workItems",WORK_COMPLETIONS:"workCompletions",WIP_ENTRIES:"wipEntries",WIP_ROLLS:"wipRolls",ASSIGNMENT_HISTORY:"assignmentHistory",QUALITY_ISSUES:"qualityIssues",PRODUCTION_STATS:"productionStats",EFFICIENCY_LOGS:"efficiencyLogs",OPERATOR_EARNINGS:"operatorEarnings",NOTIFICATIONS:"notifications",DAILY_REPORTS:"dailyReports",LINE_STATUS:"lineStatus",SIZE_CONFIGS:"sizeConfigs",MACHINE_CONFIGS:"machineConfigs",ARTICLE_TEMPLATES:"articleTemplates",DELETED_TEMPLATES:"deletedTemplates",SYSTEM_SETTINGS:"systemSettings",WAGE_RECORDS:"wageRecords",USERS:"users",USER_ACTIVITIES:"user_activities",SYSTEM_ACTIVITIES:"system_activities",DAMAGE_REPORTS:"damage_reports",DAMAGE_NOTIFICATIONS:"damage_notifications",OPERATOR_WALLETS:"operatorWallets"},pc={OPERATOR_STATUS:"operator_status",WORK_PROGRESS:"work_progress",STATION_STATUS:"station_status",LIVE_METRICS:"live_metrics",NOTIFICATIONS:"notifications",SYSTEM_HEALTH:"system_health",ACTIVE_SESSIONS:"active_sessions",AVAILABLE_WORK:"available_work",LINE_BALANCING:"line_balancing"},RM={retryDelay:2e3,heartbeatInterval:3e4};console.log("🚀 Using live Firebase services in production mode");class ND{pendingUpdates=new Map;confirmedUpdates=new Map;failedUpdates=new Map;callbacks=new Map;retryTimeouts=new Map;async applyOptimisticUpdate(t,i,s,o,c,f,g,p){const d={id:t,type:i,collection:s,documentId:o,data:c,originalData:f,timestamp:Date.now(),retryCount:0,maxRetries:3,status:"pending"};this.pendingUpdates.set(t,d),p&&this.callbacks.set(t,p);try{const h=await g();this.confirmUpdate(t,h)}catch(h){this.handleUpdateError(t,h)}}confirmUpdate(t,i){const s=this.pendingUpdates.get(t);if(!s)return;s.status="confirmed",this.pendingUpdates.delete(t),this.confirmedUpdates.set(t,s),this.clearRetryTimeout(t),this.callbacks.get(t)?.onSuccess?.(s),setTimeout(()=>{this.confirmedUpdates.delete(t),this.callbacks.delete(t)},3e4),console.log(`Optimistic update confirmed: ${t}`)}handleUpdateError(t,i){const s=this.pendingUpdates.get(t);if(s)if(s.retryCount++,s.retryCount<=s.maxRetries){const o=1e3*Math.pow(2,s.retryCount-1),c=setTimeout(async()=>{console.log(`Retrying optimistic update: ${t} (attempt ${s.retryCount})`);try{this.markUpdateAsFailed(t,i)}catch(f){this.handleUpdateError(t,f)}},o);this.retryTimeouts.set(t,c)}else this.markUpdateAsFailed(t,i)}markUpdateAsFailed(t,i){const s=this.pendingUpdates.get(t);if(!s)return;s.status="failed",this.pendingUpdates.delete(t),this.failedUpdates.set(t,s),this.clearRetryTimeout(t),this.callbacks.get(t)?.onError?.(s,i),setTimeout(()=>{this.failedUpdates.has(t)&&this.revertUpdate(t)},1e4),console.error(`Optimistic update failed: ${t}`,i)}revertUpdate(t){const i=this.failedUpdates.get(t)||this.pendingUpdates.get(t);return i?(i.status="reverted",this.failedUpdates.delete(t),this.pendingUpdates.delete(t),this.clearRetryTimeout(t),this.callbacks.get(t)?.onRevert?.(i),setTimeout(()=>{this.callbacks.delete(t)},1e3),console.log(`Optimistic update reverted: ${t}`),!0):!1}getUpdateStatus(t){return this.pendingUpdates.get(t)||this.confirmedUpdates.get(t)||this.failedUpdates.get(t)||null}getPendingUpdates(){return Array.from(this.pendingUpdates.values())}getFailedUpdates(){return Array.from(this.failedUpdates.values())}hasPendingUpdates(){return this.pendingUpdates.size>0}getStats(){return{pending:this.pendingUpdates.size,confirmed:this.confirmedUpdates.size,failed:this.failedUpdates.size,totalRetries:Array.from(this.pendingUpdates.values()).reduce((t,i)=>t+i.retryCount,0)}}clearRetryTimeout(t){const i=this.retryTimeouts.get(t);i&&(clearTimeout(i),this.retryTimeouts.delete(t))}cancelUpdate(t){return this.pendingUpdates.get(t)?(this.pendingUpdates.delete(t),this.clearRetryTimeout(t),this.callbacks.delete(t),console.log(`Optimistic update cancelled: ${t}`),!0):!1}async retryFailedUpdate(t){const i=this.failedUpdates.get(t);return i?(this.failedUpdates.delete(t),i.status="pending",i.retryCount=0,this.pendingUpdates.set(t,i),console.log(`Manually retrying update: ${t}`),!0):!1}clearFailedUpdates(){this.failedUpdates.clear(),console.log("All failed updates cleared")}cleanup(){for(const t of this.retryTimeouts.values())clearTimeout(t);this.pendingUpdates.clear(),this.confirmedUpdates.clear(),this.failedUpdates.clear(),this.callbacks.clear(),this.retryTimeouts.clear(),console.log("Optimistic updates service cleaned up")}subscribeToStatusChanges(t,i){return()=>{}}generateUpdateId(t="opt"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const lv=new ND;class CD{userId=null;connectionRef=null;status={isOnline:!1,lastSeen:0,reconnectAttempts:0,latency:null};callbacks={};heartbeatInterval=null;latencyCheckInterval=null;reconnectTimeouts=[];initialize(t,i={}){this.userId=t,this.callbacks=i,this.setupConnectionMonitoring(),this.setupHeartbeat(),this.setupLatencyMonitoring(),console.log(`Connection monitor initialized for user: ${t}`)}setupConnectionMonitoring(){if(!this.userId)return;const t=Ls(Us,".info/connected");zs(t,i=>{i.val()===!0?this.handleConnection():this.handleDisconnection()}),this.connectionRef=Ls(Us,`${pc.ACTIVE_SESSIONS}/${this.userId}`),ei(this.connectionRef,{status:"online",lastSeen:ti(),userAgent:navigator.userAgent,timestamp:Date.now()}),DA(this.connectionRef).set({status:"offline",lastSeen:ti(),timestamp:Date.now()})}handleConnection(){this.status.isOnline=!0,this.status.reconnectAttempts=0,this.reconnectTimeouts.forEach(t=>clearTimeout(t)),this.reconnectTimeouts=[],this.connectionRef&&this.userId&&ei(this.connectionRef,{status:"online",lastSeen:ti(),timestamp:Date.now()}),this.callbacks.onConnectionChange?.(this.status),this.callbacks.onReconnect?.(),console.log("Firebase connection established")}handleDisconnection(){this.status.isOnline=!1,this.status.lastSeen=Date.now(),this.callbacks.onConnectionChange?.(this.status),this.callbacks.onDisconnect?.(),this.attemptReconnection(),console.log("Firebase connection lost")}attemptReconnection(){if(this.status.reconnectAttempts>=10){console.log("Max reconnection attempts reached");return}const s=1e3*Math.pow(2,this.status.reconnectAttempts);this.status.reconnectAttempts++;const o=setTimeout(()=>{this.status.isOnline||(console.log(`Reconnection attempt ${this.status.reconnectAttempts}`),this.callbacks.onConnectionChange?.(this.status),this.attemptReconnection())},s);this.reconnectTimeouts.push(o)}setupHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.status.isOnline&&this.connectionRef&&ei(this.connectionRef,{status:"online",lastSeen:ti(),timestamp:Date.now()}).catch(t=>{console.warn("Heartbeat failed:",t)})},3e4)}setupLatencyMonitoring(){this.latencyCheckInterval=setInterval(()=>{this.measureLatency()},6e4)}async measureLatency(){if(!this.status.isOnline)return this.status.latency=null,-1;try{const t=Date.now(),i=Ls(Us,`${pc.SYSTEM_HEALTH}/latency_test`);return await ei(i,t),new Promise(s=>{const o=zs(i,c=>{if(c.val()===t){const g=Date.now()-t;this.status.latency=g,this.callbacks.onConnectionChange?.(this.status),o(),s(g)}});setTimeout(()=>{this.status.latency=null,o(),s(-1)},1e4)})}catch(t){return console.warn("Latency measurement failed:",t),this.status.latency=null,-1}}getStatus(){return{...this.status}}isOnline(){return this.status.isOnline}async checkConnection(){try{return await this.measureLatency(),this.status.isOnline&&this.status.latency!==null}catch{return!1}}updateActivity(){this.status.isOnline&&this.connectionRef&&ei(this.connectionRef,{status:"online",lastSeen:ti(),lastActivity:Date.now(),timestamp:Date.now()}).catch(t=>{console.warn("Failed to update activity:",t)})}setUserStatus(t){this.connectionRef&&ei(this.connectionRef,{status:t,lastSeen:ti(),timestamp:Date.now()}).catch(i=>{console.warn("Failed to set user status:",i)})}cleanup(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.latencyCheckInterval&&(clearInterval(this.latencyCheckInterval),this.latencyCheckInterval=null),this.reconnectTimeouts.forEach(t=>clearTimeout(t)),this.reconnectTimeouts=[],this.connectionRef&&ei(this.connectionRef,{status:"offline",lastSeen:ti(),timestamp:Date.now()}).catch(()=>{}),console.log("Connection monitor cleaned up")}subscribeToUserStatus(t,i){const s=Ls(Us,`${pc.ACTIVE_SESSIONS}/${t}`);return zs(s,c=>{const f=c.exists()?c.val():null;i(f)})}subscribeToOnlineUsers(t){const i=Ls(Us,pc.ACTIVE_SESSIONS);return zs(i,o=>{const c=o.val()||{},f=Object.entries(c).filter(([g,p])=>p?.status==="online").map(([g,p])=>({userId:g,...p}));t(f)})}}const AD=new CD;class la{collectionName;cache;cacheTimeout=300*1e3;constructor(t){this.collectionName=t,this.cache=new Map}getCollection(){return NS(gc,this.collectionName)}getDocRef(t){return Yn(gc,this.collectionName,t)}async create(t,i){try{const s={...t,createdAt:ws.now(),updatedAt:ws.now()},o=i?this.getDocRef(i):Yn(this.getCollection());return await CS(o,s),this.invalidateCache(),{success:!0,data:{...s,id:o.id},id:o.id}}catch(s){return console.error(`Error creating document in ${this.collectionName}:`,s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}async getById(t,i=!0){try{if(i){const c=this.getFromCache(t);if(c)return{success:!0,data:c}}const s=this.getDocRef(t),o=await Bs(s);if(o.exists()){const c={id:o.id,...o.data()};return i&&this.setCache(t,c),{success:!0,data:c}}else return{success:!1,error:"Document not found"}}catch(s){return console.error(`Error getting document ${t} from ${this.collectionName}:`,s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}async update(t,i){try{const s=this.getDocRef(t),o={...i,updatedAt:ws.now()};return await hh(s,o),this.cache.delete(t),await this.getById(t,!1)}catch(s){return console.error(`Error updating document ${t} in ${this.collectionName}:`,s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}async delete(t){try{const i=this.getDocRef(t);return await AS(i),this.cache.delete(t),this.invalidateCache(),{success:!0}}catch(i){return console.error(`Error deleting document ${t} from ${this.collectionName}:`,i),{success:!1,error:i instanceof Error?i.message:"Unknown error occurred"}}}async getAll(t){try{let i=vn(this.getCollection());return t?.orderByField&&(i=vn(i,vf(t.orderByField,t.orderDirection||"asc"))),t?.limitCount&&(i=vn(i,bf(t.limitCount))),{success:!0,data:(await b1(i)).docs.map(c=>({id:c.id,...c.data()}))}}catch(i){return console.error(`Error getting all documents from ${this.collectionName}:`,i),{success:!1,error:i instanceof Error?i.message:"Unknown error occurred"}}}async getWhere(t,i){try{let s=vn(this.getCollection(),x1(t.field,t.operator,t.value));return i?.orderByField&&(s=vn(s,vf(i.orderByField,i.orderDirection||"asc"))),i?.limitCount&&(s=vn(s,bf(i.limitCount))),{success:!0,data:(await b1(s)).docs.map(f=>({id:f.id,...f.data()}))}}catch(s){return console.error(`Error querying documents from ${this.collectionName}:`,s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}async batchCreate(t){try{const i=RS(gc);return t.forEach(({id:s,data:o})=>{const c={...o,createdAt:ws.now(),updatedAt:ws.now()},f=s?this.getDocRef(s):Yn(this.getCollection());i.set(f,c)}),await i.commit(),this.invalidateCache(),{success:!0}}catch(i){return console.error(`Error batch creating documents in ${this.collectionName}:`,i),{success:!1,error:i instanceof Error?i.message:"Unknown error occurred"}}}subscribeToDocument(t,i){const s=this.getDocRef(t);return E1(s,o=>{if(o.exists()){const c={id:o.id,...o.data()};this.setCache(t,c),i(c)}else i(null)},o=>{console.error(`Error subscribing to document ${t}:`,o),i(null)})}subscribeToCollection(t,i,s){let o=vn(this.getCollection());return i&&(o=vn(o,x1(i.field,i.operator,i.value))),s?.orderByField&&(o=vn(o,vf(s.orderByField,s.orderDirection||"asc"))),s?.limitCount&&(o=vn(o,bf(s.limitCount))),E1(o,c=>{const f=c.docs.map(g=>({id:g.id,...g.data()}));t(f)},c=>{console.error(`Error subscribing to collection ${this.collectionName}:`,c),t([])})}getFromCache(t){const i=this.cache.get(t);return i&&Date.now()-i.timestamp<this.cacheTimeout?i.data:(i&&this.cache.delete(t),null)}setCache(t,i){this.cache.set(t,{data:i,timestamp:Date.now()})}invalidateCache(t){if(t)for(const i of this.cache.keys())i.includes(t)&&this.cache.delete(i);else this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}async atomicUpdate(t,i,s=3){try{const o=this.getDocRef(t),c=await OS(gc,async f=>{const g=await f.get(o),p=g.exists()?{id:g.id,...g.data()}:null,d=i(p);if(d===null)return null;const h={...d,updatedAt:mh()};return f.set(o,h),d});return c?(this.cache.delete(t),{success:!0,data:c,message:"Atomic update successful"}):{success:!1,error:"Transaction aborted",code:"TRANSACTION_ABORTED"}}catch(o){return s>0&&o instanceof Error&&o.message.includes("aborted")?(await new Promise(c=>setTimeout(c,100*(4-s))),this.atomicUpdate(t,i,s-1)):(console.error(`Atomic update failed for ${t}:`,o),{success:!1,error:o instanceof Error?o.message:"Transaction failed",code:"ATOMIC_UPDATE_FAILED"})}}async optimisticUpdate(t,i,s){const o=lv.generateUpdateId("service");try{const c=await this.getById(t,!1),f=c.success?c.data:void 0;await lv.applyOptimisticUpdate(o,"update",this.collectionName,t,i,f,s);const g={...f,...i};return this.setCache(t,g),{success:!0,data:g,message:"Optimistic update applied"}}catch(c){return console.error(`Optimistic update failed for ${t}:`,c),{success:!1,error:c instanceof Error?c.message:"Optimistic update failed",code:"OPTIMISTIC_UPDATE_FAILED"}}}async withRetry(t,i=3,s=1e3){let o;for(let c=0;c<=i;c++)try{return await t()}catch(f){if(o=f instanceof Error?f:new Error("Unknown error"),c===i)break;const g=s*Math.pow(2,c);await new Promise(p=>setTimeout(p,g)),console.warn(`Retry attempt ${c+1}/${i} after ${g}ms`)}throw o}async ensureConnection(){return AD.isOnline()?!0:(console.warn("Offline mode - operation queued"),!1)}async createWithValidation(t,i,s){if(i){const c=i(t);if(!c.isValid)return{success:!1,error:c.errors.join(", "),code:"VALIDATION_ERROR"}}return await this.ensureConnection()?this.create(t,s):{success:!1,error:"No network connection",code:"NETWORK_ERROR"}}}const RD=r=>{const t=r.reduce((s,o)=>s+o.smvMinutes,0),i=r.filter(s=>s.processingType==="parallel").length;return t>30||r.length>10?"expert":t>20||i>3||r.length>7?"complex":t>10||r.length>4?"medium":"simple"},OD=r=>!r.templateName.trim()||!r.templateCode.trim()||!r.category.trim()||r.operations.length===0?!1:r.operations.every(t=>t.name.trim()&&t.smvMinutes>0&&t.pricePerPiece>0&&t.machineType.trim());class da extends la{static instance;static getInstance(){return da.instance||(da.instance=new da),da.instance}constructor(){super("sewing_templates")}async createTemplate(t,i){try{if(!OD(t))return{success:!1,error:"Invalid template data provided"};const s=t.operations.map((p,d)=>({...p,id:`op_${Date.now()}_${d}`,sequenceOrder:d+1,prerequisites:p.processingType==="sequential"&&d>0?[`op_${Date.now()}_${d-1}`]:[]})),o=s.reduce((p,d)=>p+d.smvMinutes,0),c=s.reduce((p,d)=>p+d.pricePerPiece,0),f=RD(s),g={templateName:t.templateName,templateCode:t.templateCode,category:t.category,operations:s,totalSmv:o,totalPricePerPiece:c,complexityLevel:f,version:1,isActive:!0,timesUsed:0,createdBy:i,notes:t.notes,setupInstructions:t.setupInstructions};return await this.create(g)}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to create sewing template"}}}async getTemplate(t){return await this.getById(t)}async getAllTemplates(t){try{return t?await this.getWhere({field:"category",operator:"==",value:t},{orderByField:"templateName",orderDirection:"asc"}):await this.getAll({orderByField:"createdAt",orderDirection:"desc"})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to get templates"}}}async getActiveTemplates(){try{const t=await this.getAll();return!t.success||!t.data?{success:!1,error:"Failed to fetch templates"}:{success:!0,data:t.data.filter(s=>s.isActive).sort((s,o)=>s.templateName.localeCompare(o.templateName))}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to get active templates"}}}async updateTemplate(t,i){try{return i.operations&&(i.operations=i.operations.map((s,o)=>({...s,id:s.id||`op_${Date.now()}_${o}`,sequence:o+1}))),await this.update(t,i)}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update template"}}}async deleteTemplate(t){try{return await this.update(t,{isActive:!1})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to delete template"}}}async searchTemplates(t){try{const i=await this.getAll();if(!i.success||!i.data)return{success:!1,error:"Failed to fetch templates for search"};const s=t.toLowerCase();return{success:!0,data:i.data.filter(c=>c.name.toLowerCase().includes(s)||c.description?.toLowerCase().includes(s)||c.garmentType.toLowerCase().includes(s))}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to search templates"}}}async getPopularTemplates(t=10){try{return await this.getAll({orderByField:"timesUsed",orderDirection:"desc",limitCount:t})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to get popular templates"}}}async incrementUsage(t){try{const i=await this.getById(t);if(!i.success||!i.data)return{success:!1,error:"Template not found"};const s=i.data.timesUsed||0;return await this.update(t,{timesUsed:s+1})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to increment usage count"}}}async getTemplateAnalytics(t){try{const i=await this.getById(t);return!i.success||!i.data?{success:!1,error:"Template not found"}:{success:!0,data:{templateId:t,templateName:i.data.templateName,totalOperations:i.data.operations.length,totalSmv:i.data.totalSmv,totalPricePerPiece:i.data.totalPricePerPiece,averageOperationTime:i.data.totalSmv/i.data.operations.length,timesUsed:i.data.timesUsed||0,complexityLevel:i.data.complexityLevel,createdAt:i.data.createdAt,lastUsed:i.data.updatedAt}}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to get template analytics"}}}subscribeToTemplates(t){return this.subscribeToCollection(t,{field:"isActive",operator:"==",value:!0},{orderByField:"templateName",orderDirection:"asc"})}async createWorkAssignment(t,i,s,o){try{const c=await this.getTemplate(t);if(!c.success||!c.data)return{success:!1,error:"Template not found"};const f=c.data,g=f.operations.map(_=>({operationId:_.id,machineType:_.machineType,status:"pending",piecesCompleted:0,piecesTarget:s})),p={templateId:t,bundleId:i,totalPieces:s,operationsProgress:g,assignedOperators:[],status:"draft",supervisorId:o,totalOperations:f.operations.length,completedOperations:0,progressPercentage:0},h=await new la("work_assignment_templates").create(p);return h.success&&await this.incrementUsage(t),h}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to create work assignment"}}}async assignOperatorToMachine(t,i,s){try{const o=new la("machine_operator_assignments"),c=await o.getWhere({field:"operatorId",operator:"==",value:t});if(c.success&&c.data&&c.data.length>0&&c.data.find(p=>p.machineType===s&&p.isActive))return{success:!1,error:"Operator already assigned to this machine type"};const f={operatorId:t,operatorName:i,machineType:s,isActive:!0,currentWorkload:0};return await o.create(f)}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to assign operator to machine"}}}async getOperatorsByMachineType(t){try{return await new la("machine_operator_assignments").getWhere({field:"machineType",operator:"==",value:t},{orderByField:"currentWorkload",orderDirection:"asc"})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to get operators for machine type"}}}async updateOperationProgress(t,i,s){try{const o=new la("work_assignment_templates"),c=await o.getById(t);if(!c.success||!c.data)return{success:!1,error:"Work assignment not found"};const f=c.data,g=f.operationsProgress.findIndex(h=>h.operationId===i);if(g===-1)return{success:!1,error:"Operation not found in work assignment"};f.operationsProgress[g]={...f.operationsProgress[g],...s};const p=f.operationsProgress.filter(h=>h.status==="completed").length,d=Math.round(p/f.totalOperations*100);return await o.update(t,{operationsProgress:f.operationsProgress,completedOperations:p,progressPercentage:d})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to update operation progress"}}}async getWorkAssignmentsByBundle(t){try{return await new la("work_assignment_templates").getWhere({field:"bundleId",operator:"==",value:t})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to get work assignments for bundle"}}}}const DD=da.getInstance(),MD=({onComplete:r,onCancel:t})=>{const[i,s]=j.useState(1),[o,c]=j.useState({articles:[{id:"article_1",articleNumber:"",style:"",priority:"normal",sizes:[],sizeNames:"",sizeRatios:"",selectedTemplateId:""}],fabricRolls:[],batchCuttingInfo:{layerLength:4.7,totalLayers:0,cuttingEfficiency:95},selectedTemplateId:"",bundleNumber:""}),[f,g]=j.useState(!1),[p,d]=j.useState([]),[h,_]=j.useState({}),[y,b]=j.useState(0),[E,S]=j.useState({rollNumber:"",color:"",weight:"",layerCount:""}),[C,M]=j.useState([]);wn.useEffect(()=>{U()},[]);const U=async()=>{try{const L=await DD.getActiveTemplates();L.success&&L.data&&d(L.data)}catch(L){console.error("Failed to load templates:",L)}},Y=()=>{const L={id:`article_${Date.now()}`,articleNumber:"",style:"",priority:"normal",sizes:[],sizeNames:"",sizeRatios:"",selectedTemplateId:""};c(A=>({...A,articles:[...A.articles,L]})),b(o.articles.length)},$=L=>{o.articles.length<=1||(c(A=>({...A,articles:A.articles.filter((P,le)=>le!==L)})),y>=L&&y>0&&b(y-1))},re=L=>{c(A=>({...A,articles:A.articles.map((P,le)=>le===y?{...P,...L}:P)}))},W=()=>{const L=[];return E.rollNumber.trim()||L.push("Roll number is required"),E.color.trim()||L.push("Color is required"),(!E.weight.trim()||parseFloat(E.weight)<=0)&&L.push("Weight must be greater than 0"),(!E.layerCount.trim()||parseInt(E.layerCount)<=0)&&L.push("Layer count must be greater than 0"),E.rollNumber.trim()&&o.fabricRolls.some(A=>A.rollNumber.toLowerCase()===E.rollNumber.trim().toLowerCase())&&L.push("Roll number already exists"),L},ee=()=>{const L=W();if(M(L),L.length===0){const A={id:`roll_${Date.now()}`,rollNumber:E.rollNumber.trim(),color:E.color.trim(),weight:parseFloat(E.weight),layerCount:parseInt(E.layerCount),layerLength:o.batchCuttingInfo.layerLength,cuttingComplete:!1};c(P=>({...P,fabricRolls:[...P.fabricRolls,A],batchCuttingInfo:{...P.batchCuttingInfo,totalLayers:P.batchCuttingInfo.totalLayers+parseInt(E.layerCount)}})),S({rollNumber:"",color:"",weight:"",layerCount:""}),M([])}},J=L=>{const A=o.fabricRolls.find(P=>P.id===L);A&&c(P=>({...P,fabricRolls:P.fabricRolls.filter(le=>le.id!==L),batchCuttingInfo:{...P.batchCuttingInfo,totalLayers:P.batchCuttingInfo.totalLayers-A.layerCount}}))},F=()=>{const L={};return o.articles.forEach((A,P)=>{if(A.articleNumber.trim()||(L[`article_${P}_articleNumber`]=`Article ${P+1}: Article number is required`),A.style.trim()||(L[`article_${P}_style`]=`Article ${P+1}: Style is required`),A.sizeNames.trim()||(L[`article_${P}_sizeNames`]=`Article ${P+1}: Size names are required`),A.sizeRatios.trim()||(L[`article_${P}_sizeRatios`]=`Article ${P+1}: Size ratios are required`),A.selectedTemplateId||(L[`article_${P}_template`]=`Article ${P+1}: Sewing template is required`),A.sizeNames.trim()&&A.sizeRatios.trim()){const le=A.sizeNames.split(":").filter(je=>je.trim()),Ie=A.sizeRatios.split(":").filter(je=>je.trim());le.length!==Ie.length&&(L[`article_${P}_sizeMatch`]=`Article ${P+1}: Number of sizes and ratios must match`)}}),_(L),Object.keys(L).length===0},V=()=>{const L={};return o.articles.forEach((A,P)=>{A.sizes.length===0&&(L[`article_${P}_sizes`]=`Article ${P+1}: At least one size entry is required`)}),o.fabricRolls.length===0&&(L.fabricRolls="At least one fabric roll is required for batch cutting"),o.batchCuttingInfo.layerLength<=0&&(L.layerLength="Layer length must be greater than 0"),_(L),Object.keys(L).length===0},Q=()=>{const L={};o.bundleNumber.trim()||(L.bundleNumber="Bundle number is required");const A=o.articles.filter(P=>!P.selectedTemplateId);return A.length>0&&(L.articleTemplates=`${A.length} articles are missing template assignments`),_(L),Object.keys(L).length===0},X=L=>{const A=o.articles[L];if(!A.sizeNames.trim()||!A.sizeRatios.trim())return;const P=A.sizeNames.split(":").map(Be=>Be.trim()).filter(Be=>Be),le=A.sizeRatios.split(":").map(Be=>Be.trim()).filter(Be=>Be);if(P.length!==le.length){_(Be=>({...Be,sizeGeneration:"Size names and ratios count must match"}));return}const Ie=p.find(Be=>Be.id===A.selectedTemplateId),je=Ie?Ie.totalPricePerPiece:0,nt=Ie?Ie.totalSmv:0,yt=P.map((Be,kr)=>({size:Be,quantity:parseInt(le[kr])||1,completed:0,rate:je,smv:nt})),An=o.articles.map((Be,kr)=>kr===L?{...Be,sizes:yt}:Be);c(Be=>({...Be,articles:An})),_(Be=>({...Be,sizeGeneration:""}))},Z=L=>{const A=o.articles.map((P,le)=>le===y?{...P,sizes:P.sizes.filter((Ie,je)=>je!==L)}:P);c(P=>({...P,articles:A}))},H=()=>{let L=!1;switch(i){case 1:L=F();break;case 2:L=V();break;case 3:L=Q();break}L&&i<3&&s(A=>A+1)},he=()=>{i>1&&s(L=>L-1)},B=async()=>{if(Q()){g(!0);try{await r(o)}catch(L){console.error("Failed to complete WIP entry:",L)}finally{g(!1)}}},te=()=>o.articles.reduce((L,A)=>L+(A.sizes?.reduce((P,le)=>P+le.quantity,0)||0),0),ae=()=>o.articles.reduce((L,A)=>L+(A.sizes?.reduce((P,le)=>P+le.quantity*le.rate,0)||0),0),Te=()=>{const L=o.articles[y];return v.jsxs("div",{className:"space-y-6",children:[v.jsxs(Qn,{className:"p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:v.jsx(iT,{className:"h-6 w-6 text-blue-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Step 1: Multi-Article Information"}),v.jsx("p",{className:"text-sm text-gray-500",children:"Set up multiple articles for batch cutting"})]})]}),v.jsxs(Xe,{onClick:Y,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700",children:[v.jsx(cT,{className:"h-4 w-4"}),v.jsx("span",{children:"Add Article"})]})]}),o.articles.length>1&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b",children:o.articles.map((A,P)=>v.jsxs("div",{className:"flex items-center",children:[v.jsxs("button",{onClick:()=>b(P),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${P===y?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Article ",P+1,A.articleNumber&&` (${A.articleNumber})`]}),o.articles.length>1&&v.jsx("button",{onClick:()=>$(P),className:"ml-1 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:v.jsx(ph,{className:"h-4 w-4"})})]},A.id))}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsx("div",{children:v.jsx(tn,{label:"Article Number *",placeholder:"e.g., #3233 (adult), #3265 (teen)",value:L.articleNumber,onChange:A=>re({articleNumber:A.target.value}),error:h[`article_${y}_articleNumber`]})}),v.jsx("div",{children:v.jsx(tn,{label:"Style *",placeholder:"e.g., Round Neck T-shirt",value:L.style,onChange:A=>re({style:A.target.value}),error:h[`article_${y}_style`]})}),v.jsxs("div",{children:[v.jsx(tn,{label:"Size Names *",placeholder:"e.g., M:L:XL or S:M:L:XL:2XL",value:L.sizeNames,onChange:A=>re({sizeNames:A.target.value}),error:h[`article_${y}_sizeNames`]}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter sizes separated by colon (:)"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),v.jsxs("select",{value:L.priority,onChange:A=>re({priority:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"low",children:"Low"}),v.jsx("option",{value:"normal",children:"Normal"}),v.jsx("option",{value:"high",children:"High"}),v.jsx("option",{value:"urgent",children:"Urgent"})]})]}),v.jsxs("div",{children:[v.jsx(tn,{label:"Size Ratios *",placeholder:"e.g., 1:2:1 or 2:3:2:1:1",value:L.sizeRatios,onChange:A=>re({sizeRatios:A.target.value}),error:h[`article_${y}_sizeRatios`]}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter ratios separated by colon (:), matching size names order"})]}),v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sewing Template *"}),v.jsxs("select",{value:L.selectedTemplateId,onChange:A=>re({selectedTemplateId:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"",children:"Select a sewing template"}),p.map(A=>v.jsxs("option",{value:A.id,children:[A.templateName," (",A.templateCode,") - ",A.operations.length," ops"]},A.id))]}),h[`article_${y}_template`]&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:h[`article_${y}_template`]}),L.selectedTemplateId&&v.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded border",children:(()=>{const A=p.find(P=>P.id===L.selectedTemplateId);return A?v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-800",children:A.templateName}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-600 mt-1",children:[v.jsxs("span",{children:[A.operations.length," operations"]}),v.jsxs("span",{children:[A.totalSmv,"min SMV"]}),v.jsxs("span",{children:["Rs. ",A.totalPricePerPiece,"/pc"]})]})]}):null})()})]})]})]}),o.articles.length>0&&v.jsxs(Qn,{className:"p-6",children:[v.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Batch Cutting Preview (",o.articles.length," Articles)"]}),v.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:v.jsxs("p",{className:"text-sm text-yellow-800",children:["📋 ",v.jsx("strong",{children:"Multi-Article Batch:"})," All articles will be cut together from the same fabric layers for maximum efficiency."]})}),v.jsx("div",{className:"space-y-2",children:o.articles.map((A,P)=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsxs(xn,{variant:"secondary",children:["#",P+1]}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:A.articleNumber||"No article number"}),v.jsxs("p",{className:"text-sm text-gray-500",children:[A.style," | ",A.priority," | Sizes: ",A.sizeNames||"Not set"]}),v.jsxs("p",{className:"text-xs text-gray-500",children:["Template: ",(()=>{const le=p.find(Ie=>Ie.id===A.selectedTemplateId);return le?le.templateName:"Not selected"})()]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx(xn,{variant:"outline",children:A.sizes.length>0?`${A.sizes.reduce((le,Ie)=>le+Ie.quantity,0)} pieces`:A.sizeRatios?`${A.sizeRatios.split(":").map(je=>parseInt(je.trim())||0).reduce((je,nt)=>je+nt,0)} pieces (preview)`:"0 pieces"}),v.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[v.jsxs("p",{children:["Ratios: ",A.sizeRatios||"Not set"]}),v.jsxs("p",{children:["Template: ",(()=>{const le=p.find(Ie=>Ie.id===A.selectedTemplateId);return le?le.templateCode:"Not selected"})()]})]})]})]},A.id))})]})]})},we=()=>{const L=o.articles[y];return v.jsxs("div",{className:"space-y-6",children:[v.jsxs(Qn,{className:"p-6",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[v.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:v.jsx(nT,{className:"h-6 w-6 text-orange-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Step 2: Fabric Rolls & Batch Cutting"}),v.jsx("p",{className:"text-sm text-gray-500",children:"Configure fabric rolls and layering for multi-article cutting"})]})]}),v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[v.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Batch Cutting Configuration"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsx("div",{children:v.jsx(tn,{type:"number",step:"0.1",label:"Layer Length (meters)",value:o.batchCuttingInfo.layerLength,onChange:A=>c(P=>({...P,batchCuttingInfo:{...P.batchCuttingInfo,layerLength:parseFloat(A.target.value)||0}})),placeholder:"4.7"})}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Layers"}),v.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.batchCuttingInfo.totalLayers}),v.jsx("p",{className:"text-xs text-gray-500",children:"Auto-calculated from rolls"})]}),v.jsx("div",{children:v.jsx(tn,{type:"number",label:"Overall Efficiency (%)",value:o.batchCuttingInfo.cuttingEfficiency,onChange:A=>c(P=>({...P,batchCuttingInfo:{...P.batchCuttingInfo,cuttingEfficiency:parseInt(A.target.value)||95}})),placeholder:"95"})})]})]}),v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[v.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Add Fabric Roll"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[v.jsx(tn,{placeholder:"Roll Number (e.g., R001)",value:E.rollNumber,onChange:A=>{S(P=>({...P,rollNumber:A.target.value})),C.length>0&&M([])}}),v.jsx(tn,{placeholder:"Color (e.g., Red, Green)",value:E.color,onChange:A=>{S(P=>({...P,color:A.target.value})),C.length>0&&M([])}}),v.jsx(tn,{type:"number",step:"0.1",placeholder:"Weight (kg)",value:E.weight,onChange:A=>{S(P=>({...P,weight:A.target.value})),C.length>0&&M([])}}),v.jsx(tn,{type:"number",placeholder:"Layer Count",value:E.layerCount,onChange:A=>{S(P=>({...P,layerCount:A.target.value})),C.length>0&&M([])}}),v.jsx(Xe,{onClick:ee,className:"w-full bg-orange-600 hover:bg-orange-700",children:"Add Roll"})]}),C.length>0&&v.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:[v.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Please fix the following errors:"}),v.jsx("ul",{className:"text-sm text-red-700 list-disc list-inside",children:C.map((A,P)=>v.jsx("li",{children:A},P))})]})]}),o.fabricRolls.length>0&&v.jsxs("div",{className:"space-y-3 mb-6",children:[v.jsxs("h4",{className:"font-medium text-gray-900",children:["Fabric Rolls Ready for Cutting (",o.fabricRolls.length,")"]}),o.fabricRolls.map(A=>v.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center space-x-6",children:[v.jsx(xn,{variant:"secondary",className:"font-mono",children:A.rollNumber}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:A.color.toLowerCase()}}),v.jsx("span",{className:"text-sm font-medium",children:A.color})]}),v.jsxs("span",{className:"text-sm text-gray-600",children:[A.weight,"kg"]}),v.jsxs("span",{className:"text-sm text-gray-600",children:[v.jsx("strong",{children:A.layerCount})," layers"]}),v.jsxs("span",{className:"text-sm text-gray-600",children:[A.layerLength,"m each"]})]}),v.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>J(A.id),className:"text-red-600 hover:text-red-700",children:"Remove"})]},A.id))]}),h.fabricRolls&&v.jsx("p",{className:"text-red-500 text-sm",children:h.fabricRolls})]}),v.jsxs(Qn,{className:"p-6",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[v.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:v.jsx(mT,{className:"h-6 w-6 text-green-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Article Size Breakdown"}),v.jsx("p",{className:"text-sm text-gray-500",children:"Different cut ratios for each article type"})]})]}),o.articles.length>1&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b",children:o.articles.map((A,P)=>v.jsxs("button",{onClick:()=>b(P),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${P===y?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[A.articleNumber||`Article ${P+1}`,v.jsxs("span",{className:"ml-2 text-xs bg-white px-1 rounded",children:[A.sizes.length," sizes"]})]},A.id))}),v.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-medium text-blue-900",children:L.articleNumber||`Article ${y+1}`}),v.jsx("p",{className:"text-sm text-blue-700",children:L.style})]}),v.jsxs("div",{className:"text-right text-sm",children:[v.jsxs("p",{className:"text-blue-800",children:[v.jsx("strong",{children:"Sizes:"})," ",L.sizeNames||"Not configured"]}),v.jsxs("p",{className:"text-blue-600",children:[v.jsx("strong",{children:"Ratios:"})," ",L.sizeRatios||"Not configured"]}),L.sizeNames&&L.sizeRatios&&v.jsx(Xe,{onClick:()=>X(y),className:"mt-2 bg-blue-600 hover:bg-blue-700 text-xs px-2 py-1",children:"Generate Sizes"})]})]})}),v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[v.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"📋 How to Add Sizes"}),v.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Sizes are automatically generated from your Step 1 configuration using the selected template's pricing."}),v.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[v.jsxs("li",{children:["• ",v.jsx("strong",{children:"Same rate & SMV"})," for all sizes (from template)"]}),v.jsxs("li",{children:["• ",v.jsx("strong",{children:"Different quantities"})," based on your ratios"]}),v.jsx("li",{children:'• Click "Generate Sizes" to create from your size names and ratios'})]}),h.sizeGeneration&&v.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.sizeGeneration})]}),L.sizes.length>0&&v.jsxs("div",{className:"space-y-4 mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("h4",{className:"font-medium text-gray-900",children:["Article Sizes (",L.sizes.length,")"]}),(()=>{const A=p.find(P=>P.id===L.selectedTemplateId);return A?v.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded",children:["Template: ",v.jsxs("span",{className:"font-medium text-blue-700",children:["Rs. ",A.totalPricePerPiece,"/pc"]})," |",v.jsxs("span",{className:"font-medium text-blue-700",children:[" ",A.totalSmv,"min SMV"]})]}):null})()]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:L.sizes.map((A,P)=>v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx(xn,{variant:"secondary",className:"text-lg font-mono",children:A.size}),v.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>Z(P),className:"text-red-600 hover:text-red-700 text-xs px-2 py-1",children:"Remove"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Quantity:"}),v.jsxs("span",{className:"font-semibold text-gray-900",children:[A.quantity," pieces"]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Rate:"}),v.jsxs("span",{className:"font-medium text-gray-900",children:["Rs. ",A.rate,"/pc"]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"SMV:"}),v.jsxs("span",{className:"font-medium text-gray-900",children:[A.smv," min/pc"]})]}),v.jsx("div",{className:"pt-2 border-t",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Value:"}),v.jsxs("span",{className:"font-bold text-green-600",children:["Rs. ",(A.quantity*A.rate).toFixed(2)]})]})})]})]},P))}),v.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:v.jsxs("div",{className:"flex justify-between items-center text-sm",children:[v.jsx("span",{className:"text-green-700",children:"Article Total:"}),v.jsxs("div",{className:"text-right",children:[v.jsxs("div",{className:"font-semibold text-green-900",children:[L.sizes.reduce((A,P)=>A+P.quantity,0)," pieces"]}),v.jsxs("div",{className:"font-bold text-green-600",children:["Rs. ",L.sizes.reduce((A,P)=>A+P.quantity*P.rate,0).toFixed(2)]})]})]})})]}),h[`article_${y}_sizes`]&&v.jsx("p",{className:"text-red-500 text-sm",children:h[`article_${y}_sizes`]})]}),v.jsxs(Qn,{className:"p-6",children:[v.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Multi-Article Batch Summary"}),v.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[v.jsx("h5",{className:"font-medium text-yellow-900 mb-2",children:"🔄 Simultaneous Cutting Process"}),v.jsxs("p",{className:"text-sm text-yellow-800 mb-3",children:["All articles will be cut together using ",o.batchCuttingInfo.totalLayers," total layers at ",o.batchCuttingInfo.layerLength,"m length. Different cut ratios will be applied based on article specifications."]}),v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-700",children:"Articles:"}),v.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:o.articles.length})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-700",children:"Fabric Rolls:"}),v.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:o.fabricRolls.length})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-700",children:"Total Layers:"}),v.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:o.batchCuttingInfo.totalLayers})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-700",children:"Total Pieces:"}),v.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:te()})]})]})]}),v.jsx("div",{className:"space-y-3",children:o.articles.map(A=>v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{children:[v.jsxs("h5",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[v.jsx("span",{children:A.articleNumber}),v.jsx(xn,{variant:"outline",size:"sm",children:"Article"})]}),v.jsx("p",{className:"text-sm text-gray-600",children:A.style})]}),v.jsxs("div",{className:"text-right",children:[v.jsx(xn,{variant:A.priority==="urgent"?"danger":A.priority==="high"?"warning":"secondary",children:A.priority}),v.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Template: ",(()=>{const P=p.find(le=>le.id===A.selectedTemplateId);return P?P.templateCode:"Not set"})()]})]})]}),A.sizes.length>0?v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-3",children:A.sizes.map((P,le)=>v.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded",children:[v.jsxs("span",{className:"font-medium",children:[P.size,":"]})," ",P.quantity,"pcs"]},le))}):v.jsx("div",{className:"text-sm text-red-500 italic mb-3",children:"No sizes added"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 border-t pt-2",children:[v.jsxs("div",{children:[v.jsx("span",{children:"Article Total: "}),v.jsxs("span",{className:"font-medium text-gray-900",children:[A.sizes.reduce((P,le)=>P+le.quantity,0)," pieces"]})]}),v.jsxs("div",{children:[v.jsx("span",{children:"Article Value: "}),v.jsxs("span",{className:"font-medium text-gray-900",children:["Rs. ",A.sizes.reduce((P,le)=>P+le.quantity*le.rate,0).toFixed(2)]})]})]})]},A.id))}),v.jsx("div",{className:"border-t pt-4 mt-4",children:v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg font-semibold",children:[v.jsxs("div",{className:"text-right",children:[v.jsx("span",{className:"text-gray-600",children:"Batch Total:"}),v.jsxs("span",{className:"text-gray-900 ml-2",children:[te()," pieces"]})]}),v.jsxs("div",{className:"text-left",children:[v.jsx("span",{className:"text-gray-600",children:"Batch Value:"}),v.jsxs("span",{className:"text-gray-900 ml-2",children:["Rs. ",ae().toFixed(2)]})]})]})})]})]})},Ve=()=>v.jsxs(Qn,{className:"p-6",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[v.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:v.jsx(gh,{className:"h-6 w-6 text-purple-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Step 3: Template Selection & Confirmation"}),v.jsx("p",{className:"text-sm text-gray-500",children:"Choose sewing template and finalize batch"})]})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsx("div",{children:v.jsx(tn,{label:"Bundle Number *",placeholder:"e.g., BND-001-2024",value:o.bundleNumber,onChange:L=>c(A=>({...A,bundleNumber:L.target.value})),error:h.bundleNumber})}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Assigned Templates Summary"}),v.jsx("div",{className:"space-y-2",children:o.articles.map(L=>{const A=p.find(P=>P.id===L.selectedTemplateId);return v.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:L.articleNumber}),v.jsx("p",{className:"text-sm text-gray-500",children:L.style})]}),v.jsxs("div",{className:"text-right text-sm",children:[v.jsx("p",{className:"font-medium text-gray-900",children:A?A.templateName:"No template selected"}),v.jsx("p",{className:"text-gray-500",children:A?`${A.operations.length} ops, ${A.totalSmv}min`:""})]})]},L.id)})})]}),v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[v.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Batch Cutting Summary"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[v.jsxs("div",{children:[v.jsx("h5",{className:"font-medium mb-2",children:"Batch Details"}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Bundle Number:"})," ",v.jsx("span",{className:"font-medium",children:o.bundleNumber||"Not set"})]}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Articles:"})," ",v.jsx("span",{className:"font-medium",children:o.articles.length})]}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Fabric Rolls:"})," ",v.jsx("span",{className:"font-medium",children:o.fabricRolls.length})]}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Total Layers:"})," ",v.jsx("span",{className:"font-medium",children:o.batchCuttingInfo.totalLayers})]})]}),v.jsxs("div",{children:[v.jsx("h5",{className:"font-medium mb-2",children:"Production Summary"}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Total Pieces:"})," ",v.jsx("span",{className:"font-medium",children:te()})]}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Total Value:"})," ",v.jsxs("span",{className:"font-medium",children:["Rs. ",ae().toFixed(2)]})]}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Templates:"})," ",v.jsxs("span",{className:"font-medium",children:[o.articles.length," different templates assigned"]})]}),v.jsxs("p",{children:[v.jsx("span",{className:"text-gray-600",children:"Layer Length:"})," ",v.jsxs("span",{className:"font-medium",children:[o.batchCuttingInfo.layerLength,"m"]})]})]})]}),v.jsxs("div",{className:"mt-4 pt-3 border-t",children:[v.jsx("h5",{className:"font-medium mb-2",children:"Articles in Batch"}),v.jsx("div",{className:"space-y-1",children:o.articles.map(L=>v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsxs("span",{children:[v.jsx("strong",{children:L.articleNumber})," (",L.style,")"]}),v.jsxs("span",{children:[L.sizes.reduce((A,P)=>A+P.quantity,0)," pieces"]})]},L.id))})]})]})]})]});return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map(L=>v.jsxs(wn.Fragment,{children:[v.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${L===i?"bg-blue-600 text-white":L<i?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:L<i?v.jsx(gh,{className:"h-5 w-5"}):v.jsx("span",{className:"font-semibold",children:L})}),L<3&&v.jsx("div",{className:`w-12 h-1 mx-2 ${L<i?"bg-green-500":"bg-gray-200"}`})]},L))}),i===1&&Te(),i===2&&we(),i===3&&Ve(),v.jsxs("div",{className:"flex items-center justify-between mt-8",children:[v.jsx("div",{children:i>1&&v.jsx(Xe,{variant:"outline",onClick:he,children:"Back"})}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(Xe,{variant:"outline",onClick:t,children:"Cancel"}),i<3?v.jsx(Xe,{onClick:H,children:"Next"}):v.jsx(Xe,{onClick:B,disabled:f,className:"bg-green-600 hover:bg-green-700",children:f?"Creating Batch...":"Complete Multi-Article WIP Entry"})]})]})]})},kD={apiKey:"AIzaSyB8Z4GdoLZsBW6bfmAh_BSTftpTRUXPZMw",authDomain:"erp-for-tsa.firebaseapp.com",databaseURL:"https://erp-for-tsa-default-rtdb.firebaseio.com",projectId:"erp-for-tsa",storageBucket:"erp-for-tsa.firebasestorage.app",messagingSenderId:"271232983905",appId:"1:271232983905:web:7d06c8f5ec269824759b20",measurementId:"G-6CYWPS4N0G"},ru=Tv(kD),oa=Nv(ru),ch=Cv(ru);ex(ru);Mx(ru);const en={OPERATORS:"operators",SUPERVISORS:"supervisors",MANAGEMENT:"management",BUNDLES:"bundles",WORK_ASSIGNMENTS:"workAssignments",WORK_ITEMS:"workItems",WORK_COMPLETIONS:"workCompletions",WIP_ENTRIES:"wipEntries",WIP_ROLLS:"wipRolls",ASSIGNMENT_HISTORY:"assignmentHistory",QUALITY_ISSUES:"qualityIssues",NOTIFICATIONS:"notifications",DAILY_REPORTS:"dailyReports",PRODUCTION_STATS:"productionStats",EFFICIENCY_LOGS:"efficiencyLogs",SIZE_CONFIGS:"sizeConfigs",MACHINE_CONFIGS:"machineConfigs",ARTICLE_TEMPLATES:"articleTemplates",DELETED_TEMPLATES:"deletedTemplates",SYSTEM_SETTINGS:"systemSettings",WAGE_RECORDS:"wageRecords",LINE_STATUS:"lineStatus",DAMAGE_REPORTS:"damage_reports",DAMAGE_NOTIFICATIONS:"damage_notifications",OPERATOR_WALLETS:"operatorWallets"};class kx{static async findUser(t){try{const i=await Bs(Yn(oa,en.OPERATORS,t));if(i.exists())return{success:!0,data:{id:i.id,...i.data()}};const s=await Bs(Yn(oa,en.SUPERVISORS,t));if(s.exists())return{success:!0,data:{id:s.id,...s.data()}};const o=await Bs(Yn(oa,en.MANAGEMENT,t));return o.exists()?{success:!0,data:{id:o.id,...o.data()}}:{success:!1,error:"User not found"}}catch(i){return console.error("Error finding user:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}static async getUserById(t,i){try{let s;switch(i){case"operator":s=en.OPERATORS;break;case"supervisor":s=en.SUPERVISORS;break;case"management":case"admin":s=en.MANAGEMENT;break;default:throw new Error("Invalid user role")}const o=await Bs(Yn(oa,s,t));return o.exists()?{success:!0,data:{id:o.id,...o.data()}}:{success:!1,error:"User not found"}}catch(s){return console.error("Error getting user by ID:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}static async login(t){try{const i=await this.findUser(t.username);if(!i.success||!i.data)return{success:!1,error:"Invalid username or password"};const s=i.data;if(!s.active)return{success:!1,error:"Account is deactivated. Please contact administrator."};const o=s.passwordHash,c=btoa(t.password);if(!o||o!==c)return{success:!1,error:"Invalid username or password"};const f=s.role==="operator"?en.OPERATORS:s.role==="supervisor"?en.SUPERVISORS:en.MANAGEMENT;return await hh(Yn(oa,f,s.id),{lastLogin:mh()}),{success:!0,data:{...s,lastLogin:new Date}}}catch(i){return console.error("Login error:",i),{success:!1,error:i instanceof Error?i.message:"Login failed"}}}static async logout(t){try{return ch.currentUser&&await DS(ch),console.log("User logged out successfully"),{success:!0}}catch(i){return console.error("Logout error:",i),{success:!1,error:i instanceof Error?i.message:"Logout failed"}}}static async updateUserProfile(t,i,s){try{const o=i==="operator"?en.OPERATORS:i==="supervisor"?en.SUPERVISORS:en.MANAGEMENT;return await hh(Yn(oa,o,t),{...s,updatedAt:mh()}),{success:!0}}catch(o){return console.error("Error updating user profile:",o),{success:!1,error:o instanceof Error?o.message:"Update failed"}}}static async changePassword(t,i,s,o){try{return console.log("Password change requested for user:",t),{success:!0}}catch(c){return console.error("Error changing password:",c),{success:!1,error:c instanceof Error?c.message:"Password change failed"}}}static hasPermission(t,i){return t?t.role==="admin"||t.permissions.includes("*")?!0:t.permissions.includes(i):!1}static async validateSession(t,i){try{return await this.getUserById(t,i)}catch(s){return console.error("Session validation error:",s),{success:!1,error:"Session validation failed"}}}static onAuthStateChanged(t){return MS(ch,t)}}const OM=Object.freeze(Object.defineProperty({__proto__:null,AuthService:kx},Symbol.toStringTag,{value:"Module"})),uh=j.lazy(()=>ve(()=>import("./OperatorDashboard.Cg8Vfvit.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(r=>({default:r.OperatorDashboard}))),dh=j.lazy(()=>ve(()=>import("./SupervisorDashboard.CYxmuq1y.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11])).then(r=>({default:r.SupervisorDashboard}))),ID=j.lazy(()=>ve(()=>import("./assignment-dashboard.vYtIvnyU.js"),__vite__mapDeps([13,1,2,9,10,14,15,16,17,18,19,20,21,22,23,11,4])).then(r=>({default:r.AssignmentDashboard}))),jD=j.lazy(()=>ve(()=>import("./bundle-lifecycle-manager.DLEi5-in.js"),__vite__mapDeps([24,1,2,25,26,27,28,29,11,10,30,31,4,32])).then(r=>({default:r.BundleLifecycleManager}))),LD=j.lazy(()=>ve(()=>import("./production-dashboard.D0DK3kEn.js"),__vite__mapDeps([33,1,2,26,32,10,34,11,4])).then(r=>({default:r.ProductionDashboard}))),UD=j.lazy(()=>ve(()=>import("./quality-management-dashboard.CzB2WT-B.js"),__vite__mapDeps([35,1,2,25,26,29,11,7,8,4,32,10,27,36,15])).then(r=>({default:r.QualityManagementDashboard}))),BD=j.lazy(()=>ve(()=>import("./earnings-dashboard.BSQ7D08E.js"),__vite__mapDeps([37,1,2,27,8,4,32,10,11,26,28,29,30,38,20,15])).then(r=>({default:r.EarningsDashboard}))),zD=j.lazy(()=>ve(()=>import("./operator-management-dashboard.CGwVMvdu.js"),__vite__mapDeps([39,1,2,9,10,14,5,4,19,15,22,23,40,17,41,20,42,43,11,18])).then(r=>({default:r.OperatorManagementDashboard}))),PD=j.lazy(()=>ve(()=>import("./self-assignment-interface.DkWT4zJn.js"),__vite__mapDeps([44,1,2,9,10,14,21,22,16,19,15,20,11,4])).then(r=>({default:r.SelfAssignmentInterface}))),qD=j.lazy(()=>ve(()=>import("./production-timer.BawAFDLo.js"),__vite__mapDeps([45,1,2,38,30,29,11,10,4])).then(r=>({default:r.ProductionTimer}))),HD=j.lazy(()=>ve(()=>import("./workflow-sequencer.Bxz9p7T5.js"),__vite__mapDeps([46,1,2,15,47,48,10,11,4])).then(r=>({default:r.WorkflowSequencer}))),GD=j.lazy(()=>ve(()=>import("./mobile-friendly-layout.B48WWk3G.js"),__vite__mapDeps([49,1,2,29,11,50,51,52,53,54,16,55,18,47,10,4])).then(r=>({default:r.MobileFriendlyLayout}))),VD=j.lazy(()=>ve(()=>import("./mobile-test.CNs3Mmo2.js"),__vite__mapDeps([56,1,2])).then(r=>({default:r.MobileTest}))),ov=j.lazy(()=>ve(()=>import("./live-production-dashboard.D47sVL8p.js"),__vite__mapDeps([57,1,2,54,16,58,20,10,11,4])).then(r=>({default:r.LiveProductionDashboard}))),FD=j.lazy(()=>ve(()=>import("./CuttingDropletManager.DcREifjs.js"),__vite__mapDeps([59,1,2,25,26,4,32,10,11]))),YD=j.lazy(()=>ve(()=>import("./ProductionLotManager.DwmhSNXB.js"),__vite__mapDeps([60,1,2,25,26,27,61,4,32,10,11]))),QD=j.lazy(()=>ve(()=>import("./ProcessPricingManager.BNwM040y.js"),__vite__mapDeps([62,1,2,25,26,63,29,11,32,10,4]))),XD=j.lazy(()=>ve(()=>import("./EnhancedOperatorDashboard.CRgf3Sq7.js"),__vite__mapDeps([64,1,2,25,65,4,32,10,11]))),$D=j.lazy(()=>ve(()=>import("./OperatorPieceTracker.BYO0MSv1.js"),__vite__mapDeps([66,1,2,25,26,61,4,32,10,11]))),KD=j.lazy(()=>ve(()=>import("./BundleAssignmentManager.D1MngPiV.js"),__vite__mapDeps([67,1,2,25,26,63,29,11,65,4,32,10]))),ZD=j.lazy(()=>ve(()=>import("./sewing-template-manager.9SDFBS4y.js"),__vite__mapDeps([68,1,2,40,19,15,20,41,11,10,4])).then(r=>({default:r.SewingTemplateManager}))),WD=j.lazy(()=>ve(()=>import("./bundle-assignment-dashboard.vKQFdexs.js"),__vite__mapDeps([69,1,2,9,10,15,70,22,11,4])).then(r=>({default:r.BundleAssignmentDashboard}))),cv=j.lazy(()=>ve(()=>import("./operator-work-dashboard.4IlNhYv2.js"),__vite__mapDeps([71,1,2,9,10,47,70,72,16,73,52,15,11,4])).then(r=>({default:r.OperatorWorkDashboard}))),JD=j.lazy(()=>ve(()=>import("./operator-self-assignment.BnksYfd8.js"),__vite__mapDeps([74,1,2,9,10,18,15,41,48,11,4])).then(r=>({default:r.OperatorSelfAssignment}))),eM=j.lazy(()=>ve(()=>import("./supervisor-parts-dashboard.B-DV87e0.js"),__vite__mapDeps([75,1,2,9,10,52,50,15,11,4])).then(r=>({default:r.SupervisorPartsDashboard}))),tM=j.lazy(()=>ve(()=>import("./multi-strategy-assignment-dashboard.prfmduKP.js"),__vite__mapDeps([76,1,2,9,10,18,77,51,15,23,22,11,4])).then(r=>({default:r.MultiStrategyAssignmentDashboard}))),nM=j.lazy(()=>ve(()=>import("./bundle-batch-tracking-dashboard.PsLGMLTO.js"),__vite__mapDeps([78,1,2,9,10,53,16,77,58,79,15,70,36,11,4])).then(r=>({default:r.BundleBatchTrackingDashboard}))),uv=j.lazy(()=>ve(()=>import("./drag-drop-assignment-dashboard.B1mTxQf0.js"),__vite__mapDeps([80,1,2,9,10,15,55,70,18,48,11,4])).then(r=>({default:r.DragDropAssignmentDashboard}))),rM=j.lazy(()=>ve(()=>import("./supervisor-operator-buckets.CW3BTjw-.js"),__vite__mapDeps([81,1,2,9,10,18,47,15,70,73,48,11,4])).then(r=>({default:r.SupervisorOperatorBuckets}))),iM=j.lazy(()=>ve(()=>import("./smart-work-assignment-dashboard.D6F-lN6C.js"),__vite__mapDeps([82,1,2,9,10,22,79,83,70,15,18,11,4])).then(r=>({default:r.SmartWorkAssignmentDashboard}))),aM=j.lazy(()=>ve(()=>import("./operator-profile-assignment.CEOOCHCu.js"),__vite__mapDeps([84,1,2,9,10,16,15,72,18,17,41,83,55,11,4])).then(r=>({default:r.OperatorProfileAssignment}))),sM=j.lazy(()=>ve(()=>import("./sequential-workflow-assignment.BtYp6GOj.js"),__vite__mapDeps([85,1,2,9,10,18,47,83,11,4])).then(r=>({default:r.SequentialWorkflowAssignment}))),lM=j.lazy(()=>ve(()=>import("./LoginAnalyticsDashboard.BebPHl6l.js"),__vite__mapDeps([86,1,2,10,11,4]))),oM=j.lazy(()=>ve(()=>import("./TrustedDeviceManager.B62mF4rI.js"),__vite__mapDeps([87,1,2,32,10,11,4]))),cM=j.lazy(()=>ve(()=>import("./WorkflowNotificationDemo.DJVMu_Jp.js"),__vite__mapDeps([88,1,2,6,4,32,10,11]))),uM=({text:r="Loading..."})=>v.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200"}),v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent absolute top-0 left-0"})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-lg text-gray-700 animate-pulse",children:r}),v.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Please wait..."})]})]}),dM=new nS({defaultOptions:{queries:{retry:3,staleTime:300*1e3,refetchOnWindowFocus:!1}}}),fM=({onLogin:r})=>{const[t,i]=j.useState({username:"",password:""}),[s,o]=j.useState(!1),c=async f=>{f.preventDefault(),o(!0);try{const g=await kx.login({username:t.username,password:t.password});g.success&&g.data?r(g.data.username,g.data.role):alert(g.error||"Login failed")}catch(g){console.error("Login error:",g),alert("Login failed. Please try again.")}finally{o(!1)}};return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("div",{className:"flex justify-center",children:v.jsx("img",{src:"/logo.png",alt:"TSA",className:"h-16 w-auto"})}),v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"TSA Production ERP"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Advanced Manufacturing Management System"}),v.jsx("p",{className:"text-center text-xs text-gray-500",children:"Real-time Operations • AI-Powered Analytics • Smart Workflows"})]}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[v.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),v.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-brand-500 focus:border-brand-500 focus:z-10 sm:text-sm",placeholder:"Username",value:t.username,onChange:f=>i({...t,username:f.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),v.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-brand-500 focus:border-brand-500 focus:z-10 sm:text-sm",placeholder:"Password",value:t.password,onChange:f=>i({...t,password:f.target.value})})]})]}),v.jsx("div",{children:v.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50",children:s?v.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign In"})}),v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[v.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Login Credentials:"}),v.jsxs("div",{className:"space-y-1 text-left",children:[v.jsxs("p",{children:[v.jsx("span",{className:"font-medium",children:"Supervisor:"})," sup / sup"]}),v.jsxs("p",{children:[v.jsx("span",{className:"font-medium",children:"Admin:"})," admin / admin"]})]})]})})]})]})})},hM=({userRole:r="operator",onLogout:t})=>{const[i,s]=j.useState("dashboard"),o=f=>{switch(f){case"operator":return"op-maya-001";case"supervisor":return"sup-john-001";case"manager":return"mgr-admin-001";default:return"op-maya-001"}},c=()=>{const f=o(r);switch(i){case"dashboard":switch(r){case"operator":return v.jsx(uh,{operatorId:f});case"supervisor":return v.jsx(dh,{supervisorId:f});case"management":return v.jsx(dh,{supervisorId:f});case"admin":return v.jsx(dh,{supervisorId:f});default:return v.jsx(uh,{operatorId:f})}case"work-assignment":return r==="operator"?v.jsx(cv,{operatorId:f,operatorName:"Current Operator"}):v.jsx(ID,{});case"bundles":return v.jsx(jD,{mode:"view"});case"analytics":return v.jsx(LD,{});case"quality":return v.jsx(UD,{userRole:r});case"earnings":return v.jsx(BD,{userRole:r,operatorId:r==="operator"?f:void 0});case"operators":return v.jsx(zD,{userRole:r});case"self-assignment":return v.jsx(PD,{operatorId:f,operatorName:r==="operator"?"Maya Patel":"Current User",operatorSkills:{skillLevel:"intermediate",machineTypes:["sewing","overlock","cutting"],primaryMachine:"sewing",specializations:["precision-work","quality-control"]},maxConcurrentWork:3});case"timer":return v.jsxs("div",{className:"p-8",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Production Timer"}),v.jsx(qD,{workItemId:"sample-work-item-001",operatorId:f,workItem:{id:"sample-work-item-001",bundleId:"bundle-001",workItemNumber:"WI-001",machineType:"sewing",operation:"Sample Production Task",operationCode:"OP-001",skillLevelRequired:"intermediate",targetPieces:50,completedPieces:0,rejectedPieces:0,reworkPieces:0,assignedOperatorId:f,assignmentMethod:"supervisor_assigned",estimatedDuration:120,status:"assigned"}})]});case"complete-wip-entry":return v.jsx(MD,{onComplete:async g=>{console.log("WIP Entry completed:",g);try{const{bundleService:p}=await ve(async()=>{const{bundleService:_}=await import("./bundle-service.DSxx9GIb.js");return{bundleService:_}},__vite__mapDeps([31,4,1,2,10,11])),d={wipEntryId:`wip_${Date.now()}`,batchNumber:g.bundleNumber,articles:g.articles.map(_=>({articleId:_.id,articleNumber:_.articleNumber,articleStyle:_.style,templateId:_.selectedTemplateId,sizes:_.sizes.map(y=>({size:y.size,quantity:y.quantity}))})),fabricRolls:g.fabricRolls.map(_=>({rollId:_.id,rollNumber:_.rollNumber,color:_.color,weight:_.weight,layerCount:_.layerCount})),bundlePrefix:"BND",createdBy:r==="operator"?"Maya Patel":r==="supervisor"?"John Smith":"Admin User"},h=await p.generateBundles(d);if(h.success&&h.data){const _=h.data,y=g.articles.reduce((S,C)=>S+(C.sizes?.reduce((M,U)=>M+U.quantity,0)||0),0),b=_.reduce((S,C)=>S+C.totalValue,0),E=_.reduce((S,C)=>S+C.operations.length,0);alert(`✅ Production Bundles Created Successfully!
                  
🎯 Batch: ${g.bundleNumber}
📦 Bundles Generated: ${_.length}
📋 Articles: ${g.articles.length} 
🧵 Total Pieces: ${y}
⚡ Total Operations: ${E}
💰 Total Value: Rs. ${b.toFixed(2)}

Ready for supervisor assignment!`)}else alert(`❌ Failed to generate bundles: ${h.error}`)}catch(p){console.error("Bundle generation error:",p),alert("❌ Failed to generate production bundles. Please try again.")}s("dashboard")},onCancel:()=>s("dashboard")});case"live-dashboard":return v.jsx(ov,{displayMode:"desktop",autoRefresh:!0,refreshInterval:5e3,showAlerts:!0});case"tv-dashboard":return v.jsx(ov,{displayMode:"tv",autoRefresh:!0,refreshInterval:3e3,showAlerts:!0});case"barcode-scanner":return v.jsx(SN,{onScanSuccess:g=>{console.log("📱 Barcode scan result:",g),g.success&&g.data?alert(`Bundle Scanned!
Bundle: ${g.data.bundleNumber}
Lot: ${g.data.lotNumber}`):alert("Scan failed. Please try again.")},onClose:()=>s("dashboard"),allowManualEntry:!0,scanMode:"both",title:"Scan Bundle"});case"label-generator":return v.jsx(TN,{onLabelGenerated:g=>{console.log("🏷️ Label generated:",g)}});case"sewing-templates":return v.jsx(ZD,{});case"workflow":return v.jsx(HD,{operations:[],onExecutePlan:g=>console.log("Executing plan:",g),onUpdateOperationStatus:(g,p)=>console.log("Operation status updated:",g,p)});case"cutting-droplet":return v.jsx(FD,{});case"production-lots":return v.jsx(YD,{mode:"create"});case"pricing-manager":return v.jsx(QD,{});case"enhanced-operator":return v.jsx(XD,{operatorId:f,operatorName:r==="operator"?"Maya Patel":"Current Operator",machineTypes:["overlock","single_needle","flatlock"]});case"piece-tracker":return v.jsx($D,{operatorId:f,operatorName:r==="operator"?"Maya Patel":"Current Operator"});case"bundle-assignment":return v.jsx(KD,{});case"bundle-assignments":return v.jsx(WD,{userRole:r});case"my-work":return v.jsx(cv,{operatorId:f,operatorName:r==="operator"?"Maya Patel":"Current Operator"});case"self-assign":return v.jsx(JD,{operatorId:f,operatorName:r==="operator"?"Maya Patel":"Current Operator",operatorMachineType:"overlock"});case"parts-issues":return v.jsx(eM,{userRole:r});case"multi-assignment":return v.jsx(tM,{userRole:r});case"bundle-analytics":return v.jsx(nM,{userRole:r});case"drag-drop-assignment":return v.jsx(uv,{userRole:r});case"kanban-assignment":return v.jsx(uv,{userRole:r});case"operator-buckets":return v.jsx(rM,{userRole:r});case"smart-assignment":return v.jsx(iM,{userRole:r});case"operator-profile":return v.jsx(aM,{userRole:r});case"sequential-workflow":return v.jsx(sM,{userRole:r});case"mobile-test":return v.jsx(VD,{});case"login-analytics":return v.jsx(lM,{});case"trusted-devices":return v.jsx(oM,{});case"workflow-notifications":return v.jsx(cM,{});default:return v.jsx(uh,{operatorId:f})}};return v.jsx(A1,{onError:f=>{console.error("Error in MobileFriendlyLayout:",f)},children:v.jsx(GD,{currentUser:{name:r==="operator"?"Maya Patel":r==="supervisor"?"John Smith":"Admin User",role:r},currentView:i,onViewChange:s,onLogout:t,children:v.jsx(A1,{children:c()})})})};function mM(){const[r,t]=j.useState(()=>localStorage.getItem("tsa_auth_token")==="authenticated"),[i,s]=j.useState(()=>localStorage.getItem("tsa_user_role")||"");j.useEffect(()=>{r&&i&&(async()=>{const g=localStorage.getItem("tsa_auth_token"),p=localStorage.getItem("tsa_user_role"),d=localStorage.getItem("tsa_username");if(g==="authenticated"&&p&&d)try{console.log("Session validation temporarily disabled - using localStorage only")}catch(h){console.error("Session validation error:",h)}})()},[r,i]),j.useEffect(()=>{const f=async g=>{if((g.ctrlKey||g.metaKey)&&g.shiftKey&&g.key==="R"){g.preventDefault();try{const{CacheManager:p}=await ve(async()=>{const{CacheManager:d}=await import("./cache-manager.CUz8vIoj.js");return{CacheManager:d}},[]);p.forceReload()}catch(p){console.error("Failed to load cache manager:",p),window.location.reload()}}};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[]);const o=(f,g)=>{s(g),t(!0),localStorage.setItem("tsa_auth_token","authenticated"),localStorage.setItem("tsa_user_role",g),localStorage.setItem("tsa_username",f)},c=()=>{t(!1),s(""),localStorage.removeItem("tsa_auth_token"),localStorage.removeItem("tsa_user_role"),localStorage.removeItem("tsa_username")};return v.jsx(rS,{client:dM,children:v.jsx(sS,{children:r?v.jsx(j.Suspense,{fallback:v.jsx(uM,{text:"Loading dashboard..."}),children:v.jsx(hM,{userRole:i,onLogout:c})}):v.jsx(fM,{onLogin:o})})})}US.createRoot(document.getElementById("root")).render(v.jsx(j.StrictMode,{children:v.jsx(mM,{})}));export{wM as A,Xe as B,AM as C,pt as D,wr as E,O1 as F,eT as G,iT as H,tn as I,nT as J,Dv as K,DD as L,OM as M,pc as R,ve as _,Us as a,xn as b,Qn as c,gc as d,ti as e,RM as f,EM as g,CM as h,TM as i,SM as j,la as k,NM as l,mT as m,gh as n,zs as o,ph as p,cT as q,Ls as r,ei as s,Rv as t,xM as u,Av as v,Ov as w,bM as x,lT as y,KS as z};
