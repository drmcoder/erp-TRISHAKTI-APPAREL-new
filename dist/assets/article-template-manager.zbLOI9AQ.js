import{j as e}from"./query-vendor.BbCCZTU0.js";import{r as n}from"./react-vendor.BcnQP8kQ.js";import{C as y,a as A,B as d,k as T}from"./index.BnZjV7b3.js";import{I as h}from"./Input.D8gd7mOf.js";import{F as R}from"./ClockIcon.DbOxfhcH.js";import{F as M}from"./CurrencyRupeeIcon.CCku5vMm.js";import{F as q}from"./PlusIcon.C8HC3Ss7.js";import{F}from"./TrashIcon.DGI7XY7r.js";import"./ui-vendor.B7YYMSVe.js";import"./utils-vendor.B0NEtgzl.js";function E({title:o,titleId:m,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":m},r),o?n.createElement("title",{id:m},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const O=n.forwardRef(E);function I({title:o,titleId:m,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":m},r),o?n.createElement("title",{id:m},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const P=n.forwardRef(I),N={cutting:[{code:"CUT001",name:"Main Body Cutting",SAM:15,rate:.75,machineType:"Cutting Table",skillRequired:"intermediate"},{code:"CUT002",name:"Sleeve Cutting",SAM:10,rate:.5,machineType:"Cutting Table",skillRequired:"beginner"},{code:"CUT003",name:"Collar Cutting",SAM:12,rate:.6,machineType:"Cutting Table",skillRequired:"advanced"},{code:"CUT004",name:"Pocket Cutting",SAM:8,rate:.4,machineType:"Cutting Table",skillRequired:"beginner"}],sewing:[{code:"SEW001",name:"Side Seam",SAM:25,rate:1.25,machineType:"Overlock",skillRequired:"intermediate"},{code:"SEW002",name:"Shoulder Seam",SAM:20,rate:1,machineType:"Overlock",skillRequired:"intermediate"},{code:"SEW003",name:"Collar Attachment",SAM:30,rate:1.5,machineType:"Single Needle",skillRequired:"advanced"},{code:"SEW004",name:"Button Hole Making",SAM:15,rate:.8,machineType:"Button Hole",skillRequired:"expert"},{code:"SEW005",name:"Sleeve Attachment",SAM:18,rate:.95,machineType:"Overlock",skillRequired:"intermediate"},{code:"SEW006",name:"Hem Stitching",SAM:12,rate:.65,machineType:"Single Needle",skillRequired:"beginner"}],finishing:[{code:"FIN001",name:"Button Attachment",SAM:10,rate:.6,machineType:"Manual",skillRequired:"beginner"},{code:"FIN002",name:"Final Pressing",SAM:8,rate:.45,machineType:"Press Machine",skillRequired:"intermediate"},{code:"FIN003",name:"Final Quality Check",SAM:12,rate:.7,machineType:"Inspection Table",skillRequired:"advanced"},{code:"FIN004",name:"Packaging",SAM:5,rate:.3,machineType:"Manual",skillRequired:"beginner"}]},Q=({onSave:o,onCancel:m,initialData:r})=>{const[a,x]=n.useState({articleNumber:r?.articleNumber||"",articleName:r?.articleName||"",style:r?.style||"",category:r?.category||"shirt",operations:r?.operations||[],totalSAM:r?.totalSAM||0,totalRate:r?.totalRate||0,complexity:r?.complexity||"simple",estimatedPieces:r?.estimatedPieces||12,isActive:r?.isActive??!0,createdAt:r?.createdAt||new Date}),[b,p]=n.useState(!1),[j,k]=n.useState("cutting"),g=t=>{const s=t.reduce((c,u)=>c+u.SAM,0),i=t.reduce((c,u)=>c+u.rate,0);let l="simple";s>100||t.some(c=>c.skillRequired==="expert")?l="expert":s>60||t.some(c=>c.skillRequired==="advanced")?l="complex":s>30&&(l="medium"),x(c=>({...c,operations:t,totalSAM:s,totalRate:i,complexity:l}))},S=t=>{const s={sequence:a.operations.length+1,operationCode:t.code,operationName:t.name,description:`${t.name} operation`,SAM:t.SAM,rate:t.rate,machineType:t.machineType,skillRequired:t.skillRequired,dependencies:[],canRunParallel:[],qualityChecks:["visual_inspection"]},i=[...a.operations,s];g(i),p(!1)},C=t=>{const s=a.operations.filter((i,l)=>l!==t);s.forEach((i,l)=>i.sequence=l+1),g(s)},v=(t,s)=>{const i=s==="up"?t-1:t+1;if(i<0||i>=a.operations.length)return;const l=[...a.operations];[l[t],l[i]]=[l[i],l[t]],l.forEach((c,u)=>c.sequence=u+1),g(l)},w=t=>{if(t.preventDefault(),!a.articleNumber||!a.articleName||a.operations.length===0){alert("Please fill in all required fields and add at least one operation");return}o({...a,id:r?.id||`TPL-${Date.now()}`})},f=t=>{switch(t){case"simple":return"text-green-600";case"medium":return"text-yellow-600";case"complex":return"text-orange-600";case"expert":return"text-red-600";default:return"text-gray-600"}};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Article Template":"Create Article Template"}),e.jsx("p",{className:"text-gray-600",children:"Define operations sequence and pricing for garment production"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(A,{variant:"outline",className:f(a.complexity),children:a.complexity.toUpperCase()})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Article Number *"}),e.jsx(h,{value:a.articleNumber,onChange:t=>x(s=>({...s,articleNumber:t.target.value})),placeholder:"e.g., TSA-SHIRT-001",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Article Name *"}),e.jsx(h,{value:a.articleName,onChange:t=>x(s=>({...s,articleName:t.target.value})),placeholder:"e.g., Basic Cotton Shirt",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Style"}),e.jsx(h,{value:a.style,onChange:t=>x(s=>({...s,style:t.target.value})),placeholder:"e.g., Casual, Formal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:a.category,onChange:t=>x(s=>({...s,category:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"shirt",children:"Shirt"}),e.jsx("option",{value:"trouser",children:"Trouser"}),e.jsx("option",{value:"jacket",children:"Jacket"}),e.jsx("option",{value:"dress",children:"Dress"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Pieces per Bundle"}),e.jsx(h,{type:"number",value:a.estimatedPieces,onChange:t=>x(s=>({...s,estimatedPieces:parseInt(t.target.value)||12})),min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:t=>x(s=>({...s,isActive:t.target.checked})),className:"rounded"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Active Template"})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.operations.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Operations"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 flex items-center justify-center",children:[e.jsx(R,{className:"h-5 w-5 mr-1"}),a.totalSAM]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total SAM"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 flex items-center justify-center",children:[e.jsx(M,{className:"h-5 w-5 mr-1"}),a.totalRate.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Rate"})]}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${f(a.complexity)}`,children:a.complexity.toUpperCase()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Complexity"})]})]})}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Operations Sequence"}),e.jsxs(d,{type:"button",onClick:()=>p(!0),className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Operation"})]})]}),a.operations.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(T,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No operations added yet"}),e.jsx("p",{className:"text-sm",children:'Click "Add Operation" to get started'})]}):e.jsx("div",{className:"space-y-2",children:a.operations.map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 border rounded-lg bg-white",children:[e.jsx("div",{className:"text-sm font-medium w-8",children:t.sequence}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.operationName}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.operationCode," • ",t.machineType," • ",t.skillRequired]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[t.SAM," min"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["₹",t.rate]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(s,"up"),disabled:s===0,children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(s,"down"),disabled:s===a.operations.length-1,children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(s),className:"text-red-600 hover:bg-red-50",children:e.jsx(F,{className:"h-4 w-4"})})]})]},s))})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[e.jsx(d,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),e.jsx(d,{type:"submit",className:"flex items-center space-x-2",children:e.jsx("span",{children:r?"Update Template":"Create Template"})})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(y,{className:"w-full max-w-4xl m-4 max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add Operation from Library"}),e.jsx(d,{variant:"ghost",onClick:()=>p(!1),children:"×"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex space-x-2",children:Object.keys(N).map(t=>e.jsx(d,{type:"button",variant:j===t?"default":"outline",size:"sm",onClick:()=>k(t),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})}),e.jsx("div",{className:"grid gap-2",children:N[j].map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>S(t),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.code," • ",t.machineType," • ",t.skillRequired]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[t.SAM," min"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["₹",t.rate]})]})]},s))})]})})})]})};export{Q as ArticleTemplateManager,N as SEWING_OPERATIONS_LIBRARY};
