import{u as a,a as l,b as m}from"./query-vendor.DpsghfSz.js";import{workAssignmentService as n}from"./index.DNGanYzG.js";const s={all:["work-assignments"],bundles:()=>[...s.all,"bundles"],bundlesList:e=>[...s.bundles(),"list",{filters:e}],bundleDetail:e=>[...s.bundles(),"detail",e],workItems:()=>[...s.all,"work-items"],workItemsByBundle:e=>[...s.workItems(),"bundle",e],workItemDetail:e=>[...s.workItems(),"detail",e],assignments:()=>[...s.all,"assignments"],assignmentsList:e=>[...s.assignments(),"list",{filters:e}],assignmentDetail:e=>[...s.assignments(),"detail",e],operatorAssignments:e=>[...s.assignments(),"operator",e],statistics:()=>[...s.all,"statistics"],assignmentStats:e=>[...s.statistics(),"assignments",{filters:e}],requests:()=>[...s.all,"requests"],pendingRequests:()=>[...s.requests(),"pending"],operatorRequests:e=>[...s.requests(),"operator",e]};function y(e,t){return a({queryKey:s.bundlesList(e),queryFn:()=>n.getWorkBundles(e),staleTime:300*1e3,gcTime:600*1e3,...t})}function q(e,t){return a({queryKey:s.assignmentsList(e),queryFn:()=>n.getAssignments(e),staleTime:30*1e3,refetchInterval:60*1e3,...t})}function d(e,t){return a({queryKey:s.operatorAssignments(e),queryFn:()=>n.getAssignments({operatorId:e}),enabled:!!e,staleTime:30*1e3,refetchInterval:60*1e3,...t})}function k(){const e=l();return m({mutationFn:async t=>{const i=await Promise.allSettled(t.map(r=>n.assignWork(r))),u=i.filter(r=>r.status==="fulfilled"&&r.value.success).length,o=i.length-u;return{success:u>0,data:{successful:u,failed:o,total:i.length},results:i}},onSuccess:()=>{e.invalidateQueries({queryKey:s.assignments()}),e.invalidateQueries({queryKey:s.workItems()}),e.invalidateQueries({queryKey:s.statistics()})}})}function f(){const e=l();return m({mutationFn:({workItemId:t,operatorId:i,reason:u})=>n.createAssignmentRequest(t,i,u),onSuccess:(t,i)=>{t.success&&(e.invalidateQueries({queryKey:s.requests()}),e.invalidateQueries({queryKey:s.operatorRequests(i.operatorId)}))}})}function A(e,t){return a({queryKey:s.assignmentStats(e),queryFn:()=>n.getAssignmentStatistics(e),staleTime:120*1e3,refetchInterval:300*1e3,...t})}function b(e,t){return a({queryKey:["available-work-items",e],queryFn:()=>n.getAvailableWorkItems(e),enabled:!!e,staleTime:60*1e3,...t})}function v(e,t){return a({queryKey:["assignment-recommendations",e],queryFn:()=>n.getAssignmentRecommendations(e),enabled:!!e,staleTime:300*1e3,...t})}function K(){return a({queryKey:["operators"],queryFn:()=>n.getAllOperators()})}export{v as a,d as b,f as c,y as d,K as e,k as f,q as g,A as h,b as u};
