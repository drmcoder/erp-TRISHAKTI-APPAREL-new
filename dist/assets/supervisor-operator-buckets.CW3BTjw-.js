import{j as e}from"./query-vendor.NFs8Lf8Y.js";import{r}from"./react-vendor.BcnQP8kQ.js";import{B as n,c as i,b as c,n as v,y as w}from"./index.B__xpDQO.js";import{L as b}from"./LoadingSpinner.BqqE1w83.js";import{F as T}from"./UserIcon.x-aGQUUd.js";import{F as P}from"./PlayIcon.qCwfGLYk.js";import{F as C}from"./ClockIcon.DbOxfhcH.js";import{F as D}from"./CurrencyDollarIcon.CyMFdc0e.js";import{F as S}from"./PauseIcon.DYeQ1VMN.js";import{F as A}from"./ArrowRightIcon.xKte5yv4.js";import"./ui-vendor.BnTQXQPs.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.m6WcKfT_.js";const J=({userRole:F})=>{const[a,g]=r.useState([]),[N,d]=r.useState(!0),[o,f]=r.useState(null),[m,x]=r.useState("overview");r.useEffect(()=>{p()},[]);const p=async()=>{d(!0),await new Promise(l=>setTimeout(l,1e3));const s=new Date,t=[{operatorId:"op_maya",operatorName:"Maya Patel",machineType:"overlock",status:"active",shift:"morning",currentActivity:{id:"act_1",operatorId:"op_maya",operatorName:"Maya Patel",bundleNumber:"BND-3233-M-001",operationName:"Shoulder Join",operationNameNepali:"काँध जोड्ने",status:"in_progress",startTime:new Date(s.getTime()-45*6e4),piecesCompleted:18,targetPieces:25,pricePerPiece:2.5,earnings:45,machineType:"overlock",efficiency:94.5,defects:0},todayCompleted:[{id:"act_2",operatorId:"op_maya",operatorName:"Maya Patel",bundleNumber:"BND-3265-L-001",operationName:"Side Seam",operationNameNepali:"छेउ सिलाई",status:"completed",startTime:new Date(s.getTime()-240*6e4),endTime:new Date(s.getTime()-180*6e4),duration:60,piecesCompleted:30,targetPieces:30,pricePerPiece:3,earnings:90,qualityScore:9.8,machineType:"overlock",efficiency:96.2,defects:0},{id:"act_3",operatorId:"op_maya",operatorName:"Maya Patel",bundleNumber:"BND-3401-S-001",operationName:"Neck Binding",operationNameNepali:"घाँटी बाँध्ने",status:"completed",startTime:new Date(s.getTime()-360*6e4),endTime:new Date(s.getTime()-4.5*60*6e4),duration:90,piecesCompleted:40,targetPieces:40,pricePerPiece:1.8,earnings:72,qualityScore:9.5,machineType:"overlock",efficiency:92.8,defects:1}],recentCompleted:[],totalEarningsToday:207,totalPiecesToday:88,averageEfficiency:94.5},{operatorId:"op_rajesh",operatorName:"Rajesh Kumar",machineType:"singleNeedle",status:"active",shift:"morning",currentActivity:{id:"act_4",operatorId:"op_rajesh",operatorName:"Rajesh Kumar",bundleNumber:"BND-3265-M-002",operationName:"Sleeve Attach",operationNameNepali:"आस्तीन लगाउने",status:"in_progress",startTime:new Date(s.getTime()-30*6e4),piecesCompleted:12,targetPieces:20,pricePerPiece:4,earnings:48,machineType:"singleNeedle",efficiency:89.3,defects:0},todayCompleted:[{id:"act_5",operatorId:"op_rajesh",operatorName:"Rajesh Kumar",bundleNumber:"BND-3233-L-003",operationName:"Hem Finish",operationNameNepali:"कुना सिलाई",status:"completed",startTime:new Date(s.getTime()-180*6e4),endTime:new Date(s.getTime()-1.5*60*6e4),duration:90,piecesCompleted:25,targetPieces:25,pricePerPiece:2.8,earnings:70,qualityScore:9.2,machineType:"singleNeedle",efficiency:91.2,defects:1}],recentCompleted:[],totalEarningsToday:118,totalPiecesToday:37,averageEfficiency:90.25},{operatorId:"op_sita",operatorName:"Sita Sharma",machineType:"overlock",status:"break",shift:"morning",todayCompleted:[{id:"act_6",operatorId:"op_sita",operatorName:"Sita Sharma",bundleNumber:"BND-3401-M-001",operationName:"Shoulder Join",operationNameNepali:"काँध जोड्ने",status:"completed",startTime:new Date(s.getTime()-120*6e4),endTime:new Date(s.getTime()-30*6e4),duration:90,piecesCompleted:22,targetPieces:25,pricePerPiece:2.5,earnings:55,qualityScore:8.8,machineType:"overlock",efficiency:87.8,defects:2}],recentCompleted:[],totalEarningsToday:55,totalPiecesToday:22,averageEfficiency:87.8}];g(t),d(!1)},j=s=>{switch(s){case"active":return"text-green-600 bg-green-100";case"break":return"text-yellow-600 bg-yellow-100";case"offline":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},h=s=>{switch(s){case"in_progress":return"info";case"completed":return"success";case"paused":return"warning";case"quality_check":return"info";case"rework":return"danger";default:return"secondary"}},u=s=>{if(!s)return"N/A";const t=Math.floor(s/60),l=s%60;return t>0?`${t}h ${l}m`:`${l}m`},y=(s,t)=>Math.min(100,Math.round(s/t*100));return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(b,{text:"Loading operator buckets..."})}):e.jsxs("div",{className:"p-4 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:"👥 Operator Buckets Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time view of what operators are doing, have done, and finished recently"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{variant:m==="overview"?"primary":"outline",size:"sm",onClick:()=>x("overview"),children:"📋 Overview"}),e.jsx(n,{variant:m==="detailed"?"primary":"outline",size:"sm",onClick:()=>x("detailed"),children:"🔍 Detailed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(s=>s.status==="active").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Now"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.reduce((s,t)=>s+t.totalPiecesToday,0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pieces Today"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",a.reduce((s,t)=>s+t.totalEarningsToday,0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[a.length>0?(a.reduce((s,t)=>s+t.averageEfficiency,0)/a.length).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Efficiency"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(s=>e.jsxs(i,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(T,{className:"h-6 w-6 text-blue-600"})}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${s.status==="active"?"bg-green-500":s.status==="break"?"bg-yellow-500":"bg-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.operatorName}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",children:s.machineType}),e.jsx(c,{variant:"secondary",size:"sm",children:s.shift})]})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-lg text-xs font-medium ${j(s.status)}`,children:s.status.toUpperCase()})]}),s.currentActivity?e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Currently Working"})]}),e.jsx(c,{variant:h(s.currentActivity.status),size:"sm",children:s.currentActivity.status.replace("_"," ")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.currentActivity.operationName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.currentActivity.operationNameNepali}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:s.currentActivity.bundleNumber})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.currentActivity.piecesCompleted,"/",s.currentActivity.targetPieces]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${y(s.currentActivity.piecesCompleted,s.currentActivity.targetPieces)}%`}})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),u(Math.floor((new Date().getTime()-s.currentActivity.startTime.getTime())/6e4))]}),e.jsxs("span",{className:"flex items-center font-semibold text-green-600",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"$",s.currentActivity.earnings.toFixed(2)]})]})]})]}):e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200 text-center",children:[e.jsx(S,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No active work"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[e.jsxs("div",{className:"p-2 bg-green-50 rounded",children:[e.jsx("div",{className:"font-bold text-green-600",children:s.todayCompleted.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),e.jsxs("div",{className:"p-2 bg-blue-50 rounded",children:[e.jsx("div",{className:"font-bold text-blue-600",children:s.totalPiecesToday}),e.jsx("div",{className:"text-xs text-gray-600",children:"Pieces"})]}),e.jsxs("div",{className:"p-2 bg-purple-50 rounded",children:[e.jsxs("div",{className:"font-bold text-purple-600",children:["$",s.totalEarningsToday.toFixed(0)]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Earned"})]})]}),s.todayCompleted.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recently Completed:"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.todayCompleted.slice(-3).reverse().map(t=>e.jsx("div",{className:"p-2 bg-green-50 rounded border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.operationName}),e.jsx("p",{className:"text-xs text-gray-600",children:t.bundleNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),t.piecesCompleted,"pc"]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.qualityScore?`Q: ${t.qualityScore}/10`:""})]})]})},t.id))})]}),e.jsxs(n,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>f(o===s.operatorId?null:s.operatorId),children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),o===s.operatorId?"Hide Details":"View Details"]}),o===s.operatorId&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Detailed Activity Log"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.todayCompleted.map(t=>e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:t.operationName}),e.jsx(c,{variant:h(t.status),size:"sm",children:t.status})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Bundle: ",t.bundleNumber]}),e.jsxs("p",{children:["Duration: ",u(t.duration)]}),e.jsxs("p",{children:["Pieces: ",t.piecesCompleted,"/",t.targetPieces]}),e.jsxs("p",{children:["Earnings: $",t.earnings.toFixed(2)]}),e.jsxs("p",{children:["Efficiency: ",t.efficiency,"%"]}),t.qualityScore&&e.jsxs("p",{children:["Quality: ",t.qualityScore,"/10"]}),t.defects>0&&e.jsxs("p",{className:"text-red-600",children:["Defects: ",t.defects]})]})]},t.id))})]})]},s.operatorId))}),e.jsx("div",{className:"text-center",children:e.jsxs(n,{variant:"primary",onClick:p,className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh Data"})]})})]})};export{J as SupervisorOperatorBuckets,J as default};
