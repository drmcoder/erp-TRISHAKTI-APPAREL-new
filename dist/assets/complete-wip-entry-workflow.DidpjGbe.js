import{j as e}from"./query-vendor.BbCCZTU0.js";import{r as m}from"./react-vendor.BcnQP8kQ.js";import{t as E}from"./index.wyP5CHuk.js";import{C as I,e as F,f as P,d as S,B as R,b as _,F as M,c as A,a as T,k as O}from"./index.BnZjV7b3.js";import{I as g}from"./Input.D8gd7mOf.js";import{L as f}from"./label.BNDYRuzi.js";import{F as W}from"./ArrowRightIcon.xKte5yv4.js";import{F as q}from"./DocumentDuplicateIcon.D0-8m2Wo.js";import{F as Q}from"./PlusIcon.C8HC3Ss7.js";import{F as B}from"./ArrowLeftIcon.BArH4jor.js";import{S as V}from"./select.BqvOc8nJ.js";import{F as H}from"./ClipboardDocumentListIcon.Bm2DaeXg.js";import{F as U}from"./ScissorsIcon.CEEGcgg5.js";import{F as Z}from"./ClockIcon.DbOxfhcH.js";import{F as X}from"./CurrencyRupeeIcon.CCku5vMm.js";import"./ui-vendor.B7YYMSVe.js";import"./utils-vendor.B0NEtgzl.js";function G({title:l,titleId:N,...b},v){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:v,"aria-labelledby":N},b),l?m.createElement("title",{id:N},l):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const J=m.forwardRef(G),K=({initialData:l,onDataChange:N,onNext:b,onPrevious:v,currentLanguage:z="en"})=>{const h=window.innerWidth<768,C={container:"px-4 py-6"},[a,i]=m.useState({lotNumber:l?.lotNumber||"",buyerName:l?.buyerName||"",parsedStyles:l?.parsedStyles||[{id:`style_${Date.now()}`,articleNumber:"",styleName:"",isValid:!1}],sizeConfiguration:l?.sizeConfiguration||{sizeNames:[],sizeRatios:[],isValid:!1}}),[r,c]=m.useState({}),x={en:{title:"Manual WIP Entry",subtitle:"Create new work in progress record",basicInfo:"Basic Information",lotNumber:"Lot Number",buyerName:"Buyer Name",articleStyles:"Article Styles",addStyle:"Add Style",articleNumber:"Article Number",styleName:"Style Name",sizeConfig:"Size Configuration",sizeNames:"Size Names",sizeRatios:"Size Ratios",remove:"Remove",next:"Next",previous:"Previous",cancel:"Cancel"},ne:{title:"à¤®à¥à¤¯à¤¾à¤¨à¥à¤…à¤² WIP à¤ªà¥à¤°à¤µà¤¿à¤·à¥à¤Ÿà¤¿",subtitle:"à¤¨à¤¯à¤¾à¤ à¤•à¤¾à¤°à¥à¤¯ à¤ªà¥à¤°à¤—à¤¤à¤¿ à¤°à¥‡à¤•à¤°à¥à¤¡ à¤¸à¤¿à¤°à¥à¤œà¤¨à¤¾ à¤—à¤°à¥à¤¨à¥à¤¹à¥‹à¤¸à¥",basicInfo:"à¤†à¤§à¤¾à¤°à¤­à¥‚à¤¤ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",lotNumber:"à¤²à¤Ÿ à¤¨à¤®à¥à¤¬à¤°",buyerName:"à¤–à¤°à¥€à¤¦à¤¦à¤¾à¤°à¤•à¥‹ à¤¨à¤¾à¤®",articleStyles:"à¤²à¥‡à¤– à¤¶à¥ˆà¤²à¥€à¤¹à¤°à¥‚",addStyle:"à¤¶à¥ˆà¤²à¥€ à¤¥à¤ªà¥à¤¨à¥à¤¹à¥‹à¤¸à¥",articleNumber:"à¤²à¥‡à¤– à¤¨à¤®à¥à¤¬à¤°",styleName:"à¤¶à¥ˆà¤²à¥€à¤•à¥‹ à¤¨à¤¾à¤®",sizeConfig:"à¤¸à¤¾à¤‡à¤œ à¤•à¤¨à¥à¤«à¤¿à¤—à¤°à¥‡à¤¸à¤¨",sizeNames:"à¤¸à¤¾à¤‡à¤œ à¤¨à¤¾à¤®à¤¹à¤°à¥‚",sizeRatios:"à¤¸à¤¾à¤‡à¤œ à¤…à¤¨à¥à¤ªà¤¾à¤¤à¤¹à¤°à¥‚",remove:"à¤¹à¤Ÿà¤¾à¤‰à¤¨à¥à¤¹à¥‹à¤¸à¥",next:"à¤…à¤°à¥à¤•à¥‹",previous:"à¤…à¤˜à¤¿à¤²à¥à¤²à¥‹",cancel:"à¤°à¤¦à¥à¤¦ à¤—à¤°à¥à¤¨à¥à¤¹à¥‹à¤¸à¥"}}[z],j=m.useCallback(()=>{const s={};return a.lotNumber.trim()||(s.lotNumber="Lot number is required"),a.lotNumber.trim()&&!/^\d+$/.test(a.lotNumber.trim())&&(s.lotNumber="Lot number should be numeric (e.g., 30, 32, 34)"),a.buyerName.trim()||(s.buyerName="Buyer name is required"),a.parsedStyles.forEach((t,o)=>{t.articleNumber.trim()||(s[`style_${o}_articleNumber`]="Article number is required"),t.styleName.trim()||(s[`style_${o}_styleName`]="Style name is required")}),a.sizeConfiguration.sizeNames.length===0&&(s.sizeNames="Size names are required"),a.sizeConfiguration.sizeRatios.length===0&&(s.sizeRatios="Size ratios are required"),a.sizeConfiguration.sizeNames.length!==a.sizeConfiguration.sizeRatios.length&&(s.sizeMismatch="Number of sizes and ratios must match"),c(s),Object.keys(s).length===0},[a]);m.useEffect(()=>{N(a)},[a,N]),m.useEffect(()=>{j()},[j]);const u=m.useCallback(()=>{const s={id:`style_${Date.now()}`,articleNumber:"",styleName:"",isValid:!1};i(t=>({...t,parsedStyles:[...t.parsedStyles,s]}))},[]),D=m.useCallback(s=>{a.parsedStyles.length>1&&i(t=>({...t,parsedStyles:t.parsedStyles.filter((o,p)=>p!==s)}))},[a.parsedStyles.length]),$=m.useCallback((s,t,o)=>{i(p=>{const w=[...p.parsedStyles];return w[s]={...w[s],[t]:o,isValid:t==="articleNumber"?o.trim()!==""&&w[s].styleName.trim()!=="":w[s].articleNumber.trim()!==""&&o.trim()!==""},{...p,parsedStyles:w}})},[]),d=m.useCallback(s=>{const t=/[;,:|\s]+/;return s.split(t).map(o=>o.trim()).filter(o=>o.length>0)},[]),y=m.useCallback(s=>{const t=d(s);i(o=>({...o,sizeConfiguration:{...o.sizeConfiguration,sizeNames:t,isValid:t.length>0&&t.length===o.sizeConfiguration.sizeRatios.length}}))},[d]),L=m.useCallback(s=>{const t=s.split(/[,;\s]+/).map(o=>parseInt(o.trim())).filter(o=>!isNaN(o)&&o>0);i(o=>({...o,sizeConfiguration:{...o.sizeConfiguration,sizeRatios:t,isValid:t.length>0&&t.length===o.sizeConfiguration.sizeNames.length}}))},[]),k=()=>{j()&&b()};return e.jsxs("div",{className:`${C.container} space-y-6`,children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:`text-2xl font-bold ${C.fontSize} text-gray-900`,children:["ðŸ“ ",x.title]}),e.jsx("p",{className:"text-gray-600 mt-2",children:x.subtitle}),e.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-semibold",children:"1"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Multi-Article"})]}),e.jsx(W,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold",children:"2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Multi-Roll"})]}),e.jsx(W,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold",children:"3"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Preview"})]})]})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsx(P,{children:x.basicInfo})}),e.jsx(S,{children:e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"lotNumber",children:[x.lotNumber," *"]}),e.jsx(g,{id:"lotNumber",type:"number",value:a.lotNumber,onChange:s=>i(t=>({...t,lotNumber:s.target.value})),placeholder:"30",className:r.lotNumber?"border-red-500":""}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Serial numbers like: 30, 32, 34, 36..."}),r.lotNumber&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.lotNumber})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"buyerName",children:[x.buyerName," *"]}),e.jsx(g,{id:"buyerName",value:a.buyerName,onChange:s=>i(t=>({...t,buyerName:s.target.value})),placeholder:"Buyer Name",className:r.buyerName?"border-red-500":""}),r.buyerName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.buyerName})]})]})})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),x.articleStyles]}),e.jsxs(R,{type:"button",onClick:u,size:"sm",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),x.addStyle]})]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:a.parsedStyles.map((s,t)=>e.jsxs(I,{className:"border-2 border-gray-200",children:[e.jsx(F,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"text-lg",children:["Article Style #",t+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isValid?e.jsx(_,{className:"h-5 w-5 text-green-500"}):e.jsx(M,{className:"h-5 w-5 text-yellow-500"}),a.parsedStyles.length>1&&e.jsx(R,{type:"button",onClick:()=>D(t),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 p-1",children:e.jsx(A,{className:"h-4 w-4"})})]})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:`articleNumber_${t}`,children:[x.articleNumber," *"]}),e.jsx(g,{id:`articleNumber_${t}`,value:s.articleNumber,onChange:o=>$(t,"articleNumber",o.target.value),placeholder:"TSH001",className:r[`style_${t}_articleNumber`]?"border-red-500":""}),r[`style_${t}_articleNumber`]&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r[`style_${t}_articleNumber`]})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:`styleName_${t}`,children:[x.styleName," *"]}),e.jsx(g,{id:`styleName_${t}`,value:s.styleName,onChange:o=>$(t,"styleName",o.target.value),placeholder:"Basic T-Shirt",className:r[`style_${t}_styleName`]?"border-red-500":""}),r[`style_${t}_styleName`]&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r[`style_${t}_styleName`]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[s.isValid?e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Style information complete"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Please complete article number and style name"})]}),s.isValid&&e.jsx("div",{className:"mt-2 text-sm text-gray-600",children:"ðŸ“‹ Procedure Details: 5 operations â±ï¸ 45min ðŸ’° $12.50"})]})]})]},s.id))})})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsxs(P,{className:"flex items-center gap-2",children:["ðŸ“ ",x.sizeConfig]})}),e.jsxs(S,{children:[e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"sizeNames",children:[x.sizeNames," *"]}),e.jsx(g,{id:"sizeNames",placeholder:"S, M, L, XL",onChange:s=>y(s.target.value),className:r.sizeNames?"border-red-500":""}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Detected sizes:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.sizeConfiguration.sizeNames.map((s,t)=>e.jsx(T,{variant:"outline",className:"text-xs",children:s},t))})]}),r.sizeNames&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.sizeNames})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"sizeRatios",children:[x.sizeRatios," *"]}),e.jsx(g,{id:"sizeRatios",placeholder:"1, 2, 2, 1",onChange:s=>L(s.target.value),className:r.sizeRatios?"border-red-500":""}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Ratio preview:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.sizeConfiguration.sizeRatios.map((s,t)=>e.jsx(T,{variant:"default",className:"text-xs",children:s},t))})]}),r.sizeRatios&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.sizeRatios})]})]}),a.sizeConfiguration.sizeNames.length>0&&a.sizeConfiguration.sizeRatios.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Size mapping:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.sizeConfiguration.sizeNames.map((s,t)=>e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"border border-gray-300 rounded px-3 py-2 mb-1",children:[e.jsx("div",{className:"text-sm font-medium",children:s}),e.jsx("div",{className:"text-xs text-gray-600",children:a.sizeConfiguration.sizeRatios[t]||"?"})]})},t))}),r.sizeMismatch&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:r.sizeMismatch})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsx("div",{children:v&&e.jsxs(R,{type:"button",onClick:v,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),x.previous]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"outline",children:x.cancel}),e.jsxs(R,{type:"button",onClick:k,disabled:!j(),className:"flex items-center gap-2",children:[x.next,e.jsx(W,{className:"h-4 w-4"})]})]})]})]})},Y=({initialData:l,onDataChange:N,onNext:b,onPrevious:v,currentLanguage:z="en"})=>{const h=window.innerWidth<768,C={container:"px-4 py-6"},[a,i]=m.useState({fabricInfo:{fabricName:l?.fabricInfo?.fabricName||"",fabricWidth:l?.fabricInfo?.fabricWidth||"",fabricStore:l?.fabricInfo?.fabricStore||"",fabricType:l?.fabricInfo?.fabricType||"",fabricWeight:l?.fabricInfo?.fabricWeight||""},rollInfo:{rollCount:l?.rollInfo?.rollCount||1,receivedDate:l?.rollInfo?.receivedDate||new Date().toISOString().split("T")[0],deliveryDate:l?.rollInfo?.deliveryDate||"",urgencyLevel:l?.rollInfo?.urgencyLevel||"medium",rollsData:l?.rollInfo?.rollsData||[]},orderInfo:{poNumber:l?.orderInfo?.poNumber||"",buyerName:l?.orderInfo?.buyerName||"",orderQuantity:l?.orderInfo?.orderQuantity||0,seasonCode:l?.orderInfo?.seasonCode||""}}),[r,c]=m.useState({}),[n,x]=m.useState(!1),u={en:{title:"Fabric & Roll Information",fabricInfo:"Fabric Information",rollInfo:"Roll Information",orderInfo:"Order Information",summary:"Summary",fabricName:"Fabric Name",fabricWidth:"Fabric Width",fabricStore:"Fabric Store",fabricType:"Fabric Type",fabricWeight:"Fabric Weight",rollCount:"Number of Rolls",receivedDate:"Received Date",deliveryDate:"Delivery Date",urgencyLevel:"Urgency Level",poNumber:"PO Number",buyerName:"Buyer Name",orderQuantity:"Order Quantity",seasonCode:"Season Code",rollDetails:"Roll Details",showDetails:"Show Roll Details",hideDetails:"Hide Roll Details",rollNumber:"Roll #",weight:"Weight (kg)",layers:"Layers",remarks:"Remarks",next:"Next",previous:"Previous",cancel:"Cancel"},ne:{title:"à¤•à¤ªà¤¡à¤¾ à¤° à¤°à¥‹à¤² à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",fabricInfo:"à¤•à¤ªà¤¡à¤¾ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",rollInfo:"à¤°à¥‹à¤² à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",orderInfo:"à¤…à¤°à¥à¤¡à¤° à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",summary:"à¤¸à¤¾à¤°à¤¾à¤‚à¤¶",fabricName:"à¤•à¤ªà¤¡à¤¾à¤•à¥‹ à¤¨à¤¾à¤®",fabricWidth:"à¤•à¤ªà¤¡à¤¾à¤•à¥‹ à¤šà¥Œà¤¡à¤¾à¤ˆ",fabricStore:"à¤•à¤ªà¤¡à¤¾ à¤ªà¤¸à¤²",fabricType:"à¤•à¤ªà¤¡à¤¾à¤•à¥‹ à¤ªà¥à¤°à¤•à¤¾à¤°",fabricWeight:"à¤•à¤ªà¤¡à¤¾à¤•à¥‹ à¤¤à¥Œà¤²",rollCount:"à¤°à¥‹à¤²à¤¹à¤°à¥‚à¤•à¥‹ à¤¸à¤‚à¤–à¥à¤¯à¤¾",receivedDate:"à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤®à¤¿à¤¤à¤¿",deliveryDate:"à¤¡à¥‡à¤²à¤¿à¤­à¤°à¥€ à¤®à¤¿à¤¤à¤¿",urgencyLevel:"à¤œà¤°à¥à¤°à¥€ à¤¸à¥à¤¤à¤°",poNumber:"PO à¤¨à¤®à¥à¤¬à¤°",buyerName:"à¤–à¤°à¥€à¤¦à¤¦à¤¾à¤°à¤•à¥‹ à¤¨à¤¾à¤®",orderQuantity:"à¤…à¤°à¥à¤¡à¤° à¤®à¤¾à¤¤à¥à¤°à¤¾",seasonCode:"à¤¸à¤¿à¤œà¤¨ à¤•à¥‹à¤¡",rollDetails:"à¤°à¥‹à¤² à¤µà¤¿à¤µà¤°à¤£à¤¹à¤°à¥‚",showDetails:"à¤°à¥‹à¤² à¤µà¤¿à¤µà¤°à¤£ à¤¦à¥‡à¤–à¤¾à¤‰à¤¨à¥à¤¹à¥‹à¤¸à¥",hideDetails:"à¤°à¥‹à¤² à¤µà¤¿à¤µà¤°à¤£ à¤²à¥à¤•à¤¾à¤‰à¤¨à¥à¤¹à¥‹à¤¸à¥",rollNumber:"à¤°à¥‹à¤² #",weight:"à¤¤à¥Œà¤² (à¤•à¤¿.à¤—à¥à¤°à¤¾.)",layers:"à¤¤à¤¹à¤¹à¤°à¥‚",remarks:"à¤Ÿà¤¿à¤ªà¥à¤ªà¤£à¥€à¤¹à¤°à¥‚",next:"à¤…à¤°à¥à¤•à¥‹",previous:"à¤…à¤˜à¤¿à¤²à¥à¤²à¥‹",cancel:"à¤°à¤¦à¥à¤¦ à¤—à¤°à¥à¤¨à¥à¤¹à¥‹à¤¸à¥"}}[z],D=[{value:"low",label:"ðŸŸ¢ Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"ðŸŸ¡ Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"ðŸŸ  High",color:"bg-orange-100 text-orange-800"},{value:"urgent",label:"ðŸ”´ Urgent",color:"bg-red-100 text-red-800"}],$=m.useCallback(()=>{const s={};return a.fabricInfo.fabricName.trim()||(s.fabricName="Fabric name is required"),a.fabricInfo.fabricWidth.trim()||(s.fabricWidth="Fabric width is required"),a.rollInfo.rollCount<1&&(s.rollCount="At least one roll is required"),a.rollInfo.receivedDate||(s.receivedDate="Received date is required"),a.orderInfo.buyerName.trim()||(s.buyerName="Buyer name is required"),c(s),Object.keys(s).length===0},[a]);m.useEffect(()=>{const s=a.rollInfo.rollsData,t=a.rollInfo.rollCount;if(s.length!==t){const o=Array.from({length:t},(p,w)=>s[w]?s[w]:{rollNumber:`R${(w+1).toString().padStart(3,"0")}`,weight:20,layers:30,remarks:""});i(p=>({...p,rollInfo:{...p.rollInfo,rollsData:o}}))}},[a.rollInfo.rollCount,a.rollInfo.rollsData]),m.useEffect(()=>{N(a)},[a,N]);const d=m.useCallback((s,t,o)=>{i(p=>({...p,[s]:{...p[s],[t]:o}}))},[]),y=m.useCallback((s,t,o)=>{i(p=>{const w=[...p.rollInfo.rollsData];return w[s]={...w[s],[t]:o},{...p,rollInfo:{...p.rollInfo,rollsData:w}}})},[]),L=()=>{$()&&b()},k=s=>D.find(o=>o.value===s)||D[1];return e.jsxs("div",{className:`${C.container} space-y-6`,children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:`text-2xl font-bold ${C.fontSize} text-gray-900`,children:["ðŸ§µ ",u.title]}),e.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center font-semibold",children:"âœ“"}),e.jsx("span",{className:"text-sm text-green-600",children:"Multi-Article"})]}),e.jsx(W,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-semibold",children:"2"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Multi-Roll"})]}),e.jsx(W,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold",children:"3"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Preview"})]})]})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsx(P,{children:u.fabricInfo})}),e.jsx(S,{children:e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"fabricName",children:[u.fabricName," *"]}),e.jsx(g,{id:"fabricName",value:a.fabricInfo.fabricName,onChange:s=>d("fabricInfo","fabricName",s.target.value),placeholder:"Cotton",className:r.fabricName?"border-red-500":""}),r.fabricName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.fabricName})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"fabricWidth",children:[u.fabricWidth," *"]}),e.jsx(g,{id:"fabricWidth",value:a.fabricInfo.fabricWidth,onChange:s=>d("fabricInfo","fabricWidth",s.target.value),placeholder:"60 inches",className:r.fabricWidth?"border-red-500":""}),r.fabricWidth&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.fabricWidth})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"fabricStore",children:u.fabricStore}),e.jsx(g,{id:"fabricStore",value:a.fabricInfo.fabricStore,onChange:s=>d("fabricInfo","fabricStore",s.target.value),placeholder:"Store ABC"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"fabricType",children:u.fabricType}),e.jsxs(V,{value:a.fabricInfo.fabricType,onValueChange:s=>d("fabricInfo","fabricType",s),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"cotton",children:"Cotton"}),e.jsx("option",{value:"polyester",children:"Polyester"}),e.jsx("option",{value:"blend",children:"Cotton-Polyester Blend"}),e.jsx("option",{value:"silk",children:"Silk"}),e.jsx("option",{value:"wool",children:"Wool"})]})]})]})})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsx(P,{children:u.rollInfo})}),e.jsxs(S,{children:[e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"rollCount",children:[u.rollCount," *"]}),e.jsx(g,{id:"rollCount",type:"number",min:"1",max:"20",value:a.rollInfo.rollCount,onChange:s=>d("rollInfo","rollCount",parseInt(s.target.value)||1),className:r.rollCount?"border-red-500":""}),r.rollCount&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.rollCount})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"receivedDate",children:[u.receivedDate," *"]}),e.jsx(g,{id:"receivedDate",type:"date",value:a.rollInfo.receivedDate,onChange:s=>d("rollInfo","receivedDate",s.target.value),className:r.receivedDate?"border-red-500":""}),r.receivedDate&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.receivedDate})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"deliveryDate",children:u.deliveryDate}),e.jsx(g,{id:"deliveryDate",type:"date",value:a.rollInfo.deliveryDate,onChange:s=>d("rollInfo","deliveryDate",s.target.value)})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"urgencyLevel",children:[u.urgencyLevel," *"]}),e.jsx(V,{value:a.rollInfo.urgencyLevel,onValueChange:s=>d("rollInfo","urgencyLevel",s),children:D.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(R,{type:"button",variant:"outline",onClick:()=>x(!n),className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),n?u.hideDetails:u.showDetails]})}),n&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:u.rollDetails}),a.rollInfo.rollsData.map((s,t)=>e.jsx(I,{className:"border border-gray-200",children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-4"} gap-4`,children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:`rollNumber_${t}`,children:u.rollNumber}),e.jsx(g,{id:`rollNumber_${t}`,value:s.rollNumber,onChange:o=>y(t,"rollNumber",o.target.value),placeholder:`R${(t+1).toString().padStart(3,"0")}`})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:`weight_${t}`,children:u.weight}),e.jsx(g,{id:`weight_${t}`,type:"number",min:"1",value:s.weight,onChange:o=>y(t,"weight",parseFloat(o.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:`layers_${t}`,children:u.layers}),e.jsx(g,{id:`layers_${t}`,type:"number",min:"1",value:s.layers,onChange:o=>y(t,"layers",parseInt(o.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:`remarks_${t}`,children:u.remarks}),e.jsx(g,{id:`remarks_${t}`,value:s.remarks,onChange:o=>y(t,"remarks",o.target.value),placeholder:"Optional"})]})]})})},t))]})]})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsx(P,{children:u.orderInfo})}),e.jsx(S,{children:e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"poNumber",children:u.poNumber}),e.jsx(g,{id:"poNumber",value:a.orderInfo.poNumber,onChange:s=>d("orderInfo","poNumber",s.target.value),placeholder:"PO-2024-001"})]}),e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"orderBuyerName",children:[u.buyerName," *"]}),e.jsx(g,{id:"orderBuyerName",value:a.orderInfo.buyerName,onChange:s=>d("orderInfo","buyerName",s.target.value),placeholder:"Buyer ABC",className:r.buyerName?"border-red-500":""}),r.buyerName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.buyerName})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"orderQuantity",children:u.orderQuantity}),e.jsx(g,{id:"orderQuantity",type:"number",min:"0",value:a.orderInfo.orderQuantity,onChange:s=>d("orderInfo","orderQuantity",parseInt(s.target.value)||0),placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"seasonCode",children:u.seasonCode}),e.jsx(g,{id:"seasonCode",value:a.orderInfo.seasonCode,onChange:s=>d("orderInfo","seasonCode",s.target.value),placeholder:"SS24"})]})]})})]}),e.jsxs(I,{className:"bg-blue-50 border-blue-200",children:[e.jsx(F,{children:e.jsxs(P,{className:"text-blue-800",children:["ðŸ“Š ",u.summary]})}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fabric:"})," ",a.fabricInfo.fabricName," (",a.fabricInfo.fabricWidth,")"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rolls:"})," ",a.rollInfo.rollCount]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Buyer:"})," ",a.orderInfo.buyerName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Urgency:"}),e.jsx(T,{className:`ml-2 ${k(a.rollInfo.urgencyLevel).color}`,variant:"outline",children:k(a.rollInfo.urgencyLevel).label})]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsxs(R,{type:"button",onClick:v,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),u.previous]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"outline",children:u.cancel}),e.jsxs(R,{type:"button",onClick:L,disabled:!$(),className:"flex items-center gap-2",children:[u.next,e.jsx(W,{className:"h-4 w-4"})]})]})]})]})},ee=({data:l,onSave:N,onPrevious:b,currentLanguage:v="en",isLoading:z=!1})=>{const h=window.innerWidth<768,C={container:"px-4 py-6"},i={en:{title:"WIP Summary Preview",orderOverview:"Order Overview",articleBreakdown:"Article Breakdown",productionFormula:"Production Formula",finalActions:"Final Actions",lot:"Lot",buyer:"Buyer",articles:"Articles",rolls:"Rolls",sizes:"Sizes",urgency:"Urgency",procedure:"Procedure",pieces:"pieces",operations:"ops",totalLayers:"Total Layers",totalPieces:"Total Pieces",estimatedTime:"Estimated Time",estimatedCost:"Estimated Cost",piecesPerLayer:"pieces/layer",minutes:"minutes",previous:"Previous",save:"Save WIP",cancel:"Cancel"},ne:{title:"WIP à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤ªà¥‚à¤°à¥à¤µà¤¾à¤µà¤²à¥‹à¤•à¤¨",orderOverview:"à¤…à¤°à¥à¤¡à¤° à¤¸à¤¿à¤‚à¤¹à¤¾à¤µà¤²à¥‹à¤•à¤¨",articleBreakdown:"à¤²à¥‡à¤– à¤µà¤¿à¤µà¤°à¤£",productionFormula:"à¤‰à¤¤à¥à¤ªà¤¾à¤¦à¤¨ à¤¸à¥‚à¤¤à¥à¤°",finalActions:"à¤…à¤¨à¥à¤¤à¤¿à¤® à¤•à¤¾à¤°à¥à¤¯à¤¹à¤°à¥‚",lot:"à¤²à¤Ÿ",buyer:"à¤–à¤°à¥€à¤¦à¤¦à¤¾à¤°",articles:"à¤²à¥‡à¤–à¤¹à¤°à¥‚",rolls:"à¤°à¥‹à¤²à¤¹à¤°à¥‚",sizes:"à¤¸à¤¾à¤‡à¤œà¤¹à¤°à¥‚",urgency:"à¤œà¤°à¥à¤°à¥€",procedure:"à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾",pieces:"à¤Ÿà¥à¤•à¥à¤°à¤¾à¤¹à¤°à¥‚",operations:"à¤…à¤ªà¤°à¥‡à¤¸à¤¨à¤¹à¤°à¥‚",totalLayers:"à¤•à¥à¤² à¤¤à¤¹à¤¹à¤°à¥‚",totalPieces:"à¤•à¥à¤² à¤Ÿà¥à¤•à¥à¤°à¤¾à¤¹à¤°à¥‚",estimatedTime:"à¤…à¤¨à¥à¤®à¤¾à¤¨à¤¿à¤¤ à¤¸à¤®à¤¯",estimatedCost:"à¤…à¤¨à¥à¤®à¤¾à¤¨à¤¿à¤¤ à¤²à¤¾à¤—à¤¤",piecesPerLayer:"à¤Ÿà¥à¤•à¥à¤°à¤¾à¤¹à¤°à¥‚/à¤¤à¤¹",minutes:"à¤®à¤¿à¤¨à¥‡à¤Ÿà¤¹à¤°à¥‚",previous:"à¤…à¤˜à¤¿à¤²à¥à¤²à¥‹",save:"WIP à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤—à¤°à¥à¤¨à¥à¤¹à¥‹à¤¸à¥",cancel:"à¤°à¤¦à¥à¤¦ à¤—à¤°à¥à¤¨à¥à¤¹à¥‹à¤¸à¥"}}[v],r={low:{label:"ðŸŸ¢ Low",color:"bg-green-100 text-green-800"},medium:{label:"ðŸŸ¡ Medium",color:"bg-yellow-100 text-yellow-800"},high:{label:"ðŸŸ  High",color:"bg-orange-100 text-orange-800"},urgent:{label:"ðŸ”´ Urgent",color:"bg-red-100 text-red-800"}},c=m.useMemo(()=>{const x=l.sizeRatios.reduce((s,t)=>s+t,0),j=l.rollCount*30,u=j*x,D=u*l.articles.length,$=l.articles.reduce((s,t)=>s+(t.procedureDetails?.operations||5),0),d=l.articles.reduce((s,t)=>s+(t.procedureDetails?.estimatedTime||45),0)/l.articles.length,y=l.articles.reduce((s,t)=>s+(t.procedureDetails?.estimatedCost||12.5),0)/l.articles.length,L=D*(d/60),k=D*y;return{piecesPerLayer:x,totalLayers:j,totalPiecesPerArticle:u,totalPieces:D,totalOperations:$,avgTimePerPiece:d,avgCostPerPiece:y,totalEstimatedTime:L,totalEstimatedCost:k}},[l]);return e.jsxs("div",{className:`${C.container} space-y-6`,children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:`text-2xl font-bold ${C.fontSize} text-gray-900`,children:["ðŸ“Š ",i.title]}),e.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center font-semibold",children:"âœ“"}),e.jsx("span",{className:"text-sm text-green-600",children:"Multi-Article"})]}),e.jsx("div",{className:"h-px w-8 bg-gray-300"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center font-semibold",children:"âœ“"}),e.jsx("span",{className:"text-sm text-green-600",children:"Multi-Roll"})]}),e.jsx("div",{className:"h-px w-8 bg-gray-300"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-semibold",children:"3"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Preview"})]})]})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),i.orderOverview]})}),e.jsxs(S,{children:[e.jsxs("div",{className:`grid ${h?"grid-cols-2":"grid-cols-4"} gap-4`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[i.lot,":"]}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:l.lotNumber})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[i.buyer,":"]}),e.jsx("div",{className:"text-lg font-semibold",children:l.buyerName})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[i.articles,":"]}),e.jsx("div",{className:"text-lg font-bold text-purple-600",children:l.articles.length})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[i.rolls,":"]}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:l.rollCount})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[i.sizes,":"]}),e.jsx("div",{className:"flex gap-1",children:l.sizeNames.map((n,x)=>e.jsxs(T,{variant:"outline",className:"text-xs",children:[n,"(",l.sizeRatios[x],")"]},x))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[i.urgency,":"]}),e.jsx(T,{className:r[l.urgencyLevel]?.color||r.medium.color,variant:"outline",children:r[l.urgencyLevel]?.label||r.medium.label})]})]})]})]}),e.jsxs(I,{children:[e.jsx(F,{children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),i.articleBreakdown]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:l.articles.map((n,x)=>e.jsx(I,{className:"border-l-4 border-l-blue-500 bg-blue-50",children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"font-bold text-lg text-gray-900",children:[n.articleNumber," - ",n.styleName]}),e.jsx(_,{className:"h-5 w-5 text-green-500"})]}),n.procedureDetails?e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("span",{className:"font-medium",children:[i.procedure,":"]})," ",n.styleName," Template (",n.procedureDetails.operations," ",i.operations,",",n.procedureDetails.estimatedTime," ",i.minutes,", â‚¹",n.procedureDetails.estimatedCost,")"]}):e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:[i.procedure,":"]})," Standard Template (5 ",i.operations,", 45 ",i.minutes,", â‚¹12.50)"]}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[e.jsxs("span",{className:"font-medium",children:[i.sizes,":"]})," ",l.sizeNames.join("(")," = ",c.piecesPerLayer," ",i.piecesPerLayer]})]})},x))})})]}),e.jsxs(I,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:[e.jsx(F,{children:e.jsxs(P,{className:"flex items-center gap-2 text-green-800",children:[e.jsx(O,{className:"h-5 w-5"}),i.productionFormula]})}),e.jsxs(S,{children:[e.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-6`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[i.totalLayers,":"]}),e.jsxs("div",{className:"text-lg",children:[l.rollCount," rolls Ã— ~30 layers = ",e.jsxs("span",{className:"font-bold text-blue-600",children:[c.totalLayers," layers"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[i.totalPieces,":"]}),e.jsxs("div",{className:"text-lg",children:[c.totalLayers," layers Ã— ",c.piecesPerLayer," ",i.piecesPerLayer," Ã— ",l.articles.length," articles =",e.jsxs("span",{className:"font-bold text-purple-600",children:[" ",c.totalPieces.toLocaleString()," ",i.pieces]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[i.estimatedTime,":"]})]}),e.jsxs("div",{className:"text-lg",children:[e.jsxs("span",{className:"font-bold text-orange-600",children:[c.totalEstimatedTime.toFixed(1)," hours"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["(~",c.avgTimePerPiece," ",i.minutes," Ã— ",c.totalPieces.toLocaleString()," ",i.pieces,")"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[i.estimatedCost,":"]})]}),e.jsxs("div",{className:"text-lg",children:[e.jsxs("span",{className:"font-bold text-green-600",children:["â‚¹",c.totalEstimatedCost.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["(â‚¹",c.avgCostPerPiece," Ã— ",c.totalPieces.toLocaleString()," ",i.pieces,")"]})]})]})]})]}),e.jsx("div",{className:"mt-6 bg-white p-4 rounded-lg border-2 border-green-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-900 mb-2",children:"Production Summary"}),e.jsxs("div",{className:`grid ${h?"grid-cols-2":"grid-cols-4"} gap-4 text-sm`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Total Operations"}),e.jsx("div",{className:"font-bold text-blue-600",children:c.totalOperations})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Per Article Pieces"}),e.jsx("div",{className:"font-bold text-purple-600",children:c.totalPiecesPerArticle.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Fabric Required"}),e.jsxs("div",{className:"font-bold text-green-600",children:[l.fabricName," (",l.fabricWidth,")"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Production Days"}),e.jsxs("div",{className:"font-bold text-orange-600",children:["~",Math.ceil(c.totalEstimatedTime/8)," days"]})]})]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsxs(R,{type:"button",onClick:b,variant:"outline",className:"flex items-center gap-2",disabled:z,children:[e.jsx(B,{className:"h-4 w-4"}),i.previous]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"outline",disabled:z,children:i.cancel}),e.jsx(R,{type:"button",onClick:N,disabled:z,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4"}),"âœ… ",i.save]})})]})]})]})},ge=({onComplete:l,onCancel:N,initialData:b,currentLanguage:v="en"})=>{const z={container:"px-4 py-6"},[h,C]=m.useState(1),[a,i]=m.useState(!1),[r,c]=m.useState({lotNumber:b?.lotNumber||"",buyerName:b?.buyerName||"",parsedStyles:b?.parsedStyles||[{id:`style_${Date.now()}`,articleNumber:"",styleName:"",isValid:!1}],sizeConfiguration:b?.sizeConfiguration||{sizeNames:[],sizeRatios:[],isValid:!1},fabricInfo:b?.fabricInfo||{fabricName:"",fabricWidth:"",fabricStore:"",fabricType:"",fabricWeight:""},rollInfo:b?.rollInfo||{rollCount:1,receivedDate:new Date().toISOString().split("T")[0],deliveryDate:"",urgencyLevel:"medium",rollsData:[]},orderInfo:b?.orderInfo||{poNumber:"",buyerName:b?.buyerName||"",orderQuantity:0,seasonCode:""},articleProcedures:b?.articleProcedures||{},customTemplates:b?.customTemplates||{}}),n=m.useCallback(d=>{c(y=>({...y,lotNumber:d.lotNumber,buyerName:d.buyerName,parsedStyles:d.parsedStyles,sizeConfiguration:d.sizeConfiguration,orderInfo:{...y.orderInfo,buyerName:d.buyerName}}))},[]),x=m.useCallback(d=>{c(y=>({...y,fabricInfo:d.fabricInfo,rollInfo:d.rollInfo,orderInfo:{...y.orderInfo,...d.orderInfo,buyerName:y.buyerName}}))},[]),j=m.useCallback(()=>{h<3&&(C(d=>d+1),E.success(`Step ${h+1} completed!`))},[h]),u=m.useCallback(()=>{h>1&&C(d=>d-1)},[h]),D=m.useCallback(async()=>{try{i(!0);const d={...r,orderInfo:{...r.orderInfo,buyerName:r.buyerName}};await l(d),E.success("WIP entry saved successfully!")}catch(d){console.error("Error saving WIP:",d),E.error("Failed to save WIP entry. Please try again.")}finally{i(!1)}},[r,l]),$={lotNumber:r.lotNumber,buyerName:r.buyerName,articles:r.parsedStyles.map(d=>({articleNumber:d.articleNumber,styleName:d.styleName,procedureDetails:d.procedureDetails})),sizeNames:r.sizeConfiguration.sizeNames,sizeRatios:r.sizeConfiguration.sizeRatios,rollCount:r.rollInfo.rollCount,fabricName:r.fabricInfo.fabricName,fabricWidth:r.fabricInfo.fabricWidth,urgencyLevel:r.rollInfo.urgencyLevel,poNumber:r.orderInfo.poNumber,deliveryDate:r.rollInfo.deliveryDate};return e.jsxs("div",{className:`${z.container} min-h-screen bg-gray-50`,children:[h===1&&e.jsx(K,{initialData:{lotNumber:r.lotNumber,buyerName:r.buyerName,parsedStyles:r.parsedStyles,sizeConfiguration:r.sizeConfiguration},onDataChange:n,onNext:j,currentLanguage:v}),h===2&&e.jsx(Y,{initialData:{fabricInfo:r.fabricInfo,rollInfo:r.rollInfo,orderInfo:r.orderInfo},onDataChange:x,onNext:j,onPrevious:u,currentLanguage:v}),h===3&&e.jsx(ee,{data:$,onSave:D,onPrevious:u,currentLanguage:v,isLoading:a}),!1]})},je=()=>{const[l,N]=m.useState({lotNumber:"",buyerName:"",parsedStyles:[{id:`style_${Date.now()}`,articleNumber:"",styleName:"",isValid:!1}],sizeConfiguration:{sizeNames:[],sizeRatios:[],isValid:!1},fabricInfo:{fabricName:"",fabricWidth:"",fabricStore:"",fabricType:"",fabricWeight:""},rollInfo:{rollCount:1,receivedDate:new Date().toISOString().split("T")[0],deliveryDate:"",urgencyLevel:"medium",rollsData:[]},orderInfo:{poNumber:"",buyerName:"",orderQuantity:0,seasonCode:""},articleProcedures:{},customTemplates:{}}),b=m.useCallback((r,c,n)=>{N(x=>{const j=[...x.parsedStyles];return j[r]={...j[r],[c]:n,isValid:c==="articleNumber"?n.trim()!==""&&j[r].styleName.trim()!=="":c==="styleName"?j[r].articleNumber.trim()!==""&&n.trim()!=="":j[r].isValid},{...x,parsedStyles:j}})},[]),v=m.useCallback(()=>{N(r=>({...r,parsedStyles:[...r.parsedStyles,{id:`style_${Date.now()}`,articleNumber:"",styleName:"",isValid:!1}]}))},[]),z=m.useCallback(r=>{N(c=>c.parsedStyles.length>1?{...c,parsedStyles:c.parsedStyles.filter((n,x)=>x!==r)}:c)},[]),h=m.useCallback(r=>{const c=r.split(/[;,:|\s]+/).map(n=>n.trim()).filter(n=>n.length>0);N(n=>({...n,sizeConfiguration:{...n.sizeConfiguration,sizeNames:c,isValid:c.length>0&&c.length===n.sizeConfiguration.sizeRatios.length}}))},[]),C=m.useCallback(r=>{const c=r.target.value.split(/[,;\s]+/).map(n=>parseInt(n.trim())).filter(n=>!isNaN(n)&&n>0);N(n=>({...n,sizeConfiguration:{...n.sizeConfiguration,sizeRatios:c,isValid:c.length>0&&c.length===n.sizeConfiguration.sizeNames.length}}))},[]),a=m.useCallback(r=>{const c=parseInt(r.target.value)||1;N(n=>({...n,rollInfo:{...n.rollInfo,rollCount:c}}))},[]),i=m.useCallback((r,c)=>{N(n=>({...n,fabricInfo:{...n.fabricInfo,[r]:c}}))},[]);return{wipData:l,setWipData:N,handleStyleChange:b,addNewStyle:v,removeStyle:z,handleSizeNamesChange:h,handleSizeRatiosChange:C,handleRollCountChange:a,handleFabricDataChange:i}};export{ge as CompleteWIPEntryWorkflow,ge as default,je as useWIPEntryState};
