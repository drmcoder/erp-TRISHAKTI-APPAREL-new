import{j as s,u as Wn}from"./query-vendor.DpsghfSz.js";import{r as c,c as B,a as ze}from"./react-vendor.CfKEcsXX.js";import{C as re,i as Ue,a as ie,n as Rt,F as jt,B as X,z as Xn,I as tn,A as Un}from"./index.CLAiwwTT.js";import{L as Nt}from"./LoadingSpinner.1kukr6Vo.js";import{F as nn,E as Yn}from"./empty-state.Cugu3L3L.js";import{F as lt}from"./ClockIcon.B0z2Gpg3.js";import{F as Ye}from"./ChartBarIcon.CTULyxD7.js";import{F as pt}from"./CalendarDaysIcon.DrGkQZXF.js";import{F as Hn}from"./UserIcon.BzFG2rMW.js";import{F as Kn}from"./CurrencyRupeeIcon.7xrTRvUQ.js";import{d as sn,e as qn,f as Vn,g as Gn,h as _n}from"./use-work-assignments.BoFkaWhq.js";import{F as Jn}from"./MagnifyingGlassIcon.BY4e_13K.js";import{F as Qn}from"./FunnelIcon.CvqkinxJ.js";import"./ui-vendor.EZF4ucWh.js";import"./firebase-vendor.D8xw0AXf.js";import"./utils-vendor.B0NEtgzl.js";function Zn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const ct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ie(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Et(e){return"nodeType"in e}function J(e){var t,n;return e?Ie(e)?e:Et(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function kt(e){const{Document:t}=J(e);return e instanceof t}function qe(e){return Ie(e)?!1:e instanceof J(e).HTMLElement}function rn(e){return e instanceof J(e).SVGElement}function Me(e){return e?Ie(e)?e.document:Et(e)?kt(e)?e:qe(e)||rn(e)?e.ownerDocument:document:document:document}const ae=ct?c.useLayoutEffect:c.useEffect;function dt(e){const t=c.useRef(e);return ae(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function es(){const e=c.useRef(null),t=c.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function He(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return ae(()=>{n.current!==e&&(n.current=e)},t),n}function Ve(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function nt(e){const t=dt(e),n=c.useRef(null),r=c.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,r]}function st(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let vt={};function Ge(e,t){return c.useMemo(()=>{if(t)return t;const n=vt[e]==null?0:vt[e]+1;return vt[e]=n,e+"-"+n},[e,t])}function an(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,l)=>{const o=Object.entries(l);for(const[d,u]of o){const h=a[d];h!=null&&(a[d]=h+e*u)}return a},{...t})}}const Ae=an(1),rt=an(-1);function ts(e){return"clientX"in e&&"clientY"in e}function ut(e){if(!e)return!1;const{KeyboardEvent:t}=J(e.target);return t&&e instanceof t}function ns(e){if(!e)return!1;const{TouchEvent:t}=J(e.target);return t&&e instanceof t}function it(e){if(ns(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return ts(e)?{x:e.clientX,y:e.clientY}:null}const we=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[we.Translate.toString(e),we.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Ut="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ss(e){return e.matches(Ut)?e:e.querySelector(Ut)}const rs={display:"none"};function is(e){let{id:t,value:n}=e;return B.createElement("div",{id:t,style:rs},n)}function as(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return B.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function os(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const on=c.createContext(null);function ls(e){const t=c.useContext(on);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function cs(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:i,event:a}=r;e.forEach(l=>{var o;return(o=l[i])==null?void 0:o.call(l,a)})},[e]),t]}const ds={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},us={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fs(e){let{announcements:t=us,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=ds}=e;const{announce:a,announcement:l}=os(),o=Ge("DndLiveRegion"),[d,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),ls(c.useMemo(()=>({onDragStart(f){let{active:x}=f;a(t.onDragStart({active:x}))},onDragMove(f){let{active:x,over:g}=f;t.onDragMove&&a(t.onDragMove({active:x,over:g}))},onDragOver(f){let{active:x,over:g}=f;a(t.onDragOver({active:x,over:g}))},onDragEnd(f){let{active:x,over:g}=f;a(t.onDragEnd({active:x,over:g}))},onDragCancel(f){let{active:x,over:g}=f;a(t.onDragCancel({active:x,over:g}))}}),[a,t])),!d)return null;const h=B.createElement(B.Fragment,null,B.createElement(is,{id:r,value:i.draggable}),B.createElement(as,{id:o,announcement:l}));return n?ze.createPortal(h,n):h}var U;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(U||(U={}));function at(){}const oe=Object.freeze({x:0,y:0});function hs(e,t){const n=it(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function ms(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function gs(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function xs(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=i-r,o=a-n;if(r<i&&n<a){const d=t.width*t.height,u=e.width*e.height,h=l*o,f=h/(d+u-h);return Number(f.toFixed(4))}return 0}const ps=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const a of r){const{id:l}=a,o=n.get(l);if(o){const d=xs(o,t);d>0&&i.push({id:l,data:{droppableContainer:a,value:d}})}}return i.sort(ms)};function vs(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ln(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:oe}function bs(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((l,o)=>({...l,top:l.top+e*o.y,bottom:l.bottom+e*o.y,left:l.left+e*o.x,right:l.right+e*o.x}),{...n})}}const ys=bs(1);function cn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ws(e,t,n){const r=cn(t);if(!r)return e;const{scaleX:i,scaleY:a,x:l,y:o}=r,d=e.left-l-(1-i)*parseFloat(n),u=e.top-o-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,f=a?e.height/a:e.height;return{width:h,height:f,top:u,right:d+h,bottom:u+f,left:d}}const js={ignoreTransform:!1};function Oe(e,t){t===void 0&&(t=js);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:h}=J(e).getComputedStyle(e);u&&(n=ws(n,u,h))}const{top:r,left:i,width:a,height:l,bottom:o,right:d}=n;return{top:r,left:i,width:a,height:l,bottom:o,right:d}}function Yt(e){return Oe(e,{ignoreTransform:!0})}function Ns(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Ss(e,t){return t===void 0&&(t=J(e).getComputedStyle(e)),t.position==="fixed"}function Cs(e,t){t===void 0&&(t=J(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function At(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(kt(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!qe(i)||rn(i)||n.includes(i))return n;const a=J(e).getComputedStyle(i);return i!==e&&Cs(i,a)&&n.push(i),Ss(i,a)?n:r(i.parentNode)}return e?r(e):n}function dn(e){const[t]=At(e,1);return t??null}function bt(e){return!ct||!e?null:Ie(e)?e:Et(e)?kt(e)||e===Me(e).scrollingElement?window:qe(e)?e:null:null}function un(e){return Ie(e)?e.scrollX:e.scrollLeft}function fn(e){return Ie(e)?e.scrollY:e.scrollTop}function St(e){return{x:un(e),y:fn(e)}}var K;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(K||(K={}));function hn(e){return!ct||!e?!1:e===document.scrollingElement}function mn(e){const t={x:0,y:0},n=hn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:l,isRight:o,maxScroll:r,minScroll:t}}const Ds={x:.2,y:.2};function Rs(e,t,n,r,i){let{top:a,left:l,right:o,bottom:d}=n;r===void 0&&(r=10),i===void 0&&(i=Ds);const{isTop:u,isBottom:h,isLeft:f,isRight:x}=mn(e),g={x:0,y:0},C={x:0,y:0},p={height:t.height*i.y,width:t.width*i.x};return!u&&a<=t.top+p.height?(g.y=K.Backward,C.y=r*Math.abs((t.top+p.height-a)/p.height)):!h&&d>=t.bottom-p.height&&(g.y=K.Forward,C.y=r*Math.abs((t.bottom-p.height-d)/p.height)),!x&&o>=t.right-p.width?(g.x=K.Forward,C.x=r*Math.abs((t.right-p.width-o)/p.width)):!f&&l<=t.left+p.width&&(g.x=K.Backward,C.x=r*Math.abs((t.left+p.width-l)/p.width)),{direction:g,speed:C}}function Es(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function gn(e){return e.reduce((t,n)=>Ae(t,St(n)),oe)}function ks(e){return e.reduce((t,n)=>t+un(n),0)}function As(e){return e.reduce((t,n)=>t+fn(n),0)}function xn(e,t){if(t===void 0&&(t=Oe),!e)return;const{top:n,left:r,bottom:i,right:a}=t(e);dn(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Is=[["x",["left","right"],ks],["y",["top","bottom"],As]];class It{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=At(n),i=gn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,l,o]of Is)for(const d of l)Object.defineProperty(this,d,{get:()=>{const u=o(r),h=i[a]-u;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Be{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Ms(e){const{EventTarget:t}=J(e);return e instanceof t?e:Me(e)}function yt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var se;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(se||(se={}));function Ht(e){e.preventDefault()}function Os(e){e.stopPropagation()}var M;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(M||(M={}));const pn={start:[M.Space,M.Enter],cancel:[M.Esc],end:[M.Space,M.Enter,M.Tab]},Ts=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case M.Right:return{...n,x:n.x+25};case M.Left:return{...n,x:n.x-25};case M.Down:return{...n,y:n.y+25};case M.Up:return{...n,y:n.y-25}}};class vn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Be(Me(n)),this.windowListeners=new Be(J(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(se.Resize,this.handleCancel),this.windowListeners.add(se.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(se.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&xn(r),n(oe)}handleKeyDown(t){if(ut(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=pn,coordinateGetter:l=Ts,scrollBehavior:o="smooth"}=i,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:oe;this.referenceCoordinates||(this.referenceCoordinates=h);const f=l(t,{active:n,context:r.current,currentCoordinates:h});if(f){const x=rt(f,h),g={x:0,y:0},{scrollableAncestors:C}=r.current;for(const p of C){const v=t.code,{isTop:w,isRight:y,isLeft:b,isBottom:R,maxScroll:E,minScroll:A}=mn(p),N=Es(p),D={x:Math.min(v===M.Right?N.right-N.width/2:N.right,Math.max(v===M.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(v===M.Down?N.bottom-N.height/2:N.bottom,Math.max(v===M.Down?N.top:N.top+N.height/2,f.y))},T=v===M.Right&&!y||v===M.Left&&!b,$=v===M.Down&&!R||v===M.Up&&!w;if(T&&D.x!==f.x){const m=p.scrollLeft+x.x,S=v===M.Right&&m<=E.x||v===M.Left&&m>=A.x;if(S&&!x.y){p.scrollTo({left:m,behavior:o});return}S?g.x=p.scrollLeft-m:g.x=v===M.Right?p.scrollLeft-E.x:p.scrollLeft-A.x,g.x&&p.scrollBy({left:-g.x,behavior:o});break}else if($&&D.y!==f.y){const m=p.scrollTop+x.y,S=v===M.Down&&m<=E.y||v===M.Up&&m>=A.y;if(S&&!x.x){p.scrollTo({top:m,behavior:o});return}S?g.y=p.scrollTop-m:g.y=v===M.Down?p.scrollTop-E.y:p.scrollTop-A.y,g.y&&p.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,Ae(rt(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=pn,onActivation:i}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const o=a.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function Kt(e){return!!(e&&"distance"in e)}function qt(e){return!!(e&&"delay"in e)}class Mt{constructor(t,n,r){var i;r===void 0&&(r=Ms(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:l}=a;this.props=t,this.events=n,this.document=Me(l),this.documentListeners=new Be(this.document),this.listeners=new Be(r),this.windowListeners=new Be(J(l)),this.initialCoordinates=(i=it(a))!=null?i:oe,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(se.Resize,this.handleCancel),this.windowListeners.add(se.DragStart,Ht),this.windowListeners.add(se.VisibilityChange,this.handleCancel),this.windowListeners.add(se.ContextMenu,Ht),this.documentListeners.add(se.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Kt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(se.Click,Os,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(se.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:l,options:{activationConstraint:o}}=a;if(!i)return;const d=(n=it(t))!=null?n:oe,u=rt(i,d);if(!r&&o){if(Kt(o)){if(o.tolerance!=null&&yt(u,o.tolerance))return this.handleCancel();if(yt(u,o.distance))return this.handleStart()}if(qt(o)&&yt(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===M.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ls={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class bn extends Mt{constructor(t){const{event:n}=t,r=Me(n.target);super(t,Ls,r)}}bn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Ps={move:{name:"mousemove"},end:{name:"mouseup"}};var Ct;(function(e){e[e.RightClick=2]="RightClick"})(Ct||(Ct={}));class $s extends Mt{constructor(t){super(t,Ps,Me(t.event.target))}}$s.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ct.RightClick?!1:(r?.({event:n}),!0)}}];const wt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Fs extends Mt{constructor(t){super(t,wt)}static setup(){return window.addEventListener(wt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(wt.move.name,t)};function t(){}}}Fs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var We;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(We||(We={}));var ot;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ot||(ot={}));function zs(e){let{acceleration:t,activator:n=We.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:l=5,order:o=ot.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:x}=e;const g=Ws({delta:f,disabled:!a}),[C,p]=es(),v=c.useRef({x:0,y:0}),w=c.useRef({x:0,y:0}),y=c.useMemo(()=>{switch(n){case We.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case We.DraggableRect:return i}},[n,i,d]),b=c.useRef(null),R=c.useCallback(()=>{const A=b.current;if(!A)return;const N=v.current.x*w.current.x,D=v.current.y*w.current.y;A.scrollBy(N,D)},[]),E=c.useMemo(()=>o===ot.TreeOrder?[...u].reverse():u,[o,u]);c.useEffect(()=>{if(!a||!u.length||!y){p();return}for(const A of E){if(r?.(A)===!1)continue;const N=u.indexOf(A),D=h[N];if(!D)continue;const{direction:T,speed:$}=Rs(A,D,y,t,x);for(const m of["x","y"])g[m][T[m]]||($[m]=0,T[m]=0);if($.x>0||$.y>0){p(),b.current=A,C(R,l),v.current=$,w.current=T;return}}v.current={x:0,y:0},w.current={x:0,y:0},p()},[t,R,r,p,a,l,JSON.stringify(y),JSON.stringify(g),C,u,E,h,JSON.stringify(x)])}const Bs={x:{[K.Backward]:!1,[K.Forward]:!1},y:{[K.Backward]:!1,[K.Forward]:!1}};function Ws(e){let{delta:t,disabled:n}=e;const r=st(t);return Ve(i=>{if(n||!r||!i)return Bs;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[K.Backward]:i.x[K.Backward]||a.x===-1,[K.Forward]:i.x[K.Forward]||a.x===1},y:{[K.Backward]:i.y[K.Backward]||a.y===-1,[K.Forward]:i.y[K.Forward]||a.y===1}}},[n,t,r])}function Xs(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ve(i=>{var a;return t==null?null:(a=r??i)!=null?a:null},[r,t])}function Us(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...a]},[]),[e,t])}var Ke;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ke||(Ke={}));var Dt;(function(e){e.Optimized="optimized"})(Dt||(Dt={}));const Vt=new Map;function Ys(e,t){let{dragging:n,dependencies:r,config:i}=t;const[a,l]=c.useState(null),{frequency:o,measure:d,strategy:u}=i,h=c.useRef(e),f=v(),x=He(f),g=c.useCallback(function(w){w===void 0&&(w=[]),!x.current&&l(y=>y===null?w:y.concat(w.filter(b=>!y.includes(b))))},[x]),C=c.useRef(null),p=Ve(w=>{if(f&&!n)return Vt;if(!w||w===Vt||h.current!==e||a!=null){const y=new Map;for(let b of e){if(!b)continue;if(a&&a.length>0&&!a.includes(b.id)&&b.rect.current){y.set(b.id,b.rect.current);continue}const R=b.node.current,E=R?new It(d(R),R):null;b.rect.current=E,E&&y.set(b.id,E)}return y}return w},[e,a,n,f,d]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{f||g()},[n,f]),c.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),c.useEffect(()=>{f||typeof o!="number"||C.current!==null||(C.current=setTimeout(()=>{g(),C.current=null},o))},[o,f,g,...r]),{droppableRects:p,measureDroppableContainers:g,measuringScheduled:a!=null};function v(){switch(u){case Ke.Always:return!1;case Ke.BeforeDragging:return n;default:return!n}}}function Ot(e,t){return Ve(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Hs(e,t){return Ot(e,t)}function Ks(e){let{callback:t,disabled:n}=e;const r=dt(t),i=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return c.useEffect(()=>()=>i?.disconnect(),[i]),i}function ft(e){let{callback:t,disabled:n}=e;const r=dt(t),i=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return c.useEffect(()=>()=>i?.disconnect(),[i]),i}function qs(e){return new It(Oe(e),e)}function Gt(e,t,n){t===void 0&&(t=qs);const[r,i]=c.useState(null);function a(){i(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const h=t(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const l=Ks({callback(d){if(e)for(const u of d){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),o=ft({callback:a});return ae(()=>{a(),e?(o?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),l?.disconnect())},[e]),r}function Vs(e){const t=Ot(e);return ln(e,t)}const _t=[];function Gs(e){const t=c.useRef(e),n=Ve(r=>e?r&&r!==_t&&e&&t.current&&e.parentNode===t.current.parentNode?r:At(e):_t,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function _s(e){const[t,n]=c.useState(null),r=c.useRef(e),i=c.useCallback(a=>{const l=bt(a.target);l&&n(o=>o?(o.set(l,St(l)),new Map(o)):null)},[]);return c.useEffect(()=>{const a=r.current;if(e!==a){l(a);const o=e.map(d=>{const u=bt(d);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,St(u)]):null}).filter(d=>d!=null);n(o.length?new Map(o):null),r.current=e}return()=>{l(e),l(a)};function l(o){o.forEach(d=>{const u=bt(d);u?.removeEventListener("scroll",i)})}},[i,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,l)=>Ae(a,l),oe):gn(e):oe,[e,t])}function Jt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==oe;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?rt(e,n.current):oe}function Js(e){c.useEffect(()=>{if(!ct)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Qs(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=l=>{a(l,t)},n},{}),[e,t])}function yn(e){return c.useMemo(()=>e?Ns(e):null,[e])}const Qt=[];function Zs(e,t){t===void 0&&(t=Oe);const[n]=e,r=yn(n?J(n):null),[i,a]=c.useState(Qt);function l(){a(()=>e.length?e.map(d=>hn(d)?r:new It(t(d),d)):Qt)}const o=ft({callback:l});return ae(()=>{o?.disconnect(),l(),e.forEach(d=>o?.observe(d))},[e]),i}function wn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return qe(t)?t:e}function er(e){let{measure:t}=e;const[n,r]=c.useState(null),i=c.useCallback(u=>{for(const{target:h}of u)if(qe(h)){r(f=>{const x=t(h);return f?{...f,width:x.width,height:x.height}:x});break}},[t]),a=ft({callback:i}),l=c.useCallback(u=>{const h=wn(u);a?.disconnect(),h&&a?.observe(h),r(h?t(h):null)},[t,a]),[o,d]=nt(l);return c.useMemo(()=>({nodeRef:o,rect:n,setRef:d}),[n,o,d])}const tr=[{sensor:bn,options:{}},{sensor:vn,options:{}}],nr={current:{}},tt={draggable:{measure:Yt},droppable:{measure:Yt,strategy:Ke.WhileDragging,frequency:Dt.Optimized},dragOverlay:{measure:Oe}};class Xe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const sr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:at},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tt,measureDroppableContainers:at,windowRect:null,measuringScheduled:!1},jn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:at,draggableNodes:new Map,over:null,measureDroppableContainers:at},_e=c.createContext(jn),Nn=c.createContext(sr);function rr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xe}}}function ir(e,t){switch(t.type){case U.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case U.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case U.DragEnd:case U.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case U.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Xe(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case U.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new Xe(e.droppable.containers);return l.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case U.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Xe(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function ar(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=c.useContext(_e),a=st(r),l=st(n?.id);return c.useEffect(()=>{if(!t&&!r&&a&&l!=null){if(!ut(a)||document.activeElement===a.target)return;const o=i.get(l);if(!o)return;const{activatorNode:d,node:u}=o;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[d.current,u.current]){if(!h)continue;const f=ss(h);if(f){f.focus();break}}})}},[r,t,i,l,a]),null}function Sn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...r}),n):n}function or(e){return c.useMemo(()=>({draggable:{...tt.draggable,...e?.draggable},droppable:{...tt.droppable,...e?.droppable},dragOverlay:{...tt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function lr(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const a=c.useRef(!1),{x:l,y:o}=typeof i=="boolean"?{x:i,y:i}:i;ae(()=>{if(!l&&!o||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=ln(h,r);if(l||(f.x=0),o||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const x=dn(u);x&&x.scrollBy({top:f.y,left:f.x})}},[t,l,o,r,n])}const ht=c.createContext({...oe,scaleX:1,scaleY:1});var ye;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ye||(ye={}));const cr=c.memo(function(t){var n,r,i,a;let{id:l,accessibility:o,autoScroll:d=!0,children:u,sensors:h=tr,collisionDetection:f=ps,measuring:x,modifiers:g,...C}=t;const p=c.useReducer(ir,void 0,rr),[v,w]=p,[y,b]=cs(),[R,E]=c.useState(ye.Uninitialized),A=R===ye.Initialized,{draggable:{active:N,nodes:D,translate:T},droppable:{containers:$}}=v,m=N!=null?D.get(N):null,S=c.useRef({initial:null,translated:null}),I=c.useMemo(()=>{var _;return N!=null?{id:N,data:(_=m?.data)!=null?_:nr,rect:S}:null},[N,m]),F=c.useRef(null),[z,L]=c.useState(null),[k,V]=c.useState(null),W=He(C,Object.values(C)),G=Ge("DndDescribedBy",l),je=c.useMemo(()=>$.getEnabled(),[$]),Y=or(x),{droppableRects:Q,measureDroppableContainers:j,measuringScheduled:P}=Ys(je,{dragging:A,dependencies:[T.x,T.y],config:Y.droppable}),H=Xs(D,N),Ne=c.useMemo(()=>k?it(k):null,[k]),le=Bn(),fe=Hs(H,Y.draggable.measure);lr({activeNode:N!=null?D.get(N):null,config:le.layoutShiftCompensation,initialRect:fe,measure:Y.draggable.measure});const O=Gt(H,Y.draggable.measure,fe),Te=Gt(H?H.parentElement:null),ce=c.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=$.getNodeFor((n=ce.current.over)==null?void 0:n.id),he=er({measure:Y.dragOverlay.measure}),Ce=(r=he.nodeRef.current)!=null?r:H,De=A?(i=he.rect)!=null?i:O:null,Lt=!!(he.nodeRef.current&&he.rect),Pt=Vs(Lt?null:O),mt=yn(Ce?J(Ce):null),ge=Gs(A?Se??H:null),Je=Zs(ge),Qe=Sn(g,{transform:{x:T.x-Pt.x,y:T.y-Pt.y,scaleX:1,scaleY:1},activatorEvent:k,active:I,activeNodeRect:O,containerNodeRect:Te,draggingNodeRect:De,over:ce.current.over,overlayNodeRect:he.rect,scrollableAncestors:ge,scrollableAncestorRects:Je,windowRect:mt}),$t=Ne?Ae(Ne,T):null,Ft=_s(ge),On=Jt(Ft),Tn=Jt(Ft,[O]),Re=Ae(Qe,On),Ee=De?ys(De,Qe):null,Le=I&&Ee?f({active:I,collisionRect:Ee,droppableRects:Q,droppableContainers:je,pointerCoordinates:$t}):null,zt=gs(Le,"id"),[xe,Bt]=c.useState(null),Ln=Lt?Qe:Ae(Qe,Tn),Pn=vs(Ln,(a=xe?.rect)!=null?a:null,O),gt=c.useRef(null),Wt=c.useCallback((_,Z)=>{let{sensor:ee,options:pe}=Z;if(F.current==null)return;const ne=D.get(F.current);if(!ne)return;const te=_.nativeEvent,de=new ee({active:F.current,activeNode:ne,event:te,options:pe,context:ce,onAbort(q){if(!D.get(q))return;const{onDragAbort:ue}=W.current,me={id:q};ue?.(me),y({type:"onDragAbort",event:me})},onPending(q,ve,ue,me){if(!D.get(q))return;const{onDragPending:$e}=W.current,be={id:q,constraint:ve,initialCoordinates:ue,offset:me};$e?.(be),y({type:"onDragPending",event:be})},onStart(q){const ve=F.current;if(ve==null)return;const ue=D.get(ve);if(!ue)return;const{onDragStart:me}=W.current,Pe={activatorEvent:te,active:{id:ve,data:ue.data,rect:S}};ze.unstable_batchedUpdates(()=>{me?.(Pe),E(ye.Initializing),w({type:U.DragStart,initialCoordinates:q,active:ve}),y({type:"onDragStart",event:Pe}),L(gt.current),V(te)})},onMove(q){w({type:U.DragMove,coordinates:q})},onEnd:ke(U.DragEnd),onCancel:ke(U.DragCancel)});gt.current=de;function ke(q){return async function(){const{active:ue,collisions:me,over:Pe,scrollAdjustedTranslate:$e}=ce.current;let be=null;if(ue&&$e){const{cancelDrop:Fe}=W.current;be={activatorEvent:te,active:ue,collisions:me,delta:$e,over:Pe},q===U.DragEnd&&typeof Fe=="function"&&await Promise.resolve(Fe(be))&&(q=U.DragCancel)}F.current=null,ze.unstable_batchedUpdates(()=>{w({type:q}),E(ye.Uninitialized),Bt(null),L(null),V(null),gt.current=null;const Fe=q===U.DragEnd?"onDragEnd":"onDragCancel";if(be){const xt=W.current[Fe];xt?.(be),y({type:Fe,event:be})}})}}},[D]),$n=c.useCallback((_,Z)=>(ee,pe)=>{const ne=ee.nativeEvent,te=D.get(pe);if(F.current!==null||!te||ne.dndKit||ne.defaultPrevented)return;const de={active:te};_(ee,Z.options,de)===!0&&(ne.dndKit={capturedBy:Z.sensor},F.current=pe,Wt(ee,Z))},[D,Wt]),Xt=Us(h,$n);Js(h),ae(()=>{O&&R===ye.Initializing&&E(ye.Initialized)},[O,R]),c.useEffect(()=>{const{onDragMove:_}=W.current,{active:Z,activatorEvent:ee,collisions:pe,over:ne}=ce.current;if(!Z||!ee)return;const te={active:Z,activatorEvent:ee,collisions:pe,delta:{x:Re.x,y:Re.y},over:ne};ze.unstable_batchedUpdates(()=>{_?.(te),y({type:"onDragMove",event:te})})},[Re.x,Re.y]),c.useEffect(()=>{const{active:_,activatorEvent:Z,collisions:ee,droppableContainers:pe,scrollAdjustedTranslate:ne}=ce.current;if(!_||F.current==null||!Z||!ne)return;const{onDragOver:te}=W.current,de=pe.get(zt),ke=de&&de.rect.current?{id:de.id,rect:de.rect.current,data:de.data,disabled:de.disabled}:null,q={active:_,activatorEvent:Z,collisions:ee,delta:{x:ne.x,y:ne.y},over:ke};ze.unstable_batchedUpdates(()=>{Bt(ke),te?.(q),y({type:"onDragOver",event:q})})},[zt]),ae(()=>{ce.current={activatorEvent:k,active:I,activeNode:H,collisionRect:Ee,collisions:Le,droppableRects:Q,draggableNodes:D,draggingNode:Ce,draggingNodeRect:De,droppableContainers:$,over:xe,scrollableAncestors:ge,scrollAdjustedTranslate:Re},S.current={initial:De,translated:Ee}},[I,H,Le,Ee,D,Ce,De,Q,$,xe,ge,Re]),zs({...le,delta:T,draggingRect:Ee,pointerCoordinates:$t,scrollableAncestors:ge,scrollableAncestorRects:Je});const Fn=c.useMemo(()=>({active:I,activeNode:H,activeNodeRect:O,activatorEvent:k,collisions:Le,containerNodeRect:Te,dragOverlay:he,draggableNodes:D,droppableContainers:$,droppableRects:Q,over:xe,measureDroppableContainers:j,scrollableAncestors:ge,scrollableAncestorRects:Je,measuringConfiguration:Y,measuringScheduled:P,windowRect:mt}),[I,H,O,k,Le,Te,he,D,$,Q,xe,j,ge,Je,Y,P,mt]),zn=c.useMemo(()=>({activatorEvent:k,activators:Xt,active:I,activeNodeRect:O,ariaDescribedById:{draggable:G},dispatch:w,draggableNodes:D,over:xe,measureDroppableContainers:j}),[k,Xt,I,O,w,G,D,xe,j]);return B.createElement(on.Provider,{value:b},B.createElement(_e.Provider,{value:zn},B.createElement(Nn.Provider,{value:Fn},B.createElement(ht.Provider,{value:Pn},u)),B.createElement(ar,{disabled:o?.restoreFocus===!1})),B.createElement(fs,{...o,hiddenTextDescribedById:G}));function Bn(){const _=z?.autoScrollEnabled===!1,Z=typeof d=="object"?d.enabled===!1:d===!1,ee=A&&!_&&!Z;return typeof d=="object"?{...d,enabled:ee}:{enabled:ee}}}),dr=c.createContext(null),Zt="button",ur="Draggable";function fr(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const a=Ge(ur),{activators:l,activatorEvent:o,active:d,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:x}=c.useContext(_e),{role:g=Zt,roleDescription:C="draggable",tabIndex:p=0}=i??{},v=d?.id===t,w=c.useContext(v?ht:dr),[y,b]=nt(),[R,E]=nt(),A=Qs(l,t),N=He(n);ae(()=>(f.set(t,{id:t,key:a,node:y,activatorNode:R,data:N}),()=>{const T=f.get(t);T&&T.key===a&&f.delete(t)}),[f,t]);const D=c.useMemo(()=>({role:g,tabIndex:p,"aria-disabled":r,"aria-pressed":v&&g===Zt?!0:void 0,"aria-roledescription":C,"aria-describedby":h.draggable}),[r,g,p,v,C,h.draggable]);return{active:d,activatorEvent:o,activeNodeRect:u,attributes:D,isDragging:v,listeners:r?void 0:A,node:y,over:x,setNodeRef:b,setActivatorNodeRef:E,transform:w}}function Cn(){return c.useContext(Nn)}const hr="Droppable",mr={timeout:25};function Dn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const a=Ge(hr),{active:l,dispatch:o,over:d,measureDroppableContainers:u}=c.useContext(_e),h=c.useRef({disabled:n}),f=c.useRef(!1),x=c.useRef(null),g=c.useRef(null),{disabled:C,updateMeasurementsFor:p,timeout:v}={...mr,...i},w=He(p??r),y=c.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),g.current=null},v)},[v]),b=ft({callback:y,disabled:C||!l}),R=c.useCallback((D,T)=>{b&&(T&&(b.unobserve(T),f.current=!1),D&&b.observe(D))},[b]),[E,A]=nt(R),N=He(t);return c.useEffect(()=>{!b||!E.current||(b.disconnect(),f.current=!1,b.observe(E.current))},[E,b]),c.useEffect(()=>(o({type:U.RegisterDroppable,element:{id:r,key:a,disabled:n,node:E,rect:x,data:N}}),()=>o({type:U.UnregisterDroppable,key:a,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(o({type:U.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,o]),{active:l,rect:x,isOver:d?.id===r,node:E,over:d,setNodeRef:A}}function gr(e){let{animation:t,children:n}=e;const[r,i]=c.useState(null),[a,l]=c.useState(null),o=st(n);return!n&&!r&&o&&i(o),ae(()=>{if(!a)return;const d=r?.key,u=r?.props.id;if(d==null||u==null){i(null);return}Promise.resolve(t(u,a)).then(()=>{i(null)})},[t,r,a]),B.createElement(B.Fragment,null,n,r?c.cloneElement(r,{ref:l}):null)}const xr={x:0,y:0,scaleX:1,scaleY:1};function pr(e){let{children:t}=e;return B.createElement(_e.Provider,{value:jn},B.createElement(ht.Provider,{value:xr},t))}const vr={position:"fixed",touchAction:"none"},br=e=>ut(e)?"transform 250ms ease":void 0,yr=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:l,rect:o,style:d,transform:u,transition:h=br}=e;if(!o)return null;const f=i?u:{...u,scaleX:1,scaleY:1},x={...vr,width:o.width,height:o.height,top:o.top,left:o.left,transform:we.Transform.toString(f),transformOrigin:i&&r?hs(r,o):void 0,transition:typeof h=="function"?h(r):h,...d};return B.createElement(n,{className:l,style:x,ref:t},a)}),wr=e=>t=>{let{active:n,dragOverlay:r}=t;const i={},{styles:a,className:l}=e;if(a!=null&&a.active)for(const[o,d]of Object.entries(a.active))d!==void 0&&(i[o]=n.node.style.getPropertyValue(o),n.node.style.setProperty(o,d));if(a!=null&&a.dragOverlay)for(const[o,d]of Object.entries(a.dragOverlay))d!==void 0&&r.node.style.setProperty(o,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,u]of Object.entries(i))n.node.style.setProperty(d,u);l!=null&&l.active&&n.node.classList.remove(l.active)}},jr=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:we.Transform.toString(t)},{transform:we.Transform.toString(n)}]},Nr={duration:250,easing:"ease",keyframes:jr,sideEffects:wr({styles:{active:{opacity:"0"}}})};function Sr(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return dt((a,l)=>{if(t===null)return;const o=n.get(a);if(!o)return;const d=o.node.current;if(!d)return;const u=wn(l);if(!u)return;const{transform:h}=J(l).getComputedStyle(l),f=cn(h);if(!f)return;const x=typeof t=="function"?t:Cr(t);return xn(d,i.draggable.measure),x({active:{id:a,data:o.data,node:d,rect:i.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:i.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:i,transform:f})})}function Cr(e){const{duration:t,easing:n,sideEffects:r,keyframes:i}={...Nr,...e};return a=>{let{active:l,dragOverlay:o,transform:d,...u}=a;if(!t)return;const h={x:o.rect.left-l.rect.left,y:o.rect.top-l.rect.top},f={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/o.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/o.rect.height:1},x={x:d.x-h.x,y:d.y-h.y,...f},g=i({...u,active:l,dragOverlay:o,transform:{initial:d,final:x}}),[C]=g,p=g[g.length-1];if(JSON.stringify(C)===JSON.stringify(p))return;const v=r?.({active:l,dragOverlay:o,...u}),w=o.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(y=>{w.onfinish=()=>{v?.(),y()}})}}let en=0;function Dr(e){return c.useMemo(()=>{if(e!=null)return en++,en},[e])}const Rr=B.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:i,transition:a,modifiers:l,wrapperElement:o="div",className:d,zIndex:u=999}=e;const{activatorEvent:h,active:f,activeNodeRect:x,containerNodeRect:g,draggableNodes:C,droppableContainers:p,dragOverlay:v,over:w,measuringConfiguration:y,scrollableAncestors:b,scrollableAncestorRects:R,windowRect:E}=Cn(),A=c.useContext(ht),N=Dr(f?.id),D=Sn(l,{activatorEvent:h,active:f,activeNodeRect:x,containerNodeRect:g,draggingNodeRect:v.rect,over:w,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:R,transform:A,windowRect:E}),T=Ot(x),$=Sr({config:r,draggableNodes:C,droppableContainers:p,measuringConfiguration:y}),m=T?v.setRef:void 0;return B.createElement(pr,null,B.createElement(gr,{animation:$},f&&N?B.createElement(yr,{key:N,id:f.id,ref:m,as:o,activatorEvent:h,adjustScale:t,className:d,transition:a,rect:T,style:{zIndex:u,...i},transform:D},n):null))});function Rn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Er(e,t){return e.reduce((n,r,i)=>{const a=t.get(r);return a&&(n[i]=a),n},Array(e.length))}function Ze(e){return e!==null&&e>=0}function kr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ar(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const En=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const a=Rn(t,r,n),l=t[i],o=a[i];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},et={scaleX:1,scaleY:1},Ir=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:l}=e;const o=(t=a[n])!=null?t:r;if(!o)return null;if(i===n){const u=a[l];return u?{x:0,y:n<l?u.top+u.height-(o.top+o.height):u.top-o.top,...et}:null}const d=Mr(a,i,n);return i>n&&i<=l?{x:0,y:-o.height-d,...et}:i<n&&i>=l?{x:0,y:o.height+d,...et}:{x:0,y:0,...et}};function Mr(e,t,n){const r=e[t],i=e[t-1],a=e[t+1];return r?n<t?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const kn="Sortable",An=B.createContext({activeIndex:-1,containerId:kn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:En,disabled:{draggable:!1,droppable:!1}});function Or(e){let{children:t,id:n,items:r,strategy:i=En,disabled:a=!1}=e;const{active:l,dragOverlay:o,droppableRects:d,over:u,measureDroppableContainers:h}=Cn(),f=Ge(kn,n),x=o.rect!==null,g=c.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),C=l!=null,p=l?g.indexOf(l.id):-1,v=u?g.indexOf(u.id):-1,w=c.useRef(g),y=!kr(g,w.current),b=v!==-1&&p===-1||y,R=Ar(a);ae(()=>{y&&C&&h(g)},[y,g,C,h]),c.useEffect(()=>{w.current=g},[g]);const E=c.useMemo(()=>({activeIndex:p,containerId:f,disabled:R,disableTransforms:b,items:g,overIndex:v,useDragOverlay:x,sortedRects:Er(g,d),strategy:i}),[p,f,R.draggable,R.droppable,b,g,v,d,x,i]);return B.createElement(An.Provider,{value:E},t)}const Tr=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Rn(n,r,i).indexOf(t)},Lr=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:a,newIndex:l,previousItems:o,previousContainerId:d,transition:u}=e;return!u||!r||o!==a&&i===l?!1:n?!0:l!==i&&t===d},Pr={duration:200,easing:"ease"},In="transform",$r=we.Transition.toString({property:In,duration:0,easing:"linear"}),Fr={roleDescription:"sortable"};function zr(e){let{disabled:t,index:n,node:r,rect:i}=e;const[a,l]=c.useState(null),o=c.useRef(n);return ae(()=>{if(!t&&n!==o.current&&r.current){const d=i.current;if(d){const u=Oe(r.current,{ignoreTransform:!0}),h={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(h.x||h.y)&&l(h)}}n!==o.current&&(o.current=n)},[t,n,r,i]),c.useEffect(()=>{a&&l(null)},[a]),a}function Br(e){let{animateLayoutChanges:t=Lr,attributes:n,disabled:r,data:i,getNewIndex:a=Tr,id:l,strategy:o,resizeObserverConfig:d,transition:u=Pr}=e;const{items:h,containerId:f,activeIndex:x,disabled:g,disableTransforms:C,sortedRects:p,overIndex:v,useDragOverlay:w,strategy:y}=c.useContext(An),b=Wr(r,g),R=h.indexOf(l),E=c.useMemo(()=>({sortable:{containerId:f,index:R,items:h},...i}),[f,i,R,h]),A=c.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:N,node:D,isOver:T,setNodeRef:$}=Dn({id:l,data:E,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...d}}),{active:m,activatorEvent:S,activeNodeRect:I,attributes:F,setNodeRef:z,listeners:L,isDragging:k,over:V,setActivatorNodeRef:W,transform:G}=fr({id:l,data:E,attributes:{...Fr,...n},disabled:b.draggable}),je=Zn($,z),Y=!!m,Q=Y&&!C&&Ze(x)&&Ze(v),j=!w&&k,P=j&&Q?G:null,Ne=Q?P??(o??y)({rects:p,activeNodeRect:I,activeIndex:x,overIndex:v,index:R}):null,le=Ze(x)&&Ze(v)?a({id:l,items:h,activeIndex:x,overIndex:v}):R,fe=m?.id,O=c.useRef({activeId:fe,items:h,newIndex:le,containerId:f}),Te=h!==O.current.items,ce=t({active:m,containerId:f,isDragging:k,isSorting:Y,id:l,index:R,items:h,newIndex:O.current.newIndex,previousItems:O.current.items,previousContainerId:O.current.containerId,transition:u,wasDragging:O.current.activeId!=null}),Se=zr({disabled:!ce,index:R,node:D,rect:N});return c.useEffect(()=>{Y&&O.current.newIndex!==le&&(O.current.newIndex=le),f!==O.current.containerId&&(O.current.containerId=f),h!==O.current.items&&(O.current.items=h)},[Y,le,f,h]),c.useEffect(()=>{if(fe===O.current.activeId)return;if(fe!=null&&O.current.activeId==null){O.current.activeId=fe;return}const Ce=setTimeout(()=>{O.current.activeId=fe},50);return()=>clearTimeout(Ce)},[fe]),{active:m,activeIndex:x,attributes:F,data:E,rect:N,index:R,newIndex:le,items:h,isOver:T,isSorting:Y,isDragging:k,listeners:L,node:D,overIndex:v,over:V,setNodeRef:je,setActivatorNodeRef:W,setDroppableNodeRef:$,setDraggableNodeRef:z,transform:Se??Ne,transition:he()};function he(){if(Se||Te&&O.current.newIndex===R)return $r;if(!(j&&!ut(S)||!u)&&(Y||ce))return we.Transition.toString({...u,property:In})}}function Wr(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}M.Down,M.Right,M.Up,M.Left;const Tt={pending:{label:"Pending",color:"gray",icon:"â³"},assigned:{label:"Assigned",color:"blue",icon:"ðŸ‘¤"},started:{label:"Started",color:"yellow",icon:"ðŸš€"},paused:{label:"Paused",color:"orange",icon:"â¸ï¸"},completed:{label:"Completed",color:"green",icon:"âœ…"},cancelled:{label:"Cancelled",color:"red",icon:"âŒ"}},Mn={low:{label:"Low",color:"gray",icon:"â¬‡ï¸",urgencyScore:1},medium:{label:"Medium",color:"blue",icon:"âž¡ï¸",urgencyScore:2},high:{label:"High",color:"yellow",icon:"â¬†ï¸",urgencyScore:3},urgent:{label:"Urgent",color:"red",icon:"ðŸš¨",urgencyScore:4}},Xr=({bundle:e,onView:t,onEdit:n,onAssign:r,onViewProgress:i,className:a="",showActions:l=!0})=>{const o=Mn[e.priority],d=Tt[e.status],u=e.totalPieces>0?e.completedPieces/e.totalPieces*100:0,h=Math.ceil((new Date(e.targetCompletionDate).getTime()-Date.now())/(1e3*60*60*24)),f=h<0,x=h<=2||e.isUrgent;return s.jsxs(re,{className:`p-4 hover:shadow-md transition-shadow ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:e.bundleNumber}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Order: ",e.orderNumber]})]}),e.isUrgent&&s.jsx(Ue,{className:"h-5 w-5 text-red-500"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(ie,{variant:o.color,className:"flex items-center space-x-1",children:[s.jsx("span",{children:o.icon}),s.jsx("span",{className:"hidden sm:inline",children:o.label})]}),s.jsxs(ie,{variant:d.color,className:"flex items-center space-x-1",children:[s.jsx("span",{children:d.icon}),s.jsx("span",{className:"hidden sm:inline",children:d.label})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Garment"}),s.jsx("p",{className:"font-medium text-gray-900",children:e.garmentType})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Size"}),s.jsx("p",{className:"font-medium text-gray-900",children:e.garmentSize})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Quantity"}),s.jsxs("p",{className:"font-medium text-gray-900",children:[e.quantity," pcs"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:`font-medium ${u===100?"text-green-600":"text-gray-900"}`,children:[Math.round(u),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${u===100?"bg-green-500":u>50?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${u}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsxs("span",{children:[e.completedPieces," completed"]}),s.jsxs("span",{children:[e.remainingPieces," remaining"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Operators"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.assignedOperators.length})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(lt,{className:"h-4 w-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Est. Hours"}),s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.estimatedHours,"h"]})]})]}),e.efficiency&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Efficiency"}),s.jsxs("p",{className:`text-sm font-medium ${e.efficiency>.8?"text-green-600":e.efficiency>.6?"text-yellow-600":"text-red-600"}`,children:[Math.round(e.efficiency*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{className:"h-4 w-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Due"}),s.jsx("p",{className:`text-sm font-medium ${f?"text-red-600":x?"text-yellow-600":"text-gray-900"}`,children:f?`${Math.abs(h)}d ago`:h===0?"Today":`${h}d`})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 mb-1",children:"Start Date"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(pt,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:"text-gray-900",children:new Date(e.targetStartDate).toLocaleDateString()})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 mb-1",children:"Target Completion"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(pt,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:`${f?"text-red-600":"text-gray-900"}`,children:new Date(e.targetCompletionDate).toLocaleDateString()})]})]})]}),e.actualStartDate&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Actual Progress"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(jt,{className:"h-3 w-3 text-green-500"}),s.jsxs("span",{className:"text-xs text-gray-900",children:["Started: ",new Date(e.actualStartDate).toLocaleDateString()]}),e.actualCompletionDate&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:"â€¢"}),s.jsxs("span",{className:"text-xs text-gray-900",children:["Completed: ",new Date(e.actualCompletionDate).toLocaleDateString()]})]})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Work Items"}),s.jsxs("span",{className:"text-gray-500",children:[e.workItems.length," items"]})]}),e.workItems.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.workItems.slice(0,3).map((g,C)=>s.jsx(ie,{variant:"outline",className:"text-xs",children:g.operation},C)),e.workItems.length>3&&s.jsxs(ie,{variant:"outline",className:"text-xs",children:["+",e.workItems.length-3," more"]})]})]}),e.notes&&s.jsx("div",{className:"mb-4 p-2 bg-yellow-50 rounded border-l-4 border-yellow-400",children:s.jsx("p",{className:"text-sm text-gray-700",children:e.notes})}),l&&s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(X,{variant:"ghost",size:"sm",onClick:t,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"View Details"}),e.status!=="completed"&&s.jsx(X,{variant:"ghost",size:"sm",onClick:n,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50",children:"Edit"})]}),s.jsxs("div",{className:"flex space-x-2",children:[e.status==="pending"&&s.jsx(X,{variant:"outline",size:"sm",onClick:r,className:"text-green-600 border-green-600 hover:bg-green-50",children:"Assign Work"}),e.status==="in_progress"&&s.jsx(X,{variant:"outline",size:"sm",onClick:i,className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"View Progress"}),e.status==="completed"&&s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(jt,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]})]}),e.qualityScore&&e.qualityScore<.8&&s.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-orange-600",children:[s.jsx(Ue,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Quality attention needed"})]})]})},Ur=({assignment:e,onView:t})=>{const{attributes:n,listeners:r,setNodeRef:i,transform:a,transition:l,isDragging:o}=Br({id:e.id}),d={transform:we.Transform.toString(a),transition:l,opacity:o?.5:1},u=Mn[e.priority],h=new Date(e.targetCompletion),f=Math.ceil((h.getTime()-Date.now())/(1e3*60*60*24)),x=f<0,g=f<=1||e.priority==="urgent";return s.jsxs(re,{ref:i,style:d,className:`p-3 cursor-grab active:cursor-grabbing hover:shadow-md transition-shadow ${o?"shadow-lg":""}`,...n,...r,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate max-w-[120px]",children:e.bundleNumber}),g&&s.jsx(Ue,{className:"h-4 w-4 text-red-500 flex-shrink-0"})]}),s.jsx(ie,{variant:u.color,className:"text-xs",children:u.icon})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(Hn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.operatorName}),s.jsx("p",{className:"text-xs text-gray-500",children:e.operatorId})]})]}),s.jsxs("div",{className:"space-y-2 mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(nn,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"text-xs text-gray-600 truncate",children:e.machineType})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-xs text-gray-600 truncate",children:e.operation})})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:`font-medium ${e.progress===100?"text-green-600":"text-gray-900"}`,children:[Math.round(e.progress),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${e.progress===100?"bg-green-500":e.progress>50?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${e.progress}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ye,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:"Eff:"}),s.jsxs("span",{className:`font-medium ${e.efficiency>.8?"text-green-600":e.efficiency>.6?"text-yellow-600":"text-red-600"}`,children:[Math.round(e.efficiency*100),"%"]})]}),e.qualityScore&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-gray-600",children:"Qty:"}),s.jsxs("span",{className:`font-medium ${e.qualityScore>.9?"text-green-600":e.qualityScore>.8?"text-yellow-600":"text-red-600"}`,children:[Math.round(e.qualityScore*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(lt,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:`${x?"text-red-600 font-medium":g?"text-yellow-600 font-medium":"text-gray-600"}`,children:x?`${Math.abs(f)}d ago`:f===0?"Today":`${f}d`})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Kn,{className:"h-3 w-3 text-gray-400"}),s.jsxs("span",{className:"text-gray-900 font-medium",children:["â‚¹",e.estimatedEarnings.toLocaleString()]})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-3 truncate",children:["Order: ",e.orderNumber]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[s.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.assignedDate).toLocaleDateString()}),s.jsx(X,{variant:"ghost",size:"sm",onClick:C=>{C.stopPropagation(),t?.()},className:"text-xs px-2 py-1 h-auto text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"View"})]}),x&&s.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-red-600",children:[s.jsx(Ue,{className:"h-3 w-3"}),s.jsx("span",{className:"text-xs font-medium",children:"Overdue"})]}),e.progress===100&&e.status!=="completed"&&s.jsx("div",{className:"mt-2 flex items-center space-x-1 text-green-600",children:s.jsx("span",{className:"text-xs font-medium",children:"Ready for review"})})]})},Yr=({status:e,assignments:t,onViewAssignment:n})=>{const{setNodeRef:r,isOver:i}=Dn({id:e}),a=Tt[e];return a?s.jsxs(re,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:a.icon}),s.jsx("h3",{className:"font-semibold text-gray-900",children:a.label})]}),s.jsx(ie,{variant:a.color,className:"text-xs",children:t.length})]}),s.jsxs("div",{ref:r,className:`space-y-3 min-h-[400px] transition-colors rounded-lg p-2 ${i?"bg-blue-50 border-2 border-dashed border-blue-300":""}`,children:[s.jsx(Or,{items:t.map(l=>l.id),strategy:Ir,children:t.map(l=>s.jsx(Ur,{assignment:l,onView:()=>n?.(l.id)},l.id))}),t.length===0&&s.jsx("div",{className:"flex items-center justify-center h-32 text-gray-400 text-sm",children:"No assignments"})]})]}):null},Hr=({selectedBundles:e,onClose:t,onComplete:n})=>{const[r,i]=c.useState("auto"),[a,l]=c.useState([]),[o,d]=c.useState([]),[u,h]=c.useState(!1),[f,x]=c.useState(""),{data:g}=sn(),{data:C}=qn(),p=Vn(),v=g?.success?g.data?.items||[]:[],w=C?.success?C.data||[]:[],y=v.filter(m=>e.includes(m.id)),b=c.useMemo(()=>f?w.filter(m=>m.name.toLowerCase().includes(f.toLowerCase())||m.employeeId.toLowerCase().includes(f.toLowerCase())):w,[w,f]),R=c.useMemo(()=>b.filter(m=>m.currentStatus==="idle"||m.currentStatus==="working"),[b]),E=async()=>{h(!0);try{const m=[];for(const S of y)for(const I of S.workItems){const F=R.filter(z=>{const L=z.machineTypes.includes(I.machineType)||z.primaryMachine===I.machineType,k=["beginner","intermediate","advanced","expert"],V=k.indexOf(z.skillLevel),W=k.indexOf(I.skillLevelRequired),G=V>=W;return L&&G});if(F.length>0){const z=F.map(W=>{let G=W.efficiency*100;W.primaryMachine===I.machineType&&(G+=10);const Y=["beginner","intermediate","advanced","expert"].indexOf(W.skillLevel)*5;return G+=Y,G-=2*5,{operator:W,score:G}});z.sort((W,G)=>G.score-W.score);const L=z[0].operator,k=new Date;k.setHours(k.getHours()+m.length);const V=new Date(k);V.setMinutes(V.getMinutes()+I.estimatedDuration),m.push({bundleId:S.id,workItemId:I.id,operatorId:L.id,estimatedStartTime:k,estimatedCompletionTime:V,confidence:Math.min(95,z[0].score),reasons:[`${Math.round(L.efficiency*100)}% efficiency`,op.primaryMachine===I.machineType?"Primary machine match":"Machine compatible",`${L.skillLevel} skill level`]})}}d(m)}finally{h(!1)}},A=()=>{const m=[];let S=0;for(const I of y)for(const F of I.workItems){if(a.length===0)break;const z=a[S%a.length];if(w.find(k=>k.id===z)){const k=new Date;k.setHours(k.getHours()+m.length);const V=new Date(k);V.setMinutes(V.getMinutes()+F.estimatedDuration),m.push({bundleId:I.id,workItemId:F.id,operatorId:z,estimatedStartTime:k,estimatedCompletionTime:V,confidence:75,reasons:["Manually selected operator"]})}S++}d(m)},N=async()=>{if(o.length===0)return;const m=o.map(S=>({workItemId:S.workItemId,operatorId:S.operatorId,assignmentMethod:"supervisor_assigned",estimatedStartTime:S.estimatedStartTime,estimatedCompletionTime:S.estimatedCompletionTime,notes:`Bulk assignment - Confidence: ${S.confidence}%`}));try{(await p.mutateAsync(m)).success&&n()}catch(S){console.error("Bulk assignment failed:",S)}},D=m=>{l(S=>S.includes(m)?S.filter(I=>I!==m):[...S,m])},T=y.reduce((m,S)=>m+S.workItems.length,0),$=o.reduce((m,S)=>{const I=(S.estimatedCompletionTime.getTime()-S.estimatedStartTime.getTime())/36e5;return m+I},0);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Bulk Work Assignment"}),s.jsxs("p",{className:"text-gray-600",children:["Assign ",e.length," bundle(s) with ",T," work items"]})]}),s.jsx(X,{variant:"ghost",onClick:t,children:s.jsx(Xn,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Method"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(re,{className:`p-4 cursor-pointer border-2 ${r==="auto"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i("auto"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ye,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Auto Assignment"}),s.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered optimal assignment"})]})]})}),s.jsx(re,{className:`p-4 cursor-pointer border-2 ${r==="manual"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i("manual"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Rt,{className:"h-6 w-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Manual Selection"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Choose specific operators"})]})]})})]})]}),r==="manual"&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Operators"}),s.jsx("div",{className:"mb-4",children:s.jsx(tn,{placeholder:"Search operators...",value:f,onChange:m=>x(m.target.value),className:"max-w-md"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto",children:R.map(m=>s.jsx(re,{className:`p-3 cursor-pointer border ${a.includes(m.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>D(m.id),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm",children:m.name}),s.jsx("p",{className:"text-xs text-gray-500",children:m.employeeId}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(ie,{variant:"secondary",className:"text-xs",children:m.skillLevel}),s.jsxs("span",{className:"text-xs text-green-600",children:[Math.round(m.efficiency*100),"%"]})]})]}),a.includes(m.id)&&s.jsx(jt,{className:"h-5 w-5 text-blue-500"})]})},m.id))}),s.jsx("div",{className:"mt-4",children:s.jsxs(X,{onClick:A,disabled:a.length===0,className:"w-full",children:["Generate Assignment Plan (",a.length," operators)"]})})]}),r==="auto"&&o.length===0&&s.jsx("div",{className:"mb-6 text-center",children:s.jsx(X,{onClick:E,disabled:u,className:"w-full max-w-md",children:u?s.jsxs(s.Fragment,{children:[s.jsx(Nt,{size:"sm"}),s.jsx("span",{className:"ml-2",children:"Generating Optimal Assignments..."})]}):"Generate Auto Assignments"})}),o.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Assignment Plan"}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[s.jsxs("span",{children:[o.length," assignments"]}),s.jsxs("span",{children:[Math.round($*10)/10,"h total"]}),s.jsxs(ie,{variant:"primary",children:[Math.round(o.reduce((m,S)=>m+S.confidence,0)/o.length),"% avg confidence"]})]})]}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:o.map((m,S)=>{const I=y.find(L=>L.id===m.bundleId),F=I?.workItems.find(L=>L.id===m.workItemId),z=w.find(L=>L.id===m.operatorId);return!I||!F||!z?null:s.jsxs(re,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[I.bundleNumber," â†’ ",z.name]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[s.jsx(nn,{className:"h-3 w-3"}),s.jsx("span",{children:F.operation}),s.jsx("span",{children:"â€¢"}),s.jsx(lt,{className:"h-3 w-3"}),s.jsxs("span",{children:[F.estimatedDuration,"min"]})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(ie,{variant:m.confidence>80?"success":m.confidence>60?"warning":"error",className:"text-xs",children:[m.confidence,"% confidence"]}),s.jsx("div",{className:"text-xs text-gray-500",children:m.estimatedStartTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:m.reasons.map((L,k)=>s.jsx(ie,{variant:"outline",className:"text-xs",children:L},k))})]},S)})})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t bg-gray-50",children:[s.jsx("div",{className:"text-sm text-gray-600",children:o.length>0&&s.jsxs("span",{children:["Ready to assign ",o.length," work items"]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(X,{variant:"ghost",onClick:t,children:"Cancel"}),s.jsx(X,{onClick:N,disabled:o.length===0||p.isPending,className:"min-w-[120px]",children:p.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Nt,{size:"sm"}),s.jsx("span",{className:"ml-2",children:"Assigning..."})]}):"Execute Assignment"})]})]})]})})};function Kr(){return Wn({queryKey:["operators"],queryFn:async()=>({success:!0,data:[{id:"1",name:"John Smith",employeeId:"EMP001",skills:["cutting","sewing"],efficiency:.85,activeAssignments:3,maxAssignments:5},{id:"2",name:"Mary Johnson",employeeId:"EMP002",skills:["finishing","quality-check"],efficiency:.92,activeAssignments:2,maxAssignments:4}]}),staleTime:300*1e3})}const ci=({onCreateBundle:e,onViewBundle:t,onEditBundle:n,onAssignWork:r,onViewAssignment:i})=>{const[a,l]=c.useState(""),[o,d]=c.useState("all"),[u,h]=c.useState("all"),[f,x]=c.useState("all"),[g,C]=c.useState(!1),[p,v]=c.useState(null),[w,y]=c.useState(!1),[b,R]=c.useState([]),[E,A]=c.useState("kanban"),N=c.useMemo(()=>({search:a,status:o!=="all"?o:void 0,priority:u!=="all"?u:void 0,operatorId:f!=="all"?f:void 0}),[a,o,u,f]),{data:D,isLoading:T,error:$}=sn(N),{data:m,isLoading:S}=Gn(N),{data:I}=_n(N),{data:F}=Kr(),z=D?.success?D.data?.items||[]:[],L=m?.success?m.data?.items||[]:[],k=I?.data,V=F?.success?F.data||[]:[],W=c.useMemo(()=>({pending:L.filter(P=>P.status==="pending"),assigned:L.filter(P=>P.status==="assigned"),started:L.filter(P=>P.status==="started"),paused:L.filter(P=>P.status==="paused"),completed:L.filter(P=>P.status==="completed")}),[L]),G=j=>{const P=L.find(H=>H.id===j.active.id);v(P||null)},je=j=>{const{active:P,over:H}=j;if(!H||P.id===H.id){v(null);return}const Ne=H.id,le=P.id;console.log(`Moving assignment ${le} to ${Ne}`),v(null)},Y=()=>{R(z.map(j=>j.id))},Q=()=>{R([])};return T||S?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Nt,{size:"lg"})}):$?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load work assignments"}),s.jsx(X,{onClick:()=>window.location.reload(),children:"Try Again"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Work Assignments"}),s.jsx("p",{className:"text-gray-600",children:"Manage work bundles and operator assignments"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(X,{variant:"ghost",onClick:()=>A(E==="kanban"?"list":"kanban"),children:E==="kanban"?"List View":"Kanban View"}),b.length>0&&s.jsxs(X,{variant:"outline",onClick:()=>y(!0),className:"text-blue-600 border-blue-600",children:["Bulk Assign (",b.length,")"]}),e&&s.jsxs(X,{onClick:e,className:"flex items-center space-x-2",children:[s.jsx(Un,{className:"h-4 w-4"}),s.jsx("span",{children:"Create Bundle"})]})]})]}),k&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Ye,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Assignments"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.totalAssignments})]})]})}),s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.activeAssignments})]})]})}),s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(lt,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Efficiency"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[Math.round(k.averageEfficiency*100),"%"]})]})]})}),s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ue,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"On-Time %"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round(k.onTimeCompletion),"%"]})]})]})})]}),s.jsxs(re,{className:"p-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx(tn,{placeholder:"Search bundles, orders, or operators...",value:a,onChange:j=>l(j.target.value),className:"pl-10"})]})}),s.jsxs(X,{variant:"ghost",onClick:()=>C(!g),className:"flex items-center space-x-2",children:[s.jsx(Qn,{className:"h-4 w-4"}),s.jsx("span",{children:"Filters"}),(o!=="all"||u!=="all"||f!=="all")&&s.jsx(ie,{variant:"primary",className:"ml-1",children:[o,u,f].filter(j=>j!=="all").length})]})]}),g&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:o,onChange:j=>d(j.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),Object.entries(Tt).map(([j,P])=>s.jsxs("option",{value:j,children:[P.icon," ",P.label]},j))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:u,onChange:j=>h(j.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Priorities"}),s.jsx("option",{value:"urgent",children:"ðŸš¨ Urgent"}),s.jsx("option",{value:"high",children:"â¬†ï¸ High"}),s.jsx("option",{value:"medium",children:"âž¡ï¸ Medium"}),s.jsx("option",{value:"low",children:"â¬‡ï¸ Low"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator"}),s.jsxs("select",{value:f,onChange:j=>x(j.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Operators"}),V.map(j=>s.jsxs("option",{value:j.id,children:[j.name," (",j.employeeId,")"]},j.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{d("all"),h("all"),x("all"),l("")},children:"Clear Filters"})})]})})]}),b.length>0&&s.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-blue-700 font-medium",children:[b.length," bundle(s) selected"]}),s.jsx(X,{variant:"ghost",size:"sm",onClick:Y,children:"Select All"}),s.jsx(X,{variant:"ghost",size:"sm",onClick:Q,children:"Clear Selection"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(X,{variant:"outline",size:"sm",onClick:()=>y(!0),children:"Bulk Assign"})})]}),E==="kanban"?s.jsxs(cr,{onDragStart:G,onDragEnd:je,children:[s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:Object.entries(W).map(([j,P])=>s.jsx(Yr,{status:j,assignments:P,onViewAssignment:i},j))}),s.jsx(Rr,{children:p&&s.jsx("div",{className:"rotate-3 opacity-90"})})]}):s.jsx("div",{children:z.length===0?s.jsx(Yn,{icon:Ye,title:"No work bundles found",description:a||o!=="all"||u!=="all"?"Try adjusting your filters to see more bundles":"Get started by creating your first work bundle",action:e?s.jsx(X,{onClick:e,children:"Create First Bundle"}):void 0}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(j=>s.jsx(Xr,{bundle:j,onView:()=>t?.(j.id),onEdit:()=>n?.(j.id),onAssign:()=>r?.(j.id),className:b.includes(j.id)?"ring-2 ring-blue-500 bg-blue-50":"cursor-pointer hover:bg-gray-50",showActions:!0},j.id))})}),w&&s.jsx(Hr,{selectedBundles:b,onClose:()=>y(!1),onComplete:()=>{y(!1),Q()}})]})};export{ci as AssignmentDashboard};
