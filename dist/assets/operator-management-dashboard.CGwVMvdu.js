const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/operator-service.ea3XhWLu.js","assets/firebase-vendor.m6WcKfT_.js","assets/index.B__xpDQO.js","assets/query-vendor.NFs8Lf8Y.js","assets/react-vendor.BcnQP8kQ.js","assets/ui-vendor.BnTQXQPs.js","assets/utils-vendor.B0NEtgzl.js","assets/index.B7mSI82B.css"])))=>i.map(i=>d[i]);
import{c as y,b as M,z as ce,B as N,q as oe,m as W,I as A,_ as Ee}from"./index.B__xpDQO.js";import{j as e,u as de}from"./query-vendor.NFs8Lf8Y.js";import{r as i,u as Ie,f as Le}from"./react-vendor.BcnQP8kQ.js";import{L as q}from"./LoadingSpinner.BqqE1w83.js";import{E as Oe}from"./empty-state.1yXaqAKP.js";import{a as Z,o as me,M as G,S as xe}from"./operator-service.ea3XhWLu.js";import{F as Q}from"./CpuChipIcon.DcT1uL6Q.js";import{F as U}from"./ClockIcon.DbOxfhcH.js";import{F as he}from"./MagnifyingGlassIcon.BaFANGzr.js";import{F as Ae}from"./FunnelIcon.CqG3JKEJ.js";import{F as Fe}from"./ArrowLeftIcon.BArH4jor.js";import{F as ae}from"./CalendarDaysIcon.BY1uKJse.js";import{F as K}from"./StarIcon.B5IJFdRf.js";import{F as Me}from"./CurrencyRupeeIcon.CCku5vMm.js";import{o as te,s as re,p as Te,a as Pe,$ as Ve,b as pe,u as $e,c as ze,n as _e,d as le,e as O,_ as De,l as Be}from"./form-vendor.Dt550VaX.js";import{IDGenerationService as R}from"./id-generation-service.zIwPYme0.js";import{F as ie}from"./UserIcon.x-aGQUUd.js";import"./ui-vendor.BnTQXQPs.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.m6WcKfT_.js";function Re({title:s,titleId:c,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":c},r),s?i.createElement("title",{id:c},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const ue=i.forwardRef(Re);function qe({title:s,titleId:c,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":c},r),s?i.createElement("title",{id:c},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const Ue=i.forwardRef(qe);function We({title:s,titleId:c,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":c},r),s?i.createElement("title",{id:c},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"}))}const Ze=i.forwardRef(We);function Ge({title:s,titleId:c,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":c},r),s?i.createElement("title",{id:c},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Qe=i.forwardRef(Ge);function Ke({title:s,titleId:c,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":c},r),s?i.createElement("title",{id:c},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const He=i.forwardRef(Ke);function Ye({title:s,titleId:c,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":c},r),s?i.createElement("title",{id:c},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Je=i.forwardRef(Ye),ge=({operator:s,onView:c,onEdit:r,onDelete:t,onStatusChange:n,showActions:d=!0,className:o=""})=>{const l=Z[s.currentStatus]||Z.offline,j=()=>{if(s.avatar)switch(s.avatar.type){case"emoji":return e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center text-2xl",children:s.avatar.value});case"photo":return e.jsx("img",{src:s.avatar.value,alt:s.name,className:"h-12 w-12 rounded-full object-cover"});case"initials":return e.jsx("div",{className:"h-12 w-12 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:s.avatar.backgroundColor||"#3B82F6"},children:s.avatar.value})}const v=s.name.split(" ").map(g=>g.charAt(0)).join("").toUpperCase().slice(0,2);return e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-400 flex items-center justify-center text-white font-semibold",children:v})};return e.jsxs(y,{className:`p-4 hover:shadow-md transition-shadow ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[j(),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s.employeeId]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(M,{variant:l.color,className:"flex items-center space-x-1",children:[e.jsx("span",{children:l.icon}),e.jsx("span",{className:"hidden sm:inline",children:l.label})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Machine"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.primaryMachine})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Efficiency"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(s.efficiency*100),"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Quality"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(s.qualityScore*100),"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Work"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.currentWork||"None"})]})]})]}),d&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:c,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"View Details"}),r&&e.jsx(N,{variant:"ghost",size:"sm",onClick:r,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50",children:"Edit"}),t&&e.jsx(N,{variant:"ghost",size:"sm",onClick:t,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Delete"})]}),n&&e.jsx(N,{variant:"ghost",size:"sm",onClick:n,className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:"Update Status"})]})]})},V={all:["operators"],lists:()=>[...V.all,"list"],list:s=>[...V.lists(),{filters:s}],details:()=>[...V.all,"detail"],detail:s=>[...V.details(),s],status:s=>[...V.all,"status",s]};function Xe(s){return de({queryKey:V.lists(),queryFn:()=>me.getOperatorsSummary(),staleTime:300*1e3,gcTime:600*1e3,...s})}function es(s,c){return de({queryKey:V.status(s),queryFn:()=>me.getOperatorWithStatus(s),enabled:!!s,staleTime:30*1e3,refetchInterval:60*1e3,...c})}const ss=({onCreateNew:s,onViewOperator:c,onEditOperator:r,onDeleteOperator:t,userRole:n="operator",showActions:d=!0})=>{const[o,l]=i.useState(""),[j,v]=i.useState("all"),[g,h]=i.useState("all"),[w,b]=i.useState("all"),[x,k]=i.useState(!1),{data:C,isLoading:T,error:J,refetch:X}=Xe({refetchInterval:60*1e3}),F=C?.success?C.data:[],E=i.useMemo(()=>F.filter(m=>{const S=o===""||m.name.toLowerCase().includes(o.toLowerCase())||m.employeeId.toLowerCase().includes(o.toLowerCase()),p=j==="all"||m.currentStatus===j,D=g==="all"||m.primaryMachine===g;return S&&p&&D}),[F,o,j,g]),$=i.useMemo(()=>{const m=F.length,S=F.filter(I=>I.currentStatus==="working").length,p=F.filter(I=>I.currentStatus==="idle").length,D=F.reduce((I,B)=>I+B.efficiency,0)/m||0;return{total:m,active:S,available:p,avgEfficiency:D}},[F]);return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(q,{size:"lg"})}):J?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load operators"}),e.jsx(N,{onClick:()=>X(),children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Operators"}),e.jsx("p",{className:"text-gray-600",children:"Manage and monitor operator performance"})]}),s&&e.jsxs(N,{onClick:s,className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Operator"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Working"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:$.active})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Available"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:$.available})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Efficiency"})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round($.avgEfficiency*100),"%"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(A,{placeholder:"Search operators by name or ID...",value:o,onChange:m=>l(m.target.value),className:"pl-10"})]})}),e.jsxs(N,{variant:"ghost",onClick:()=>k(!x),className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"}),(j!=="all"||g!=="all"||w!=="all")&&e.jsx(M,{variant:"primary",className:"ml-1",children:[j,g,w].filter(m=>m!=="all").length})]})]}),x&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:j,onChange:m=>v(m.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),Object.entries(Z).map(([m,S])=>e.jsxs("option",{value:m,children:[S.icon," ",S.label]},m))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine Type"}),e.jsxs("select",{value:g,onChange:m=>h(m.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Machines"}),G.map(m=>e.jsxs("option",{value:m.machineType,children:[m.displayName," (",m.nepaliName,")"]},m.machineType))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skill Level"}),e.jsxs("select",{value:w,onChange:m=>b(m.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Levels"}),xe.map(m=>e.jsxs("option",{value:m.value,children:[m.label," (",m.nepaliLabel,")"]},m.value))]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>{v("all"),h("all"),b("all"),l("")},children:"Clear Filters"})})]})]}),e.jsx("div",{children:E.length===0?e.jsx(Oe,{icon:W,title:"No operators found",description:o||j!=="all"||g!=="all"?"Try adjusting your filters to see more operators":"Get started by adding your first operator",action:s?e.jsx(N,{onClick:s,children:"Add First Operator"}):void 0}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[E.length," of ",F.length," operators"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(m=>e.jsx(ge,{operator:m,onView:()=>c?.(m.id),onEdit:n==="supervisor"?()=>r?.(m.id):void 0,onDelete:n==="supervisor"?()=>t?.(m.id):void 0,showActions:d},m.id))})]})})]})},as=()=>{const{id:s}=Ie(),c=Le(),[r,t]=i.useState("overview"),{data:n,isLoading:d,error:o}=es(s,{enabled:!!s});if(d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(q,{size:"lg"})});if(o||!n?.success||!n.data)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Operator not found"}),e.jsx(N,{onClick:()=>c("/operators"),children:"Back to Operators"})]});const l=n.data,j=l.realtimeStatus,v=Z[j.status],g=()=>{if(l.avatar)switch(l.avatar.type){case"emoji":return e.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-100 flex items-center justify-center text-4xl",children:l.avatar.value});case"photo":return e.jsx("img",{src:l.avatar.value,alt:l.name,className:"h-20 w-20 rounded-full object-cover"});case"initials":return e.jsx("div",{className:"h-20 w-20 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:l.avatar.backgroundColor||"#3B82F6"},children:l.avatar.value})}const h=l.name.split(" ").map(w=>w.charAt(0)).join("").toUpperCase().slice(0,2);return e.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-400 flex items-center justify-center text-white font-bold text-xl",children:h})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(N,{variant:"ghost",onClick:()=>c("/operators"),className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Operator Details"}),e.jsx("p",{className:"text-gray-600",children:"View and manage operator information"})]})]}),e.jsxs(N,{onClick:()=>c(`/operators/${s}/edit`),className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit"})]})]}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[g(),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l.name}),e.jsxs(M,{variant:v?.color,className:"flex items-center space-x-1",children:[e.jsx("span",{children:v?.icon}),e.jsx("span",{children:v?.label})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Employee ID"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.employeeId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Username"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.username})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Primary Machine"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.primaryMachine})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Skill Level"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:l.skillLevel})]})]})]})]})}),e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Status"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`h-3 w-3 rounded-full ${v?.color==="green"?"bg-green-500":v?.color==="yellow"?"bg-yellow-500":v?.color==="blue"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium text-gray-900",children:v?.label})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(U,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Current Work"}),e.jsx("p",{className:"font-medium text-gray-900",children:j.currentWork||"None"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Machine Status"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:j.machineStatus})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Activity"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(j.lastActivity).toLocaleTimeString()})]})]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"overview",label:"Overview"},{key:"performance",label:"Performance"},{key:"activity",label:"Activity"}].map(h=>e.jsx("button",{onClick:()=>t(h.key),className:`py-2 px-1 border-b-2 font-medium text-sm ${r===h.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:h.label},h.key))})}),r==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4",children:[l.email&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ue,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.email})]})]}),l.phone&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Je,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.phone})]})]}),l.address&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.address})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Hired Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(l.hiredDate).toLocaleDateString()})]})]})]})]}),e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Work Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Machine Types"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:l.machineTypes?.map(h=>{const w=G.find(b=>b.machineType===h);return e.jsx(M,{variant:"secondary",children:w?.displayName||h},h)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:l.specializations?.map(h=>e.jsx(M,{variant:"outline",children:h},h))||e.jsx("p",{className:"text-gray-400 text-sm",children:"None specified"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(U,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Shift"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:l.shift})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-5 w-5 text-gray-400 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:"#"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Max Concurrent Work"}),e.jsx("p",{className:"font-medium text-gray-900",children:l.maxConcurrentWork})]})]})]})]})]}),r==="performance"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(ce,{className:"h-6 w-6 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Efficiency"})]}),e.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:[Math.round(l.averageEfficiency*100),"%"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Average performance"})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(ue,{className:"h-6 w-6 text-green-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[Math.round(l.qualityScore*100),"%"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Quality score"})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"B"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bundles"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:l.completedBundles}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Completed"})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Me,{className:"h-6 w-6 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Earnings"})]}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["₹",l.totalEarnings?.toLocaleString()||0]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Total earned"})]})]}),r==="activity"&&e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Activity log will be displayed here"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Feature coming soon"})]})]})]})};function ne(s,c){try{var r=s()}catch(t){return c(t)}return r&&r.then?r.then(void 0,c):r}function ts(s,c){for(var r={};s.length;){var t=s[0],n=t.code,d=t.message,o=t.path.join(".");if(!r[o])if("unionErrors"in t){var l=t.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:d,type:n};if("unionErrors"in t&&t.unionErrors.forEach(function(g){return g.errors.forEach(function(h){return s.push(h)})}),c){var j=r[o].types,v=j&&j[t.code];r[o]=pe(o,c,r,n,v?[].concat(v,t.message):t.message)}s.shift()}return r}function rs(s,c){for(var r={};s.length;){var t=s[0],n=t.code,d=t.message,o=t.path.join(".");if(!r[o])if(t.code==="invalid_union"&&t.errors.length>0){var l=t.errors[0][0];r[o]={message:l.message,type:l.code}}else r[o]={message:d,type:n};if(t.code==="invalid_union"&&t.errors.forEach(function(g){return g.forEach(function(h){return s.push(h)})}),c){var j=r[o].types,v=j&&j[t.code];r[o]=pe(o,c,r,n,v?[].concat(v,t.message):t.message)}s.shift()}return r}function ls(s,c,r){if(r===void 0&&(r={}),(function(t){return"_def"in t&&typeof t._def=="object"&&"typeName"in t._def})(s))return function(t,n,d){try{return Promise.resolve(ne(function(){return Promise.resolve(s[r.mode==="sync"?"parse":"parseAsync"](t,c)).then(function(o){return d.shouldUseNativeValidation&&te({},d),{errors:{},values:r.raw?Object.assign({},t):o}})},function(o){if((function(l){return Array.isArray(l?.issues)})(o))return{values:{},errors:re(ts(o.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw o}))}catch(o){return Promise.reject(o)}};if((function(t){return"_zod"in t&&typeof t._zod=="object"})(s))return function(t,n,d){try{return Promise.resolve(ne(function(){return Promise.resolve((r.mode==="sync"?Te:Pe)(s,t,c)).then(function(o){return d.shouldUseNativeValidation&&te({},d),{errors:{},values:r.raw?Object.assign({},t):o}})},function(o){if((function(l){return l instanceof Ve})(o))return{values:{},errors:re(rs(o.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const is=s=>ze({username:O().min(3,"Username must be at least 3 characters"),password:s==="create"?O().min(6,"Password must be at least 6 characters"):O().optional(),name:O().min(2,"Full Name must be at least 2 characters"),employeeId:O().min(1,"Employee ID is required"),email:O().email("Invalid email format").optional().or(Be("")),phone:O().optional(),address:O().optional(),primaryMachine:O().min(1,"Primary machine selection is required"),machineTypes:le(O()).min(1,"At least one machine type must be selected"),skillLevel:De(["beginner","intermediate","advanced","expert"],{required_error:"Skill level selection is required"}),specializations:le(O()).optional(),maxConcurrentWork:_e().min(1,"Must be at least 1").max(10,"Cannot exceed 10")}),ns=["👨‍💼","👩‍💼","👨‍🔧","👩‍🔧","👨‍🏭","👩‍🏭","🧑‍💻","👨‍💻","👩‍💻","🥷","👤","🔧"],Y=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16"],cs=[{value:"stitching",label:"Stitching",nepaliLabel:"सिलाई"},{value:"hemming",label:"Hemming",nepaliLabel:"हेमिंग"},{value:"buttonhole_making",label:"Buttonhole Making",nepaliLabel:"बटनहोल बनाउने"},{value:"button_attaching",label:"Button Attaching",nepaliLabel:"बटन जोड्ने"},{value:"zipper_insertion",label:"Zipper Insertion",nepaliLabel:"जिपर लगाउने"},{value:"seam_finishing",label:"Seam Finishing",nepaliLabel:"सिम फिनिशिंग"},{value:"edge_stitching",label:"Edge Stitching",nepaliLabel:"किनारा सिलाई"},{value:"topstitching",label:"Topstitching",nepaliLabel:"टपस्टिचिंग"},{value:"blind_hemming",label:"Blind Hemming",nepaliLabel:"अन्धा हेमिंग"},{value:"overlock_stitching",label:"Overlock Stitching",nepaliLabel:"ओभरलक सिलाई"},{value:"flatlock_stitching",label:"Flatlock Stitching",nepaliLabel:"फ्ल्यालक सिलाई"},{value:"coverstitch",label:"Coverstitch",nepaliLabel:"कभरस्टिच"},{value:"binding",label:"Binding",nepaliLabel:"बाइन्डिंग"},{value:"piping",label:"Piping",nepaliLabel:"पाइपिंग"},{value:"pleating",label:"Pleating",nepaliLabel:"प्लिटिंग"},{value:"gathering",label:"Gathering",nepaliLabel:"ग्याद्रिंग"},{value:"smocking",label:"Smocking",nepaliLabel:"स्मकिंग"},{value:"applique",label:"Applique",nepaliLabel:"एप्लिक"},{value:"embroidery",label:"Embroidery",nepaliLabel:"कसिदाकारी"},{value:"quality_inspection",label:"Quality Inspection",nepaliLabel:"गुणस्तर जाँच"},{value:"pattern_matching",label:"Pattern Matching",nepaliLabel:"नमुना मिलान"},{value:"pressing",label:"Pressing",nepaliLabel:"प्रेसिंग"},{value:"cutting",label:"Cutting",nepaliLabel:"काट्ने"},{value:"marking",label:"Marking",nepaliLabel:"चिन्ह लगाउने"},{value:"packaging",label:"Packaging",nepaliLabel:"प्याकेजिंग"}],os=({initialData:s,onSubmit:c,onCancel:r,isLoading:t=!1,mode:n})=>{const[d,o]=i.useState(null),[l,j]=i.useState(""),[v,g]=i.useState(!1),[h,w]=i.useState(""),[b,x]=i.useState(null),[k,C]=i.useState(!1),[T,J]=i.useState(null),[X,F]=i.useState(!1),{register:E,handleSubmit:$,watch:m,setValue:S,formState:{errors:p,isValid:D}}=$e({resolver:ls(is(n)),defaultValues:{username:s?.username||"",password:"",name:s?.name||"",employeeId:s?.employeeId||"",email:s?.email||"",phone:s?.phone||"",address:s?.address||"",primaryMachine:s?.primaryMachine||"",machineTypes:s?.machineTypes||[],skillLevel:s?.skillLevel||"beginner",specializations:s?.specializations||[],maxConcurrentWork:s?.maxConcurrentWork||1}}),I=m(),B=m("machineTypes")||[],z=m("specializations")||[];i.useEffect(()=>{s?.avatar&&o({type:s.avatar.type,value:s.avatar.value,backgroundColor:s.avatar.backgroundColor,label:s.avatar.type==="emoji"||s.avatar.type==="initials"?s.avatar.value:"Photo"})},[s]);const je=a=>{const u=a.split(" ").map(f=>f.charAt(0)).join("").toUpperCase().slice(0,2);return{type:"initials",value:u,backgroundColor:Y[Math.floor(Math.random()*Y.length)],label:u}};i.useEffect(()=>{I.name&&!d&&n==="create"&&o(je(I.name))},[I.name,d,n]),i.useEffect(()=>{(async()=>{if(n==="create"&&!s?.employeeId)try{g(!0);const u=await R.generateUniqueEmployeeIdSuggestion();w(u),S("employeeId",u)}catch(u){console.error("Failed to generate Employee ID:",u);const L=`TSA-EMP-${Date.now().toString().slice(-4)}`;w(L),S("employeeId",L)}finally{g(!1)}})()},[n,s?.employeeId,S]);const fe=async()=>{try{g(!0);const a=await R.generateUniqueEmployeeIdSuggestion();w(a),S("employeeId",a)}catch(a){console.error("Failed to regenerate Employee ID:",a);const f=`TSA-EMP-${Date.now().toString().slice(-4)}`;w(f),S("employeeId",f)}finally{g(!1)}},ve=async a=>{if(!a){x(null);return}try{C(!0);const u=R.validateEmployeeIdFormat(a);if(!u.valid){x({isValid:!1,message:u.message,suggestion:'Click "Generate Unique ID" for correct format'});return}if(n==="edit"&&s?.employeeId===a){x({isValid:!0,message:"Current Employee ID"});return}if(!await R.isEmployeeIdUnique(a)){const L=await R.generateUniqueEmployeeIdSuggestion();x({isValid:!1,message:"❌ This Employee ID already exists!",suggestion:`Suggested: ${L}`,suggestedId:L});return}x({isValid:!0,message:"✅ Employee ID is available"})}catch(u){console.error("Failed to validate Employee ID:",u),x({isValid:!1,message:"⚠️ Failed to validate ID - please try again",suggestion:"Check your network connection"})}finally{C(!1)}},ye=a=>{S("employeeId",a),w(a),x({isValid:!0,message:"✅ Using suggested unique ID"})};i.useEffect(()=>{if(n==="edit"&&I.employeeId){const a=setTimeout(()=>{ve(I.employeeId)},500);return()=>clearTimeout(a)}},[I.employeeId,n]),i.useEffect(()=>{n==="create"&&h&&x({isValid:!0,message:"Auto-generated ID"})},[h,n]);const be=a=>{const u=B,f=u.includes(a)?u.filter(L=>L!==a):[...u,a];S("machineTypes",f,{shouldValidate:!0})},ee=()=>{l.trim()&&(S("specializations",[...z,l.trim()]),j(""))},Ne=a=>{S("specializations",z.filter((f,L)=>L!==a))},we=async(a,u)=>{try{if(!D){u?.preventDefault();const _=Object.keys(p);if(_.length>0){const H=_[0],se=document.querySelector(`[name="${H}"]`)||document.querySelector(`input[name="${H}"]`)||document.querySelector(`select[name="${H}"]`);se&&se.scrollIntoView({behavior:"smooth",block:"center"});const Se=Object.entries(p).map(([P,Ce])=>`• ${P==="primaryMachine"?"Primary Machine":P==="machineTypes"?"Machine Types":P==="skillLevel"?"Skill Level":P==="maxConcurrentWork"?"Max Concurrent Work":P==="employeeId"?"Employee ID":P.charAt(0).toUpperCase()+P.slice(1)}: ${Ce?.message||"Required"}`).join(`
`);alert(`Please fix the following required fields:

${Se}`);return}}const f={...a,hiredDate:new Date,shift:"morning",specializations:a.specializations?.filter(_=>_.trim())||[]};a.email&&a.email.trim()&&(f.email=a.email.trim()),a.phone&&a.phone.trim()&&(f.phone=a.phone.trim()),a.address&&a.address.trim()&&(f.address=a.address.trim()),d&&(f.avatar={type:d.type,value:d.value,backgroundColor:d.backgroundColor}),n==="create"&&h&&(f.employeeId=h),await c(f)}catch(f){console.error("Form submission error:",f),alert("Failed to create operator. Please check all required fields and try again.")}},ke=()=>{if(!d)return null;switch(d.type){case"emoji":return e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-100 flex items-center justify-center text-3xl",children:d.value});case"initials":return e.jsx("div",{className:"h-16 w-16 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:d.backgroundColor},children:d.value});case"photo":return e.jsx("img",{src:d.value,alt:"Avatar",className:"h-16 w-16 rounded-full object-cover"})}};return e.jsxs("form",{onSubmit:$(we),className:"space-y-6",children:[e.jsxs(y,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),e.jsx(A,{...E("username"),placeholder:"Enter username",className:p.username?"border-red-500":""}),p.username&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),e.jsx(A,{...E("password"),type:"password",placeholder:n==="edit"?"Enter new password (leave blank to keep current)":"Enter password",className:p.password?"border-red-500":""}),p.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.password.message}),n==="edit"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to keep current password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx(A,{...E("name"),placeholder:"Enter full name",className:p.name?"border-red-500":""}),p.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Employee ID *",n==="create"&&e.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Auto-generated)"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(A,{...E("employeeId"),placeholder:n==="create"?"Auto-generating...":"Enter employee ID",className:`w-full ${p.employeeId||b?.isValid===!1?"border-red-500":b?.isValid===!0?"border-green-500":""} ${n==="create"?"bg-gray-50":""}`,readOnly:n==="create",value:n==="create"?h:void 0}),k&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(q,{size:"xs"})}),!k&&b?.isValid===!0&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500",children:"✓"}),!k&&b?.isValid===!1&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500",children:"✗"})]}),n==="create"&&e.jsx(N,{type:"button",variant:"outline",onClick:fe,disabled:v,className:"px-3 py-2 min-w-[120px]",children:v?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(q,{size:"xs"}),e.jsx("span",{children:"Generating..."})]}):"Generate Unique ID"})]}),p.employeeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.employeeId.message}),b?.message&&e.jsxs("div",{className:`text-sm mt-1 ${b.isValid?"text-green-600":"text-red-500"}`,children:[e.jsx("p",{children:b.message}),b.suggestion&&e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:b.suggestion}),b.suggestedId&&e.jsx(N,{type:"button",size:"sm",variant:"outline",onClick:()=>ye(b.suggestedId),className:"text-xs px-2 py-1 h-6",children:"Use This"})]})]}),n==="create"&&h&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Next ID: ",e.jsx("span",{className:"font-mono font-medium",children:h})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx(A,{...E("email"),type:"email",placeholder:"Enter email address",className:p.email?"border-red-500":""}),p.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx(A,{...E("phone"),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx(A,{...E("address"),placeholder:"Enter full address"})]})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),e.jsx("span",{children:"Avatar"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Preview"}),ke()||e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(ie,{className:"h-8 w-8 text-gray-400"})})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Emoji"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ns.map((a,u)=>e.jsx("button",{type:"button",onClick:()=>o({type:"emoji",value:a,label:a}),className:`p-2 rounded-lg border text-2xl hover:bg-gray-50 ${d?.type==="emoji"&&d?.value===a?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:a},u))})]}),I.name&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Use Initials"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map((a,u)=>{const f=I.name.split(" ").map(L=>L.charAt(0)).join("").toUpperCase().slice(0,2);return e.jsx("button",{type:"button",onClick:()=>o({type:"initials",value:f,backgroundColor:a,label:f}),className:`h-12 w-12 rounded-full flex items-center justify-center text-white font-semibold border-2 ${d?.type==="initials"&&d?.backgroundColor===a?"border-gray-800":"border-transparent"}`,style:{backgroundColor:a},children:f},u)})})]})]})})]})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{children:"Work Information"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Types * (Select all applicable)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:G.map(a=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.includes(a.machineType),onChange:()=>be(a.machineType),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[a.displayName,e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",a.nepaliName,")"]})]})]},a.machineType))}),p.machineTypes&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.machineTypes.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Machine *"}),e.jsxs("select",{...E("primaryMachine"),className:`w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${p.primaryMachine?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Select primary machine"}),G.filter(a=>B.includes(a.machineType)).map(a=>e.jsxs("option",{value:a.machineType,children:[a.displayName," (",a.nepaliName,")"]},a.machineType))]}),p.primaryMachine&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.primaryMachine.message})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skill Level *"}),e.jsx("select",{...E("skillLevel"),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:xe.map(a=>e.jsxs("option",{value:a.value,children:[a.label," (",a.nepaliLabel,")"]},a.value))})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Concurrent Work *"}),e.jsx(A,{...E("maxConcurrentWork",{valueAsNumber:!0}),type:"number",min:"1",max:"10",placeholder:"Maximum concurrent work items",className:p.maxConcurrentWork?"border-red-500":""}),p.maxConcurrentWork&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.maxConcurrentWork.message})]})]})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{children:"Specializations"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Operations (Select multiple)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:cs.map(a=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:z.includes(a.value),onChange:u=>{const f=z,L=u.target.checked?[...f,a.value]:f.filter(_=>_!==a.value);S("specializations",L)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.label}),e.jsx("div",{className:"text-xs text-gray-500",children:a.nepaliLabel})]})]},a.value))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(A,{value:l,onChange:a=>j(a.target.value),placeholder:"Add custom specialization...",onKeyPress:a=>a.key==="Enter"&&(a.preventDefault(),ee())}),e.jsx(N,{type:"button",onClick:ee,variant:"secondary",disabled:!l.trim(),children:"Add Custom"})]}),z.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map((a,u)=>e.jsxs(M,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx("span",{children:a}),e.jsx("button",{type:"button",onClick:()=>Ne(u),className:"text-gray-400 hover:text-gray-600",children:"×"})]},u))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx(N,{type:"button",variant:"ghost",onClick:r,disabled:t,children:"Cancel"}),e.jsxs(N,{type:"submit",disabled:t,className:"flex items-center space-x-2",children:[t&&e.jsx(q,{size:"sm"}),e.jsx("span",{children:n==="create"?"Create Operator":"Update Operator"})]})]})]})},As=({userRole:s="supervisor"})=>{const[c,r]=i.useState("overview"),[t,n]=i.useState(""),[d,o]=i.useState(""),[l,j]=i.useState(0),v=async x=>{if(s!=="supervisor"){alert("You do not have permission to delete operators.");return}if(window.confirm("Are you sure you want to delete this operator? This action cannot be undone."))try{console.log("Deleting operator:",x),alert("Operator deleted successfully! (This is a demo - implement actual Firebase delete)"),t===x&&(n(""),r("overview"))}catch(C){console.error("Error deleting operator:",C),alert("Failed to delete operator. Please try again.")}},g={totalOperators:156,activeOperators:142,onBreakOperators:8,offlineOperators:6,averageEfficiency:87.3,topPerformer:"Maya Sharma"},h=[{id:"op-maya-001",name:"Maya Sharma",employeeId:"EMP001",skills:["Cutting","Sewing","Finishing"],efficiency:94.5,activeAssignments:3,completedToday:12,status:"Active",avatar:"/avatars/maya.jpg",joinDate:new Date("2023-03-15")},{id:"op-rajesh-002",name:"Rajesh Kumar",employeeId:"EMP002",skills:["Sewing","Quality Check"],efficiency:91.2,activeAssignments:2,completedToday:8,status:"Active",avatar:"/avatars/rajesh.jpg",joinDate:new Date("2023-01-20")},{id:"op-priya-003",name:"Priya Singh",employeeId:"EMP003",skills:["Cutting","Pattern Making"],efficiency:89.8,activeAssignments:1,completedToday:6,status:"On Break",avatar:"/avatars/priya.jpg",joinDate:new Date("2023-05-10")},{id:"op-amit-004",name:"Amit Patel",employeeId:"EMP004",skills:["Finishing","Packing"],efficiency:85.6,activeAssignments:4,completedToday:15,status:"Active",avatar:"/avatars/amit.jpg",joinDate:new Date("2022-11-08")}],w=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(W,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Operators"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.totalOperators})]})]})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(U,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Now"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.activeOperators})]})]})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(K,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Efficiency"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[g.averageEfficiency,"%"]})]})]})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(K,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Top Performer"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:g.topPerformer})]})]})})]}),e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Operator Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(A,{placeholder:"Search operators...",value:d,onChange:x=>o(x.target.value),className:"pl-10 w-64"})]}),e.jsxs(N,{onClick:()=>r("form"),className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Operator"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:h.filter(x=>x.name.toLowerCase().includes(d.toLowerCase())||x.employeeId.toLowerCase().includes(d.toLowerCase())||x.skills.some(k=>k.toLowerCase().includes(d.toLowerCase()))).map(x=>e.jsx(ge,{operator:x,onView:k=>{n(k),r("detail")},onEdit:k=>{n(k),r("form")},showActions:s==="supervisor"},x.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Operator Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Active"})]}),e.jsx("span",{className:"text-sm font-medium",children:g.activeOperators})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"On Break"})]}),e.jsx("span",{className:"text-sm font-medium",children:g.onBreakOperators})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Offline"})]}),e.jsx("span",{className:"text-sm font-medium",children:g.offlineOperators})]})]})]}),e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Skills"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sewing"}),e.jsx(M,{variant:"secondary",children:"45 operators"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cutting"}),e.jsx(M,{variant:"secondary",children:"32 operators"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Finishing"}),e.jsx(M,{variant:"secondary",children:"28 operators"})]})]})]}),e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Completion Rate"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"92.4%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Quality Score"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"89.7%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Attendance Rate"}),e.jsx("span",{className:"text-sm font-medium text-purple-600",children:"96.1%"})]})]})]})]})]}),b=()=>{switch(c){case"overview":return w();case"list":return e.jsx(ss,{onViewOperator:x=>{n(x),r("detail")},onEditOperator:s==="supervisor"?x=>{n(x),r("form")}:void 0,onDeleteOperator:s==="supervisor"?v:void 0,onCreateNew:s==="supervisor"?()=>{n(""),r("form")}:void 0,userRole:s,showActions:!0},l);case"detail":return t?e.jsx(as,{operatorId:t,onEdit:()=>r("form"),onBack:()=>r("overview")}):w();case"form":return e.jsx(os,{mode:t?"edit":"create",initialData:t?{username:"",name:""}:void 0,onSubmit:async x=>{console.log("Operator data submitted:",x);try{const{operatorService:k}=await Ee(async()=>{const{operatorService:C}=await import("./operator-service.ea3XhWLu.js").then(T=>T.b);return{operatorService:C}},__vite__mapDeps([0,1,2,3,4,5,6,7]));if(t){const C=await k.updateOperator(t,x);C.success?(alert("✅ Operator updated successfully!"),j(T=>T+1),r("overview"),n("")):alert(`❌ Failed to update operator: ${C.error}`)}else{const C=await k.createOperator(x);C.success?(alert("✅ Operator created successfully!"),j(T=>T+1),r("overview"),n("")):alert(`❌ Failed to create operator: ${C.error}`)}}catch(k){console.error("Error saving operator:",k),alert("❌ An unexpected error occurred. Please try again.")}},onCancel:()=>{r("overview"),n("")},isLoading:!1});default:return w()}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[e.jsx(W,{className:"h-8 w-8 text-blue-600"}),e.jsx("span",{children:"Operator Management"})]}),e.jsx("p",{className:"text-gray-600",children:"Manage operators, skills, and performance"})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>r("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Overview"}),e.jsx("button",{onClick:()=>r("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="list"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"All Operators"}),t&&e.jsx("button",{onClick:()=>r("detail"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="detail"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Operator Details"}),s==="supervisor"&&e.jsx("button",{onClick:()=>r("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="form"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:t?"Edit Operator":"Add Operator"})]})}),b()]})};export{As as OperatorManagementDashboard,As as default};
