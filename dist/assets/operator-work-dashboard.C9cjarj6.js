import{j as e}from"./query-vendor.DpsghfSz.js";import{r as a}from"./react-vendor.CfKEcsXX.js";import{C as g,F as E,B as d,a as A,i as le}from"./index.CUWf0ERd.js";import{L as $}from"./LoadingSpinner.DUO60hBS.js";import{F as I}from"./PlayIcon.C6pbtimh.js";import{F as re}from"./CurrencyDollarIcon.n5hpspjn.js";import{F as ie}from"./TrophyIcon.6rCjTYDC.js";import{F as ne}from"./ChartBarIcon.CTULyxD7.js";import{F as C}from"./WrenchIcon.W7PykwaY.js";import{F as W}from"./ClockIcon.B0z2Gpg3.js";import"./ui-vendor.D450QVBF.js";import"./firebase-vendor.D8xw0AXf.js";import"./utils-vendor.B0NEtgzl.js";function ce({title:m,titleId:x,...f},N){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":x},f),m?a.createElement("title",{id:x},m):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const de=a.forwardRef(ce);function oe({title:m,titleId:x,...f},N){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":x},f),m?a.createElement("title",{id:x},m):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}const L=a.forwardRef(oe),xe=[{id:"BND-3233-M-001-OP-1",bundleId:"bundle_1",bundleNumber:"BND-3233-M-001",operationId:"op_1",name:"Shoulder Join",nameNepali:"काँध जोड्ने",description:"Join front and back shoulders",machineType:"overlock",sequenceOrder:1,pricePerPiece:2.5,smvMinutes:4.5,status:"assigned",assignedOperatorId:"DYNAMIC_OPERATOR_ID",assignedOperatorName:"DYNAMIC_OPERATOR_NAME",assignedAt:new Date("2024-01-15T08:30:00"),prerequisites:[],isOptional:!1,qualityCheckRequired:!0,defectTolerance:5},{id:"BND-3265-S-002-OP-3",bundleId:"bundle_2",bundleNumber:"BND-3265-S-002",operationId:"op_3",name:"Sleeve Attach",nameNepali:"आस्तीन लगाउने",description:"Attach sleeves to body",machineType:"overlock",sequenceOrder:3,pricePerPiece:4,smvMinutes:7,status:"in_progress",assignedOperatorId:"DYNAMIC_OPERATOR_ID",assignedOperatorName:"DYNAMIC_OPERATOR_NAME",assignedAt:new Date("2024-01-15T09:15:00"),startedAt:new Date("2024-01-15T09:30:00"),prerequisites:["op_1","op_2"],isOptional:!1,qualityCheckRequired:!0,defectTolerance:3}],me=[{operatorId:"DYNAMIC_OPERATOR_ID",operatorName:"DYNAMIC_OPERATOR_NAME",bundleId:"bundle_1",bundleNumber:"BND-3233-M-003",operationId:"BND-3233-M-003-OP-1",operationName:"Shoulder Join",baseRate:2.5,piecesCompleted:1,totalEarnings:2.75,smvAllocated:4.5,actualTimeSpent:4,efficiency:112.5,qualityRating:"excellent",qualityBonus:.25,completedAt:new Date("2024-01-15T10:15:00"),paymentStatus:"pending"},{operatorId:"DYNAMIC_OPERATOR_ID",operatorName:"DYNAMIC_OPERATOR_NAME",bundleId:"bundle_2",bundleNumber:"BND-3265-L-001",operationId:"BND-3265-L-001-OP-2",operationName:"Side Seam",baseRate:3,piecesCompleted:1,totalEarnings:3,smvAllocated:5,actualTimeSpent:5.5,efficiency:90.9,qualityRating:"good",qualityBonus:0,completedAt:new Date("2024-01-15T11:30:00"),paymentStatus:"pending"}],Re=({operatorId:m,operatorName:x})=>{const f=()=>xe.map(s=>({...s,assignedOperatorId:m,assignedOperatorName:x})),N=()=>me.map(s=>({...s,operatorId:m,operatorName:x})),[c,P]=a.useState(f()),[u,Y]=a.useState(N()),[r,k]=a.useState(c.find(s=>s.status==="in_progress")?.id||null),[O,R]=a.useState(null),[M,y]=a.useState(0),[o,p]=a.useState(!1),[z,T]=a.useState(!1),[l,_]=a.useState(null),[v,H]=a.useState("good"),[Q,S]=a.useState(!1),[j,F]=a.useState(null),[n,h]=a.useState({});a.useEffect(()=>{let s;return r&&O&&(s=setInterval(()=>{y(Math.floor((Date.now()-O.getTime())/1e3/60))},1e3)),()=>{s&&clearInterval(s)}},[r,O]);const G=async s=>{p(!0);try{await new Promise(i=>setTimeout(i,500));const t=new Date;P(i=>i.map(b=>b.id===s.id?{...b,status:"in_progress",startedAt:t}:b)),k(s.id),R(t),y(0)}catch(t){console.error("Start operation failed:",t)}finally{p(!1)}},q=async s=>{p(!0);try{await new Promise(t=>setTimeout(t,500)),P(t=>t.map(i=>i.id===s?{...i,status:"assigned"}:i)),k(null),R(null),y(0)}catch(t){console.error("Pause operation failed:",t)}finally{p(!1)}},B=s=>{_(s),T(!0)},D=s=>{F(s),h({bundleId:s.bundleId,operationId:s.id,issueType:"damaged",damagedParts:[],description:"",priority:"normal"}),S(!0)},J=async()=>{if(!j||!n.damagedParts?.length||!n.description){alert("Please fill in all required fields");return}p(!0);try{await new Promise(s=>setTimeout(s,1e3)),P(s=>s.map(t=>t.id===j.id?{...t,status:"parts_issue"}:t)),r===j.id&&(k(null),R(null),y(0)),S(!1),F(null),h({}),alert("Parts replacement request submitted successfully. Supervisor has been notified.")}catch(s){console.error("Submit parts complaint failed:",s),alert("Failed to submit complaint. Please try again.")}finally{p(!1)}},Z=async()=>{if(l){p(!0);try{await new Promise(w=>setTimeout(w,1e3));const s=M||l.smvMinutes,t=l.smvMinutes/s*100,i=v==="excellent"?l.pricePerPiece*.1:0,b=l.pricePerPiece+i,te={operatorId:m,operatorName:x,bundleId:l.bundleId,bundleNumber:l.bundleNumber,operationId:l.id,operationName:l.name,baseRate:l.pricePerPiece,piecesCompleted:1,totalEarnings:b,smvAllocated:l.smvMinutes,actualTimeSpent:s,efficiency:Math.round(t*100)/100,qualityRating:v,qualityBonus:i,completedAt:new Date,paymentStatus:"pending"};Y(w=>[te,...w]),P(w=>w.filter(ae=>ae.id!==l.id)),k(null),R(null),y(0),T(!1),_(null)}catch(s){console.error("Complete operation failed:",s)}finally{p(!1)}}},K=u.filter(s=>new Date(s.completedAt).toDateString()===new Date().toDateString()).reduce((s,t)=>s+t.totalEarnings,0),U=u.reduce((s,t)=>s+t.totalEarnings,0),V=u.length>0?u.reduce((s,t)=>s+t.efficiency,0)/u.length:0,X=u.filter(s=>new Date(s.completedAt).toDateString()===new Date().toDateString()).length,ee=s=>{switch(s){case"assigned":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"parts_issue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},se=s=>{const t=Math.floor(s/60),i=s%60;return t>0?`${t}h ${i}m`:`${i}m`};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[e.jsx(I,{className:"h-8 w-8 text-green-600"}),e.jsx("span",{children:"My Work Dashboard"})]}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",x,"!"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(re,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Today's Earnings"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rs. ",K.toFixed(2)]})]})]})}),e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ie,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Weekly Total"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["Rs. ",U.toFixed(2)]})]})]})}),e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ne,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Efficiency"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:[V.toFixed(1),"%"]})]})]})}),e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(E,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Today"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:X})]})]})})]}),e.jsxs(g,{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center space-x-2",children:[e.jsx(I,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{children:"My Current Work"})]}),e.jsx(d,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300",children:"Refresh Status"})]}),r?e.jsx("div",{className:"bg-white rounded-lg p-6 border-2 border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("h3",{className:"text-2xl font-bold text-purple-900",children:"Working on Operation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Operation Name:"}),e.jsx("p",{className:"font-bold text-lg text-gray-900",children:c.find(s=>s.id===r)?.name}),e.jsxs("p",{className:"text-sm text-purple-600",children:["(",c.find(s=>s.id===r)?.nameNepali,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Bundle Number:"}),e.jsx("p",{className:"font-bold text-lg font-mono text-blue-600",children:c.find(s=>s.id===r)?.bundleNumber})]})]}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"You'll Earn"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rs. ",c.find(s=>s.id===r)?.pricePerPiece]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Target Time"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[c.find(s=>s.id===r)?.smvMinutes," min"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Time Spent"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:se(M)})]})]})}),c.find(s=>s.id===r)?.description&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[e.jsx("p",{className:"text-sm text-blue-900 font-medium",children:"Instructions:"}),e.jsx("p",{className:"text-blue-800",children:c.find(s=>s.id===r)?.description})]})]}),e.jsxs("div",{className:"ml-6 flex flex-col space-y-3",children:[e.jsxs(d,{onClick:()=>q(r),disabled:o,variant:"outline",className:"flex items-center space-x-2 px-6 py-3",children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx("span",{children:"Pause Work"})]}),e.jsxs(d,{onClick:()=>B(c.find(s=>s.id===r)),disabled:o,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-6 py-3",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Finish & Get Paid"})]}),e.jsxs(d,{onClick:()=>D(c.find(s=>s.id===r)),disabled:o,variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-300 hover:bg-red-50 px-6 py-3",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Report Problem"})]})]})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No work in progress"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"You can start a new job from the assigned operations below"}),e.jsx("div",{className:"text-sm text-blue-600",children:'👇 Check "My Assigned Operations" section below to start work'})]})]}),e.jsxs(g,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["My Assigned Operations (",c.length,")"]})}),c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No operations assigned yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Your supervisor will assign new work soon, or you can pick work yourself."}),e.jsx("div",{className:"text-sm text-blue-600",children:'💡 Try the "Self Assignment" section to pick available work'})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsx(g,{className:`p-6 border-2 ${s.status==="in_progress"?"border-purple-300 bg-purple-50":s.status==="parts_issue"?"border-red-300 bg-red-50":"border-blue-200 hover:border-blue-300"} transition-all`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(A,{variant:"secondary",className:"font-mono text-sm px-3 py-1",children:s.bundleNumber}),e.jsx(A,{className:`${ee(s.status)} text-sm px-3 py-1`,children:s.status==="in_progress"?"🔄 Working":s.status==="parts_issue"?"🔧 Parts Issue":"⏳ Ready to Start"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-1",children:s.name}),e.jsxs("p",{className:"text-lg text-purple-600",children:["(",s.nameNepali,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 bg-white p-4 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Step Number"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["#",s.sequenceOrder]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"You'll Earn"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs. ",s.pricePerPiece]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Target Time"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[s.smvMinutes," min"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Machine Type"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 capitalize",children:s.machineType})]})]}),s.description&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"📝 Instructions:"}),e.jsx("p",{className:"text-blue-800",children:s.description})]}),s.qualityCheckRequired&&e.jsxs("div",{className:"flex items-center space-x-2 bg-yellow-50 p-3 rounded-lg",children:[e.jsx(le,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"⭐ Quality check required for this operation"})]})]}),e.jsxs("div",{className:"ml-6 flex flex-col space-y-3",children:[s.status==="assigned"&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{onClick:()=>G(s),disabled:o||r!==null,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-8 py-4 text-lg",size:"lg",children:[e.jsx(I,{className:"h-6 w-6"}),e.jsx("span",{children:"🚀 START WORK"})]}),e.jsxs(d,{onClick:()=>D(s),disabled:o,variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-300 hover:bg-red-50 px-6 py-3",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Report Problem"})]})]}),s.status==="in_progress"&&s.id===r&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{onClick:()=>q(s.id),disabled:o,variant:"outline",className:"flex items-center space-x-2 px-6 py-3",children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx("span",{children:"⏸️ Pause Work"})]}),e.jsxs(d,{onClick:()=>B(s),disabled:o,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 px-8 py-4 text-lg",size:"lg",children:[e.jsx(E,{className:"h-6 w-6"}),e.jsx("span",{children:"✅ FINISH & GET PAID"})]}),e.jsxs(d,{onClick:()=>D(s),disabled:o,variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-300 hover:bg-red-50 px-6 py-3",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Report Problem"})]})]}),s.status==="parts_issue"&&e.jsxs("div",{className:"bg-red-100 p-4 rounded-lg text-center",children:[e.jsx(de,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-red-800",children:"🔧 Parts being replaced"}),e.jsx("p",{className:"text-xs text-red-600",children:"Supervisor is fixing the issue"})]})]})]})},s.id))})]}),e.jsxs(g,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Earnings"})}),u.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:"No earnings yet. Complete operations to see earnings here."})}):e.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.operationName}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.bundleNumber," • ",s.completedAt.toLocaleTimeString()]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(A,{variant:s.qualityRating==="excellent"?"success":s.qualityRating==="good"?"default":s.qualityRating==="average"?"warning":"danger",children:s.qualityRating}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.efficiency.toFixed(1),"% efficiency"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["Rs. ",s.totalEarnings.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.actualTimeSpent.toFixed(1),"min"]})]})]},`${s.bundleId}-${s.operationId}`))})]}),z&&l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),e.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Complete Operation"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.name," - ",l.bundleNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How was your work quality?"}),e.jsx("div",{className:"space-y-2",children:[{value:"excellent",label:"Excellent",bonus:"+10% bonus",color:"text-green-600"},{value:"good",label:"Good",bonus:"No bonus",color:"text-blue-600"},{value:"average",label:"Average",bonus:"No bonus",color:"text-yellow-600"},{value:"poor",label:"Poor",bonus:"May need rework",color:"text-red-600"}].map(s=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"quality",value:s.value,checked:v===s.value,onChange:t=>H(t.target.value),className:"text-blue-600"}),e.jsx("span",{className:"flex-1",children:s.label}),e.jsx("span",{className:`text-xs ${s.color}`,children:s.bonus})]},s.value))})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Rate:"}),e.jsxs("span",{children:["Rs. ",l.pricePerPiece.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Quality Bonus:"}),e.jsxs("span",{children:["Rs. ",v==="excellent"?(l.pricePerPiece*.1).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"border-t pt-1 mt-1 font-medium flex justify-between",children:[e.jsx("span",{children:"Total Earnings:"}),e.jsxs("span",{className:"text-green-600",children:["Rs. ",(l.pricePerPiece+(v==="excellent"?l.pricePerPiece*.1:0)).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(d,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(d,{onClick:Z,disabled:o,className:"bg-green-600 hover:bg-green-700",children:o?e.jsx($,{size:"sm"}):"Complete & Earn"})]})]})]})}),Q&&j&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),e.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{children:"Report Parts Issue"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.name," - ",j.bundleNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Issue Type"}),e.jsxs("select",{value:n.issueType||"damaged",onChange:s=>h({...n,issueType:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"damaged",children:"Damaged Parts"}),e.jsx("option",{value:"missing",children:"Missing Parts"}),e.jsx("option",{value:"defective",children:"Defective Parts"}),e.jsx("option",{value:"wrong_size",children:"Wrong Size"}),e.jsx("option",{value:"wrong_color",children:"Wrong Color"}),e.jsx("option",{value:"other",children:"Other Issue"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Damaged/Missing Parts"}),e.jsx("div",{className:"space-y-2",children:["Front Panel","Back Panel","Left Sleeve","Right Sleeve","Collar","Cuff","Hem","Pocket"].map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.damagedParts?.includes(s)||!1,onChange:t=>{const i=n.damagedParts||[];t.target.checked?h({...n,damagedParts:[...i,s]}):h({...n,damagedParts:i.filter(b=>b!==s)})},className:"text-red-600"}),e.jsx("span",{className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:n.description||"",onChange:s=>h({...n,description:s.target.value}),placeholder:"Describe the issue in detail...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:n.priority||"normal",onChange:s=>h({...n,priority:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low Priority"}),e.jsx("option",{value:"normal",children:"Normal Priority"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(d,{variant:"outline",onClick:()=>{S(!1),h({})},children:"Cancel"}),e.jsx(d,{onClick:J,disabled:o||!n.damagedParts?.length||!n.description,className:"bg-red-600 hover:bg-red-700",children:o?e.jsx($,{size:"sm"}):"Submit Request"})]})]})]})})]})};export{Re as OperatorWorkDashboard,Re as default};
