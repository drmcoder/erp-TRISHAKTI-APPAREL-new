import{j as e}from"./query-vendor.NFs8Lf8Y.js";import{r as t}from"./react-vendor.BcnQP8kQ.js";import{B as u,c as x,n as W,b as P}from"./index.B__xpDQO.js";import{L as ee}from"./LoadingSpinner.BqqE1w83.js";import{F as O}from"./MagnifyingGlassIcon.BaFANGzr.js";import{F as se}from"./LightBulbIcon.BL5cAUDl.js";import{F as ae}from"./HashtagIcon.CVSe8Cf6.js";import{F as te}from"./CurrencyDollarIcon.CyMFdc0e.js";import{F as re}from"./ClockIcon.DbOxfhcH.js";import{F as z}from"./UserIcon.x-aGQUUd.js";import"./ui-vendor.BnTQXQPs.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.m6WcKfT_.js";function ie({title:d,titleId:n,...p},m){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":n},p),d?t.createElement("title",{id:n},d):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const le=t.forwardRef(ie);function ne({title:d,titleId:n,...p},m){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":n},p),d?t.createElement("title",{id:n},d):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const ce=t.forwardRef(ne);function oe({title:d,titleId:n,...p},m){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":n},p),d?t.createElement("title",{id:n},d):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const de=t.forwardRef(oe),Te=({userRole:d})=>{const[n,p]=t.useState([]),[m,L]=t.useState([]),[V,$]=t.useState(!0),[B,_]=t.useState("grid"),[v,R]=t.useState(""),[o,w]=t.useState({priority:"all",status:"all",machineType:"all",articleNumber:"all"}),[E,H]=t.useState("priority"),[f,N]=t.useState([]),[me,he]=t.useState(null),[y,k]=t.useState("individual"),[ue,Z]=t.useState(!1),[F,q]=t.useState({});t.useEffect(()=>{X()},[]);const X=async()=>{$(!0);const s=[],a=["3233","3265","3401","3522","3678","3721"],i=["Adult T-Shirt","Ladies Blouse","Kids T-Shirt","Polo Shirt","Tank Top","Hoodie"],l=["low","normal","high","urgent"],g=["XS","S","M","L","XL","XXL"],c=["White","Black","Navy","Red","Blue","Green","Pink","Gray"];for(let r=1;r<=150;r++){const S=Math.floor(Math.random()*a.length),U=l[Math.floor(Math.random()*l.length)],I=g.slice(0,2+Math.floor(Math.random()*3)),J=c.slice(0,1+Math.floor(Math.random()*2)),C=[{id:`op_${r}_1`,name:"Shoulder Join",nameNepali:"काँध जोड्ने",machineType:"overlock",requiredSkill:"shoulder_join",timePerPiece:4.5,pricePerPiece:2.5,status:"pending"},{id:`op_${r}_2`,name:"Side Seam",nameNepali:"छेउ सिलाई",machineType:"overlock",requiredSkill:"side_seam",timePerPiece:5,pricePerPiece:3,status:"pending"},{id:`op_${r}_3`,name:"Sleeve Attach",nameNepali:"आस्तीन लगाउने",machineType:"singleNeedle",requiredSkill:"sleeve_attach",timePerPiece:7,pricePerPiece:4,status:"pending"}].slice(0,1+Math.floor(Math.random()*3)),M=20+Math.floor(Math.random()*30),Q=C.reduce((T,A)=>T+A.timePerPiece*M,0),Y=C.reduce((T,A)=>T+A.pricePerPiece*M,0);s.push({id:`bundle_${r}`,bundleNumber:`BND-${a[S]}-${String(r).padStart(3,"0")}`,articleNumber:a[S],articleStyle:i[S],priority:U,sizes:I,colors:J,totalPieces:M,estimatedTime:Q,totalValue:Y,operations:C,status:"created"})}const h=[{id:"op_maya",name:"Maya Patel",machineType:"overlock",skillLevel:"expert",efficiency:95,currentWorkload:2,maxCapacity:5,specialties:["shoulder_join","side_seam"],status:"available",hourlyRate:450,todayEarnings:2800},{id:"op_rajesh",name:"Rajesh Kumar",machineType:"singleNeedle",skillLevel:"expert",efficiency:92,currentWorkload:1,maxCapacity:4,specialties:["sleeve_attach","hem_finish"],status:"available",hourlyRate:420,todayEarnings:2400},{id:"op_sita",name:"Sita Sharma",machineType:"overlock",skillLevel:"intermediate",efficiency:87,currentWorkload:3,maxCapacity:5,specialties:["shoulder_join"],status:"busy",hourlyRate:380,todayEarnings:1900},{id:"op_ram",name:"Ram Bahadur",machineType:"singleNeedle",skillLevel:"intermediate",efficiency:89,currentWorkload:0,maxCapacity:4,specialties:["sleeve_attach"],status:"available",hourlyRate:400,todayEarnings:1600},{id:"op_gita",name:"Gita Thapa",machineType:"overlock",skillLevel:"beginner",efficiency:78,currentWorkload:1,maxCapacity:3,specialties:["side_seam"],status:"available",hourlyRate:320,todayEarnings:1200}];p(s),L(h),$(!1)},j=[...n.filter(s=>{const a=s.bundleNumber.toLowerCase().includes(v.toLowerCase())||s.articleNumber.includes(v)||s.articleStyle.toLowerCase().includes(v.toLowerCase()),i=o.priority==="all"||s.priority===o.priority,l=o.status==="all"||s.status===o.status,g=o.articleNumber==="all"||s.articleNumber===o.articleNumber,c=o.machineType==="all"||s.operations.some(h=>h.machineType===o.machineType);return a&&i&&l&&g&&c})].sort((s,a)=>{switch(E){case"priority":const i={urgent:4,high:3,normal:2,low:1};return i[a.priority]-i[s.priority];case"value":return a.totalValue-s.totalValue;case"bundleNumber":return s.bundleNumber.localeCompare(a.bundleNumber);default:return 0}}),b=m.filter(s=>s.status==="available"&&s.currentWorkload<s.maxCapacity),D=s=>{N(a=>a.includes(s)?a.filter(i=>i!==s):[...a,s])},G=async()=>{if(f.length===0){alert("Please select bundles to assign");return}const s={};for(const a of f){const i=n.find(l=>l.id===a);if(i)for(const l of i.operations){const g=b.filter(c=>c.machineType===l.machineType&&c.specialties.includes(l.requiredSkill)&&c.currentWorkload<c.maxCapacity);if(g.length>0){const c=g.reduce((h,r)=>r.efficiency-r.currentWorkload*10>h.efficiency-h.currentWorkload*10?r:h);s[`${a}_${l.id}`]=c.id,L(h=>h.map(r=>r.id===c.id?{...r,currentWorkload:r.currentWorkload+1}:r))}}}q(a=>({...a,...s})),N([]),alert(`✅ Smart assignment completed!
Assigned ${Object.keys(s).length} operations to operators.`)},K=s=>{switch(s){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"normal":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return V?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ee,{text:"Loading smart assignment dashboard..."})}):e.jsxs("div",{className:"p-4 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:"🧠 Smart Work Assignment"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Efficiently assign ",n.length," bundles to ",m.length," operators with smart algorithms"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-white p-2 rounded-lg border",children:[e.jsx(u,{variant:y==="individual"?"primary":"outline",size:"sm",onClick:()=>k("individual"),children:"👤 Individual"}),e.jsx(u,{variant:y==="bulk"?"primary":"outline",size:"sm",onClick:()=>k("bulk"),children:"📦 Bulk"}),e.jsx(u,{variant:y==="smart"?"primary":"outline",size:"sm",onClick:()=>k("smart"),children:"🧠 Smart AI"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bundles, articles, or styles...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:v,onChange:s=>R(s.target.value)})]})}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:o.priority,onChange:s=>w(a=>({...a,priority:s.target.value})),children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"🔴 Urgent"}),e.jsx("option",{value:"high",children:"🟠 High"}),e.jsx("option",{value:"normal",children:"🔵 Normal"}),e.jsx("option",{value:"low",children:"⚪ Low"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:o.machineType,onChange:s=>w(a=>({...a,machineType:s.target.value})),children:[e.jsx("option",{value:"all",children:"All Machines"}),e.jsx("option",{value:"overlock",children:"Overlock"}),e.jsx("option",{value:"singleNeedle",children:"Single Needle"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:E,onChange:s=>H(s.target.value),children:[e.jsx("option",{value:"priority",children:"Sort by Priority"}),e.jsx("option",{value:"value",children:"Sort by Value"}),e.jsx("option",{value:"bundleNumber",children:"Sort by Bundle #"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{variant:B==="grid"?"primary":"outline",size:"sm",onClick:()=>_("grid"),children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(u,{variant:B==="list"?"primary":"outline",size:"sm",onClick:()=>_("list"),children:"📋"})]})]}),y!=="individual"&&e.jsx(x,{className:"p-4 bg-blue-50 border-blue-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"font-medium text-blue-900",children:[f.length," bundles selected"]})]}),f.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(u,{variant:"primary",size:"sm",onClick:G,children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"Smart Assign"]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>N([]),children:"Clear Selection"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[e.jsxs(x,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Available Bundles"})]}),e.jsxs(x,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Available Operators"})]}),e.jsxs(x,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.filter(s=>s.priority==="urgent").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Urgent Priority"})]}),e.jsxs(x,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",j.reduce((s,a)=>s+a.totalValue,0).toFixed(0)]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"})]}),e.jsxs(x,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[Math.floor(j.reduce((s,a)=>s+a.estimatedTime,0)/60),"h"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Time"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:j.map(s=>e.jsxs(x,{className:`p-4 transition-all cursor-pointer hover:shadow-lg ${f.includes(s.id)?"ring-2 ring-blue-500 bg-blue-50":"hover:ring-1 hover:ring-gray-300"}`,onClick:()=>{y!=="individual"&&D(s.id)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-sm text-gray-700",children:s.bundleNumber})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y!=="individual"&&e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${f.includes(s.id)?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:f.includes(s.id)&&e.jsx(W,{className:"h-3 w-3 text-white"})}),e.jsx(P,{variant:"outline",className:K(s.priority),children:s.priority})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.articleStyle}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Article: ",s.articleNumber]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),s.sizes.join(", ")]}),e.jsxs("span",{children:[s.totalPieces," pcs"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"$",s.totalValue.toFixed(2)]}),e.jsxs("span",{className:"flex items-center text-gray-600",children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),Math.floor(s.estimatedTime/60),"h ",Math.floor(s.estimatedTime%60),"m"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Operations:"}),s.operations.map(a=>{const i=`${s.id}_${a.id}`,l=F[i]?m.find(g=>g.id===F[i]):null;return e.jsx("div",{className:`p-2 rounded border text-xs ${l?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-gray-600",children:a.machineType})]}),e.jsx("div",{className:"text-right",children:l?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:l.name})]}):e.jsx(P,{variant:"outline",size:"sm",children:"Available"})})]})},a.id)})]}),y==="individual"&&e.jsxs(u,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>{N([s.id]),Z(!0)},children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Assign to Operator"]})]},s.id))}),j.length===0&&e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No bundles match your current filters"}),e.jsx(u,{variant:"outline",onClick:()=>{R(""),w({priority:"all",status:"all",machineType:"all",articleNumber:"all"})},className:"mt-4",children:"Clear Filters"})]}),e.jsxs(x,{className:"p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Available Operators (",b.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:b.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(P,{variant:s.skillLevel==="expert"?"success":s.skillLevel==="intermediate"?"warning":"info",size:"sm",children:s.skillLevel})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Machine: ",s.machineType]}),e.jsxs("p",{children:["Efficiency: ",s.efficiency,"%"]}),e.jsxs("p",{children:["Load: ",s.currentWorkload,"/",s.maxCapacity]}),e.jsxs("p",{children:["Today: $",s.todayEarnings]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.currentWorkload/s.maxCapacity*100}%`}})})})]},s.id))})]})]})};export{Te as SmartWorkAssignmentDashboard,Te as default};
