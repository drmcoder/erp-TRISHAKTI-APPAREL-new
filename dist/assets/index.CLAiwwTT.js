const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/id-generation-service._PtYBQ4s.js","assets/firebase-vendor.D8xw0AXf.js","assets/query-vendor.DpsghfSz.js","assets/react-vendor.CfKEcsXX.js","assets/ui-vendor.EZF4ucWh.js","assets/utils-vendor.B0NEtgzl.js","assets/OperatorDashboard.Bzn8MOcr.js","assets/index.DGVQx0Fz.js","assets/operator-types.IC8C56sJ.js","assets/notification-service.CTW6eT3Y.js","assets/damage-report-service.Nrvveh5s.js","assets/operator-wallet-service.C-WlAMLy.js","assets/permission-service.Bw3z8bJ_.js","assets/work-assignment-service._pWjxpTL.js","assets/LoadingSpinner.1kukr6Vo.js","assets/SupervisorDashboard.BdzZeFMO.js","assets/assignment-dashboard.DWAGkBZH.js","assets/empty-state.Cugu3L3L.js","assets/ClockIcon.B0z2Gpg3.js","assets/ChartBarIcon.CTULyxD7.js","assets/CalendarDaysIcon.DrGkQZXF.js","assets/UserIcon.BzFG2rMW.js","assets/CurrencyRupeeIcon.7xrTRvUQ.js","assets/use-work-assignments.BoFkaWhq.js","assets/MagnifyingGlassIcon.BY4e_13K.js","assets/FunnelIcon.CvqkinxJ.js","assets/bundle-lifecycle-manager.CAbkZAmi.js","assets/label.D0ghwUEZ.js","assets/select.D3_Pn-VW.js","assets/separator.BgmWzbHV.js","assets/popover.ElchNiQT.js","assets/utils.k9sMftog.js","assets/index.CgqrbJCd.js","assets/bundle-service.CrAqiZci.js","assets/index.LBReXyrD.js","assets/production-dashboard.DGxVRLQb.js","assets/chart-vendor.txETOtUP.js","assets/quality-management-dashboard.CCQ6BrZp.js","assets/ShieldCheckIcon.7Wn9Ltzi.js","assets/earnings-dashboard.Bm2tQsDO.js","assets/progress.gceU5Vz_.js","assets/operator-management-dashboard.B81JX-Rt.js","assets/PencilIcon.8W3cwjlG.js","assets/StarIcon.WwJcLCr3.js","assets/form-vendor.YPfcWTfe.js","assets/self-assignment-interface.DzdJUvQa.js","assets/production-timer.DGanI1S_.js","assets/workflow-sequencer.CxLMIQG6.js","assets/PlayIcon.C6pbtimh.js","assets/ArrowRightIcon.DKQtkxcN.js","assets/mobile-friendly-layout.v3dye4fR.js","assets/BellIcon.V4BrsRiS.js","assets/AdjustmentsHorizontalIcon.CLlydtd6.js","assets/WrenchIcon.W7PykwaY.js","assets/DocumentChartBarIcon.DSPE-w7K.js","assets/TvIcon.Cz9yvviN.js","assets/HandRaisedIcon.Cfns5nHo.js","assets/mobile-test.CZfHslKS.js","assets/live-production-dashboard.Ccymu9z4.js","assets/ArrowTrendingUpIcon.DCVA9ozU.js","assets/CuttingDropletManager.D3_fnJO4.js","assets/ProductionLotManager.BVs-j25o.js","assets/production-lot-service.C58jgk8y.js","assets/ProcessPricingManager.stvzEbCh.js","assets/tabs.Bt9VKIUG.js","assets/EnhancedOperatorDashboard.Ce-q2D0a.js","assets/enhanced-production-service.DSXA7MeX.js","assets/OperatorPieceTracker.t0Qi0IBF.js","assets/BundleAssignmentManager.MTxhEVXu.js","assets/sewing-template-manager.CvW0GB3H.js","assets/bundle-assignment-dashboard.az_HLnGx.js","assets/CurrencyDollarIcon.n5hpspjn.js","assets/operator-work-dashboard.D472DuO8.js","assets/TrophyIcon.6rCjTYDC.js","assets/operator-self-assignment.fxXj4rL2.js","assets/supervisor-parts-dashboard.bEX945cv.js","assets/multi-strategy-assignment-dashboard.CcFo1p3x.js","assets/CalendarIcon.sECmwVM6.js","assets/bundle-batch-tracking-dashboard.CsKfUYxo.js","assets/LightBulbIcon.CK1_Ki40.js","assets/drag-drop-assignment-dashboard.B0RSLtZh.js","assets/useI18n.Cd33OMab.js","assets/enhanced-bundle-service.Cmy7jG_Y.js","assets/kanban-assignment-board.Cq1Gx1tZ.js","assets/supervisor-operator-buckets.CpHow4a8.js","assets/smart-work-assignment-dashboard._r84Z2j_.js","assets/HashtagIcon.BDWlCnOX.js","assets/operator-profile-assignment.ckg2WJf2.js","assets/sequential-workflow-assignment.CSq89P_x.js","assets/LoginAnalyticsDashboard.CTSlBmlu.js","assets/TrustedDeviceManager.iTlK_6h2.js","assets/WorkflowNotificationDemo.ClgniE9C.js","assets/AdminUserManagement.xXs2aZzL.js"])))=>i.map(i=>d[i]);
import{j as p,Q as MS,d as kS}from"./query-vendor.DpsghfSz.js";import{b as jS,f as IS,r as U,c as de,g as D1,B as LS}from"./react-vendor.CfKEcsXX.js";import{l as US,af as BS,t as PS,ag as M1,ah as zS,E as qS}from"./ui-vendor.EZF4ucWh.js";import{L as k1,v as K,_ as Hr,C as Fr,x as Pn,y as at,z as Qh,A as Rn,B as bi,D as jc,E as HS,S as FS,F as GS,G as pl,H as Ra,I as j1,J as VS,K as Bn,M as $S,N as YS,O as QS,P as Oh,Q as I1,R as KS,U as Pt,V as XS,W as Jc,X as WS,Y as ZS,Z as eu,$ as Ni,a0 as L1,a1 as U1,a2 as B1,a3 as Kh,a4 as P1,a5 as z1,a6 as q1,a7 as Xh,a8 as Wh,a9 as Zh,aa as If,ab as H1,ac as F1,ad as G1,ae as JS,af as Ly,ag as V1,ah as $1,ai as Y1,e as Ir,h as Lr,q as Et,f as Js,g as jt,u as Aa,d as Wt,T as Tn,s as lr,c as eT,k as Q1,m as tT,j as Ws,l as Lf,w as Rh,o as Uy,r as nT,i as Bs,a as rT,b as iT,aj as aT,ak as sT}from"./firebase-vendor.D8xw0AXf.js";import{t as lT,c as oT}from"./utils-vendor.B0NEtgzl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Uf={exports:{}},Ps={},Bf={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function cT(){return By||(By=1,(function(i){function e(B,te){var re=B.length;B.push(te);e:for(;0<re;){var we=re-1>>>1,Ne=B[we];if(0<l(Ne,te))B[we]=te,B[re]=Ne,re=we;else break e}}function r(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var te=B[0],re=B.pop();if(re!==te){B[0]=re;e:for(var we=0,Ne=B.length,Qe=Ne>>>1;we<Qe;){var ke=2*(we+1)-1,C=B[ke],D=ke+1,W=B[D];if(0>l(C,re))D<Ne&&0>l(W,C)?(B[we]=W,B[D]=re,we=D):(B[we]=C,B[ke]=re,we=ke);else if(D<Ne&&0>l(W,re))B[we]=W,B[D]=re,we=D;else break e}}return te}function l(B,te){var re=B.sortIndex-te.sortIndex;return re!==0?re:B.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var y=[],f=[],h=1,_=null,v=3,b=!1,E=!1,S=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function Q(B){for(var te=r(f);te!==null;){if(te.callback===null)a(f);else if(te.startTime<=B)a(f),te.sortIndex=te.expirationTime,e(y,te);else break;te=r(f)}}function ae(B){if(S=!1,Q(B),!E)if(r(y)!==null)E=!0,X||(X=!0,Y());else{var te=r(f);te!==null&&ge(ae,te.startTime-B)}}var X=!1,ee=-1,J=5,G=-1;function F(){return A?!0:!(i.unstable_now()-G<J)}function $(){if(A=!1,X){var B=i.unstable_now();G=B;var te=!0;try{e:{E=!1,S&&(S=!1,L(ee),ee=-1),b=!0;var re=v;try{t:{for(Q(B),_=r(y);_!==null&&!(_.expirationTime>B&&F());){var we=_.callback;if(typeof we=="function"){_.callback=null,v=_.priorityLevel;var Ne=we(_.expirationTime<=B);if(B=i.unstable_now(),typeof Ne=="function"){_.callback=Ne,Q(B),te=!0;break t}_===r(y)&&a(y),Q(B)}else a(y);_=r(y)}if(_!==null)te=!0;else{var Qe=r(f);Qe!==null&&ge(ae,Qe.startTime-B),te=!1}}break e}finally{_=null,v=re,b=!1}te=void 0}}finally{te?Y():X=!1}}}var Y;if(typeof V=="function")Y=function(){V($)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=$,Y=function(){q.postMessage(null)}}else Y=function(){k($,0)};function ge(B,te){ee=k(function(){B(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(B){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var re=v;v=te;try{return B()}finally{v=re}},i.unstable_requestPaint=function(){A=!0},i.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=v;v=B;try{return te()}finally{v=re}},i.unstable_scheduleCallback=function(B,te,re){var we=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,B){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=re+Ne,B={id:h++,callback:te,priorityLevel:B,startTime:re,expirationTime:Ne,sortIndex:-1},re>we?(B.sortIndex=re,e(f,B),r(y)===null&&B===r(f)&&(S?(L(ee),ee=-1):S=!0,ge(ae,re-we))):(B.sortIndex=Ne,e(y,B),E||b||(E=!0,X||(X=!0,Y()))),B},i.unstable_shouldYield=F,i.unstable_wrapCallback=function(B){var te=v;return function(){var re=v;v=te;try{return B.apply(this,arguments)}finally{v=re}}}})(Pf)),Pf}var Py;function uT(){return Py||(Py=1,Bf.exports=cT()),Bf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function dT(){if(zy)return Ps;zy=1;var i=uT(),e=jS(),r=IS();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function y(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,o=n;;){var u=s.return;if(u===null)break;var g=u.alternate;if(g===null){if(o=u.return,o!==null){s=o;continue}break}if(u.child===g.child){for(g=u.child;g;){if(g===s)return m(u),t;if(g===o)return m(u),n;g=g.sibling}throw Error(a(188))}if(s.return!==o.return)s=u,o=g;else{for(var x=!1,w=u.child;w;){if(w===s){x=!0,s=u,o=g;break}if(w===o){x=!0,o=u,s=g;break}w=w.sibling}if(!x){for(w=g.child;w;){if(w===s){x=!0,s=g,o=u;break}if(w===o){x=!0,o=g,s=u;break}w=w.sibling}if(!x)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function f(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=f(t),n!==null)return n;t=t.sibling}return null}var h=Object.assign,_=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),V=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=$&&t[$]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case ae:return"Suspense";case X:return"SuspenseList";case G:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case b:return"Portal";case V:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case Q:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ee:return n=t.displayName||null,n!==null?n:q(t.type)||"Memo";case J:n=t._payload,t=t._init;try{return q(t(n))}catch{}}return null}var ge=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},we=[],Ne=-1;function Qe(t){return{current:t}}function ke(t){0>Ne||(t.current=we[Ne],we[Ne]=null,Ne--)}function C(t,n){Ne++,we[Ne]=t.current,t.current=n}var D=Qe(null),W=Qe(null),fe=Qe(null),Ae=Qe(null);function Oe(t,n){switch(C(fe,n),C(W,t),C(D,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?uy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=uy(n),t=dy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ke(D),C(D,t)}function Pe(){ke(D),ke(W),ke(fe)}function _t(t){t.memoizedState!==null&&C(Ae,t);var n=D.current,s=dy(n,t.type);n!==s&&(C(W,t),C(D,s))}function Mi(t){W.current===t&&(ke(D),ke(W)),Ae.current===t&&(ke(Ae),ks._currentValue=re)}var He=Object.prototype.hasOwnProperty,Kr=i.unstable_scheduleCallback,Eu=i.unstable_cancelCallback,uE=i.unstable_shouldYield,dE=i.unstable_requestPaint,Dn=i.unstable_now,fE=i.unstable_getCurrentPriorityLevel,Gm=i.unstable_ImmediatePriority,Vm=i.unstable_UserBlockingPriority,Ol=i.unstable_NormalPriority,hE=i.unstable_LowPriority,$m=i.unstable_IdlePriority,mE=i.log,gE=i.unstable_setDisableYieldValue,qa=null,zt=null;function ur(t){if(typeof mE=="function"&&gE(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(qa,t)}catch{}}var qt=Math.clz32?Math.clz32:vE,pE=Math.log,yE=Math.LN2;function vE(t){return t>>>=0,t===0?32:31-(pE(t)/yE|0)|0}var Rl=256,Dl=4194304;function Xr(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ml(t,n,s){var o=t.pendingLanes;if(o===0)return 0;var u=0,g=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~g,o!==0?u=Xr(o):(x&=w,x!==0?u=Xr(x):s||(s=w&~t,s!==0&&(u=Xr(s))))):(w=o&~g,w!==0?u=Xr(w):x!==0?u=Xr(x):s||(s=o&~t,s!==0&&(u=Xr(s)))),u===0?0:n!==0&&n!==u&&(n&g)===0&&(g=u&-u,s=n&-n,g>=s||g===32&&(s&4194048)!==0)?n:u}function Ha(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function _E(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ym(){var t=Rl;return Rl<<=1,(Rl&4194048)===0&&(Rl=256),t}function Qm(){var t=Dl;return Dl<<=1,(Dl&62914560)===0&&(Dl=4194304),t}function wu(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Fa(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bE(t,n,s,o,u,g){var x=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var w=t.entanglements,T=t.expirationTimes,M=t.hiddenUpdates;for(s=x&~s;0<s;){var P=31-qt(s),H=1<<P;w[P]=0,T[P]=-1;var j=M[P];if(j!==null)for(M[P]=null,P=0;P<j.length;P++){var I=j[P];I!==null&&(I.lane&=-536870913)}s&=~H}o!==0&&Km(t,o,0),g!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=g&~(x&~n))}function Km(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-qt(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|s&4194090}function Xm(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var o=31-qt(s),u=1<<o;u&n|t[o]&n&&(t[o]|=n),s&=~u}}function Su(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Tu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wm(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:Ry(t.type))}function xE(t,n){var s=te.p;try{return te.p=t,n()}finally{te.p=s}}var dr=Math.random().toString(36).slice(2),bt="__reactFiber$"+dr,Ot="__reactProps$"+dr,ki="__reactContainer$"+dr,Nu="__reactEvents$"+dr,EE="__reactListeners$"+dr,wE="__reactHandles$"+dr,Zm="__reactResources$"+dr,Ga="__reactMarker$"+dr;function Au(t){delete t[bt],delete t[Ot],delete t[Nu],delete t[EE],delete t[wE]}function ji(t){var n=t[bt];if(n)return n;for(var s=t.parentNode;s;){if(n=s[ki]||s[bt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=gy(t);t!==null;){if(s=t[bt])return s;t=gy(t)}return n}t=s,s=t.parentNode}return null}function Ii(t){if(t=t[bt]||t[ki]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Va(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Li(t){var n=t[Zm];return n||(n=t[Zm]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function st(t){t[Ga]=!0}var Jm=new Set,eg={};function Wr(t,n){Ui(t,n),Ui(t+"Capture",n)}function Ui(t,n){for(eg[t]=n,t=0;t<n.length;t++)Jm.add(n[t])}var SE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tg={},ng={};function TE(t){return He.call(ng,t)?!0:He.call(tg,t)?!1:SE.test(t)?ng[t]=!0:(tg[t]=!0,!1)}function kl(t,n,s){if(TE(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function jl(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Hn(t,n,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+o)}}var Cu,rg;function Bi(t){if(Cu===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Cu=n&&n[1]||"",rg=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cu+t+rg}var Ou=!1;function Ru(t,n){if(!t||Ou)return"";Ou=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(I){var j=I}Reflect.construct(t,[],H)}else{try{H.call()}catch(I){j=I}t.call(H.prototype)}}else{try{throw Error()}catch(I){j=I}(H=t())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(I){if(I&&j&&typeof I.stack=="string")return[I.stack,j.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),x=g[0],w=g[1];if(x&&w){var T=x.split(`
`),M=w.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===M.length)for(o=T.length-1,u=M.length-1;1<=o&&0<=u&&T[o]!==M[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==M[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==M[u]){var P=`
`+T[o].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=o&&0<=u);break}}}finally{Ou=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Bi(s):""}function NE(t){switch(t.tag){case 26:case 27:case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Ru(t.type,!1);case 11:return Ru(t.type.render,!1);case 1:return Ru(t.type,!0);case 31:return Bi("Activity");default:return""}}function ig(t){try{var n="";do n+=NE(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ag(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function AE(t){var n=ag(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,g=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(x){o=""+x,g.call(this,x)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Il(t){t._valueTracker||(t._valueTracker=AE(t))}function sg(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return t&&(o=ag(t)?t.checked?"true":"false":t.value),t=o,t!==s?(n.setValue(t),!0):!1}function Ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var CE=/[\n"\\]/g;function nn(t){return t.replace(CE,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Du(t,n,s,o,u,g,x,w){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+tn(n)):t.value!==""+tn(n)&&(t.value=""+tn(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Mu(t,x,tn(n)):s!=null?Mu(t,x,tn(s)):o!=null&&t.removeAttribute("value"),u==null&&g!=null&&(t.defaultChecked=!!g),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+tn(w):t.removeAttribute("name")}function lg(t,n,s,o,u,g,x,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),n!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||n!=null))return;s=s!=null?""+tn(s):"",n=n!=null?""+tn(n):s,w||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function Mu(t,n,s){n==="number"&&Ll(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Pi(t,n,s,o){if(t=t.options,n){n={};for(var u=0;u<s.length;u++)n["$"+s[u]]=!0;for(s=0;s<t.length;s++)u=n.hasOwnProperty("$"+t[s].value),t[s].selected!==u&&(t[s].selected=u),u&&o&&(t[s].defaultSelected=!0)}else{for(s=""+tn(s),n=null,u=0;u<t.length;u++){if(t[u].value===s){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function og(t,n,s){if(n!=null&&(n=""+tn(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+tn(s):""}function cg(t,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(ge(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=tn(n),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o)}function zi(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var OE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ug(t,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,s):typeof s!="number"||s===0||OE.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function dg(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&s[u]!==o&&ug(t,u,o)}else for(var g in n)n.hasOwnProperty(g)&&ug(t,g,n[g])}function ku(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ul(t){return DE.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ju=null;function Iu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,Hi=null;function fg(t){var n=Ii(t);if(n&&(t=n.stateNode)){var s=t[Ot]||null;e:switch(t=n.stateNode,n.type){case"input":if(Du(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+nn(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==t&&o.form===t.form){var u=o[Ot]||null;if(!u)throw Error(a(90));Du(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===t.form&&sg(o)}break e;case"textarea":og(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Pi(t,!!s.multiple,n,!1)}}}var Lu=!1;function hg(t,n,s){if(Lu)return t(n,s);Lu=!0;try{var o=t(n);return o}finally{if(Lu=!1,(qi!==null||Hi!==null)&&(wo(),qi&&(n=qi,t=Hi,Hi=qi=null,fg(n),t)))for(n=0;n<t.length;n++)fg(t[n])}}function $a(t,n){var s=t.stateNode;if(s===null)return null;var o=s[Ot]||null;if(o===null)return null;s=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=!1;if(Fn)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){Uu=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{Uu=!1}var fr=null,Bu=null,Bl=null;function mg(){if(Bl)return Bl;var t,n=Bu,s=n.length,o,u="value"in fr?fr.value:fr.textContent,g=u.length;for(t=0;t<s&&n[t]===u[t];t++);var x=s-t;for(o=1;o<=x&&n[s-o]===u[g-o];o++);return Bl=u.slice(t,1<o?1-o:void 0)}function Pl(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function zl(){return!0}function gg(){return!1}function Rt(t){function n(s,o,u,g,x){this._reactName=s,this._targetInst=u,this.type=o,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(s=t[w],this[w]=s?s(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?zl:gg,this.isPropagationStopped=gg,this}return h(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),n}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=Rt(Zr),Qa=h({},Zr,{view:0,detail:0}),ME=Rt(Qa),Pu,zu,Ka,Hl=h({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(Pu=t.screenX-Ka.screenX,zu=t.screenY-Ka.screenY):zu=Pu=0,Ka=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:zu}}),pg=Rt(Hl),kE=h({},Hl,{dataTransfer:0}),jE=Rt(kE),IE=h({},Qa,{relatedTarget:0}),qu=Rt(IE),LE=h({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),UE=Rt(LE),BE=h({},Zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PE=Rt(BE),zE=h({},Zr,{data:0}),yg=Rt(zE),qE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GE(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=FE[t])?!!n[t]:!1}function Hu(){return GE}var VE=h({},Qa,{key:function(t){if(t.key){var n=qE[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$E=Rt(VE),YE=h({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vg=Rt(YE),QE=h({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),KE=Rt(QE),XE=h({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=Rt(XE),ZE=h({},Hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JE=Rt(ZE),ew=h({},Zr,{newState:0,oldState:0}),tw=Rt(ew),nw=[9,13,27,32],Fu=Fn&&"CompositionEvent"in window,Xa=null;Fn&&"documentMode"in document&&(Xa=document.documentMode);var rw=Fn&&"TextEvent"in window&&!Xa,_g=Fn&&(!Fu||Xa&&8<Xa&&11>=Xa),bg=" ",xg=!1;function Eg(t,n){switch(t){case"keyup":return nw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function iw(t,n){switch(t){case"compositionend":return wg(n);case"keypress":return n.which!==32?null:(xg=!0,bg);case"textInput":return t=n.data,t===bg&&xg?null:t;default:return null}}function aw(t,n){if(Fi)return t==="compositionend"||!Fu&&Eg(t,n)?(t=mg(),Bl=Bu=fr=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _g&&n.locale!=="ko"?null:n.data;default:return null}}var sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!sw[t.type]:n==="textarea"}function Tg(t,n,s,o){qi?Hi?Hi.push(o):Hi=[o]:qi=o,n=Oo(n,"onChange"),0<n.length&&(s=new ql("onChange","change",null,s,o),t.push({event:s,listeners:n}))}var Wa=null,Za=null;function lw(t){ay(t,0)}function Fl(t){var n=Va(t);if(sg(n))return t}function Ng(t,n){if(t==="change")return n}var Ag=!1;if(Fn){var Gu;if(Fn){var Vu="oninput"in document;if(!Vu){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Vu=typeof Cg.oninput=="function"}Gu=Vu}else Gu=!1;Ag=Gu&&(!document.documentMode||9<document.documentMode)}function Og(){Wa&&(Wa.detachEvent("onpropertychange",Rg),Za=Wa=null)}function Rg(t){if(t.propertyName==="value"&&Fl(Za)){var n=[];Tg(n,Za,t,Iu(t)),hg(lw,n)}}function ow(t,n,s){t==="focusin"?(Og(),Wa=n,Za=s,Wa.attachEvent("onpropertychange",Rg)):t==="focusout"&&Og()}function cw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fl(Za)}function uw(t,n){if(t==="click")return Fl(n)}function dw(t,n){if(t==="input"||t==="change")return Fl(n)}function fw(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ht=typeof Object.is=="function"?Object.is:fw;function Ja(t,n){if(Ht(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var u=s[o];if(!He.call(n,u)||!Ht(t[u],n[u]))return!1}return!0}function Dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mg(t,n){var s=Dg(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=n&&o>=n)return{node:s,offset:n-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Dg(s)}}function kg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?kg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ll(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Ll(t.document)}return n}function $u(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var hw=Fn&&"documentMode"in document&&11>=document.documentMode,Gi=null,Yu=null,es=null,Qu=!1;function Ig(t,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Qu||Gi==null||Gi!==Ll(o)||(o=Gi,"selectionStart"in o&&$u(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),es&&Ja(es,o)||(es=o,o=Oo(Yu,"onSelect"),0<o.length&&(n=new ql("onSelect","select",null,n,s),t.push({event:n,listeners:o}),n.target=Gi)))}function Jr(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Vi={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Ku={},Lg={};Fn&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function ei(t){if(Ku[t])return Ku[t];if(!Vi[t])return t;var n=Vi[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Lg)return Ku[t]=n[s];return t}var Ug=ei("animationend"),Bg=ei("animationiteration"),Pg=ei("animationstart"),mw=ei("transitionrun"),gw=ei("transitionstart"),pw=ei("transitioncancel"),zg=ei("transitionend"),qg=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function _n(t,n){qg.set(t,n),Wr(n,[t])}var Hg=new WeakMap;function rn(t,n){if(typeof t=="object"&&t!==null){var s=Hg.get(t);return s!==void 0?s:(n={value:t,source:n,stack:ig(n)},Hg.set(t,n),n)}return{value:t,source:n,stack:ig(n)}}var an=[],$i=0,Wu=0;function Gl(){for(var t=$i,n=Wu=$i=0;n<t;){var s=an[n];an[n++]=null;var o=an[n];an[n++]=null;var u=an[n];an[n++]=null;var g=an[n];if(an[n++]=null,o!==null&&u!==null){var x=o.pending;x===null?u.next=u:(u.next=x.next,x.next=u),o.pending=u}g!==0&&Fg(s,u,g)}}function Vl(t,n,s,o){an[$i++]=t,an[$i++]=n,an[$i++]=s,an[$i++]=o,Wu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Zu(t,n,s,o){return Vl(t,n,s,o),$l(t)}function Yi(t,n){return Vl(t,null,null,n),$l(t)}function Fg(t,n,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var u=!1,g=t.return;g!==null;)g.childLanes|=s,o=g.alternate,o!==null&&(o.childLanes|=s),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(u=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,u&&n!==null&&(u=31-qt(s),t=g.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=s|536870912),g):null}function $l(t){if(50<Ts)throw Ts=0,af=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Qi={};function yw(t,n,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,n,s,o){return new yw(t,n,s,o)}function Ju(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gn(t,n){var s=t.alternate;return s===null?(s=Ft(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Gg(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Yl(t,n,s,o,u,g){var x=0;if(o=t,typeof t=="function")Ju(t)&&(x=1);else if(typeof t=="string")x=_S(t,s,D.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case G:return t=Ft(31,s,n,u),t.elementType=G,t.lanes=g,t;case E:return ti(s.children,u,g,n);case S:x=8,u|=24;break;case A:return t=Ft(12,s,n,u|2),t.elementType=A,t.lanes=g,t;case ae:return t=Ft(13,s,n,u),t.elementType=ae,t.lanes=g,t;case X:return t=Ft(19,s,n,u),t.elementType=X,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:case V:x=10;break e;case L:x=9;break e;case Q:x=11;break e;case ee:x=14;break e;case J:x=16,o=null;break e}x=29,s=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=Ft(x,s,n,u),n.elementType=t,n.type=o,n.lanes=g,n}function ti(t,n,s,o){return t=Ft(7,t,o,n),t.lanes=s,t}function ed(t,n,s){return t=Ft(6,t,null,n),t.lanes=s,t}function td(t,n,s){return n=Ft(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Ki=[],Xi=0,Ql=null,Kl=0,sn=[],ln=0,ni=null,Vn=1,$n="";function ri(t,n){Ki[Xi++]=Kl,Ki[Xi++]=Ql,Ql=t,Kl=n}function Vg(t,n,s){sn[ln++]=Vn,sn[ln++]=$n,sn[ln++]=ni,ni=t;var o=Vn;t=$n;var u=32-qt(o)-1;o&=~(1<<u),s+=1;var g=32-qt(n)+u;if(30<g){var x=u-u%5;g=(o&(1<<x)-1).toString(32),o>>=x,u-=x,Vn=1<<32-qt(n)+u|s<<u|o,$n=g+t}else Vn=1<<g|s<<u|o,$n=t}function nd(t){t.return!==null&&(ri(t,1),Vg(t,1,0))}function rd(t){for(;t===Ql;)Ql=Ki[--Xi],Ki[Xi]=null,Kl=Ki[--Xi],Ki[Xi]=null;for(;t===ni;)ni=sn[--ln],sn[ln]=null,$n=sn[--ln],sn[ln]=null,Vn=sn[--ln],sn[ln]=null}var St=null,Ke=null,Ce=!1,ii=null,Mn=!1,id=Error(a(519));function ai(t){var n=Error(a(418,""));throw rs(rn(n,t)),id}function $g(t){var n=t.stateNode,s=t.type,o=t.memoizedProps;switch(n[bt]=t,n[Ot]=o,s){case"dialog":xe("cancel",n),xe("close",n);break;case"iframe":case"object":case"embed":xe("load",n);break;case"video":case"audio":for(s=0;s<As.length;s++)xe(As[s],n);break;case"source":xe("error",n);break;case"img":case"image":case"link":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"input":xe("invalid",n),lg(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Il(n);break;case"select":xe("invalid",n);break;case"textarea":xe("invalid",n),cg(n,o.value,o.defaultValue,o.children),Il(n)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||cy(n.textContent,s)?(o.popover!=null&&(xe("beforetoggle",n),xe("toggle",n)),o.onScroll!=null&&xe("scroll",n),o.onScrollEnd!=null&&xe("scrollend",n),o.onClick!=null&&(n.onclick=Ro),n=!0):n=!1,n||ai(t)}function Yg(t){for(St=t.return;St;)switch(St.tag){case 5:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:St=St.return}}function ts(t){if(t!==St)return!1;if(!Ce)return Yg(t),Ce=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||xf(t.type,t.memoizedProps)),s=!s),s&&Ke&&ai(t),Yg(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){Ke=xn(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}Ke=null}}else n===27?(n=Ke,Cr(t.type)?(t=Tf,Tf=null,Ke=t):Ke=n):Ke=St?xn(t.stateNode.nextSibling):null;return!0}function ns(){Ke=St=null,Ce=!1}function Qg(){var t=ii;return t!==null&&(kt===null?kt=t:kt.push.apply(kt,t),ii=null),t}function rs(t){ii===null?ii=[t]:ii.push(t)}var ad=Qe(null),si=null,Yn=null;function hr(t,n,s){C(ad,n._currentValue),n._currentValue=s}function Qn(t){t._currentValue=ad.current,ke(ad)}function sd(t,n,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===s)break;t=t.return}}function ld(t,n,s,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var g=u.dependencies;if(g!==null){var x=u.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=u;for(var T=0;T<n.length;T++)if(w.context===n[T]){g.lanes|=s,w=g.alternate,w!==null&&(w.lanes|=s),sd(g.return,s,t),o||(x=null);break e}g=w.next}}else if(u.tag===18){if(x=u.return,x===null)throw Error(a(341));x.lanes|=s,g=x.alternate,g!==null&&(g.lanes|=s),sd(x,s,t),x=null}else x=u.child;if(x!==null)x.return=u;else for(x=u;x!==null;){if(x===t){x=null;break}if(u=x.sibling,u!==null){u.return=x.return,x=u;break}x=x.return}u=x}}function is(t,n,s,o){t=null;for(var u=n,g=!1;u!==null;){if(!g){if((u.flags&524288)!==0)g=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var x=u.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var w=u.type;Ht(u.pendingProps.value,x.value)||(t!==null?t.push(w):t=[w])}}else if(u===Ae.current){if(x=u.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(ks):t=[ks])}u=u.return}t!==null&&ld(n,t,s,o),n.flags|=262144}function Xl(t){for(t=t.firstContext;t!==null;){if(!Ht(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function li(t){si=t,Yn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function xt(t){return Kg(si,t)}function Wl(t,n){return si===null&&li(t),Kg(t,n)}function Kg(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Yn===null){if(t===null)throw Error(a(308));Yn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Yn=Yn.next=n;return s}var vw=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},_w=i.unstable_scheduleCallback,bw=i.unstable_NormalPriority,rt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new vw,data:new Map,refCount:0}}function as(t){t.refCount--,t.refCount===0&&_w(bw,function(){t.controller.abort()})}var ss=null,cd=0,Wi=0,Zi=null;function xw(t,n){if(ss===null){var s=ss=[];cd=0,Wi=ff(),Zi={status:"pending",value:void 0,then:function(o){s.push(o)}}}return cd++,n.then(Xg,Xg),n}function Xg(){if(--cd===0&&ss!==null){Zi!==null&&(Zi.status="fulfilled");var t=ss;ss=null,Wi=0,Zi=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Ew(t,n){var s=[],o={status:"pending",value:null,reason:null,then:function(u){s.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<s.length;u++)(0,s[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<s.length;u++)(0,s[u])(void 0)}),o}var Wg=B.S;B.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&xw(t,n),Wg!==null&&Wg(t,n)};var oi=Qe(null);function ud(){var t=oi.current;return t!==null?t:ze.pooledCache}function Zl(t,n){n===null?C(oi,oi.current):C(oi,n.pool)}function Zg(){var t=ud();return t===null?null:{parent:rt._currentValue,pool:t}}var ls=Error(a(460)),Jg=Error(a(474)),Jl=Error(a(542)),dd={then:function(){}};function e0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eo(){}function t0(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(eo,eo),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,r0(t),t;default:if(typeof n.status=="string")n.then(eo,eo);else{if(t=ze,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,r0(t),t}throw os=n,ls}}var os=null;function n0(){if(os===null)throw Error(a(459));var t=os;return os=null,t}function r0(t){if(t===ls||t===Jl)throw Error(a(483))}var mr=!1;function fd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,n,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Re&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=$l(t),Fg(t,null,s),n}return Vl(t,o,n,s),$l(t)}function cs(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Xm(t,s)}}function md(t,n){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var u=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var x={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?u=g=x:g=g.next=x,s=s.next}while(s!==null);g===null?u=g=n:g=g.next=n}else u=g=n;s={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var gd=!1;function us(){if(gd){var t=Zi;if(t!==null)throw t}}function ds(t,n,s,o){gd=!1;var u=t.updateQueue;mr=!1;var g=u.firstBaseUpdate,x=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var T=w,M=T.next;T.next=null,x===null?g=M:x.next=M,x=T;var P=t.alternate;P!==null&&(P=P.updateQueue,w=P.lastBaseUpdate,w!==x&&(w===null?P.firstBaseUpdate=M:w.next=M,P.lastBaseUpdate=T))}if(g!==null){var H=u.baseState;x=0,P=M=T=null,w=g;do{var j=w.lane&-536870913,I=j!==w.lane;if(I?(Ee&j)===j:(o&j)===j){j!==0&&j===Wi&&(gd=!0),P!==null&&(P=P.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ce=t,se=w;j=n;var Le=s;switch(se.tag){case 1:if(ce=se.payload,typeof ce=="function"){H=ce.call(Le,H,j);break e}H=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=se.payload,j=typeof ce=="function"?ce.call(Le,H,j):ce,j==null)break e;H=h({},H,j);break e;case 2:mr=!0}}j=w.callback,j!==null&&(t.flags|=64,I&&(t.flags|=8192),I=u.callbacks,I===null?u.callbacks=[j]:I.push(j))}else I={lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},P===null?(M=P=I,T=H):P=P.next=I,x|=j;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;I=w,w=I.next,I.next=null,u.lastBaseUpdate=I,u.shared.pending=null}}while(!0);P===null&&(T=H),u.baseState=T,u.firstBaseUpdate=M,u.lastBaseUpdate=P,g===null&&(u.shared.lanes=0),Sr|=x,t.lanes=x,t.memoizedState=H}}function i0(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function a0(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)i0(s[t],n)}var Ji=Qe(null),to=Qe(0);function s0(t,n){t=tr,C(to,t),C(Ji,n),tr=t|n.baseLanes}function pd(){C(to,tr),C(Ji,Ji.current)}function yd(){tr=to.current,ke(Ji),ke(to)}var yr=0,he=null,je=null,tt=null,no=!1,ea=!1,ci=!1,ro=0,fs=0,ta=null,ww=0;function Je(){throw Error(a(321))}function vd(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Ht(t[s],n[s]))return!1;return!0}function _d(t,n,s,o,u,g){return yr=g,he=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=t===null||t.memoizedState===null?F0:G0,ci=!1,g=s(o,u),ci=!1,ea&&(g=o0(n,s,o,u)),l0(t),g}function l0(t){B.H=co;var n=je!==null&&je.next!==null;if(yr=0,tt=je=he=null,no=!1,fs=0,ta=null,n)throw Error(a(300));t===null||lt||(t=t.dependencies,t!==null&&Xl(t)&&(lt=!0))}function o0(t,n,s,o){he=t;var u=0;do{if(ea&&(ta=null),fs=0,ea=!1,25<=u)throw Error(a(301));if(u+=1,tt=je=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=Rw,g=n(s,o)}while(ea);return g}function Sw(){var t=B.H,n=t.useState()[0];return n=typeof n.then=="function"?hs(n):n,t=t.useState()[0],(je!==null?je.memoizedState:null)!==t&&(he.flags|=1024),n}function bd(){var t=ro!==0;return ro=0,t}function xd(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Ed(t){if(no){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}no=!1}yr=0,tt=je=he=null,ea=!1,fs=ro=0,ta=null}function Dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?he.memoizedState=tt=t:tt=tt.next=t,tt}function nt(){if(je===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var n=tt===null?he.memoizedState:tt.next;if(n!==null)tt=n,je=t;else{if(t===null)throw he.alternate===null?Error(a(467)):Error(a(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},tt===null?he.memoizedState=tt=t:tt=tt.next=t}return tt}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hs(t){var n=fs;return fs+=1,ta===null&&(ta=[]),t=t0(ta,t,n),n=he,(tt===null?n.memoizedState:tt.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?F0:G0),t}function io(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hs(t);if(t.$$typeof===V)return xt(t)}throw Error(a(438,String(t)))}function Sd(t){var n=null,s=he.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=he.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=wd(),he.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),o=0;o<t;o++)s[o]=F;return n.index++,s}function Kn(t,n){return typeof n=="function"?n(t):n}function ao(t){var n=nt();return Td(n,je,t)}function Td(t,n,s){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var u=t.baseQueue,g=o.pending;if(g!==null){if(u!==null){var x=u.next;u.next=g.next,g.next=x}n.baseQueue=u=g,o.pending=null}if(g=t.baseState,u===null)t.memoizedState=g;else{n=u.next;var w=x=null,T=null,M=n,P=!1;do{var H=M.lane&-536870913;if(H!==M.lane?(Ee&H)===H:(yr&H)===H){var j=M.revertLane;if(j===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),H===Wi&&(P=!0);else if((yr&j)===j){M=M.next,j===Wi&&(P=!0);continue}else H={lane:0,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},T===null?(w=T=H,x=g):T=T.next=H,he.lanes|=j,Sr|=j;H=M.action,ci&&s(g,H),g=M.hasEagerState?M.eagerState:s(g,H)}else j={lane:H,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},T===null?(w=T=j,x=g):T=T.next=j,he.lanes|=H,Sr|=H;M=M.next}while(M!==null&&M!==n);if(T===null?x=g:T.next=w,!Ht(g,t.memoizedState)&&(lt=!0,P&&(s=Zi,s!==null)))throw s;t.memoizedState=g,t.baseState=x,t.baseQueue=T,o.lastRenderedState=g}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Nd(t){var n=nt(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var o=s.dispatch,u=s.pending,g=n.memoizedState;if(u!==null){s.pending=null;var x=u=u.next;do g=t(g,x.action),x=x.next;while(x!==u);Ht(g,n.memoizedState)||(lt=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,o]}function c0(t,n,s){var o=he,u=nt(),g=Ce;if(g){if(s===void 0)throw Error(a(407));s=s()}else s=n();var x=!Ht((je||u).memoizedState,s);x&&(u.memoizedState=s,lt=!0),u=u.queue;var w=f0.bind(null,o,u,t);if(ms(2048,8,w,[t]),u.getSnapshot!==n||x||tt!==null&&tt.memoizedState.tag&1){if(o.flags|=2048,na(9,so(),d0.bind(null,o,u,s,n),null),ze===null)throw Error(a(349));g||(yr&124)!==0||u0(o,n,s)}return s}function u0(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=he.updateQueue,n===null?(n=wd(),he.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function d0(t,n,s,o){n.value=s,n.getSnapshot=o,h0(n)&&m0(t)}function f0(t,n,s){return s(function(){h0(n)&&m0(t)})}function h0(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Ht(t,s)}catch{return!0}}function m0(t){var n=Yi(t,2);n!==null&&Qt(n,t,2)}function Ad(t){var n=Dt();if(typeof t=="function"){var s=t;if(t=s(),ci){ur(!0);try{s()}finally{ur(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:t},n}function g0(t,n,s,o){return t.baseState=s,Td(t,je,typeof o=="function"?o:Kn)}function Tw(t,n,s,o,u){if(oo(t))throw Error(a(485));if(t=n.action,t!==null){var g={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};B.T!==null?s(!0):g.isTransition=!1,o(g),s=n.pending,s===null?(g.next=n.pending=g,p0(n,g)):(g.next=s.next,n.pending=s.next=g)}}function p0(t,n){var s=n.action,o=n.payload,u=t.state;if(n.isTransition){var g=B.T,x={};B.T=x;try{var w=s(u,o),T=B.S;T!==null&&T(x,w),y0(t,n,w)}catch(M){Cd(t,n,M)}finally{B.T=g}}else try{g=s(u,o),y0(t,n,g)}catch(M){Cd(t,n,M)}}function y0(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){v0(t,n,o)},function(o){return Cd(t,n,o)}):v0(t,n,s)}function v0(t,n,s){n.status="fulfilled",n.value=s,_0(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,p0(t,s)))}function Cd(t,n,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,_0(n),n=n.next;while(n!==o)}t.action=null}function _0(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function b0(t,n){return n}function x0(t,n){if(Ce){var s=ze.formState;if(s!==null){e:{var o=he;if(Ce){if(Ke){t:{for(var u=Ke,g=Mn;u.nodeType!==8;){if(!g){u=null;break t}if(u=xn(u.nextSibling),u===null){u=null;break t}}g=u.data,u=g==="F!"||g==="F"?u:null}if(u){Ke=xn(u.nextSibling),o=u.data==="F!";break e}}ai(o)}o=!1}o&&(n=s[0])}}return s=Dt(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b0,lastRenderedState:n},s.queue=o,s=z0.bind(null,he,o),o.dispatch=s,o=Ad(!1),g=kd.bind(null,he,!1,o.queue),o=Dt(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,s=Tw.bind(null,he,u,g,s),u.dispatch=s,o.memoizedState=t,[n,s,!1]}function E0(t){var n=nt();return w0(n,je,t)}function w0(t,n,s){if(n=Td(t,n,b0)[0],t=ao(Kn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=hs(n)}catch(x){throw x===ls?Jl:x}else o=n;n=nt();var u=n.queue,g=u.dispatch;return s!==n.memoizedState&&(he.flags|=2048,na(9,so(),Nw.bind(null,u,s),null)),[o,g,t]}function Nw(t,n){t.action=n}function S0(t){var n=nt(),s=je;if(s!==null)return w0(n,s,t);nt(),n=n.memoizedState,s=nt();var o=s.queue.dispatch;return s.memoizedState=t,[n,o,!1]}function na(t,n,s,o){return t={tag:t,create:s,deps:o,inst:n,next:null},n=he.updateQueue,n===null&&(n=wd(),he.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,n.lastEffect=t),t}function so(){return{destroy:void 0,resource:void 0}}function T0(){return nt().memoizedState}function lo(t,n,s,o){var u=Dt();o=o===void 0?null:o,he.flags|=t,u.memoizedState=na(1|n,so(),s,o)}function ms(t,n,s,o){var u=nt();o=o===void 0?null:o;var g=u.memoizedState.inst;je!==null&&o!==null&&vd(o,je.memoizedState.deps)?u.memoizedState=na(n,g,s,o):(he.flags|=t,u.memoizedState=na(1|n,g,s,o))}function N0(t,n){lo(8390656,8,t,n)}function A0(t,n){ms(2048,8,t,n)}function C0(t,n){return ms(4,2,t,n)}function O0(t,n){return ms(4,4,t,n)}function R0(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function D0(t,n,s){s=s!=null?s.concat([t]):null,ms(4,4,R0.bind(null,n,t),s)}function Od(){}function M0(t,n){var s=nt();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&vd(n,o[1])?o[0]:(s.memoizedState=[t,n],t)}function k0(t,n){var s=nt();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&vd(n,o[1]))return o[0];if(o=t(),ci){ur(!0);try{t()}finally{ur(!1)}}return s.memoizedState=[o,n],o}function Rd(t,n,s){return s===void 0||(yr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=Lp(),he.lanes|=t,Sr|=t,s)}function j0(t,n,s,o){return Ht(s,n)?s:Ji.current!==null?(t=Rd(t,s,o),Ht(t,n)||(lt=!0),t):(yr&42)===0?(lt=!0,t.memoizedState=s):(t=Lp(),he.lanes|=t,Sr|=t,n)}function I0(t,n,s,o,u){var g=te.p;te.p=g!==0&&8>g?g:8;var x=B.T,w={};B.T=w,kd(t,!1,n,s);try{var T=u(),M=B.S;if(M!==null&&M(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var P=Ew(T,o);gs(t,n,P,Yt(t))}else gs(t,n,o,Yt(t))}catch(H){gs(t,n,{then:function(){},status:"rejected",reason:H},Yt())}finally{te.p=g,B.T=x}}function Aw(){}function Dd(t,n,s,o){if(t.tag!==5)throw Error(a(476));var u=L0(t).queue;I0(t,u,n,re,s===null?Aw:function(){return U0(t),s(o)})}function L0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:re},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function U0(t){var n=L0(t).next.queue;gs(t,n,{},Yt())}function Md(){return xt(ks)}function B0(){return nt().memoizedState}function P0(){return nt().memoizedState}function Cw(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Yt();t=gr(s);var o=pr(n,t,s);o!==null&&(Qt(o,n,s),cs(o,n,s)),n={cache:od()},t.payload=n;return}n=n.return}}function Ow(t,n,s){var o=Yt();s={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},oo(t)?q0(n,s):(s=Zu(t,n,s,o),s!==null&&(Qt(s,t,o),H0(s,n,o)))}function z0(t,n,s){var o=Yt();gs(t,n,s,o)}function gs(t,n,s,o){var u={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(oo(t))q0(n,u);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var x=n.lastRenderedState,w=g(x,s);if(u.hasEagerState=!0,u.eagerState=w,Ht(w,x))return Vl(t,n,u,0),ze===null&&Gl(),!1}catch{}finally{}if(s=Zu(t,n,u,o),s!==null)return Qt(s,t,o),H0(s,n,o),!0}return!1}function kd(t,n,s,o){if(o={lane:2,revertLane:ff(),action:o,hasEagerState:!1,eagerState:null,next:null},oo(t)){if(n)throw Error(a(479))}else n=Zu(t,s,o,2),n!==null&&Qt(n,t,2)}function oo(t){var n=t.alternate;return t===he||n!==null&&n===he}function q0(t,n){ea=no=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function H0(t,n,s){if((s&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Xm(t,s)}}var co={readContext:xt,use:io,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je},F0={readContext:xt,use:io,useCallback:function(t,n){return Dt().memoizedState=[t,n===void 0?null:n],t},useContext:xt,useEffect:N0,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,lo(4194308,4,R0.bind(null,n,t),s)},useLayoutEffect:function(t,n){return lo(4194308,4,t,n)},useInsertionEffect:function(t,n){lo(4,2,t,n)},useMemo:function(t,n){var s=Dt();n=n===void 0?null:n;var o=t();if(ci){ur(!0);try{t()}finally{ur(!1)}}return s.memoizedState=[o,n],o},useReducer:function(t,n,s){var o=Dt();if(s!==void 0){var u=s(n);if(ci){ur(!0);try{s(n)}finally{ur(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=Ow.bind(null,he,t),[o.memoizedState,t]},useRef:function(t){var n=Dt();return t={current:t},n.memoizedState=t},useState:function(t){t=Ad(t);var n=t.queue,s=z0.bind(null,he,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Od,useDeferredValue:function(t,n){var s=Dt();return Rd(s,t,n)},useTransition:function(){var t=Ad(!1);return t=I0.bind(null,he,t.queue,!0,!1),Dt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var o=he,u=Dt();if(Ce){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),ze===null)throw Error(a(349));(Ee&124)!==0||u0(o,n,s)}u.memoizedState=s;var g={value:s,getSnapshot:n};return u.queue=g,N0(f0.bind(null,o,g,t),[t]),o.flags|=2048,na(9,so(),d0.bind(null,o,g,s,n),null),s},useId:function(){var t=Dt(),n=ze.identifierPrefix;if(Ce){var s=$n,o=Vn;s=(o&~(1<<32-qt(o)-1)).toString(32)+s,n=""+n+"R"+s,s=ro++,0<s&&(n+="H"+s.toString(32)),n+=""}else s=ww++,n=""+n+"r"+s.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:Md,useFormState:x0,useActionState:x0,useOptimistic:function(t){var n=Dt();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=kd.bind(null,he,!0,s),s.dispatch=n,[t,n]},useMemoCache:Sd,useCacheRefresh:function(){return Dt().memoizedState=Cw.bind(null,he)}},G0={readContext:xt,use:io,useCallback:M0,useContext:xt,useEffect:A0,useImperativeHandle:D0,useInsertionEffect:C0,useLayoutEffect:O0,useMemo:k0,useReducer:ao,useRef:T0,useState:function(){return ao(Kn)},useDebugValue:Od,useDeferredValue:function(t,n){var s=nt();return j0(s,je.memoizedState,t,n)},useTransition:function(){var t=ao(Kn)[0],n=nt().memoizedState;return[typeof t=="boolean"?t:hs(t),n]},useSyncExternalStore:c0,useId:B0,useHostTransitionStatus:Md,useFormState:E0,useActionState:E0,useOptimistic:function(t,n){var s=nt();return g0(s,je,t,n)},useMemoCache:Sd,useCacheRefresh:P0},Rw={readContext:xt,use:io,useCallback:M0,useContext:xt,useEffect:A0,useImperativeHandle:D0,useInsertionEffect:C0,useLayoutEffect:O0,useMemo:k0,useReducer:Nd,useRef:T0,useState:function(){return Nd(Kn)},useDebugValue:Od,useDeferredValue:function(t,n){var s=nt();return je===null?Rd(s,t,n):j0(s,je.memoizedState,t,n)},useTransition:function(){var t=Nd(Kn)[0],n=nt().memoizedState;return[typeof t=="boolean"?t:hs(t),n]},useSyncExternalStore:c0,useId:B0,useHostTransitionStatus:Md,useFormState:S0,useActionState:S0,useOptimistic:function(t,n){var s=nt();return je!==null?g0(s,je,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Sd,useCacheRefresh:P0},ra=null,ps=0;function uo(t){var n=ps;return ps+=1,ra===null&&(ra=[]),t0(ra,t,n)}function ys(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function fo(t,n){throw n.$$typeof===_?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function V0(t){var n=t._init;return n(t._payload)}function $0(t){function n(O,N){if(t){var R=O.deletions;R===null?(O.deletions=[N],O.flags|=16):R.push(N)}}function s(O,N){if(!t)return null;for(;N!==null;)n(O,N),N=N.sibling;return null}function o(O){for(var N=new Map;O!==null;)O.key!==null?N.set(O.key,O):N.set(O.index,O),O=O.sibling;return N}function u(O,N){return O=Gn(O,N),O.index=0,O.sibling=null,O}function g(O,N,R){return O.index=R,t?(R=O.alternate,R!==null?(R=R.index,R<N?(O.flags|=67108866,N):R):(O.flags|=67108866,N)):(O.flags|=1048576,N)}function x(O){return t&&O.alternate===null&&(O.flags|=67108866),O}function w(O,N,R,z){return N===null||N.tag!==6?(N=ed(R,O.mode,z),N.return=O,N):(N=u(N,R),N.return=O,N)}function T(O,N,R,z){var ne=R.type;return ne===E?P(O,N,R.props.children,z,R.key):N!==null&&(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&V0(ne)===N.type)?(N=u(N,R.props),ys(N,R),N.return=O,N):(N=Yl(R.type,R.key,R.props,null,O.mode,z),ys(N,R),N.return=O,N)}function M(O,N,R,z){return N===null||N.tag!==4||N.stateNode.containerInfo!==R.containerInfo||N.stateNode.implementation!==R.implementation?(N=td(R,O.mode,z),N.return=O,N):(N=u(N,R.children||[]),N.return=O,N)}function P(O,N,R,z,ne){return N===null||N.tag!==7?(N=ti(R,O.mode,z,ne),N.return=O,N):(N=u(N,R),N.return=O,N)}function H(O,N,R){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=ed(""+N,O.mode,R),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case v:return R=Yl(N.type,N.key,N.props,null,O.mode,R),ys(R,N),R.return=O,R;case b:return N=td(N,O.mode,R),N.return=O,N;case J:var z=N._init;return N=z(N._payload),H(O,N,R)}if(ge(N)||Y(N))return N=ti(N,O.mode,R,null),N.return=O,N;if(typeof N.then=="function")return H(O,uo(N),R);if(N.$$typeof===V)return H(O,Wl(O,N),R);fo(O,N)}return null}function j(O,N,R,z){var ne=N!==null?N.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ne!==null?null:w(O,N,""+R,z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case v:return R.key===ne?T(O,N,R,z):null;case b:return R.key===ne?M(O,N,R,z):null;case J:return ne=R._init,R=ne(R._payload),j(O,N,R,z)}if(ge(R)||Y(R))return ne!==null?null:P(O,N,R,z,null);if(typeof R.then=="function")return j(O,N,uo(R),z);if(R.$$typeof===V)return j(O,N,Wl(O,R),z);fo(O,R)}return null}function I(O,N,R,z,ne){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return O=O.get(R)||null,w(N,O,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return O=O.get(z.key===null?R:z.key)||null,T(N,O,z,ne);case b:return O=O.get(z.key===null?R:z.key)||null,M(N,O,z,ne);case J:var pe=z._init;return z=pe(z._payload),I(O,N,R,z,ne)}if(ge(z)||Y(z))return O=O.get(R)||null,P(N,O,z,ne,null);if(typeof z.then=="function")return I(O,N,R,uo(z),ne);if(z.$$typeof===V)return I(O,N,R,Wl(N,z),ne);fo(N,z)}return null}function ce(O,N,R,z){for(var ne=null,pe=null,ie=N,le=N=0,ct=null;ie!==null&&le<R.length;le++){ie.index>le?(ct=ie,ie=null):ct=ie.sibling;var Se=j(O,ie,R[le],z);if(Se===null){ie===null&&(ie=ct);break}t&&ie&&Se.alternate===null&&n(O,ie),N=g(Se,N,le),pe===null?ne=Se:pe.sibling=Se,pe=Se,ie=ct}if(le===R.length)return s(O,ie),Ce&&ri(O,le),ne;if(ie===null){for(;le<R.length;le++)ie=H(O,R[le],z),ie!==null&&(N=g(ie,N,le),pe===null?ne=ie:pe.sibling=ie,pe=ie);return Ce&&ri(O,le),ne}for(ie=o(ie);le<R.length;le++)ct=I(ie,O,le,R[le],z),ct!==null&&(t&&ct.alternate!==null&&ie.delete(ct.key===null?le:ct.key),N=g(ct,N,le),pe===null?ne=ct:pe.sibling=ct,pe=ct);return t&&ie.forEach(function(kr){return n(O,kr)}),Ce&&ri(O,le),ne}function se(O,N,R,z){if(R==null)throw Error(a(151));for(var ne=null,pe=null,ie=N,le=N=0,ct=null,Se=R.next();ie!==null&&!Se.done;le++,Se=R.next()){ie.index>le?(ct=ie,ie=null):ct=ie.sibling;var kr=j(O,ie,Se.value,z);if(kr===null){ie===null&&(ie=ct);break}t&&ie&&kr.alternate===null&&n(O,ie),N=g(kr,N,le),pe===null?ne=kr:pe.sibling=kr,pe=kr,ie=ct}if(Se.done)return s(O,ie),Ce&&ri(O,le),ne;if(ie===null){for(;!Se.done;le++,Se=R.next())Se=H(O,Se.value,z),Se!==null&&(N=g(Se,N,le),pe===null?ne=Se:pe.sibling=Se,pe=Se);return Ce&&ri(O,le),ne}for(ie=o(ie);!Se.done;le++,Se=R.next())Se=I(ie,O,le,Se.value,z),Se!==null&&(t&&Se.alternate!==null&&ie.delete(Se.key===null?le:Se.key),N=g(Se,N,le),pe===null?ne=Se:pe.sibling=Se,pe=Se);return t&&ie.forEach(function(DS){return n(O,DS)}),Ce&&ri(O,le),ne}function Le(O,N,R,z){if(typeof R=="object"&&R!==null&&R.type===E&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case v:e:{for(var ne=R.key;N!==null;){if(N.key===ne){if(ne=R.type,ne===E){if(N.tag===7){s(O,N.sibling),z=u(N,R.props.children),z.return=O,O=z;break e}}else if(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&V0(ne)===N.type){s(O,N.sibling),z=u(N,R.props),ys(z,R),z.return=O,O=z;break e}s(O,N);break}else n(O,N);N=N.sibling}R.type===E?(z=ti(R.props.children,O.mode,z,R.key),z.return=O,O=z):(z=Yl(R.type,R.key,R.props,null,O.mode,z),ys(z,R),z.return=O,O=z)}return x(O);case b:e:{for(ne=R.key;N!==null;){if(N.key===ne)if(N.tag===4&&N.stateNode.containerInfo===R.containerInfo&&N.stateNode.implementation===R.implementation){s(O,N.sibling),z=u(N,R.children||[]),z.return=O,O=z;break e}else{s(O,N);break}else n(O,N);N=N.sibling}z=td(R,O.mode,z),z.return=O,O=z}return x(O);case J:return ne=R._init,R=ne(R._payload),Le(O,N,R,z)}if(ge(R))return ce(O,N,R,z);if(Y(R)){if(ne=Y(R),typeof ne!="function")throw Error(a(150));return R=ne.call(R),se(O,N,R,z)}if(typeof R.then=="function")return Le(O,N,uo(R),z);if(R.$$typeof===V)return Le(O,N,Wl(O,R),z);fo(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,N!==null&&N.tag===6?(s(O,N.sibling),z=u(N,R),z.return=O,O=z):(s(O,N),z=ed(R,O.mode,z),z.return=O,O=z),x(O)):s(O,N)}return function(O,N,R,z){try{ps=0;var ne=Le(O,N,R,z);return ra=null,ne}catch(ie){if(ie===ls||ie===Jl)throw ie;var pe=Ft(29,ie,null,O.mode);return pe.lanes=z,pe.return=O,pe}finally{}}}var ia=$0(!0),Y0=$0(!1),on=Qe(null),kn=null;function vr(t){var n=t.alternate;C(it,it.current&1),C(on,t),kn===null&&(n===null||Ji.current!==null||n.memoizedState!==null)&&(kn=t)}function Q0(t){if(t.tag===22){if(C(it,it.current),C(on,t),kn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(kn=t)}}else _r()}function _r(){C(it,it.current),C(on,on.current)}function Xn(t){ke(on),kn===t&&(kn=null),ke(it)}var it=Qe(0);function ho(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Sf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function jd(t,n,s,o){n=t.memoizedState,s=s(o,n),s=s==null?n:h({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Id={enqueueSetState:function(t,n,s){t=t._reactInternals;var o=Yt(),u=gr(o);u.payload=n,s!=null&&(u.callback=s),n=pr(t,u,o),n!==null&&(Qt(n,t,o),cs(n,t,o))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var o=Yt(),u=gr(o);u.tag=1,u.payload=n,s!=null&&(u.callback=s),n=pr(t,u,o),n!==null&&(Qt(n,t,o),cs(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Yt(),o=gr(s);o.tag=2,n!=null&&(o.callback=n),n=pr(t,o,s),n!==null&&(Qt(n,t,s),cs(n,t,s))}};function K0(t,n,s,o,u,g,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,g,x):n.prototype&&n.prototype.isPureReactComponent?!Ja(s,o)||!Ja(u,g):!0}function X0(t,n,s,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==t&&Id.enqueueReplaceState(n,n.state,null)}function ui(t,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(t=t.defaultProps){s===n&&(s=h({},s));for(var u in t)s[u]===void 0&&(s[u]=t[u])}return s}var mo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function W0(t){mo(t)}function Z0(t){console.error(t)}function J0(t){mo(t)}function go(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function ep(t,n,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Ld(t,n,s){return s=gr(s),s.tag=3,s.payload={element:null},s.callback=function(){go(t,n)},s}function tp(t){return t=gr(t),t.tag=3,t}function np(t,n,s,o){var u=s.type.getDerivedStateFromError;if(typeof u=="function"){var g=o.value;t.payload=function(){return u(g)},t.callback=function(){ep(n,s,o)}}var x=s.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){ep(n,s,o),typeof u!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function Dw(t,n,s,o,u){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&is(n,s,u,!0),s=on.current,s!==null){switch(s.tag){case 13:return kn===null?lf():s.alternate===null&&Xe===0&&(Xe=3),s.flags&=-257,s.flags|=65536,s.lanes=u,o===dd?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),cf(t,o,u)),!1;case 22:return s.flags|=65536,o===dd?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),cf(t,o,u)),!1}throw Error(a(435,s.tag))}return cf(t,o,u),lf(),!1}if(Ce)return n=on.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==id&&(t=Error(a(422),{cause:o}),rs(rn(t,s)))):(o!==id&&(n=Error(a(423),{cause:o}),rs(rn(n,s))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=rn(o,s),u=Ld(t.stateNode,o,u),md(t,u),Xe!==4&&(Xe=2)),!1;var g=Error(a(520),{cause:o});if(g=rn(g,s),Ss===null?Ss=[g]:Ss.push(g),Xe!==4&&(Xe=2),n===null)return!0;o=rn(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=u&-u,s.lanes|=t,t=Ld(s.stateNode,o,t),md(s,t),!1;case 1:if(n=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Tr===null||!Tr.has(g))))return s.flags|=65536,u&=-u,s.lanes|=u,u=tp(u),np(u,t,s,o),md(s,u),!1}s=s.return}while(s!==null);return!1}var rp=Error(a(461)),lt=!1;function gt(t,n,s,o){n.child=t===null?Y0(n,null,s,o):ia(n,t.child,s,o)}function ip(t,n,s,o,u){s=s.render;var g=n.ref;if("ref"in o){var x={};for(var w in o)w!=="ref"&&(x[w]=o[w])}else x=o;return li(n),o=_d(t,n,s,x,g,u),w=bd(),t!==null&&!lt?(xd(t,n,u),Wn(t,n,u)):(Ce&&w&&nd(n),n.flags|=1,gt(t,n,o,u),n.child)}function ap(t,n,s,o,u){if(t===null){var g=s.type;return typeof g=="function"&&!Ju(g)&&g.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=g,sp(t,n,g,o,u)):(t=Yl(s.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(g=t.child,!Gd(t,u)){var x=g.memoizedProps;if(s=s.compare,s=s!==null?s:Ja,s(x,o)&&t.ref===n.ref)return Wn(t,n,u)}return n.flags|=1,t=Gn(g,o),t.ref=n.ref,t.return=n,n.child=t}function sp(t,n,s,o,u){if(t!==null){var g=t.memoizedProps;if(Ja(g,o)&&t.ref===n.ref)if(lt=!1,n.pendingProps=o=g,Gd(t,u))(t.flags&131072)!==0&&(lt=!0);else return n.lanes=t.lanes,Wn(t,n,u)}return Ud(t,n,s,o,u)}function lp(t,n,s){var o=n.pendingProps,u=o.children,g=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=g!==null?g.baseLanes|s:s,t!==null){for(u=n.child=t.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;n.childLanes=g&~o}else n.childLanes=0,n.child=null;return op(t,n,o,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zl(n,g!==null?g.cachePool:null),g!==null?s0(n,g):pd(),Q0(n);else return n.lanes=n.childLanes=536870912,op(t,n,g!==null?g.baseLanes|s:s,s)}else g!==null?(Zl(n,g.cachePool),s0(n,g),_r(),n.memoizedState=null):(t!==null&&Zl(n,null),pd(),_r());return gt(t,n,u,s),n.child}function op(t,n,s,o){var u=ud();return u=u===null?null:{parent:rt._currentValue,pool:u},n.memoizedState={baseLanes:s,cachePool:u},t!==null&&Zl(n,null),pd(),Q0(n),t!==null&&is(t,n,o,!0),null}function po(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Ud(t,n,s,o,u){return li(n),s=_d(t,n,s,o,void 0,u),o=bd(),t!==null&&!lt?(xd(t,n,u),Wn(t,n,u)):(Ce&&o&&nd(n),n.flags|=1,gt(t,n,s,u),n.child)}function cp(t,n,s,o,u,g){return li(n),n.updateQueue=null,s=o0(n,o,s,u),l0(t),o=bd(),t!==null&&!lt?(xd(t,n,g),Wn(t,n,g)):(Ce&&o&&nd(n),n.flags|=1,gt(t,n,s,g),n.child)}function up(t,n,s,o,u){if(li(n),n.stateNode===null){var g=Qi,x=s.contextType;typeof x=="object"&&x!==null&&(g=xt(x)),g=new s(o,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Id,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=o,g.state=n.memoizedState,g.refs={},fd(n),x=s.contextType,g.context=typeof x=="object"&&x!==null?xt(x):Qi,g.state=n.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(jd(n,s,x,o),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&Id.enqueueReplaceState(g,g.state,null),ds(n,o,g,u),us(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){g=n.stateNode;var w=n.memoizedProps,T=ui(s,w);g.props=T;var M=g.context,P=s.contextType;x=Qi,typeof P=="object"&&P!==null&&(x=xt(P));var H=s.getDerivedStateFromProps;P=typeof H=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,P||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||M!==x)&&X0(n,g,o,x),mr=!1;var j=n.memoizedState;g.state=j,ds(n,o,g,u),us(),M=n.memoizedState,w||j!==M||mr?(typeof H=="function"&&(jd(n,s,H,o),M=n.memoizedState),(T=mr||K0(n,s,T,o,j,M,x))?(P||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=M),g.props=o,g.state=M,g.context=x,o=T):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{g=n.stateNode,hd(t,n),x=n.memoizedProps,P=ui(s,x),g.props=P,H=n.pendingProps,j=g.context,M=s.contextType,T=Qi,typeof M=="object"&&M!==null&&(T=xt(M)),w=s.getDerivedStateFromProps,(M=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==H||j!==T)&&X0(n,g,o,T),mr=!1,j=n.memoizedState,g.state=j,ds(n,o,g,u),us();var I=n.memoizedState;x!==H||j!==I||mr||t!==null&&t.dependencies!==null&&Xl(t.dependencies)?(typeof w=="function"&&(jd(n,s,w,o),I=n.memoizedState),(P=mr||K0(n,s,P,o,j,I,T)||t!==null&&t.dependencies!==null&&Xl(t.dependencies))?(M||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,I,T),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,I,T)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===t.memoizedProps&&j===t.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&j===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=I),g.props=o,g.state=I,g.context=T,o=P):(typeof g.componentDidUpdate!="function"||x===t.memoizedProps&&j===t.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&j===t.memoizedState||(n.flags|=1024),o=!1)}return g=o,po(t,n),o=(n.flags&128)!==0,g||o?(g=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,t!==null&&o?(n.child=ia(n,t.child,null,u),n.child=ia(n,null,s,u)):gt(t,n,s,u),n.memoizedState=g.state,t=n.child):t=Wn(t,n,u),t}function dp(t,n,s,o){return ns(),n.flags|=256,gt(t,n,s,o),n.child}var Bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(t){return{baseLanes:t,cachePool:Zg()}}function zd(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=cn),t}function fp(t,n,s){var o=n.pendingProps,u=!1,g=(n.flags&128)!==0,x;if((x=g)||(x=t!==null&&t.memoizedState===null?!1:(it.current&2)!==0),x&&(u=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ce){if(u?vr(n):_r(),Ce){var w=Ke,T;if(T=w){e:{for(T=w,w=Mn;T.nodeType!==8;){if(!w){w=null;break e}if(T=xn(T.nextSibling),T===null){w=null;break e}}w=T}w!==null?(n.memoizedState={dehydrated:w,treeContext:ni!==null?{id:Vn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},T=Ft(18,null,null,0),T.stateNode=w,T.return=n,n.child=T,St=n,Ke=null,T=!0):T=!1}T||ai(n)}if(w=n.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Sf(w)?n.lanes=32:n.lanes=536870912,null;Xn(n)}return w=o.children,o=o.fallback,u?(_r(),u=n.mode,w=yo({mode:"hidden",children:w},u),o=ti(o,u,s,null),w.return=n,o.return=n,w.sibling=o,n.child=w,u=n.child,u.memoizedState=Pd(s),u.childLanes=zd(t,x,s),n.memoizedState=Bd,o):(vr(n),qd(n,w))}if(T=t.memoizedState,T!==null&&(w=T.dehydrated,w!==null)){if(g)n.flags&256?(vr(n),n.flags&=-257,n=Hd(t,n,s)):n.memoizedState!==null?(_r(),n.child=t.child,n.flags|=128,n=null):(_r(),u=o.fallback,w=n.mode,o=yo({mode:"visible",children:o.children},w),u=ti(u,w,s,null),u.flags|=2,o.return=n,u.return=n,o.sibling=u,n.child=o,ia(n,t.child,null,s),o=n.child,o.memoizedState=Pd(s),o.childLanes=zd(t,x,s),n.memoizedState=Bd,n=u);else if(vr(n),Sf(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var M=x.dgst;x=M,o=Error(a(419)),o.stack="",o.digest=x,rs({value:o,source:null,stack:null}),n=Hd(t,n,s)}else if(lt||is(t,n,s,!1),x=(s&t.childLanes)!==0,lt||x){if(x=ze,x!==null&&(o=s&-s,o=(o&42)!==0?1:Su(o),o=(o&(x.suspendedLanes|s))!==0?0:o,o!==0&&o!==T.retryLane))throw T.retryLane=o,Yi(t,o),Qt(x,t,o),rp;w.data==="$?"||lf(),n=Hd(t,n,s)}else w.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=T.treeContext,Ke=xn(w.nextSibling),St=n,Ce=!0,ii=null,Mn=!1,t!==null&&(sn[ln++]=Vn,sn[ln++]=$n,sn[ln++]=ni,Vn=t.id,$n=t.overflow,ni=n),n=qd(n,o.children),n.flags|=4096);return n}return u?(_r(),u=o.fallback,w=n.mode,T=t.child,M=T.sibling,o=Gn(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,M!==null?u=Gn(M,u):(u=ti(u,w,s,null),u.flags|=2),u.return=n,o.return=n,o.sibling=u,n.child=o,o=u,u=n.child,w=t.child.memoizedState,w===null?w=Pd(s):(T=w.cachePool,T!==null?(M=rt._currentValue,T=T.parent!==M?{parent:M,pool:M}:T):T=Zg(),w={baseLanes:w.baseLanes|s,cachePool:T}),u.memoizedState=w,u.childLanes=zd(t,x,s),n.memoizedState=Bd,o):(vr(n),s=t.child,t=s.sibling,s=Gn(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=s,n.memoizedState=null,s)}function qd(t,n){return n=yo({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function yo(t,n){return t=Ft(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Hd(t,n,s){return ia(n,t.child,null,s),t=qd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function hp(t,n,s){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),sd(t.return,n,s)}function Fd(t,n,s,o,u){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:u}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=s,g.tailMode=u)}function mp(t,n,s){var o=n.pendingProps,u=o.revealOrder,g=o.tail;if(gt(t,n,o.children,s),o=it.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hp(t,s,n);else if(t.tag===19)hp(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(C(it,o),u){case"forwards":for(s=n.child,u=null;s!==null;)t=s.alternate,t!==null&&ho(t)===null&&(u=s),s=s.sibling;s=u,s===null?(u=n.child,n.child=null):(u=s.sibling,s.sibling=null),Fd(n,!1,u,s,g);break;case"backwards":for(s=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&ho(t)===null){n.child=u;break}t=u.sibling,u.sibling=s,s=u,u=t}Fd(n,!0,s,null,g);break;case"together":Fd(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wn(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Sr|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(is(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Gn(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Gn(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Gd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Xl(t)))}function Mw(t,n,s){switch(n.tag){case 3:Oe(n,n.stateNode.containerInfo),hr(n,rt,t.memoizedState.cache),ns();break;case 27:case 5:_t(n);break;case 4:Oe(n,n.stateNode.containerInfo);break;case 10:hr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(vr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?fp(t,n,s):(vr(n),t=Wn(t,n,s),t!==null?t.sibling:null);vr(n);break;case 19:var u=(t.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(is(t,n,s,!1),o=(s&n.childLanes)!==0),u){if(o)return mp(t,n,s);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),C(it,it.current),o)break;return null;case 22:case 23:return n.lanes=0,lp(t,n,s);case 24:hr(n,rt,t.memoizedState.cache)}return Wn(t,n,s)}function gp(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)lt=!0;else{if(!Gd(t,s)&&(n.flags&128)===0)return lt=!1,Mw(t,n,s);lt=(t.flags&131072)!==0}else lt=!1,Ce&&(n.flags&1048576)!==0&&Vg(n,Kl,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var o=n.elementType,u=o._init;if(o=u(o._payload),n.type=o,typeof o=="function")Ju(o)?(t=ui(o,t),n.tag=1,n=up(null,n,o,t,s)):(n.tag=0,n=Ud(null,n,o,t,s));else{if(o!=null){if(u=o.$$typeof,u===Q){n.tag=11,n=ip(null,n,o,t,s);break e}else if(u===ee){n.tag=14,n=ap(null,n,o,t,s);break e}}throw n=q(o)||o,Error(a(306,n,""))}}return n;case 0:return Ud(t,n,n.type,n.pendingProps,s);case 1:return o=n.type,u=ui(o,n.pendingProps),up(t,n,o,u,s);case 3:e:{if(Oe(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var g=n.memoizedState;u=g.element,hd(t,n),ds(n,o,null,s);var x=n.memoizedState;if(o=x.cache,hr(n,rt,o),o!==g.cache&&ld(n,[rt],s,!0),us(),o=x.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=dp(t,n,o,s);break e}else if(o!==u){u=rn(Error(a(424)),n),rs(u),n=dp(t,n,o,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=xn(t.firstChild),St=n,Ce=!0,ii=null,Mn=!0,s=Y0(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ns(),o===u){n=Wn(t,n,s);break e}gt(t,n,o,s)}n=n.child}return n;case 26:return po(t,n),t===null?(s=_y(n.type,null,n.pendingProps,null))?n.memoizedState=s:Ce||(s=n.type,t=n.pendingProps,o=Do(fe.current).createElement(s),o[bt]=n,o[Ot]=t,yt(o,s,t),st(o),n.stateNode=o):n.memoizedState=_y(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return _t(n),t===null&&Ce&&(o=n.stateNode=py(n.type,n.pendingProps,fe.current),St=n,Mn=!0,u=Ke,Cr(n.type)?(Tf=u,Ke=xn(o.firstChild)):Ke=u),gt(t,n,n.pendingProps.children,s),po(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ce&&((u=o=Ke)&&(o=sS(o,n.type,n.pendingProps,Mn),o!==null?(n.stateNode=o,St=n,Ke=xn(o.firstChild),Mn=!1,u=!0):u=!1),u||ai(n)),_t(n),u=n.type,g=n.pendingProps,x=t!==null?t.memoizedProps:null,o=g.children,xf(u,g)?o=null:x!==null&&xf(u,x)&&(n.flags|=32),n.memoizedState!==null&&(u=_d(t,n,Sw,null,null,s),ks._currentValue=u),po(t,n),gt(t,n,o,s),n.child;case 6:return t===null&&Ce&&((t=s=Ke)&&(s=lS(s,n.pendingProps,Mn),s!==null?(n.stateNode=s,St=n,Ke=null,t=!0):t=!1),t||ai(n)),null;case 13:return fp(t,n,s);case 4:return Oe(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=ia(n,null,o,s):gt(t,n,o,s),n.child;case 11:return ip(t,n,n.type,n.pendingProps,s);case 7:return gt(t,n,n.pendingProps,s),n.child;case 8:return gt(t,n,n.pendingProps.children,s),n.child;case 12:return gt(t,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,hr(n,n.type,o.value),gt(t,n,o.children,s),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,li(n),u=xt(u),o=o(u),n.flags|=1,gt(t,n,o,s),n.child;case 14:return ap(t,n,n.type,n.pendingProps,s);case 15:return sp(t,n,n.type,n.pendingProps,s);case 19:return mp(t,n,s);case 31:return o=n.pendingProps,s=n.mode,o={mode:o.mode,children:o.children},t===null?(s=yo(o,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Gn(t.child,o),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return lp(t,n,s);case 24:return li(n),o=xt(rt),t===null?(u=ud(),u===null&&(u=ze,g=od(),u.pooledCache=g,g.refCount++,g!==null&&(u.pooledCacheLanes|=s),u=g),n.memoizedState={parent:o,cache:u},fd(n),hr(n,rt,u)):((t.lanes&s)!==0&&(hd(t,n),ds(n,null,null,s),us()),u=t.memoizedState,g=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),hr(n,rt,o)):(o=g.cache,hr(n,rt,o),o!==u.cache&&ld(n,[rt],s,!0))),gt(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Zn(t){t.flags|=4}function pp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Sy(n)){if(n=on.current,n!==null&&((Ee&4194048)===Ee?kn!==null:(Ee&62914560)!==Ee&&(Ee&536870912)===0||n!==kn))throw os=dd,Jg;t.flags|=8192}}function vo(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Qm():536870912,t.lanes|=n,oa|=n)}function vs(t,n){if(!Ce)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ve(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(n)for(var u=t.child;u!==null;)s|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)s|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=s,n}function kw(t,n,s){var o=n.pendingProps;switch(rd(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(n),null;case 1:return Ve(n),null;case 3:return s=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Qn(rt),Pe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ts(n)?Zn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Qg())),Ve(n),null;case 26:return s=n.memoizedState,t===null?(Zn(n),s!==null?(Ve(n),pp(n,s)):(Ve(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Zn(n),Ve(n),pp(n,s)):(Ve(n),n.flags&=-16777217):(t.memoizedProps!==o&&Zn(n),Ve(n),n.flags&=-16777217),null;case 27:Mi(n),s=fe.current;var u=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Zn(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}t=D.current,ts(n)?$g(n):(t=py(u,o,s),n.stateNode=t,Zn(n))}return Ve(n),null;case 5:if(Mi(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Zn(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}if(t=D.current,ts(n))$g(n);else{switch(u=Do(fe.current),t){case 1:t=u.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=u.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=u.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=u.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?u.createElement("select",{is:o.is}):u.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?u.createElement(s,{is:o.is}):u.createElement(s)}}t[bt]=n,t[Ot]=o;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=t;e:switch(yt(t,s,o),s){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Zn(n)}}return Ve(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Zn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=fe.current,ts(n)){if(t=n.stateNode,s=n.memoizedProps,o=null,u=St,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[bt]=n,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||cy(t.nodeValue,s)),t||ai(n)}else t=Do(t).createTextNode(o),t[bt]=n,n.stateNode=t}return Ve(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=ts(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(a(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));u[bt]=n}else ns(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),u=!1}else u=Qg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Xn(n),n):(Xn(n),null)}if(Xn(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=o!==null,t=t!==null&&t.memoizedState!==null,s){o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool);var g=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==u&&(o.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),vo(n,n.updateQueue),Ve(n),null;case 4:return Pe(),t===null&&pf(n.stateNode.containerInfo),Ve(n),null;case 10:return Qn(n.type),Ve(n),null;case 19:if(ke(it),u=n.memoizedState,u===null)return Ve(n),null;if(o=(n.flags&128)!==0,g=u.rendering,g===null)if(o)vs(u,!1);else{if(Xe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(g=ho(t),g!==null){for(n.flags|=128,vs(u,!1),t=g.updateQueue,n.updateQueue=t,vo(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)Gg(s,t),s=s.sibling;return C(it,it.current&1|2),n.child}t=t.sibling}u.tail!==null&&Dn()>xo&&(n.flags|=128,o=!0,vs(u,!1),n.lanes=4194304)}else{if(!o)if(t=ho(g),t!==null){if(n.flags|=128,o=!0,t=t.updateQueue,n.updateQueue=t,vo(n,t),vs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Ce)return Ve(n),null}else 2*Dn()-u.renderingStartTime>xo&&s!==536870912&&(n.flags|=128,o=!0,vs(u,!1),n.lanes=4194304);u.isBackwards?(g.sibling=n.child,n.child=g):(t=u.last,t!==null?t.sibling=g:n.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Dn(),n.sibling=null,t=it.current,C(it,o?t&1|2:t&1),n):(Ve(n),null);case 22:case 23:return Xn(n),yd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(Ve(n),n.subtreeFlags&6&&(n.flags|=8192)):Ve(n),s=n.updateQueue,s!==null&&vo(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),t!==null&&ke(oi),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Qn(rt),Ve(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function jw(t,n){switch(rd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Qn(rt),Pe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Mi(n),null;case 13:if(Xn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));ns()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ke(it),null;case 4:return Pe(),null;case 10:return Qn(n.type),null;case 22:case 23:return Xn(n),yd(),t!==null&&ke(oi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Qn(rt),null;case 25:return null;default:return null}}function yp(t,n){switch(rd(n),n.tag){case 3:Qn(rt),Pe();break;case 26:case 27:case 5:Mi(n);break;case 4:Pe();break;case 13:Xn(n);break;case 19:ke(it);break;case 10:Qn(n.type);break;case 22:case 23:Xn(n),yd(),t!==null&&ke(oi);break;case 24:Qn(rt)}}function _s(t,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var u=o.next;s=u;do{if((s.tag&t)===t){o=void 0;var g=s.create,x=s.inst;o=g(),x.destroy=o}s=s.next}while(s!==u)}}catch(w){Ue(n,n.return,w)}}function br(t,n,s){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&t)===t){var x=o.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,u=n;var T=s,M=w;try{M()}catch(P){Ue(u,T,P)}}}o=o.next}while(o!==g)}}catch(P){Ue(n,n.return,P)}}function vp(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{a0(n,s)}catch(o){Ue(t,t.return,o)}}}function _p(t,n,s){s.props=ui(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){Ue(t,n,o)}}function bs(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof s=="function"?t.refCleanup=s(o):s.current=o}}catch(u){Ue(t,n,u)}}function jn(t,n){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(u){Ue(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(u){Ue(t,n,u)}else s.current=null}function bp(t){var n=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(u){Ue(t,t.return,u)}}function Vd(t,n,s){try{var o=t.stateNode;tS(o,t.type,s,n),o[Ot]=n}catch(u){Ue(t,t.return,u)}}function xp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cr(t.type)||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Ro));else if(o!==4&&(o===27&&Cr(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Yd(t,n,s),t=t.sibling;t!==null;)Yd(t,n,s),t=t.sibling}function _o(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(o!==4&&(o===27&&Cr(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(_o(t,n,s),t=t.sibling;t!==null;)_o(t,n,s),t=t.sibling}function Ep(t){var n=t.stateNode,s=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);yt(n,o,s),n[bt]=t,n[Ot]=s}catch(g){Ue(t,t.return,g)}}var Jn=!1,et=!1,Qd=!1,wp=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Iw(t,n){if(t=t.containerInfo,_f=Uo,t=jg(t),$u(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var u=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var x=0,w=-1,T=-1,M=0,P=0,H=t,j=null;t:for(;;){for(var I;H!==s||u!==0&&H.nodeType!==3||(w=x+u),H!==g||o!==0&&H.nodeType!==3||(T=x+o),H.nodeType===3&&(x+=H.nodeValue.length),(I=H.firstChild)!==null;)j=H,H=I;for(;;){if(H===t)break t;if(j===s&&++M===u&&(w=x),j===g&&++P===o&&(T=x),(I=H.nextSibling)!==null)break;H=j,j=H.parentNode}H=I}s=w===-1||T===-1?null:{start:w,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(bf={focusedElem:t,selectionRange:s},Uo=!1,ot=n;ot!==null;)if(n=ot,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,ot=t;else for(;ot!==null;){switch(n=ot,g=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,s=n,u=g.memoizedProps,g=g.memoizedState,o=s.stateNode;try{var ce=ui(s.type,u,s.elementType===s.type);t=o.getSnapshotBeforeUpdate(ce,g),o.__reactInternalSnapshotBeforeUpdate=t}catch(se){Ue(s,s.return,se)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)wf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":wf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,ot=t;break}ot=n.return}}function Sp(t,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:xr(t,s),o&4&&_s(5,s);break;case 1:if(xr(t,s),o&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(x){Ue(s,s.return,x)}else{var u=ui(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Ue(s,s.return,x)}}o&64&&vp(s),o&512&&bs(s,s.return);break;case 3:if(xr(t,s),o&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{a0(t,n)}catch(x){Ue(s,s.return,x)}}break;case 27:n===null&&o&4&&Ep(s);case 26:case 5:xr(t,s),n===null&&o&4&&bp(s),o&512&&bs(s,s.return);break;case 12:xr(t,s);break;case 13:xr(t,s),o&4&&Ap(t,s),o&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Gw.bind(null,s),oS(t,s))));break;case 22:if(o=s.memoizedState!==null||Jn,!o){n=n!==null&&n.memoizedState!==null||et,u=Jn;var g=et;Jn=o,(et=n)&&!g?Er(t,s,(s.subtreeFlags&8772)!==0):xr(t,s),Jn=u,et=g}break;case 30:break;default:xr(t,s)}}function Tp(t){var n=t.alternate;n!==null&&(t.alternate=null,Tp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Au(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,Mt=!1;function er(t,n,s){for(s=s.child;s!==null;)Np(t,n,s),s=s.sibling}function Np(t,n,s){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(qa,s)}catch{}switch(s.tag){case 26:et||jn(s,n),er(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:et||jn(s,n);var o=Fe,u=Mt;Cr(s.type)&&(Fe=s.stateNode,Mt=!1),er(t,n,s),Os(s.stateNode),Fe=o,Mt=u;break;case 5:et||jn(s,n);case 6:if(o=Fe,u=Mt,Fe=null,er(t,n,s),Fe=o,Mt=u,Fe!==null)if(Mt)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(s.stateNode)}catch(g){Ue(s,n,g)}else try{Fe.removeChild(s.stateNode)}catch(g){Ue(s,n,g)}break;case 18:Fe!==null&&(Mt?(t=Fe,my(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Us(t)):my(Fe,s.stateNode));break;case 4:o=Fe,u=Mt,Fe=s.stateNode.containerInfo,Mt=!0,er(t,n,s),Fe=o,Mt=u;break;case 0:case 11:case 14:case 15:et||br(2,s,n),et||br(4,s,n),er(t,n,s);break;case 1:et||(jn(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&_p(s,n,o)),er(t,n,s);break;case 21:er(t,n,s);break;case 22:et=(o=et)||s.memoizedState!==null,er(t,n,s),et=o;break;default:er(t,n,s)}}function Ap(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Us(t)}catch(s){Ue(n,n.return,s)}}function Lw(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new wp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new wp),n;default:throw Error(a(435,t.tag))}}function Kd(t,n){var s=Lw(t);n.forEach(function(o){var u=Vw.bind(null,t,o);s.has(o)||(s.add(o),o.then(u,u))})}function Gt(t,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var u=s[o],g=t,x=n,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(Cr(w.type)){Fe=w.stateNode,Mt=!1;break e}break;case 5:Fe=w.stateNode,Mt=!1;break e;case 3:case 4:Fe=w.stateNode.containerInfo,Mt=!0;break e}w=w.return}if(Fe===null)throw Error(a(160));Np(g,x,u),Fe=null,Mt=!1,g=u.alternate,g!==null&&(g.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Cp(n,t),n=n.sibling}var bn=null;function Cp(t,n){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gt(n,t),Vt(t),o&4&&(br(3,t,t.return),_s(3,t),br(5,t,t.return));break;case 1:Gt(n,t),Vt(t),o&512&&(et||s===null||jn(s,s.return)),o&64&&Jn&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var u=bn;if(Gt(n,t),Vt(t),o&512&&(et||s===null||jn(s,s.return)),o&4){var g=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":g=u.getElementsByTagName("title")[0],(!g||g[Ga]||g[bt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=u.createElement(o),u.head.insertBefore(g,u.querySelector("head > title"))),yt(g,o,s),g[bt]=t,st(g),o=g;break e;case"link":var x=Ey("link","href",u).get(o+(s.href||""));if(x){for(var w=0;w<x.length;w++)if(g=x[w],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){x.splice(w,1);break t}}g=u.createElement(o),yt(g,o,s),u.head.appendChild(g);break;case"meta":if(x=Ey("meta","content",u).get(o+(s.content||""))){for(w=0;w<x.length;w++)if(g=x[w],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){x.splice(w,1);break t}}g=u.createElement(o),yt(g,o,s),u.head.appendChild(g);break;default:throw Error(a(468,o))}g[bt]=t,st(g),o=g}t.stateNode=o}else wy(u,t.type,t.stateNode);else t.stateNode=xy(u,o,t.memoizedProps);else g!==o?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,o===null?wy(u,t.type,t.stateNode):xy(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Vd(t,t.memoizedProps,s.memoizedProps)}break;case 27:Gt(n,t),Vt(t),o&512&&(et||s===null||jn(s,s.return)),s!==null&&o&4&&Vd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Gt(n,t),Vt(t),o&512&&(et||s===null||jn(s,s.return)),t.flags&32){u=t.stateNode;try{zi(u,"")}catch(I){Ue(t,t.return,I)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,Vd(t,u,s!==null?s.memoizedProps:u)),o&1024&&(Qd=!0);break;case 6:if(Gt(n,t),Vt(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(I){Ue(t,t.return,I)}}break;case 3:if(jo=null,u=bn,bn=Mo(n.containerInfo),Gt(n,t),bn=u,Vt(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{Us(n.containerInfo)}catch(I){Ue(t,t.return,I)}Qd&&(Qd=!1,Op(t));break;case 4:o=bn,bn=Mo(t.stateNode.containerInfo),Gt(n,t),Vt(t),bn=o;break;case 12:Gt(n,t),Vt(t);break;case 13:Gt(n,t),Vt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(tf=Dn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Kd(t,o)));break;case 22:u=t.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,M=Jn,P=et;if(Jn=M||u,et=P||T,Gt(n,t),et=P,Jn=M,Vt(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(s===null||T||Jn||et||di(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){T=s=n;try{if(g=T.stateNode,u)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=T.stateNode;var H=T.memoizedProps.style,j=H!=null&&H.hasOwnProperty("display")?H.display:null;w.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(I){Ue(T,T.return,I)}}}else if(n.tag===6){if(s===null){T=n;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(I){Ue(T,T.return,I)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Kd(t,s))));break;case 19:Gt(n,t),Vt(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Kd(t,o)));break;case 30:break;case 21:break;default:Gt(n,t),Vt(t)}}function Vt(t){var n=t.flags;if(n&2){try{for(var s,o=t.return;o!==null;){if(xp(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var u=s.stateNode,g=$d(t);_o(t,g,u);break;case 5:var x=s.stateNode;s.flags&32&&(zi(x,""),s.flags&=-33);var w=$d(t);_o(t,w,x);break;case 3:case 4:var T=s.stateNode.containerInfo,M=$d(t);Yd(t,M,T);break;default:throw Error(a(161))}}catch(P){Ue(t,t.return,P)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Op(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Op(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function xr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Sp(t,n.alternate,n),n=n.sibling}function di(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:br(4,n,n.return),di(n);break;case 1:jn(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&_p(n,n.return,s),di(n);break;case 27:Os(n.stateNode);case 26:case 5:jn(n,n.return),di(n);break;case 22:n.memoizedState===null&&di(n);break;case 30:di(n);break;default:di(n)}t=t.sibling}}function Er(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,g=n,x=g.flags;switch(g.tag){case 0:case 11:case 15:Er(u,g,s),_s(4,g);break;case 1:if(Er(u,g,s),o=g,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(M){Ue(o,o.return,M)}if(o=g,u=o.updateQueue,u!==null){var w=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)i0(T[u],w)}catch(M){Ue(o,o.return,M)}}s&&x&64&&vp(g),bs(g,g.return);break;case 27:Ep(g);case 26:case 5:Er(u,g,s),s&&o===null&&x&4&&bp(g),bs(g,g.return);break;case 12:Er(u,g,s);break;case 13:Er(u,g,s),s&&x&4&&Ap(u,g);break;case 22:g.memoizedState===null&&Er(u,g,s),bs(g,g.return);break;case 30:break;default:Er(u,g,s)}n=n.sibling}}function Xd(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&as(s))}function Wd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&as(t))}function In(t,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rp(t,n,s,o),n=n.sibling}function Rp(t,n,s,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:In(t,n,s,o),u&2048&&_s(9,n);break;case 1:In(t,n,s,o);break;case 3:In(t,n,s,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&as(t)));break;case 12:if(u&2048){In(t,n,s,o),t=n.stateNode;try{var g=n.memoizedProps,x=g.id,w=g.onPostCommit;typeof w=="function"&&w(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(T){Ue(n,n.return,T)}}else In(t,n,s,o);break;case 13:In(t,n,s,o);break;case 23:break;case 22:g=n.stateNode,x=n.alternate,n.memoizedState!==null?g._visibility&2?In(t,n,s,o):xs(t,n):g._visibility&2?In(t,n,s,o):(g._visibility|=2,aa(t,n,s,o,(n.subtreeFlags&10256)!==0)),u&2048&&Xd(x,n);break;case 24:In(t,n,s,o),u&2048&&Wd(n.alternate,n);break;default:In(t,n,s,o)}}function aa(t,n,s,o,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var g=t,x=n,w=s,T=o,M=x.flags;switch(x.tag){case 0:case 11:case 15:aa(g,x,w,T,u),_s(8,x);break;case 23:break;case 22:var P=x.stateNode;x.memoizedState!==null?P._visibility&2?aa(g,x,w,T,u):xs(g,x):(P._visibility|=2,aa(g,x,w,T,u)),u&&M&2048&&Xd(x.alternate,x);break;case 24:aa(g,x,w,T,u),u&&M&2048&&Wd(x.alternate,x);break;default:aa(g,x,w,T,u)}n=n.sibling}}function xs(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,o=n,u=o.flags;switch(o.tag){case 22:xs(s,o),u&2048&&Xd(o.alternate,o);break;case 24:xs(s,o),u&2048&&Wd(o.alternate,o);break;default:xs(s,o)}n=n.sibling}}var Es=8192;function sa(t){if(t.subtreeFlags&Es)for(t=t.child;t!==null;)Dp(t),t=t.sibling}function Dp(t){switch(t.tag){case 26:sa(t),t.flags&Es&&t.memoizedState!==null&&xS(bn,t.memoizedState,t.memoizedProps);break;case 5:sa(t);break;case 3:case 4:var n=bn;bn=Mo(t.stateNode.containerInfo),sa(t),bn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Es,Es=16777216,sa(t),Es=n):sa(t));break;default:sa(t)}}function Mp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function ws(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];ot=o,jp(o,t)}Mp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kp(t),t=t.sibling}function kp(t){switch(t.tag){case 0:case 11:case 15:ws(t),t.flags&2048&&br(9,t,t.return);break;case 3:ws(t);break;case 12:ws(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,bo(t)):ws(t);break;default:ws(t)}}function bo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];ot=o,jp(o,t)}Mp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:br(8,n,n.return),bo(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,bo(n));break;default:bo(n)}t=t.sibling}}function jp(t,n){for(;ot!==null;){var s=ot;switch(s.tag){case 0:case 11:case 15:br(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:as(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,ot=o;else e:for(s=t;ot!==null;){o=ot;var u=o.sibling,g=o.return;if(Tp(o),o===s){ot=null;break e}if(u!==null){u.return=g,ot=u;break e}ot=g}}}var Uw={getCacheForType:function(t){var n=xt(rt),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},Bw=typeof WeakMap=="function"?WeakMap:Map,Re=0,ze=null,be=null,Ee=0,De=0,$t=null,wr=!1,la=!1,Zd=!1,tr=0,Xe=0,Sr=0,fi=0,Jd=0,cn=0,oa=0,Ss=null,kt=null,ef=!1,tf=0,xo=1/0,Eo=null,Tr=null,pt=0,Nr=null,ca=null,ua=0,nf=0,rf=null,Ip=null,Ts=0,af=null;function Yt(){if((Re&2)!==0&&Ee!==0)return Ee&-Ee;if(B.T!==null){var t=Wi;return t!==0?t:ff()}return Wm()}function Lp(){cn===0&&(cn=(Ee&536870912)===0||Ce?Ym():536870912);var t=on.current;return t!==null&&(t.flags|=32),cn}function Qt(t,n,s){(t===ze&&(De===2||De===9)||t.cancelPendingCommit!==null)&&(da(t,0),Ar(t,Ee,cn,!1)),Fa(t,s),((Re&2)===0||t!==ze)&&(t===ze&&((Re&2)===0&&(fi|=s),Xe===4&&Ar(t,Ee,cn,!1)),Ln(t))}function Up(t,n,s){if((Re&6)!==0)throw Error(a(327));var o=!s&&(n&124)===0&&(n&t.expiredLanes)===0||Ha(t,n),u=o?qw(t,n):of(t,n,!0),g=o;do{if(u===0){la&&!o&&Ar(t,n,0,!1);break}else{if(s=t.current.alternate,g&&!Pw(s)){u=of(t,n,!1),g=!1;continue}if(u===2){if(g=n,t.errorRecoveryDisabledLanes&g)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var w=t;u=Ss;var T=w.current.memoizedState.isDehydrated;if(T&&(da(w,x).flags|=256),x=of(w,x,!1),x!==2){if(Zd&&!T){w.errorRecoveryDisabledLanes|=g,fi|=g,u=4;break e}g=kt,kt=u,g!==null&&(kt===null?kt=g:kt.push.apply(kt,g))}u=x}if(g=!1,u!==2)continue}}if(u===1){da(t,0),Ar(t,n,0,!0);break}e:{switch(o=t,g=u,g){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Ar(o,n,cn,!wr);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(u=tf+300-Dn(),10<u)){if(Ar(o,n,cn,!wr),Ml(o,0,!0)!==0)break e;o.timeoutHandle=fy(Bp.bind(null,o,s,kt,Eo,ef,n,cn,fi,oa,wr,g,2,-0,0),u);break e}Bp(o,s,kt,Eo,ef,n,cn,fi,oa,wr,g,0,-0,0)}}break}while(!0);Ln(t)}function Bp(t,n,s,o,u,g,x,w,T,M,P,H,j,I){if(t.timeoutHandle=-1,H=n.subtreeFlags,(H&8192||(H&16785408)===16785408)&&(Ms={stylesheets:null,count:0,unsuspend:bS},Dp(n),H=ES(),H!==null)){t.cancelPendingCommit=H(Vp.bind(null,t,n,g,s,o,u,x,w,T,P,1,j,I)),Ar(t,g,x,!M);return}Vp(t,n,g,s,o,u,x,w,T)}function Pw(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var u=s[o],g=u.getSnapshot;u=u.value;try{if(!Ht(g(),u))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ar(t,n,s,o){n&=~Jd,n&=~fi,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var g=31-qt(u),x=1<<g;o[g]=-1,u&=~x}s!==0&&Km(t,s,n)}function wo(){return(Re&6)===0?(Ns(0),!1):!0}function sf(){if(be!==null){if(De===0)var t=be.return;else t=be,Yn=si=null,Ed(t),ra=null,ps=0,t=be;for(;t!==null;)yp(t.alternate,t),t=t.return;be=null}}function da(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,rS(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),sf(),ze=t,be=s=Gn(t.current,null),Ee=n,De=0,$t=null,wr=!1,la=Ha(t,n),Zd=!1,oa=cn=Jd=fi=Sr=Xe=0,kt=Ss=null,ef=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-qt(o),g=1<<u;n|=t[u],o&=~g}return tr=n,Gl(),s}function Pp(t,n){he=null,B.H=co,n===ls||n===Jl?(n=n0(),De=3):n===Jg?(n=n0(),De=4):De=n===rp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$t=n,be===null&&(Xe=1,go(t,rn(n,t.current)))}function zp(){var t=B.H;return B.H=co,t===null?co:t}function qp(){var t=B.A;return B.A=Uw,t}function lf(){Xe=4,wr||(Ee&4194048)!==Ee&&on.current!==null||(la=!0),(Sr&134217727)===0&&(fi&134217727)===0||ze===null||Ar(ze,Ee,cn,!1)}function of(t,n,s){var o=Re;Re|=2;var u=zp(),g=qp();(ze!==t||Ee!==n)&&(Eo=null,da(t,n)),n=!1;var x=Xe;e:do try{if(De!==0&&be!==null){var w=be,T=$t;switch(De){case 8:sf(),x=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(n=!0);var M=De;if(De=0,$t=null,fa(t,w,T,M),s&&la){x=0;break e}break;default:M=De,De=0,$t=null,fa(t,w,T,M)}}zw(),x=Xe;break}catch(P){Pp(t,P)}while(!0);return n&&t.shellSuspendCounter++,Yn=si=null,Re=o,B.H=u,B.A=g,be===null&&(ze=null,Ee=0,Gl()),x}function zw(){for(;be!==null;)Hp(be)}function qw(t,n){var s=Re;Re|=2;var o=zp(),u=qp();ze!==t||Ee!==n?(Eo=null,xo=Dn()+500,da(t,n)):la=Ha(t,n);e:do try{if(De!==0&&be!==null){n=be;var g=$t;t:switch(De){case 1:De=0,$t=null,fa(t,n,g,1);break;case 2:case 9:if(e0(g)){De=0,$t=null,Fp(n);break}n=function(){De!==2&&De!==9||ze!==t||(De=7),Ln(t)},g.then(n,n);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:e0(g)?(De=0,$t=null,Fp(n)):(De=0,$t=null,fa(t,n,g,7));break;case 5:var x=null;switch(be.tag){case 26:x=be.memoizedState;case 5:case 27:var w=be;if(!x||Sy(x)){De=0,$t=null;var T=w.sibling;if(T!==null)be=T;else{var M=w.return;M!==null?(be=M,So(M)):be=null}break t}}De=0,$t=null,fa(t,n,g,5);break;case 6:De=0,$t=null,fa(t,n,g,6);break;case 8:sf(),Xe=6;break e;default:throw Error(a(462))}}Hw();break}catch(P){Pp(t,P)}while(!0);return Yn=si=null,B.H=o,B.A=u,Re=s,be!==null?0:(ze=null,Ee=0,Gl(),Xe)}function Hw(){for(;be!==null&&!uE();)Hp(be)}function Hp(t){var n=gp(t.alternate,t,tr);t.memoizedProps=t.pendingProps,n===null?So(t):be=n}function Fp(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=cp(s,n,n.pendingProps,n.type,void 0,Ee);break;case 11:n=cp(s,n,n.pendingProps,n.type.render,n.ref,Ee);break;case 5:Ed(n);default:yp(s,n),n=be=Gg(n,tr),n=gp(s,n,tr)}t.memoizedProps=t.pendingProps,n===null?So(t):be=n}function fa(t,n,s,o){Yn=si=null,Ed(n),ra=null,ps=0;var u=n.return;try{if(Dw(t,u,n,s,Ee)){Xe=1,go(t,rn(s,t.current)),be=null;return}}catch(g){if(u!==null)throw be=u,g;Xe=1,go(t,rn(s,t.current)),be=null;return}n.flags&32768?(Ce||o===1?t=!0:la||(Ee&536870912)!==0?t=!1:(wr=t=!0,(o===2||o===9||o===3||o===6)&&(o=on.current,o!==null&&o.tag===13&&(o.flags|=16384))),Gp(n,t)):So(n)}function So(t){var n=t;do{if((n.flags&32768)!==0){Gp(n,wr);return}t=n.return;var s=kw(n.alternate,n,tr);if(s!==null){be=s;return}if(n=n.sibling,n!==null){be=n;return}be=n=t}while(n!==null);Xe===0&&(Xe=5)}function Gp(t,n){do{var s=jw(t.alternate,t);if(s!==null){s.flags&=32767,be=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){be=t;return}be=t=s}while(t!==null);Xe=6,be=null}function Vp(t,n,s,o,u,g,x,w,T){t.cancelPendingCommit=null;do To();while(pt!==0);if((Re&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(g=n.lanes|n.childLanes,g|=Wu,bE(t,s,g,x,w,T),t===ze&&(be=ze=null,Ee=0),ca=n,Nr=t,ua=s,nf=g,rf=u,Ip=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$w(Ol,function(){return Xp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,u=te.p,te.p=2,x=Re,Re|=4;try{Iw(t,n,s)}finally{Re=x,te.p=u,B.T=o}}pt=1,$p(),Yp(),Qp()}}function $p(){if(pt===1){pt=0;var t=Nr,n=ca,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=B.T,B.T=null;var o=te.p;te.p=2;var u=Re;Re|=4;try{Cp(n,t);var g=bf,x=jg(t.containerInfo),w=g.focusedElem,T=g.selectionRange;if(x!==w&&w&&w.ownerDocument&&kg(w.ownerDocument.documentElement,w)){if(T!==null&&$u(w)){var M=T.start,P=T.end;if(P===void 0&&(P=M),"selectionStart"in w)w.selectionStart=M,w.selectionEnd=Math.min(P,w.value.length);else{var H=w.ownerDocument||document,j=H&&H.defaultView||window;if(j.getSelection){var I=j.getSelection(),ce=w.textContent.length,se=Math.min(T.start,ce),Le=T.end===void 0?se:Math.min(T.end,ce);!I.extend&&se>Le&&(x=Le,Le=se,se=x);var O=Mg(w,se),N=Mg(w,Le);if(O&&N&&(I.rangeCount!==1||I.anchorNode!==O.node||I.anchorOffset!==O.offset||I.focusNode!==N.node||I.focusOffset!==N.offset)){var R=H.createRange();R.setStart(O.node,O.offset),I.removeAllRanges(),se>Le?(I.addRange(R),I.extend(N.node,N.offset)):(R.setEnd(N.node,N.offset),I.addRange(R))}}}}for(H=[],I=w;I=I.parentNode;)I.nodeType===1&&H.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<H.length;w++){var z=H[w];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}Uo=!!_f,bf=_f=null}finally{Re=u,te.p=o,B.T=s}}t.current=n,pt=2}}function Yp(){if(pt===2){pt=0;var t=Nr,n=ca,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=B.T,B.T=null;var o=te.p;te.p=2;var u=Re;Re|=4;try{Sp(t,n.alternate,n)}finally{Re=u,te.p=o,B.T=s}}pt=3}}function Qp(){if(pt===4||pt===3){pt=0,dE();var t=Nr,n=ca,s=ua,o=Ip;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?pt=5:(pt=0,ca=Nr=null,Kp(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Tr=null),Tu(s),n=n.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(qa,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=B.T,u=te.p,te.p=2,B.T=null;try{for(var g=t.onRecoverableError,x=0;x<o.length;x++){var w=o[x];g(w.value,{componentStack:w.stack})}}finally{B.T=n,te.p=u}}(ua&3)!==0&&To(),Ln(t),u=t.pendingLanes,(s&4194090)!==0&&(u&42)!==0?t===af?Ts++:(Ts=0,af=t):Ts=0,Ns(0)}}function Kp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,as(n)))}function To(t){return $p(),Yp(),Qp(),Xp()}function Xp(){if(pt!==5)return!1;var t=Nr,n=nf;nf=0;var s=Tu(ua),o=B.T,u=te.p;try{te.p=32>s?32:s,B.T=null,s=rf,rf=null;var g=Nr,x=ua;if(pt=0,ca=Nr=null,ua=0,(Re&6)!==0)throw Error(a(331));var w=Re;if(Re|=4,kp(g.current),Rp(g,g.current,x,s),Re=w,Ns(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(qa,g)}catch{}return!0}finally{te.p=u,B.T=o,Kp(t,n)}}function Wp(t,n,s){n=rn(s,n),n=Ld(t.stateNode,n,2),t=pr(t,n,2),t!==null&&(Fa(t,2),Ln(t))}function Ue(t,n,s){if(t.tag===3)Wp(t,t,s);else for(;n!==null;){if(n.tag===3){Wp(n,t,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Tr===null||!Tr.has(o))){t=rn(s,t),s=tp(2),o=pr(n,s,2),o!==null&&(np(s,o,n,t),Fa(o,2),Ln(o));break}}n=n.return}}function cf(t,n,s){var o=t.pingCache;if(o===null){o=t.pingCache=new Bw;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(s)||(Zd=!0,u.add(s),t=Fw.bind(null,t,n,s),n.then(t,t))}function Fw(t,n,s){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ze===t&&(Ee&s)===s&&(Xe===4||Xe===3&&(Ee&62914560)===Ee&&300>Dn()-tf?(Re&2)===0&&da(t,0):Jd|=s,oa===Ee&&(oa=0)),Ln(t)}function Zp(t,n){n===0&&(n=Qm()),t=Yi(t,n),t!==null&&(Fa(t,n),Ln(t))}function Gw(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Zp(t,s)}function Vw(t,n){var s=0;switch(t.tag){case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(s=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),Zp(t,s)}function $w(t,n){return Kr(t,n)}var No=null,ha=null,uf=!1,Ao=!1,df=!1,hi=0;function Ln(t){t!==ha&&t.next===null&&(ha===null?No=ha=t:ha=ha.next=t),Ao=!0,uf||(uf=!0,Qw())}function Ns(t,n){if(!df&&Ao){df=!0;do for(var s=!1,o=No;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var g=0;else{var x=o.suspendedLanes,w=o.pingedLanes;g=(1<<31-qt(42|t)+1)-1,g&=u&~(x&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,ny(o,g))}else g=Ee,g=Ml(o,o===ze?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Ha(o,g)||(s=!0,ny(o,g));o=o.next}while(s);df=!1}}function Yw(){Jp()}function Jp(){Ao=uf=!1;var t=0;hi!==0&&(nS()&&(t=hi),hi=0);for(var n=Dn(),s=null,o=No;o!==null;){var u=o.next,g=ey(o,n);g===0?(o.next=null,s===null?No=u:s.next=u,u===null&&(ha=s)):(s=o,(t!==0||(g&3)!==0)&&(Ao=!0)),o=u}Ns(t)}function ey(t,n){for(var s=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var x=31-qt(g),w=1<<x,T=u[x];T===-1?((w&s)===0||(w&o)!==0)&&(u[x]=_E(w,n)):T<=n&&(t.expiredLanes|=w),g&=~w}if(n=ze,s=Ee,s=Ml(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,s===0||t===n&&(De===2||De===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Eu(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Ha(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(o!==null&&Eu(o),Tu(s)){case 2:case 8:s=Vm;break;case 32:s=Ol;break;case 268435456:s=$m;break;default:s=Ol}return o=ty.bind(null,t),s=Kr(s,o),t.callbackPriority=n,t.callbackNode=s,n}return o!==null&&o!==null&&Eu(o),t.callbackPriority=2,t.callbackNode=null,2}function ty(t,n){if(pt!==0&&pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(To()&&t.callbackNode!==s)return null;var o=Ee;return o=Ml(t,t===ze?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Up(t,o,n),ey(t,Dn()),t.callbackNode!=null&&t.callbackNode===s?ty.bind(null,t):null)}function ny(t,n){if(To())return null;Up(t,n,!0)}function Qw(){iS(function(){(Re&6)!==0?Kr(Gm,Yw):Jp()})}function ff(){return hi===0&&(hi=Ym()),hi}function ry(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ul(""+t)}function iy(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function Kw(t,n,s,o,u){if(n==="submit"&&s&&s.stateNode===u){var g=ry((u[Ot]||null).action),x=o.submitter;x&&(n=(n=x[Ot]||null)?ry(n.formAction):x.getAttribute("formAction"),n!==null&&(g=n,x=null));var w=new ql("action","action",null,o,u);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(hi!==0){var T=x?iy(u,x):new FormData(u);Dd(s,{pending:!0,data:T,method:u.method,action:g},null,T)}}else typeof g=="function"&&(w.preventDefault(),T=x?iy(u,x):new FormData(u),Dd(s,{pending:!0,data:T,method:u.method,action:g},g,T))},currentTarget:u}]})}}for(var hf=0;hf<Xu.length;hf++){var mf=Xu[hf],Xw=mf.toLowerCase(),Ww=mf[0].toUpperCase()+mf.slice(1);_n(Xw,"on"+Ww)}_n(Ug,"onAnimationEnd"),_n(Bg,"onAnimationIteration"),_n(Pg,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(mw,"onTransitionRun"),_n(gw,"onTransitionStart"),_n(pw,"onTransitionCancel"),_n(zg,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(As));function ay(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],u=o.event;o=o.listeners;e:{var g=void 0;if(n)for(var x=o.length-1;0<=x;x--){var w=o[x],T=w.instance,M=w.currentTarget;if(w=w.listener,T!==g&&u.isPropagationStopped())break e;g=w,u.currentTarget=M;try{g(u)}catch(P){mo(P)}u.currentTarget=null,g=T}else for(x=0;x<o.length;x++){if(w=o[x],T=w.instance,M=w.currentTarget,w=w.listener,T!==g&&u.isPropagationStopped())break e;g=w,u.currentTarget=M;try{g(u)}catch(P){mo(P)}u.currentTarget=null,g=T}}}}function xe(t,n){var s=n[Nu];s===void 0&&(s=n[Nu]=new Set);var o=t+"__bubble";s.has(o)||(sy(n,t,2,!1),s.add(o))}function gf(t,n,s){var o=0;n&&(o|=4),sy(s,t,o,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function pf(t){if(!t[Co]){t[Co]=!0,Jm.forEach(function(s){s!=="selectionchange"&&(Zw.has(s)||gf(s,!1,t),gf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Co]||(n[Co]=!0,gf("selectionchange",!1,n))}}function sy(t,n,s,o){switch(Ry(n)){case 2:var u=TS;break;case 8:u=NS;break;default:u=Rf}s=u.bind(null,n,s,t),u=void 0,!Uu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,s,{capture:!0,passive:u}):t.addEventListener(n,s,!0):u!==void 0?t.addEventListener(n,s,{passive:u}):t.addEventListener(n,s,!1)}function yf(t,n,s,o,u){var g=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var w=o.stateNode.containerInfo;if(w===u)break;if(x===4)for(x=o.return;x!==null;){var T=x.tag;if((T===3||T===4)&&x.stateNode.containerInfo===u)return;x=x.return}for(;w!==null;){if(x=ji(w),x===null)return;if(T=x.tag,T===5||T===6||T===26||T===27){o=g=x;continue e}w=w.parentNode}}o=o.return}hg(function(){var M=g,P=Iu(s),H=[];e:{var j=qg.get(t);if(j!==void 0){var I=ql,ce=t;switch(t){case"keypress":if(Pl(s)===0)break e;case"keydown":case"keyup":I=$E;break;case"focusin":ce="focus",I=qu;break;case"focusout":ce="blur",I=qu;break;case"beforeblur":case"afterblur":I=qu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=KE;break;case Ug:case Bg:case Pg:I=UE;break;case zg:I=WE;break;case"scroll":case"scrollend":I=ME;break;case"wheel":I=JE;break;case"copy":case"cut":case"paste":I=PE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=vg;break;case"toggle":case"beforetoggle":I=tw}var se=(n&4)!==0,Le=!se&&(t==="scroll"||t==="scrollend"),O=se?j!==null?j+"Capture":null:j;se=[];for(var N=M,R;N!==null;){var z=N;if(R=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||R===null||O===null||(z=$a(N,O),z!=null&&se.push(Cs(N,z,R))),Le)break;N=N.return}0<se.length&&(j=new I(j,ce,null,s,P),H.push({event:j,listeners:se}))}}if((n&7)===0){e:{if(j=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",j&&s!==ju&&(ce=s.relatedTarget||s.fromElement)&&(ji(ce)||ce[ki]))break e;if((I||j)&&(j=P.window===P?P:(j=P.ownerDocument)?j.defaultView||j.parentWindow:window,I?(ce=s.relatedTarget||s.toElement,I=M,ce=ce?ji(ce):null,ce!==null&&(Le=c(ce),se=ce.tag,ce!==Le||se!==5&&se!==27&&se!==6)&&(ce=null)):(I=null,ce=M),I!==ce)){if(se=pg,z="onMouseLeave",O="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(se=vg,z="onPointerLeave",O="onPointerEnter",N="pointer"),Le=I==null?j:Va(I),R=ce==null?j:Va(ce),j=new se(z,N+"leave",I,s,P),j.target=Le,j.relatedTarget=R,z=null,ji(P)===M&&(se=new se(O,N+"enter",ce,s,P),se.target=R,se.relatedTarget=Le,z=se),Le=z,I&&ce)t:{for(se=I,O=ce,N=0,R=se;R;R=ma(R))N++;for(R=0,z=O;z;z=ma(z))R++;for(;0<N-R;)se=ma(se),N--;for(;0<R-N;)O=ma(O),R--;for(;N--;){if(se===O||O!==null&&se===O.alternate)break t;se=ma(se),O=ma(O)}se=null}else se=null;I!==null&&ly(H,j,I,se,!1),ce!==null&&Le!==null&&ly(H,Le,ce,se,!0)}}e:{if(j=M?Va(M):window,I=j.nodeName&&j.nodeName.toLowerCase(),I==="select"||I==="input"&&j.type==="file")var ne=Ng;else if(Sg(j))if(Ag)ne=dw;else{ne=cw;var pe=ow}else I=j.nodeName,!I||I.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?M&&ku(M.elementType)&&(ne=Ng):ne=uw;if(ne&&(ne=ne(t,M))){Tg(H,ne,s,P);break e}pe&&pe(t,j,M),t==="focusout"&&M&&j.type==="number"&&M.memoizedProps.value!=null&&Mu(j,"number",j.value)}switch(pe=M?Va(M):window,t){case"focusin":(Sg(pe)||pe.contentEditable==="true")&&(Gi=pe,Yu=M,es=null);break;case"focusout":es=Yu=Gi=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,Ig(H,s,P);break;case"selectionchange":if(hw)break;case"keydown":case"keyup":Ig(H,s,P)}var ie;if(Fu)e:{switch(t){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Fi?Eg(t,s)&&(le="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(le="onCompositionStart");le&&(_g&&s.locale!=="ko"&&(Fi||le!=="onCompositionStart"?le==="onCompositionEnd"&&Fi&&(ie=mg()):(fr=P,Bu="value"in fr?fr.value:fr.textContent,Fi=!0)),pe=Oo(M,le),0<pe.length&&(le=new yg(le,t,null,s,P),H.push({event:le,listeners:pe}),ie?le.data=ie:(ie=wg(s),ie!==null&&(le.data=ie)))),(ie=rw?iw(t,s):aw(t,s))&&(le=Oo(M,"onBeforeInput"),0<le.length&&(pe=new yg("onBeforeInput","beforeinput",null,s,P),H.push({event:pe,listeners:le}),pe.data=ie)),Kw(H,t,M,s,P)}ay(H,n)})}function Cs(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Oo(t,n){for(var s=n+"Capture",o=[];t!==null;){var u=t,g=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||g===null||(u=$a(t,s),u!=null&&o.unshift(Cs(t,u,g)),u=$a(t,n),u!=null&&o.push(Cs(t,u,g))),t.tag===3)return o;t=t.return}return[]}function ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ly(t,n,s,o,u){for(var g=n._reactName,x=[];s!==null&&s!==o;){var w=s,T=w.alternate,M=w.stateNode;if(w=w.tag,T!==null&&T===o)break;w!==5&&w!==26&&w!==27||M===null||(T=M,u?(M=$a(s,g),M!=null&&x.unshift(Cs(s,M,T))):u||(M=$a(s,g),M!=null&&x.push(Cs(s,M,T)))),s=s.return}x.length!==0&&t.push({event:n,listeners:x})}var Jw=/\r\n?/g,eS=/\u0000|\uFFFD/g;function oy(t){return(typeof t=="string"?t:""+t).replace(Jw,`
`).replace(eS,"")}function cy(t,n){return n=oy(n),oy(t)===n}function Ro(){}function Ie(t,n,s,o,u,g){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||zi(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&zi(t,""+o);break;case"className":jl(t,"class",o);break;case"tabIndex":jl(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":jl(t,s,o);break;case"style":dg(t,o,g);break;case"data":if(n!=="object"){jl(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Ul(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(n!=="input"&&Ie(t,n,"name",u.name,u,null),Ie(t,n,"formEncType",u.formEncType,u,null),Ie(t,n,"formMethod",u.formMethod,u,null),Ie(t,n,"formTarget",u.formTarget,u,null)):(Ie(t,n,"encType",u.encType,u,null),Ie(t,n,"method",u.method,u,null),Ie(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Ul(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=Ro);break;case"onScroll":o!=null&&xe("scroll",t);break;case"onScrollEnd":o!=null&&xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(u.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=Ul(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":xe("beforetoggle",t),xe("toggle",t),kl(t,"popover",o);break;case"xlinkActuate":Hn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Hn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Hn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Hn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Hn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Hn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":kl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=RE.get(s)||s,kl(t,s,o))}}function vf(t,n,s,o,u,g){switch(s){case"style":dg(t,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(u.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof o=="string"?zi(t,o):(typeof o=="number"||typeof o=="bigint")&&zi(t,""+o);break;case"onScroll":o!=null&&xe("scroll",t);break;case"onScrollEnd":o!=null&&xe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ro);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eg.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(u=s.endsWith("Capture"),n=s.slice(2,u?s.length-7:void 0),g=t[Ot]||null,g=g!=null?g[s]:null,typeof g=="function"&&t.removeEventListener(n,g,u),typeof o=="function")){typeof g!="function"&&g!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,o,u);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):kl(t,s,o)}}}function yt(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",t),xe("load",t);var o=!1,u=!1,g;for(g in s)if(s.hasOwnProperty(g)){var x=s[g];if(x!=null)switch(g){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ie(t,n,g,x,s,null)}}u&&Ie(t,n,"srcSet",s.srcSet,s,null),o&&Ie(t,n,"src",s.src,s,null);return;case"input":xe("invalid",t);var w=g=x=u=null,T=null,M=null;for(o in s)if(s.hasOwnProperty(o)){var P=s[o];if(P!=null)switch(o){case"name":u=P;break;case"type":x=P;break;case"checked":T=P;break;case"defaultChecked":M=P;break;case"value":g=P;break;case"defaultValue":w=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(137,n));break;default:Ie(t,n,o,P,s,null)}}lg(t,g,w,T,M,x,u,!1),Il(t);return;case"select":xe("invalid",t),o=x=g=null;for(u in s)if(s.hasOwnProperty(u)&&(w=s[u],w!=null))switch(u){case"value":g=w;break;case"defaultValue":x=w;break;case"multiple":o=w;default:Ie(t,n,u,w,s,null)}n=g,s=x,t.multiple=!!o,n!=null?Pi(t,!!o,n,!1):s!=null&&Pi(t,!!o,s,!0);return;case"textarea":xe("invalid",t),g=u=o=null;for(x in s)if(s.hasOwnProperty(x)&&(w=s[x],w!=null))switch(x){case"value":o=w;break;case"defaultValue":u=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:Ie(t,n,x,w,s,null)}cg(t,o,u,g),Il(t);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(o=s[T],o!=null))switch(T){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ie(t,n,T,o,s,null)}return;case"dialog":xe("beforetoggle",t),xe("toggle",t),xe("cancel",t),xe("close",t);break;case"iframe":case"object":xe("load",t);break;case"video":case"audio":for(o=0;o<As.length;o++)xe(As[o],t);break;case"image":xe("error",t),xe("load",t);break;case"details":xe("toggle",t);break;case"embed":case"source":case"link":xe("error",t),xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in s)if(s.hasOwnProperty(M)&&(o=s[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ie(t,n,M,o,s,null)}return;default:if(ku(n)){for(P in s)s.hasOwnProperty(P)&&(o=s[P],o!==void 0&&vf(t,n,P,o,s,void 0));return}}for(w in s)s.hasOwnProperty(w)&&(o=s[w],o!=null&&Ie(t,n,w,o,s,null))}function tS(t,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,g=null,x=null,w=null,T=null,M=null,P=null;for(I in s){var H=s[I];if(s.hasOwnProperty(I)&&H!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":T=H;default:o.hasOwnProperty(I)||Ie(t,n,I,null,o,H)}}for(var j in o){var I=o[j];if(H=s[j],o.hasOwnProperty(j)&&(I!=null||H!=null))switch(j){case"type":g=I;break;case"name":u=I;break;case"checked":M=I;break;case"defaultChecked":P=I;break;case"value":x=I;break;case"defaultValue":w=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(137,n));break;default:I!==H&&Ie(t,n,j,I,o,H)}}Du(t,x,w,T,M,P,g,u);return;case"select":I=x=w=j=null;for(g in s)if(T=s[g],s.hasOwnProperty(g)&&T!=null)switch(g){case"value":break;case"multiple":I=T;default:o.hasOwnProperty(g)||Ie(t,n,g,null,o,T)}for(u in o)if(g=o[u],T=s[u],o.hasOwnProperty(u)&&(g!=null||T!=null))switch(u){case"value":j=g;break;case"defaultValue":w=g;break;case"multiple":x=g;default:g!==T&&Ie(t,n,u,g,o,T)}n=w,s=x,o=I,j!=null?Pi(t,!!s,j,!1):!!o!=!!s&&(n!=null?Pi(t,!!s,n,!0):Pi(t,!!s,s?[]:"",!1));return;case"textarea":I=j=null;for(w in s)if(u=s[w],s.hasOwnProperty(w)&&u!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ie(t,n,w,null,o,u)}for(x in o)if(u=o[x],g=s[x],o.hasOwnProperty(x)&&(u!=null||g!=null))switch(x){case"value":j=u;break;case"defaultValue":I=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(a(91));break;default:u!==g&&Ie(t,n,x,u,o,g)}og(t,j,I);return;case"option":for(var ce in s)if(j=s[ce],s.hasOwnProperty(ce)&&j!=null&&!o.hasOwnProperty(ce))switch(ce){case"selected":t.selected=!1;break;default:Ie(t,n,ce,null,o,j)}for(T in o)if(j=o[T],I=s[T],o.hasOwnProperty(T)&&j!==I&&(j!=null||I!=null))switch(T){case"selected":t.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Ie(t,n,T,j,o,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in s)j=s[se],s.hasOwnProperty(se)&&j!=null&&!o.hasOwnProperty(se)&&Ie(t,n,se,null,o,j);for(M in o)if(j=o[M],I=s[M],o.hasOwnProperty(M)&&j!==I&&(j!=null||I!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(137,n));break;default:Ie(t,n,M,j,o,I)}return;default:if(ku(n)){for(var Le in s)j=s[Le],s.hasOwnProperty(Le)&&j!==void 0&&!o.hasOwnProperty(Le)&&vf(t,n,Le,void 0,o,j);for(P in o)j=o[P],I=s[P],!o.hasOwnProperty(P)||j===I||j===void 0&&I===void 0||vf(t,n,P,j,o,I);return}}for(var O in s)j=s[O],s.hasOwnProperty(O)&&j!=null&&!o.hasOwnProperty(O)&&Ie(t,n,O,null,o,j);for(H in o)j=o[H],I=s[H],!o.hasOwnProperty(H)||j===I||j==null&&I==null||Ie(t,n,H,j,o,I)}var _f=null,bf=null;function Do(t){return t.nodeType===9?t:t.ownerDocument}function uy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function xf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ef=null;function nS(){var t=window.event;return t&&t.type==="popstate"?t===Ef?!1:(Ef=t,!0):(Ef=null,!1)}var fy=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(t){return hy.resolve(null).then(t).catch(aS)}:fy;function aS(t){setTimeout(function(){throw t})}function Cr(t){return t==="head"}function my(t,n){var s=n,o=0,u=0;do{var g=s.nextSibling;if(t.removeChild(s),g&&g.nodeType===8)if(s=g.data,s==="/$"){if(0<o&&8>o){s=o;var x=t.ownerDocument;if(s&1&&Os(x.documentElement),s&2&&Os(x.body),s&4)for(s=x.head,Os(s),x=s.firstChild;x;){var w=x.nextSibling,T=x.nodeName;x[Ga]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&x.rel.toLowerCase()==="stylesheet"||s.removeChild(x),x=w}}if(u===0){t.removeChild(g),Us(n);return}u--}else s==="$"||s==="$?"||s==="$!"?u++:o=s.charCodeAt(0)-48;else o=0;s=g}while(s);Us(n)}function wf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":wf(s),Au(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function sS(t,n,s,o){for(;t.nodeType===1;){var u=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ga])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var g=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=xn(t.nextSibling),t===null)break}return null}function lS(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=xn(t.nextSibling),t===null))return null;return t}function Sf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function oS(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function xn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Tf=null;function gy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function py(t,n,s){switch(n=Do(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Os(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Au(t)}var un=new Map,yy=new Set;function Mo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var nr=te.d;te.d={f:cS,r:uS,D:dS,C:fS,L:hS,m:mS,X:pS,S:gS,M:yS};function cS(){var t=nr.f(),n=wo();return t||n}function uS(t){var n=Ii(t);n!==null&&n.tag===5&&n.type==="form"?U0(n):nr.r(t)}var ga=typeof document>"u"?null:document;function vy(t,n,s){var o=ga;if(o&&typeof n=="string"&&n){var u=nn(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof s=="string"&&(u+='[crossorigin="'+s+'"]'),yy.has(u)||(yy.add(u),t={rel:t,crossOrigin:s,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),yt(n,"link",t),st(n),o.head.appendChild(n)))}}function dS(t){nr.D(t),vy("dns-prefetch",t,null)}function fS(t,n){nr.C(t,n),vy("preconnect",t,n)}function hS(t,n,s){nr.L(t,n,s);var o=ga;if(o&&t&&n){var u='link[rel="preload"][as="'+nn(n)+'"]';n==="image"&&s&&s.imageSrcSet?(u+='[imagesrcset="'+nn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(u+='[imagesizes="'+nn(s.imageSizes)+'"]')):u+='[href="'+nn(t)+'"]';var g=u;switch(n){case"style":g=pa(t);break;case"script":g=ya(t)}un.has(g)||(t=h({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),un.set(g,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(Rs(g))||n==="script"&&o.querySelector(Ds(g))||(n=o.createElement("link"),yt(n,"link",t),st(n),o.head.appendChild(n)))}}function mS(t,n){nr.m(t,n);var s=ga;if(s&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+nn(o)+'"][href="'+nn(t)+'"]',g=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ya(t)}if(!un.has(g)&&(t=h({rel:"modulepreload",href:t},n),un.set(g,t),s.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ds(g)))return}o=s.createElement("link"),yt(o,"link",t),st(o),s.head.appendChild(o)}}}function gS(t,n,s){nr.S(t,n,s);var o=ga;if(o&&t){var u=Li(o).hoistableStyles,g=pa(t);n=n||"default";var x=u.get(g);if(!x){var w={loading:0,preload:null};if(x=o.querySelector(Rs(g)))w.loading=5;else{t=h({rel:"stylesheet",href:t,"data-precedence":n},s),(s=un.get(g))&&Nf(t,s);var T=x=o.createElement("link");st(T),yt(T,"link",t),T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ko(x,n,o)}x={type:"stylesheet",instance:x,count:1,state:w},u.set(g,x)}}}function pS(t,n){nr.X(t,n);var s=ga;if(s&&t){var o=Li(s).hoistableScripts,u=ya(t),g=o.get(u);g||(g=s.querySelector(Ds(u)),g||(t=h({src:t,async:!0},n),(n=un.get(u))&&Af(t,n),g=s.createElement("script"),st(g),yt(g,"link",t),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(u,g))}}function yS(t,n){nr.M(t,n);var s=ga;if(s&&t){var o=Li(s).hoistableScripts,u=ya(t),g=o.get(u);g||(g=s.querySelector(Ds(u)),g||(t=h({src:t,async:!0,type:"module"},n),(n=un.get(u))&&Af(t,n),g=s.createElement("script"),st(g),yt(g,"link",t),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(u,g))}}function _y(t,n,s,o){var u=(u=fe.current)?Mo(u):null;if(!u)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=pa(s.href),s=Li(u).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=pa(s.href);var g=Li(u).hoistableStyles,x=g.get(t);if(x||(u=u.ownerDocument||u,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,x),(g=u.querySelector(Rs(t)))&&!g._p&&(x.instance=g,x.state.loading=5),un.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},un.set(t,s),g||vS(u,t,s,x.state))),n&&o===null)throw Error(a(528,""));return x}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ya(s),s=Li(u).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function pa(t){return'href="'+nn(t)+'"'}function Rs(t){return'link[rel="stylesheet"]['+t+"]"}function by(t){return h({},t,{"data-precedence":t.precedence,precedence:null})}function vS(t,n,s,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),yt(n,"link",s),st(n),t.head.appendChild(n))}function ya(t){return'[src="'+nn(t)+'"]'}function Ds(t){return"script[async]"+t}function xy(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+nn(s.href)+'"]');if(o)return n.instance=o,st(o),o;var u=h({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),st(o),yt(o,"style",u),ko(o,s.precedence,t),n.instance=o;case"stylesheet":u=pa(s.href);var g=t.querySelector(Rs(u));if(g)return n.state.loading|=4,n.instance=g,st(g),g;o=by(s),(u=un.get(u))&&Nf(o,u),g=(t.ownerDocument||t).createElement("link"),st(g);var x=g;return x._p=new Promise(function(w,T){x.onload=w,x.onerror=T}),yt(g,"link",o),n.state.loading|=4,ko(g,s.precedence,t),n.instance=g;case"script":return g=ya(s.src),(u=t.querySelector(Ds(g)))?(n.instance=u,st(u),u):(o=s,(u=un.get(g))&&(o=h({},s),Af(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),st(u),yt(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,ko(o,s.precedence,t));return n.instance}function ko(t,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,g=u,x=0;x<o.length;x++){var w=o[x];if(w.dataset.precedence===n)g=w;else if(g!==u)break}g?g.parentNode.insertBefore(t,g.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Nf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Af(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var jo=null;function Ey(t,n,s){if(jo===null){var o=new Map,u=jo=new Map;u.set(s,o)}else u=jo,o=u.get(s),o||(o=new Map,u.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),u=0;u<s.length;u++){var g=s[u];if(!(g[Ga]||g[bt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(n)||"";x=t+x;var w=o.get(x);w?w.push(g):o.set(x,[g])}}return o}function wy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function _S(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Sy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ms=null;function bS(){}function xS(t,n,s){if(Ms===null)throw Error(a(475));var o=Ms;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=pa(s.href),g=t.querySelector(Rs(u));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Io.bind(o),t.then(o,o)),n.state.loading|=4,n.instance=g,st(g);return}g=t.ownerDocument||t,s=by(s),(u=un.get(u))&&Nf(s,u),g=g.createElement("link"),st(g);var x=g;x._p=new Promise(function(w,T){x.onload=w,x.onerror=T}),yt(g,"link",s),n.instance=g}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Io.bind(o),t.addEventListener("load",n),t.addEventListener("error",n))}}function ES(){if(Ms===null)throw Error(a(475));var t=Ms;return t.stylesheets&&t.count===0&&Cf(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Io(){if(this.count--,this.count===0){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lo=null;function Cf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lo=new Map,n.forEach(wS,t),Lo=null,Io.call(t))}function wS(t,n){if(!(n.state.loading&4)){var s=Lo.get(t);if(s)var o=s.get(null);else{s=new Map,Lo.set(t,s);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<u.length;g++){var x=u[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(s.set(x.dataset.precedence,x),o=x)}o&&s.set(null,o)}u=n.instance,x=u.getAttribute("data-precedence"),g=s.get(x)||o,g===o&&s.set(null,u),s.set(x,u),this.count++,o=Io.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),g?g.parentNode.insertBefore(u,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var ks={$$typeof:V,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function SS(t,n,s,o,u,g,x,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.hiddenUpdates=wu(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Ty(t,n,s,o,u,g,x,w,T,M,P,H){return t=new SS(t,n,s,x,w,T,M,H),n=1,g===!0&&(n|=24),g=Ft(3,null,null,n),t.current=g,g.stateNode=t,n=od(),n.refCount++,t.pooledCache=n,n.refCount++,g.memoizedState={element:o,isDehydrated:s,cache:n},fd(g),t}function Ny(t){return t?(t=Qi,t):Qi}function Ay(t,n,s,o,u,g){u=Ny(u),o.context===null?o.context=u:o.pendingContext=u,o=gr(n),o.payload={element:s},g=g===void 0?null:g,g!==null&&(o.callback=g),s=pr(t,o,n),s!==null&&(Qt(s,t,n),cs(s,t,n))}function Cy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Of(t,n){Cy(t,n),(t=t.alternate)&&Cy(t,n)}function Oy(t){if(t.tag===13){var n=Yi(t,67108864);n!==null&&Qt(n,t,67108864),Of(t,67108864)}}var Uo=!0;function TS(t,n,s,o){var u=B.T;B.T=null;var g=te.p;try{te.p=2,Rf(t,n,s,o)}finally{te.p=g,B.T=u}}function NS(t,n,s,o){var u=B.T;B.T=null;var g=te.p;try{te.p=8,Rf(t,n,s,o)}finally{te.p=g,B.T=u}}function Rf(t,n,s,o){if(Uo){var u=Df(o);if(u===null)yf(t,n,o,Bo,s),Dy(t,o);else if(CS(u,t,n,s,o))o.stopPropagation();else if(Dy(t,o),n&4&&-1<AS.indexOf(t)){for(;u!==null;){var g=Ii(u);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=Xr(g.pendingLanes);if(x!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var T=1<<31-qt(x);w.entanglements[1]|=T,x&=~T}Ln(g),(Re&6)===0&&(xo=Dn()+500,Ns(0))}}break;case 13:w=Yi(g,2),w!==null&&Qt(w,g,2),wo(),Of(g,2)}if(g=Df(o),g===null&&yf(t,n,o,Bo,s),g===u)break;u=g}u!==null&&o.stopPropagation()}else yf(t,n,o,null,s)}}function Df(t){return t=Iu(t),Mf(t)}var Bo=null;function Mf(t){if(Bo=null,t=ji(t),t!==null){var n=c(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=d(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Bo=t,null}function Ry(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fE()){case Gm:return 2;case Vm:return 8;case Ol:case hE:return 32;case $m:return 268435456;default:return 32}default:return 32}}var kf=!1,Or=null,Rr=null,Dr=null,js=new Map,Is=new Map,Mr=[],AS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dy(t,n){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":js.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(n.pointerId)}}function Ls(t,n,s,o,u,g){return t===null||t.nativeEvent!==g?(t={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:g,targetContainers:[u]},n!==null&&(n=Ii(n),n!==null&&Oy(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function CS(t,n,s,o,u){switch(n){case"focusin":return Or=Ls(Or,t,n,s,o,u),!0;case"dragenter":return Rr=Ls(Rr,t,n,s,o,u),!0;case"mouseover":return Dr=Ls(Dr,t,n,s,o,u),!0;case"pointerover":var g=u.pointerId;return js.set(g,Ls(js.get(g)||null,t,n,s,o,u)),!0;case"gotpointercapture":return g=u.pointerId,Is.set(g,Ls(Is.get(g)||null,t,n,s,o,u)),!0}return!1}function My(t){var n=ji(t.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){t.blockedOn=n,xE(t.priority,function(){if(s.tag===13){var o=Yt();o=Su(o);var u=Yi(s,o);u!==null&&Qt(u,s,o),Of(s,o)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Po(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Df(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);ju=o,s.target.dispatchEvent(o),ju=null}else return n=Ii(s),n!==null&&Oy(n),t.blockedOn=s,!1;n.shift()}return!0}function ky(t,n,s){Po(t)&&s.delete(n)}function OS(){kf=!1,Or!==null&&Po(Or)&&(Or=null),Rr!==null&&Po(Rr)&&(Rr=null),Dr!==null&&Po(Dr)&&(Dr=null),js.forEach(ky),Is.forEach(ky)}function zo(t,n){t.blockedOn===n&&(t.blockedOn=null,kf||(kf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,OS)))}var qo=null;function jy(t){qo!==t&&(qo=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qo===t&&(qo=null);for(var n=0;n<t.length;n+=3){var s=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(Mf(o||s)===null)continue;break}var g=Ii(s);g!==null&&(t.splice(n,3),n-=3,Dd(g,{pending:!0,data:u,method:s.method,action:o},o,u))}}))}function Us(t){function n(T){return zo(T,t)}Or!==null&&zo(Or,t),Rr!==null&&zo(Rr,t),Dr!==null&&zo(Dr,t),js.forEach(n),Is.forEach(n);for(var s=0;s<Mr.length;s++){var o=Mr[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Mr.length&&(s=Mr[0],s.blockedOn===null);)My(s),s.blockedOn===null&&Mr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var u=s[o],g=s[o+1],x=u[Ot]||null;if(typeof g=="function")x||jy(s);else if(x){var w=null;if(g&&g.hasAttribute("formAction")){if(u=g,x=g[Ot]||null)w=x.formAction;else if(Mf(u)!==null)continue}else w=x.action;typeof w=="function"?s[o+1]=w:(s.splice(o,3),o-=3),jy(s)}}}function jf(t){this._internalRoot=t}Ho.prototype.render=jf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=Yt();Ay(s,o,t,n,null,null)},Ho.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Ay(t.current,2,null,t,null,null),wo(),n[ki]=null}};function Ho(t){this._internalRoot=t}Ho.prototype.unstable_scheduleHydration=function(t){if(t){var n=Wm();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Mr.length&&n!==0&&n<Mr[s].priority;s++);Mr.splice(s,0,t),s===0&&My(t)}};var Iy=e.version;if(Iy!=="19.1.1")throw Error(a(527,Iy,"19.1.1"));te.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(n),t=t!==null?f(t):null,t=t===null?null:t.stateNode,t};var RS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fo.isDisabled&&Fo.supportsFiber)try{qa=Fo.inject(RS),zt=Fo}catch{}}return Ps.createRoot=function(t,n){if(!l(t))throw Error(a(299));var s=!1,o="",u=W0,g=Z0,x=J0,w=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(w=n.unstable_transitionCallbacks)),n=Ty(t,1,!1,null,null,s,o,u,g,x,w,null),t[ki]=n.current,pf(t),new jf(n)},Ps.hydrateRoot=function(t,n,s){if(!l(t))throw Error(a(299));var o=!1,u="",g=W0,x=Z0,w=J0,T=null,M=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks),s.formState!==void 0&&(M=s.formState)),n=Ty(t,1,!0,n,s??null,o,u,g,x,w,T,M),n.context=Ny(null),s=n.current,o=Yt(),o=Su(o),u=gr(o),u.callback=null,pr(s,u,o),s=o,n.current.lanes=s,Fa(n,s),Ln(n),t[ki]=n.current,pf(t),new Ho(n)},Ps.version="19.1.1",Ps}var qy;function fT(){if(qy)return Uf.exports;qy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Uf.exports=dT(),Uf.exports}var hT=fT();const mT="modulepreload",gT=function(i){return"/"+i},Hy={},ue=function(e,r,a){let l=Promise.resolve();if(r&&r.length>0){let y=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");l=y(r.map(f=>{if(f=gT(f),f in Hy)return;Hy[f]=!0;const h=f.endsWith(".css"),_=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":mT,h||(v.as="script"),v.crossOrigin="",v.href=f,m&&v.setAttribute("nonce",m),document.head.appendChild(v),h)return new Promise((b,E)=>{v.addEventListener("load",b),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return l.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};class Fy extends U.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r}),this.props.onError?.(e,r)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx(US,{className:"mx-auto h-12 w-12 text-red-500"}),p.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Something went wrong"}),p.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"We're sorry, but something unexpected happened."}),!1]}),p.jsx("div",{children:p.jsxs("button",{onClick:this.handleRetry,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[p.jsx(BS,{className:"w-4 h-4 mr-2"}),"Try Again"]})})]})}):this.props.children}}class Jh{cache=new Map;config;cacheStats={hits:0,misses:0,evictions:0,totalSize:0};constructor(e={}){this.config={defaultTTL:300*1e3,maxSize:1e3,storageType:"memory",enableCompression:!1,enableEncryption:!1,version:"1.0.0",...e},this.initializeCache()}async initializeCache(){if(this.config.storageType==="localStorage"&&typeof window<"u")try{const e=localStorage.getItem("tsaerp_cache");if(e){const r=JSON.parse(e);r.version===this.config.version&&Object.entries(r.entries).forEach(([a,l])=>{l.expiresAt>Date.now()&&this.cache.set(a,l)})}}catch(e){console.warn("Failed to restore cache from localStorage:",e)}}generateKey(e,r){if(!r)return e;const a=JSON.stringify(r,Object.keys(r).sort()),l=this.simpleHash(a);return`${e}:${l}`}simpleHash(e){let r=0;for(let a=0;a<e.length;a++){const l=e.charCodeAt(a);r=(r<<5)-r+l,r=r&r}return Math.abs(r).toString(36)}get(e,r){const a=this.generateKey(e,r),l=this.cache.get(a);return l?l.expiresAt<Date.now()?(this.cache.delete(a),this.cacheStats.misses++,this.cacheStats.evictions++,null):(l.accessCount++,l.lastAccessed=Date.now(),this.cacheStats.hits++,l.data):(this.cacheStats.misses++,null)}set(e,r,a,l="medium",c){const d=this.generateKey(e,c),m=Date.now()+(a||this.config.defaultTTL),y={data:r,timestamp:Date.now(),expiresAt:m,key:d,version:this.config.version,priority:l,accessCount:1,lastAccessed:Date.now()};this.cache.size>=this.config.maxSize&&this.evictLRU(),this.cache.set(d,y),this.persistToStorage()}update(e,r,a){const l=this.get(e,a),c=r(l);return this.set(e,c,void 0,"high",a),c}invalidate(e,r){const a=this.generateKey(e,r),l=this.cache.delete(a);return l&&this.persistToStorage(),l}invalidatePattern(e){const r=new RegExp(e.replace("*",".*"));let a=0;for(const[l]of this.cache)r.test(l)&&(this.cache.delete(l),a++);return a>0&&this.persistToStorage(),a}evictLRU(){let e="",r=Date.now();for(const[a,l]of this.cache)l.priority==="low"&&l.lastAccessed<r&&(r=l.lastAccessed,e=a);if(!e)for(const[a,l]of this.cache)l.lastAccessed<r&&(r=l.lastAccessed,e=a);e&&(this.cache.delete(e),this.cacheStats.evictions++)}persistToStorage(){if(this.config.storageType==="localStorage"&&typeof window<"u")try{const e={version:this.config.version,entries:Object.fromEntries(this.cache)};localStorage.setItem("tsaerp_cache",JSON.stringify(e))}catch(e){console.warn("Failed to persist cache to localStorage:",e)}}async warm(e){const r=e.map(async({namespace:a,loader:l,ttl:c,priority:d,params:m})=>{try{const y=await l();this.set(a,y,c,d||"medium",m)}catch(y){console.warn(`Failed to warm cache for ${a}:`,y)}});await Promise.allSettled(r)}getStats(){const e=this.cacheStats.hits+this.cacheStats.misses>0?this.cacheStats.hits/(this.cacheStats.hits+this.cacheStats.misses)*100:0;return{...this.cacheStats,hitRate:Math.round(e*100)/100,size:this.cache.size,maxSize:this.config.maxSize,utilization:Math.round(this.cache.size/this.config.maxSize*100),health:e>80?"excellent":e>60?"good":e>40?"fair":"poor"}}clear(){this.cache.clear(),this.cacheStats={hits:0,misses:0,evictions:0,totalSize:0},this.config.storageType==="localStorage"&&typeof window<"u"&&localStorage.removeItem("tsaerp_cache")}export(){return Array.from(this.cache.values())}async prefetch(e){const r=e.filter(({condition:a})=>!a||a()).map(async({namespace:a,loader:l,priority:c})=>{try{if(!this.cache.has(a)){const d=await l();this.set(a,d,void 0,c||"low")}}catch(d){console.warn(`Prefetch failed for ${a}:`,d)}});await Promise.allSettled(r)}}const vt=new Jh({defaultTTL:600*1e3,maxSize:500,storageType:"localStorage",version:"1.0.0"});new Jh({defaultTTL:1800*1e3,maxSize:200,storageType:"sessionStorage",version:"1.0.0"});const Go=new Jh({defaultTTL:300*1e3,maxSize:1e3,storageType:"memory",version:"1.0.0"});var Gy={};const Vy="@firebase/database",$y="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K1="";function X1(i){K1=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),at(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:Qh(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Rn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pT(e)}}catch{}return new yT},yi=W1("localStorage"),vT=W1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new k1("@firebase/database"),Z1=(function(){let i=1;return function(){return i++}})(),J1=function(i){const e=HS(i),r=new FS;r.update(e);const a=r.digest();return GS.encodeByteArray(a)},yl=function(...i){let e="";for(let r=0;r<i.length;r++){const a=i[r];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?e+=yl.apply(null,a):typeof a=="object"?e+=at(a):e+=a,e+=" "}return e};let el=null,Yy=!0;const _T=function(i,e){K(!0,"Can't turn on custom loggers persistently."),Ca.logLevel=VS.VERBOSE,el=Ca.log.bind(Ca)},ht=function(...i){if(Yy===!0&&(Yy=!1,el===null&&vT.get("logging_enabled")===!0&&_T()),el){const e=yl.apply(null,i);el(e)}},vl=function(i){return function(...e){ht(i,...e)}},Dh=function(...i){const e="FIREBASE INTERNAL ERROR: "+yl(...i);Ca.error(e)},cr=function(...i){const e=`FIREBASE FATAL ERROR: ${yl(...i)}`;throw Ca.error(e),new Error(e)},At=function(...i){const e="FIREBASE WARNING: "+yl(...i);Ca.warn(e)},bT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&At("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tu=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},xT=function(i){if(document.readyState==="complete")i();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Da="[MIN_NAME]",xi="[MAX_NAME]",Ai=function(i,e){if(i===e)return 0;if(i===Da||e===xi)return-1;if(e===Da||i===xi)return 1;{const r=Qy(i),a=Qy(e);return r!==null?a!==null?r-a===0?i.length-e.length:r-a:-1:a!==null?1:i<e?-1:1}},ET=function(i,e){return i===e?0:i<e?-1:1},zs=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+at(e))},em=function(i){if(typeof i!="object"||i===null)return at(i);const e=[];for(const a in i)e.push(a);e.sort();let r="{";for(let a=0;a<e.length;a++)a!==0&&(r+=","),r+=at(e[a]),r+=":",r+=em(i[e[a]]);return r+="}",r},eb=function(i,e){const r=i.length;if(r<=e)return[i];const a=[];for(let l=0;l<r;l+=e)l+e>r?a.push(i.substring(l,r)):a.push(i.substring(l,l+e));return a};function mt(i,e){for(const r in i)i.hasOwnProperty(r)&&e(r,i[r])}const tb=function(i){K(!tu(i),"Invalid JSON number");const e=11,r=52,a=(1<<e-1)-1;let l,c,d,m,y;i===0?(c=0,d=0,l=1/i===-1/0?1:0):(l=i<0,i=Math.abs(i),i>=Math.pow(2,1-a)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),a),c=m+a,d=Math.round(i*Math.pow(2,r-m)-Math.pow(2,r))):(c=0,d=Math.round(i/Math.pow(2,1-a-r))));const f=[];for(y=r;y;y-=1)f.push(d%2?1:0),d=Math.floor(d/2);for(y=e;y;y-=1)f.push(c%2?1:0),c=Math.floor(c/2);f.push(l?1:0),f.reverse();const h=f.join("");let _="";for(y=0;y<64;y+=8){let v=parseInt(h.substr(y,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},wT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ST=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function TT(i,e){let r="Unknown Error";i==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?r="Client doesn't have permission to access the desired data.":i==="unavailable"&&(r="The service is unavailable");const a=new Error(i+" at "+e._path.toString()+": "+r);return a.code=i.toUpperCase(),a}const NT=new RegExp("^-?(0*)\\d{1,10}$"),AT=-2147483648,CT=2147483647,Qy=function(i){if(NT.test(i)){const e=Number(i);if(e>=AT&&e<=CT)return e}return null},La=function(i){try{i()}catch(e){setTimeout(()=>{const r=e.stack||"";throw At("Exception was thrown by user callback.",r),e},Math.floor(0))}},OT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},tl=function(i,e){const r=setTimeout(i,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,r){this.appCheckProvider=r,this.appName=e.name,j1(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=r?.getImmediate({optional:!0}),this.appCheck||r?.get().then(a=>this.appCheck=a)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((r,a)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,a):r(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){At(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,r,a){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(ht("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,a)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,a):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',At(e)}}class Mc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Mc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="5",nb="v",rb="s",ib="r",ab="f",sb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lb="ls",ob="p",Mh="ac",cb="websocket",ub="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,r,a,l,c=!1,d="",m=!1,y=!1,f=null){this.secure=r,this.namespace=a,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=y,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function MT(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function fb(i,e,r){K(typeof e=="string","typeof type must == string"),K(typeof r=="object","typeof params must == object");let a;if(e===cb)a=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===ub)a=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);MT(i)&&(r.ns=i.namespace);const l=[];return mt(r,(c,d)=>{l.push(c+"="+d)}),a+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.counters_={}}incrementCounter(e,r=1){Rn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return XS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf={},qf={};function nm(i){const e=i.toString();return zf[e]||(zf[e]=new kT),zf[e]}function jT(i,e){const r=i.toString();return qf[r]||(qf[r]=e()),qf[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<a.length;++l)a[l]&&La(()=>{this.onMessage_(a[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="start",LT="close",UT="pLPCommand",BT="pRTLPCB",hb="id",mb="pw",gb="ser",PT="cb",zT="seg",qT="ts",HT="d",FT="dframe",pb=1870,yb=30,GT=pb-yb,VT=25e3,$T=3e4;class Ta{constructor(e,r,a,l,c,d,m){this.connId=e,this.repoInfo=r,this.applicationId=a,this.appCheckToken=l,this.authToken=c,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vl(e),this.stats_=nm(r),this.urlFn=y=>(this.appCheckToken&&(y[Mh]=this.appCheckToken),fb(r,ub,y))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new IT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($T)),xT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rm((...c)=>{const[d,m,y,f,h]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===Ky)this.id=m,this.password=y;else if(d===LT)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const a={};a[Ky]="t",a[gb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[PT]=this.scriptTagHolder.uniqueCallbackIdentifier),a[nb]=tm,this.transportSessionId&&(a[rb]=this.transportSessionId),this.lastSessionId&&(a[lb]=this.lastSessionId),this.applicationId&&(a[ob]=this.applicationId),this.appCheckToken&&(a[Mh]=this.appCheckToken),typeof location<"u"&&location.hostname&&sb.test(location.hostname)&&(a[ib]=ab);const l=this.urlFn(a);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ta.forceAllow_=!0}static forceDisallow(){Ta.forceDisallow_=!0}static isAvailable(){return Ta.forceAllow_?!0:!Ta.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wT()&&!ST()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=at(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const a=WS(r),l=eb(a,GT);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const a={};a[FT]="t",a[hb]=e,a[mb]=r,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=at(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class rm{constructor(e,r,a,l){this.onDisconnect=a,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Z1(),window[UT+this.uniqueCallbackIdentifier]=e,window[BT+this.uniqueCallbackIdentifier]=r,this.myIFrame=rm.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){ht("frame writing exception"),m.stack&&ht(m.stack),ht(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ht("No IE domain setting required")}catch{const a=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hb]=this.myID,e[mb]=this.myPW,e[gb]=this.currentSerial;let r=this.urlFn(e),a="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yb+a.length<=pb;){const d=this.pendingSegs.shift();a=a+"&"+zT+l+"="+d.seg+"&"+qT+l+"="+d.ts+"&"+HT+l+"="+d.d,l++}return r=r+a,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,a){this.pendingSegs.push({seg:e,ts:r,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const a=()=>{this.outstandingRequests.delete(r),this.newRequest_()},l=setTimeout(a,Math.floor(VT)),c=()=>{clearTimeout(l),a()};this.addTag(e,c)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){const l=a.readyState;(!l||l==="loaded"||l==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),r())},a.onerror=()=>{ht("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=16384,QT=45e3;let Ic=null;typeof MozWebSocket<"u"?Ic=MozWebSocket:typeof WebSocket<"u"&&(Ic=WebSocket);class Nn{constructor(e,r,a,l,c,d,m){this.connId=e,this.applicationId=a,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vl(this.connId),this.stats_=nm(r),this.connURL=Nn.connectionURL_(r,d,m,l,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,a,l,c){const d={};return d[nb]=tm,typeof location<"u"&&location.hostname&&sb.test(location.hostname)&&(d[ib]=ab),r&&(d[rb]=r),a&&(d[lb]=a),l&&(d[Mh]=l),c&&(d[ob]=c),fb(e,cb,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yi.set("previous_websocket_failure",!0);try{let a;ZS(),this.mySock=new Ic(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const l=a.message||a.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const l=a.message||a.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Nn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(r);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&Ic!==null&&!Nn.forceDisallow_}static previouslyFailed(){return yi.isInMemoryStorage||yi.get("previous_websocket_failure")===!0}markConnectionHealthy(){yi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const a=Qh(r);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const a=this.extractFrameCount_(r);a!==null&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const r=at(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const a=eb(r,YT);a.length>1&&this.sendString_(String(a.length));for(let l=0;l<a.length;l++)this.sendString_(a[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QT))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nn.responsesRequiredToBeHealthy=2;Nn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static get ALL_TRANSPORTS(){return[Ta,Nn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const r=Nn&&Nn.isAvailable();let a=r&&!Nn.previouslyFailed();if(e.webSocketOnly&&(r||At("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Nn];else{const l=this.transports_=[];for(const c of sl.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);sl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}sl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=6e4,XT=5e3,WT=10*1024,ZT=100*1024,Hf="t",Xy="d",JT="s",Wy="r",eN="e",Zy="o",Jy="a",ev="n",tv="p",tN="h";class nN{constructor(e,r,a,l,c,d,m,y,f,h){this.id=e,this.repoInfo_=r,this.applicationId_=a,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=y,this.onKill_=f,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vl("c:"+this.id+":"),this.transportManager_=new sl(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,a)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ZT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>WT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hf in e){const r=e[Hf];r===Jy?this.upgradeIfSecondaryHealthy_():r===Wy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Zy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=zs("t",e),a=zs("d",e);if(r==="c")this.onSecondaryControl_(a);else if(r==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ev,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=zs("t",e),a=zs("d",e);r==="c"?this.onControl_(a):r==="d"&&this.onDataMessage_(a)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=zs(Hf,e);if(Xy in e){const a=e[Xy];if(r===tN){const l={...a};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(r===ev){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===JT?this.onConnectionShutdown_(a):r===Wy?this.onReset_(a):r===eN?Dh("Server Error: "+a):r===Zy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dh("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,a=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),tm!==a&&At("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,a),tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(XT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{put(e,r,a,l){}merge(e,r,a,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,a){}onDisconnectMerge(e,r,a){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const a=[...this.listeners_[e]];for(let l=0;l<a.length;l++)a[l].callback.apply(a[l].context,r)}}on(e,r,a){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:a});const l=this.getInitialEvent(e);l&&r.apply(a,l)}off(e,r,a){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let c=0;c<l.length;c++)if(l[c].callback===r&&(!a||a===l[c].context)){l.splice(c,1);return}}validateEventType_(e){K(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends _b{static getInstance(){return new Lc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!I1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=32,rv=768;class Me{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let a=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[a]=this.pieces_[l],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}}function Te(){return new Me("")}function me(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Gr(i){return i.pieces_.length-i.pieceNum_}function Be(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new Me(i.pieces_,e)}function im(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function rN(i){let e="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)i.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[r])));return e||"/"}function ll(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function bb(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)e.push(i.pieces_[r]);return new Me(e,0)}function Ye(i,e){const r=[];for(let a=i.pieceNum_;a<i.pieces_.length;a++)r.push(i.pieces_[a]);if(e instanceof Me)for(let a=e.pieceNum_;a<e.pieces_.length;a++)r.push(e.pieces_[a]);else{const a=e.split("/");for(let l=0;l<a.length;l++)a[l].length>0&&r.push(a[l])}return new Me(r,0)}function ye(i){return i.pieceNum_>=i.pieces_.length}function Nt(i,e){const r=me(i),a=me(e);if(r===null)return e;if(r===a)return Nt(Be(i),Be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function iN(i,e){const r=ll(i,0),a=ll(e,0);for(let l=0;l<r.length&&l<a.length;l++){const c=Ai(r[l],a[l]);if(c!==0)return c}return r.length===a.length?0:r.length<a.length?-1:1}function am(i,e){if(Gr(i)!==Gr(e))return!1;for(let r=i.pieceNum_,a=e.pieceNum_;r<=i.pieces_.length;r++,a++)if(i.pieces_[r]!==e.pieces_[a])return!1;return!0}function yn(i,e){let r=i.pieceNum_,a=e.pieceNum_;if(Gr(i)>Gr(e))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==e.pieces_[a])return!1;++r,++a}return!0}class aN{constructor(e,r){this.errorPrefix_=r,this.parts_=ll(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=Jc(this.parts_[a]);xb(this)}}function sN(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=Jc(e),xb(i)}function lN(i){const e=i.parts_.pop();i.byteLength_-=Jc(e),i.parts_.length>0&&(i.byteLength_-=1)}function xb(i){if(i.byteLength_>rv)throw new Error(i.errorPrefix_+"has a key path longer than "+rv+" bytes ("+i.byteLength_+").");if(i.parts_.length>nv)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nv+") or object contains a cycle "+pi(i))}function pi(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends _b{static getInstance(){return new sm}constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const a=!document[e];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=1e3,oN=300*1e3,iv=30*1e3,cN=1.3,uN=3e4,dN="server_kill",av=3;class or extends vb{constructor(e,r,a,l,c,d,m,y){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=a,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=or.nextPersistentConnectionId_++,this.log_=vl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qs,this.maxReconnectDelay_=oN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Lc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,a){const l=++this.requestNumber_,c={r:l,a:e,b:r};this.log_(at(c)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),a&&(this.requestCBHash_[l]=a)}get(e){this.initConnection_();const r=new Bn,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const m=d.d;d.s==="ok"?r.resolve(m):r.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(e,r,a,l){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:e,tag:a};this.listens.get(d).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(a)})}sendListen_(e){const r=e.query,a=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+a+" for "+l);const c={p:a},d="q";e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,m=>{const y=m.d,f=m.s;or.warnOnListenWarnings_(y,r),(this.listens.get(a)&&this.listens.get(a).get(l))===e&&(this.log_("listen response",m),f!=="ok"&&this.removeListen_(a,l),e.onComplete&&e.onComplete(f,y))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Rn(e,"w")){const a=bi(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();At(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=QS(e)?"auth":"gauth",a={cred:e};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(r,a,l=>{const c=l.s,d=l.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,a=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,a)})}unlisten(e,r){const a=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+l),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,l)&&this.connected_&&this.sendUnlisten_(a,l,e._queryObject,r)}sendUnlisten_(e,r,a,l){this.log_("Unlisten on "+e+" for "+r);const c={p:e},d="n";l&&(c.q=a,c.t=l),this.sendRequest(d,c)}onDisconnectPut(e,r,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:a})}onDisconnectMerge(e,r,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:a})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,a,l){const c={p:r,d:a};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{l&&setTimeout(()=>{l(d.s,d.d)},Math.floor(0))})}put(e,r,a,l){this.putInternal("p",e,r,a,l)}merge(e,r,a,l){this.putInternal("m",e,r,a,l)}putInternal(e,r,a,l,c){this.initConnection_();const d={p:r,d:a};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:l}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,a,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,a=>{if(a.s!=="ok"){const c=a.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+at(e));const r=e.r,a=this.requestCBHash_[r];a&&(delete this.requestCBHash_[r],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):Dh("Unrecognized action received from server: "+at(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uN&&(this.reconnectDelay_=qs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*cN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+or.nextConnectionId_++,c=this.lastSessionId;let d=!1,m=null;const y=function(){m?m.close():(d=!0,a())},f=function(_){K(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(_)};this.realtime_={close:y,sendRequest:f};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);d?ht("getToken() completed but was canceled"):(ht("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,m=new nN(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,a,b=>{At(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(dN)},c))}catch(_){this.log_("Failed to get token: "+_),d||(this.repoInfo_.nodeAdmin&&At(_),y())}}}interrupt(e){ht("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ht("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Oh(this.interruptReasons_)&&(this.reconnectDelay_=qs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let a;r?a=r.map(c=>em(c)).join("$"):a="default";const l=this.removeListen_(e,a);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const a=new Me(e).toString();let l;if(this.listens.has(a)){const c=this.listens.get(a);l=c.get(r),c.delete(r),c.size===0&&this.listens.delete(a)}else l=void 0;return l}onAuthRevoked_(e,r){ht("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=av&&(this.reconnectDelay_=iv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){ht("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=av&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+K1.replace(/\./g,"-")]=1,I1()?e["framework.cordova"]=1:KS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Lc.getInstance().currentlyOnline();return Oh(this.interruptReasons_)&&e}}or.nextPersistentConnectionId_=0;or.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new ve(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const a=new ve(Da,e),l=new ve(Da,r);return this.compare(a,l)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo;class Eb extends nu{static get __EMPTY_NODE(){return Vo}static set __EMPTY_NODE(e){Vo=e}compare(e,r){return Ai(e.name,r.name)}isDefinedOn(e){throw pl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return ve.MIN}maxPost(){return new ve(xi,Vo)}makePost(e,r){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,Vo)}toString(){return".key"}}const Oa=new Eb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,r,a,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=r?a(e.key,r):1,l&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ft{constructor(e,r,a,l,c){this.key=e,this.value=r,this.color=a??ft.RED,this.left=l??Ut.EMPTY_NODE,this.right=c??Ut.EMPTY_NODE}copy(e,r,a,l,c){return new ft(e??this.key,r??this.value,a??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let l=this;const c=a(e,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(e,r,a),null):c===0?l=l.copy(null,r,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,r,a)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ut.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let a,l;if(a=this,r(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),r(e,a.key)===0){if(a.right.isEmpty())return Ut.EMPTY_NODE;l=a.right.min_(),a=a.copy(l.key,l.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ft.RED=!0;ft.BLACK=!1;class fN{copy(e,r,a,l,c){return this}insert(e,r,a){return new ft(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ut{constructor(e,r=Ut.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new Ut(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,ft.BLACK,null,null))}remove(e){return new Ut(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ft.BLACK,null,null))}get(e){let r,a=this.root_;for(;!a.isEmpty();){if(r=this.comparator_(e,a.key),r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}getPredecessorKey(e){let r,a=this.root_,l=null;for(;!a.isEmpty();)if(r=this.comparator_(e,a.key),r===0){if(a.left.isEmpty())return l?l.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else r<0?a=a.left:r>0&&(l=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $o(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new $o(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new $o(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new $o(this.root_,null,this.comparator_,!0,e)}}Ut.EMPTY_NODE=new fN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(i,e){return Ai(i.name,e.name)}function lm(i,e){return Ai(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh;function mN(i){kh=i}const wb=function(i){return typeof i=="number"?"number:"+tb(i):"string:"+i},Sb=function(i){if(i.isLeafNode()){const e=i.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Rn(e,".sv"),"Priority must be a string or number.")}else K(i===kh||i.isEmpty(),"priority of unexpected type.");K(i===kh||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv;class ut{static set __childrenNodeConstructor(e){sv=e}static get __childrenNodeConstructor(){return sv}constructor(e,r=ut.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Sb(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ut(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:me(e)===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:ut.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const a=me(e);return a===null?r:r.isEmpty()&&a!==".priority"?this:(K(a!==".priority"||Gr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,ut.__childrenNodeConstructor.EMPTY_NODE.updateChild(Be(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wb(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=tb(this.value_):e+=this.value_,this.lazyHash_=J1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ut.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ut.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,a=typeof this.value_,l=ut.VALUE_TYPE_ORDER.indexOf(r),c=ut.VALUE_TYPE_ORDER.indexOf(a);return K(l>=0,"Unknown leaf type: "+r),K(c>=0,"Unknown leaf type: "+a),l===c?a==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}ut.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tb,Nb;function gN(i){Tb=i}function pN(i){Nb=i}class yN extends nu{compare(e,r){const a=e.node.getPriority(),l=r.node.getPriority(),c=a.compareTo(l);return c===0?Ai(e.name,r.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(xi,new ut("[PRIORITY-POST]",Nb))}makePost(e,r){const a=Tb(e);return new ve(r,new ut("[PRIORITY-POST]",a))}toString(){return".priority"}}const Ge=new yN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=Math.log(2);class _N{constructor(e){const r=c=>parseInt(Math.log(c)/vN,10),a=c=>parseInt(Array(c+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const l=a(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Uc=function(i,e,r,a){i.sort(e);const l=function(y,f){const h=f-y;let _,v;if(h===0)return null;if(h===1)return _=i[y],v=r?r(_):_,new ft(v,_.node,ft.BLACK,null,null);{const b=parseInt(h/2,10)+y,E=l(y,b),S=l(b+1,f);return _=i[b],v=r?r(_):_,new ft(v,_.node,ft.BLACK,E,S)}},c=function(y){let f=null,h=null,_=i.length;const v=function(E,S){const A=_-E,k=_;_-=E;const L=l(A+1,k),V=i[A],Q=r?r(V):V;b(new ft(Q,V.node,S,null,L))},b=function(E){f?(f.left=E,f=E):(h=E,f=E)};for(let E=0;E<y.count;++E){const S=y.nextBitIsOne(),A=Math.pow(2,y.count-(E+1));S?v(A,ft.BLACK):(v(A,ft.BLACK),v(A,ft.RED))}return h},d=new _N(i.length),m=c(d);return new Ut(a||e,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff;const va={};class sr{static get Default(){return K(va&&Ge,"ChildrenNode.ts has not been loaded"),Ff=Ff||new sr({".priority":va},{".priority":Ge}),Ff}constructor(e,r){this.indexes_=e,this.indexSet_=r}get(e){const r=bi(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Ut?r:null}hasIndex(e){return Rn(this.indexSet_,e.toString())}addIndex(e,r){K(e!==Oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let l=!1;const c=r.getIterator(ve.Wrap);let d=c.getNext();for(;d;)l=l||e.isDefinedOn(d.node),a.push(d),d=c.getNext();let m;l?m=Uc(a,e.getCompare()):m=va;const y=e.toString(),f={...this.indexSet_};f[y]=e;const h={...this.indexes_};return h[y]=m,new sr(h,f)}addToIndexes(e,r){const a=jc(this.indexes_,(l,c)=>{const d=bi(this.indexSet_,c);if(K(d,"Missing index implementation for "+c),l===va)if(d.isDefinedOn(e.node)){const m=[],y=r.getIterator(ve.Wrap);let f=y.getNext();for(;f;)f.name!==e.name&&m.push(f),f=y.getNext();return m.push(e),Uc(m,d.getCompare())}else return va;else{const m=r.get(e.name);let y=l;return m&&(y=y.remove(new ve(e.name,m))),y.insert(e,e.node)}});return new sr(a,this.indexSet_)}removeFromIndexes(e,r){const a=jc(this.indexes_,l=>{if(l===va)return l;{const c=r.get(e.name);return c?l.remove(new ve(e.name,c)):l}});return new sr(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs;class oe{static get EMPTY_NODE(){return Hs||(Hs=new oe(new Ut(lm),null,sr.Default))}constructor(e,r,a){this.children_=e,this.priorityNode_=r,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&Sb(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hs}updatePriority(e){return this.children_.isEmpty()?this:new oe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Hs:r}}getChild(e){const r=me(e);return r===null?this:this.getImmediateChild(r).getChild(Be(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(K(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const a=new ve(e,r);let l,c;r.isEmpty()?(l=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(a,this.children_)):(l=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(a,this.children_));const d=l.isEmpty()?Hs:this.priorityNode_;return new oe(l,d,c)}}updateChild(e,r){const a=me(e);if(a===null)return r;{K(me(e)!==".priority"||Gr(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(a).updateChild(Be(e),r);return this.updateImmediateChild(a,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let a=0,l=0,c=!0;if(this.forEachChild(Ge,(d,m)=>{r[d]=m.val(e),a++,c&&oe.INTEGER_REGEXP_.test(d)?l=Math.max(l,Number(d)):c=!1}),!e&&c&&l<2*a){const d=[];for(const m in r)d[m]=r[m];return d}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+wb(this.getPriority().val())+":"),this.forEachChild(Ge,(r,a)=>{const l=a.hash();l!==""&&(e+=":"+r+":"+l)}),this.lazyHash_=e===""?"":J1(e)}return this.lazyHash_}getPredecessorChildName(e,r,a){const l=this.resolveIndex_(a);if(l){const c=l.getPredecessorKey(new ve(e,r));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const a=r.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new ve(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const a=r.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new ve(r,this.children_.get(r)):null}forEachChild(e,r){const a=this.resolveIndex_(e);return a?a.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const a=this.resolveIndex_(r);if(a)return a.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,ve.Wrap);let c=l.peek();for(;c!=null&&r.compare(c,e)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const a=this.resolveIndex_(r);if(a)return a.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let c=l.peek();for(;c!=null&&r.compare(c,e)>0;)l.getNext(),c=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_l?-1:0}withIndex(e){if(e===Oa||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new oe(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Oa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const a=this.getIterator(Ge),l=r.getIterator(Ge);let c=a.getNext(),d=l.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=a.getNext(),d=l.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Oa?null:this.indexMap_.get(e.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class bN extends oe{constructor(){super(new Ut(lm),oe.EMPTY_NODE,sr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return oe.EMPTY_NODE}isEmpty(){return!1}}const _l=new bN;Object.defineProperties(ve,{MIN:{value:new ve(Da,oe.EMPTY_NODE)},MAX:{value:new ve(xi,_l)}});Eb.__EMPTY_NODE=oe.EMPTY_NODE;ut.__childrenNodeConstructor=oe;mN(_l);pN(_l);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=!0;function $e(i,e=null){if(i===null)return oe.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const r=i;return new ut(r,$e(e))}if(!(i instanceof Array)&&xN){const r=[];let a=!1;if(mt(i,(d,m)=>{if(d.substring(0,1)!=="."){const y=$e(m);y.isEmpty()||(a=a||!y.getPriority().isEmpty(),r.push(new ve(d,y)))}}),r.length===0)return oe.EMPTY_NODE;const c=Uc(r,hN,d=>d.name,lm);if(a){const d=Uc(r,Ge.getCompare());return new oe(c,$e(e),new sr({".priority":d},{".priority":Ge}))}else return new oe(c,$e(e),sr.Default)}else{let r=oe.EMPTY_NODE;return mt(i,(a,l)=>{if(Rn(i,a)&&a.substring(0,1)!=="."){const c=$e(l);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(a,c))}}),r.updatePriority($e(e))}}gN($e);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN extends nu{constructor(e){super(),this.indexPath_=e,K(!ye(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const a=this.extractChild(e.node),l=this.extractChild(r.node),c=a.compareTo(l);return c===0?Ai(e.name,r.name):c}makePost(e,r){const a=$e(e),l=oe.EMPTY_NODE.updateChild(this.indexPath_,a);return new ve(r,l)}maxPost(){const e=oe.EMPTY_NODE.updateChild(this.indexPath_,_l);return new ve(xi,e)}toString(){return ll(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN extends nu{compare(e,r){const a=e.node.compareTo(r.node);return a===0?Ai(e.name,r.name):a}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,r){const a=$e(e);return new ve(r,a)}toString(){return".value"}}const SN=new wN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(i){return{type:"value",snapshotNode:i}}function Ma(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function ol(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function cl(i,e,r){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:r}}function TN(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.index_=e}updateChild(e,r,a,l,c,d){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(r);return m.getChild(l).equals(a.getChild(l))&&m.isEmpty()===a.isEmpty()||(d!=null&&(a.isEmpty()?e.hasChild(r)?d.trackChildChange(ol(r,m)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(Ma(r,a)):d.trackChildChange(cl(r,a,m))),e.isLeafNode()&&a.isEmpty())?e:e.updateImmediateChild(r,a).withIndex(this.index_)}updateFullNode(e,r,a){return a!=null&&(e.isLeafNode()||e.forEachChild(Ge,(l,c)=>{r.hasChild(l)||a.trackChildChange(ol(l,c))}),r.isLeafNode()||r.forEachChild(Ge,(l,c)=>{if(e.hasChild(l)){const d=e.getImmediateChild(l);d.equals(c)||a.trackChildChange(cl(l,c,d))}else a.trackChildChange(Ma(l,c))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?oe.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.indexedFilter_=new om(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ul.getStartPost_(e),this.endPost_=ul.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,a=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&a}updateChild(e,r,a,l,c,d){return this.matches(new ve(r,a))||(a=oe.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,a,l,c,d)}updateFullNode(e,r,a){r.isLeafNode()&&(r=oe.EMPTY_NODE);let l=r.withIndex(this.index_);l=l.updatePriority(oe.EMPTY_NODE);const c=this;return r.forEachChild(Ge,(d,m)=>{c.matches(new ve(d,m))||(l=l.updateImmediateChild(d,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,a)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=r=>{const a=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new ul(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,a,l,c,d){return this.rangedFilter_.matches(new ve(r,a))||(a=oe.EMPTY_NODE),e.getImmediateChild(r).equals(a)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,a,l,c,d):this.fullLimitUpdateChild_(e,r,a,c,d)}updateFullNode(e,r,a){let l;if(r.isLeafNode()||r.isEmpty())l=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){l=oe.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const m=c.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))l=l.updateImmediateChild(m.name,m.node),d++;else break;else continue}}else{l=r.withIndex(this.index_),l=l.updatePriority(oe.EMPTY_NODE);let c;this.reverse_?c=l.getReverseIterator(this.index_):c=l.getIterator(this.index_);let d=0;for(;c.hasNext();){const m=c.getNext();d<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?d++:l=l.updateImmediateChild(m.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,a)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,a,l,c){let d;if(this.reverse_){const _=this.index_.getCompare();d=(v,b)=>_(b,v)}else d=this.index_.getCompare();const m=e;K(m.numChildren()===this.limit_,"");const y=new ve(r,a),f=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),h=this.rangedFilter_.matches(y);if(m.hasChild(r)){const _=m.getImmediateChild(r);let v=l.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===r||m.hasChild(v.name));)v=l.getChildAfterChild(this.index_,v,this.reverse_);const b=v==null?1:d(v,y);if(h&&!a.isEmpty()&&b>=0)return c?.trackChildChange(cl(r,a,_)),m.updateImmediateChild(r,a);{c?.trackChildChange(ol(r,_));const S=m.updateImmediateChild(r,oe.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(c?.trackChildChange(Ma(v.name,v.node)),S.updateImmediateChild(v.name,v.node)):S}}else return a.isEmpty()?e:h&&d(f,y)>=0?(c!=null&&(c.trackChildChange(ol(f.name,f.node)),c.trackChildChange(Ma(r,a))),m.updateImmediateChild(r,a).updateImmediateChild(f.name,oe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Da}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ge}copy(){const e=new ru;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function AN(i){return i.loadsAllData()?new om(i.getIndex()):i.hasLimit()?new NN(i):new ul(i)}function lv(i){const e={};if(i.isDefault())return e;let r;if(i.index_===Ge?r="$priority":i.index_===SN?r="$value":i.index_===Oa?r="$key":(K(i.index_ instanceof EN,"Unrecognized index type!"),r=i.index_.toString()),e.orderBy=at(r),i.startSet_){const a=i.startAfterSet_?"startAfter":"startAt";e[a]=at(i.indexStartValue_),i.startNameSet_&&(e[a]+=","+at(i.indexStartName_))}if(i.endSet_){const a=i.endBeforeSet_?"endBefore":"endAt";e[a]=at(i.indexEndValue_),i.endNameSet_&&(e[a]+=","+at(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function ov(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let r=i.viewFrom_;r===""&&(i.isViewFromLeft()?r="l":r="r"),e.vf=r}return i.index_!==Ge&&(e.i=i.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends vb{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,r,a,l){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.log_=vl("p:rest:"),this.listens_={}}listen(e,r,a,l){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=Bc.getListenId_(e,a),m={};this.listens_[d]=m;const y=lv(e._queryParams);this.restRequest_(c+".json",y,(f,h)=>{let _=h;if(f===404&&(_=null,f=null),f===null&&this.onDataUpdate_(c,_,!1,a),bi(this.listens_,d)===m){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",l(v,null)}})}unlisten(e,r){const a=Bc.getListenId_(e,r);delete this.listens_[a]}get(e){const r=lv(e._queryParams),a=e._path.toString(),l=new Bn;return this.restRequest_(a+".json",r,(c,d)=>{let m=d;c===404&&(m=null,c=null),c===null?(this.onDataUpdate_(a,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(e){}restRequest_(e,r={},a){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(r.auth=l.accessToken),c&&c.token&&(r.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$S(r);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(a&&m.readyState===4){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=Qh(m.responseText)}catch{At("Failed to parse JSON response for "+d+": "+m.responseText)}a(null,y)}else m.status!==401&&m.status!==404&&At("Got unsuccessful REST response for "+d+" Status: "+m.status),a(m.status);a=null}},m.open("GET",d,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(){return{value:null,children:new Map}}function Ua(i,e,r){if(ye(e))i.value=r,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,r);else{const a=me(e);i.children.has(a)||i.children.set(a,Pc());const l=i.children.get(a);e=Be(e),Ua(l,e,r)}}function jh(i,e){if(ye(e))return i.value=null,i.children.clear(),!0;if(i.value!==null){if(i.value.isLeafNode())return!1;{const r=i.value;return i.value=null,r.forEachChild(Ge,(a,l)=>{Ua(i,new Me(a),l)}),jh(i,e)}}else if(i.children.size>0){const r=me(e);return e=Be(e),i.children.has(r)&&jh(i.children.get(r),e)&&i.children.delete(r),i.children.size===0}else return!0}function Ih(i,e,r){i.value!==null?r(e,i.value):ON(i,(a,l)=>{const c=new Me(e.toString()+"/"+a);Ih(l,c,r)})}function ON(i,e){i.children.forEach((r,a)=>{e(a,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r={...e};return this.last_&&mt(this.last_,(a,l)=>{r[a]=r[a]-l}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=10*1e3,DN=30*1e3,MN=300*1e3;class kN{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new RN(e);const a=cv+(DN-cv)*Math.random();tl(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const e=this.statsListener_.get(),r={};let a=!1;mt(e,(l,c)=>{c>0&&Rn(this.statsToReport_,l)&&(r[l]=c,a=!0)}),a&&this.server_.reportStats(r),tl(this.reportStats_.bind(this),Math.floor(Math.random()*2*MN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(An||(An={}));function cm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function um(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dm(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,r,a){this.path=e,this.affectedTree=r,this.revert=a,this.type=An.ACK_USER_WRITE,this.source=cm()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Me(e));return new zc(Te(),r,this.revert)}}else return K(me(this.path)===e,"operationForChild called for unrelated child."),new zc(Be(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,r){this.source=e,this.path=r,this.type=An.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new dl(this.source,Te()):new dl(this.source,Be(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,r,a){this.source=e,this.path=r,this.snap=a,this.type=An.OVERWRITE}operationForChild(e){return ye(this.path)?new Ei(this.source,Te(),this.snap.getImmediateChild(e)):new Ei(this.source,Be(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,r,a){this.source=e,this.path=r,this.children=a,this.type=An.MERGE}operationForChild(e){if(ye(this.path)){const r=this.children.subtree(new Me(e));return r.isEmpty()?null:r.value?new Ei(this.source,Te(),r.value):new ka(this.source,Te(),r)}else return K(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ka(this.source,Be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,r,a){this.node_=e,this.fullyInitialized_=r,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;const r=me(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function IN(i,e,r,a){const l=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(TN(d.childName,d.snapshotNode))}),Fs(i,l,"child_removed",e,a,r),Fs(i,l,"child_added",e,a,r),Fs(i,l,"child_moved",c,a,r),Fs(i,l,"child_changed",e,a,r),Fs(i,l,"value",e,a,r),l}function Fs(i,e,r,a,l,c){const d=a.filter(m=>m.type===r);d.sort((m,y)=>UN(i,m,y)),d.forEach(m=>{const y=LN(i,m,c);l.forEach(f=>{f.respondsTo(m.type)&&e.push(f.createEvent(y,i.query_))})})}function LN(i,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function UN(i,e,r){if(e.childName==null||r.childName==null)throw pl("Should only compare child_ events.");const a=new ve(e.childName,e.snapshotNode),l=new ve(r.childName,r.snapshotNode);return i.index_.compare(a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(i,e){return{eventCache:i,serverCache:e}}function nl(i,e,r,a){return iu(new Vr(e,r,a),i.serverCache)}function Cb(i,e,r,a){return iu(i.eventCache,new Vr(e,r,a))}function qc(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function wi(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;const BN=()=>(Gf||(Gf=new Ut(ET)),Gf);class qe{static fromObject(e){let r=new qe(null);return mt(e,(a,l)=>{r=r.set(new Me(a),l)}),r}constructor(e,r=BN()){this.value=e,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:Te(),value:this.value};if(ye(e))return null;{const a=me(e),l=this.children.get(a);if(l!==null){const c=l.findRootMostMatchingPathAndValue(Be(e),r);return c!=null?{path:Ye(new Me(a),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{const r=me(e),a=this.children.get(r);return a!==null?a.subtree(Be(e)):new qe(null)}}set(e,r){if(ye(e))return new qe(r,this.children);{const a=me(e),c=(this.children.get(a)||new qe(null)).set(Be(e),r),d=this.children.insert(a,c);return new qe(this.value,d)}}remove(e){if(ye(e))return this.children.isEmpty()?new qe(null):new qe(null,this.children);{const r=me(e),a=this.children.get(r);if(a){const l=a.remove(Be(e));let c;return l.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,l),this.value===null&&c.isEmpty()?new qe(null):new qe(this.value,c)}else return this}}get(e){if(ye(e))return this.value;{const r=me(e),a=this.children.get(r);return a?a.get(Be(e)):null}}setTree(e,r){if(ye(e))return r;{const a=me(e),c=(this.children.get(a)||new qe(null)).setTree(Be(e),r);let d;return c.isEmpty()?d=this.children.remove(a):d=this.children.insert(a,c),new qe(this.value,d)}}fold(e){return this.fold_(Te(),e)}fold_(e,r){const a={};return this.children.inorderTraversal((l,c)=>{a[l]=c.fold_(Ye(e,l),r)}),r(e,this.value,a)}findOnPath(e,r){return this.findOnPath_(e,Te(),r)}findOnPath_(e,r,a){const l=this.value?a(r,this.value):!1;if(l)return l;if(ye(e))return null;{const c=me(e),d=this.children.get(c);return d?d.findOnPath_(Be(e),Ye(r,c),a):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,Te(),r)}foreachOnPath_(e,r,a){if(ye(e))return this;{this.value&&a(r,this.value);const l=me(e),c=this.children.get(l);return c?c.foreachOnPath_(Be(e),Ye(r,l),a):new qe(null)}}foreach(e){this.foreach_(Te(),e)}foreach_(e,r){this.children.inorderTraversal((a,l)=>{l.foreach_(Ye(e,a),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,a)=>{a.value&&e(r,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.writeTree_=e}static empty(){return new On(new qe(null))}}function rl(i,e,r){if(ye(e))return new On(new qe(r));{const a=i.writeTree_.findRootMostValueAndPath(e);if(a!=null){const l=a.path;let c=a.value;const d=Nt(l,e);return c=c.updateChild(d,r),new On(i.writeTree_.set(l,c))}else{const l=new qe(r),c=i.writeTree_.setTree(e,l);return new On(c)}}}function Lh(i,e,r){let a=i;return mt(r,(l,c)=>{a=rl(a,Ye(e,l),c)}),a}function uv(i,e){if(ye(e))return On.empty();{const r=i.writeTree_.setTree(e,new qe(null));return new On(r)}}function Uh(i,e){return Ci(i,e)!=null}function Ci(i,e){const r=i.writeTree_.findRootMostValueAndPath(e);return r!=null?i.writeTree_.get(r.path).getChild(Nt(r.path,e)):null}function dv(i){const e=[],r=i.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ge,(a,l)=>{e.push(new ve(a,l))}):i.writeTree_.children.inorderTraversal((a,l)=>{l.value!=null&&e.push(new ve(a,l.value))}),e}function zr(i,e){if(ye(e))return i;{const r=Ci(i,e);return r!=null?new On(new qe(r)):new On(i.writeTree_.subtree(e))}}function Bh(i){return i.writeTree_.isEmpty()}function ja(i,e){return Ob(Te(),i.writeTree_,e)}function Ob(i,e,r){if(e.value!=null)return r.updateChild(i,e.value);{let a=null;return e.children.inorderTraversal((l,c)=>{l===".priority"?(K(c.value!==null,"Priority writes must always be leaf nodes"),a=c.value):r=Ob(Ye(i,l),c,r)}),!r.getChild(i).isEmpty()&&a!==null&&(r=r.updateChild(Ye(i,".priority"),a)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(i,e){return kb(e,i)}function PN(i,e,r,a,l){K(a>i.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),i.allWrites.push({path:e,snap:r,writeId:a,visible:l}),l&&(i.visibleWrites=rl(i.visibleWrites,e,r)),i.lastWriteId=a}function zN(i,e,r,a){K(a>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:e,children:r,writeId:a,visible:!0}),i.visibleWrites=Lh(i.visibleWrites,e,r),i.lastWriteId=a}function qN(i,e){for(let r=0;r<i.allWrites.length;r++){const a=i.allWrites[r];if(a.writeId===e)return a}return null}function HN(i,e){const r=i.allWrites.findIndex(m=>m.writeId===e);K(r>=0,"removeWrite called with nonexistent writeId.");const a=i.allWrites[r];i.allWrites.splice(r,1);let l=a.visible,c=!1,d=i.allWrites.length-1;for(;l&&d>=0;){const m=i.allWrites[d];m.visible&&(d>=r&&FN(m,a.path)?l=!1:yn(a.path,m.path)&&(c=!0)),d--}if(l){if(c)return GN(i),!0;if(a.snap)i.visibleWrites=uv(i.visibleWrites,a.path);else{const m=a.children;mt(m,y=>{i.visibleWrites=uv(i.visibleWrites,Ye(a.path,y))})}return!0}else return!1}function FN(i,e){if(i.snap)return yn(i.path,e);for(const r in i.children)if(i.children.hasOwnProperty(r)&&yn(Ye(i.path,r),e))return!0;return!1}function GN(i){i.visibleWrites=Rb(i.allWrites,VN,Te()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function VN(i){return i.visible}function Rb(i,e,r){let a=On.empty();for(let l=0;l<i.length;++l){const c=i[l];if(e(c)){const d=c.path;let m;if(c.snap)yn(r,d)?(m=Nt(r,d),a=rl(a,m,c.snap)):yn(d,r)&&(m=Nt(d,r),a=rl(a,Te(),c.snap.getChild(m)));else if(c.children){if(yn(r,d))m=Nt(r,d),a=Lh(a,m,c.children);else if(yn(d,r))if(m=Nt(d,r),ye(m))a=Lh(a,Te(),c.children);else{const y=bi(c.children,me(m));if(y){const f=y.getChild(Be(m));a=rl(a,Te(),f)}}}else throw pl("WriteRecord should have .snap or .children")}}return a}function Db(i,e,r,a,l){if(!a&&!l){const c=Ci(i.visibleWrites,e);if(c!=null)return c;{const d=zr(i.visibleWrites,e);if(Bh(d))return r;if(r==null&&!Uh(d,Te()))return null;{const m=r||oe.EMPTY_NODE;return ja(d,m)}}}else{const c=zr(i.visibleWrites,e);if(!l&&Bh(c))return r;if(!l&&r==null&&!Uh(c,Te()))return null;{const d=function(f){return(f.visible||l)&&(!a||!~a.indexOf(f.writeId))&&(yn(f.path,e)||yn(e,f.path))},m=Rb(i.allWrites,d,e),y=r||oe.EMPTY_NODE;return ja(m,y)}}}function $N(i,e,r){let a=oe.EMPTY_NODE;const l=Ci(i.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Ge,(c,d)=>{a=a.updateImmediateChild(c,d)}),a;if(r){const c=zr(i.visibleWrites,e);return r.forEachChild(Ge,(d,m)=>{const y=ja(zr(c,new Me(d)),m);a=a.updateImmediateChild(d,y)}),dv(c).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}else{const c=zr(i.visibleWrites,e);return dv(c).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}}function YN(i,e,r,a,l){K(a||l,"Either existingEventSnap or existingServerSnap must exist");const c=Ye(e,r);if(Uh(i.visibleWrites,c))return null;{const d=zr(i.visibleWrites,c);return Bh(d)?l.getChild(r):ja(d,l.getChild(r))}}function QN(i,e,r,a){const l=Ye(e,r),c=Ci(i.visibleWrites,l);if(c!=null)return c;if(a.isCompleteForChild(r)){const d=zr(i.visibleWrites,l);return ja(d,a.getNode().getImmediateChild(r))}else return null}function KN(i,e){return Ci(i.visibleWrites,e)}function XN(i,e,r,a,l,c,d){let m;const y=zr(i.visibleWrites,e),f=Ci(y,Te());if(f!=null)m=f;else if(r!=null)m=ja(y,r);else return[];if(m=m.withIndex(d),!m.isEmpty()&&!m.isLeafNode()){const h=[],_=d.getCompare(),v=c?m.getReverseIteratorFrom(a,d):m.getIteratorFrom(a,d);let b=v.getNext();for(;b&&h.length<l;)_(b,a)!==0&&h.push(b),b=v.getNext();return h}else return[]}function WN(){return{visibleWrites:On.empty(),allWrites:[],lastWriteId:-1}}function Hc(i,e,r,a){return Db(i.writeTree,i.treePath,e,r,a)}function fm(i,e){return $N(i.writeTree,i.treePath,e)}function fv(i,e,r,a){return YN(i.writeTree,i.treePath,e,r,a)}function Fc(i,e){return KN(i.writeTree,Ye(i.treePath,e))}function ZN(i,e,r,a,l,c){return XN(i.writeTree,i.treePath,e,r,a,l,c)}function hm(i,e,r){return QN(i.writeTree,i.treePath,e,r)}function Mb(i,e){return kb(Ye(i.treePath,e),i.writeTree)}function kb(i,e){return{treePath:i,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,a=e.childName;K(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),K(a!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(a);if(l){const c=l.type;if(r==="child_added"&&c==="child_removed")this.changeMap.set(a,cl(a,e.snapshotNode,l.snapshotNode));else if(r==="child_removed"&&c==="child_added")this.changeMap.delete(a);else if(r==="child_removed"&&c==="child_changed")this.changeMap.set(a,ol(a,l.oldSnap));else if(r==="child_changed"&&c==="child_added")this.changeMap.set(a,Ma(a,e.snapshotNode));else if(r==="child_changed"&&c==="child_changed")this.changeMap.set(a,cl(a,e.snapshotNode,l.oldSnap));else throw pl("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(a,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{getCompleteChild(e){return null}getChildAfterChild(e,r,a){return null}}const jb=new eA;class mm{constructor(e,r,a=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=a}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const a=this.optCompleteServerCache_!=null?new Vr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hm(this.writes_,e,a)}}getChildAfterChild(e,r,a){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wi(this.viewCache_),c=ZN(this.writes_,l,r,1,a,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(i){return{filter:i}}function nA(i,e){K(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function rA(i,e,r,a,l){const c=new JN;let d,m;if(r.type===An.OVERWRITE){const f=r;f.source.fromUser?d=Ph(i,e,f.path,f.snap,a,l,c):(K(f.source.fromServer,"Unknown source."),m=f.source.tagged||e.serverCache.isFiltered()&&!ye(f.path),d=Gc(i,e,f.path,f.snap,a,l,m,c))}else if(r.type===An.MERGE){const f=r;f.source.fromUser?d=aA(i,e,f.path,f.children,a,l,c):(K(f.source.fromServer,"Unknown source."),m=f.source.tagged||e.serverCache.isFiltered(),d=zh(i,e,f.path,f.children,a,l,m,c))}else if(r.type===An.ACK_USER_WRITE){const f=r;f.revert?d=oA(i,e,f.path,a,l,c):d=sA(i,e,f.path,f.affectedTree,a,l,c)}else if(r.type===An.LISTEN_COMPLETE)d=lA(i,e,r.path,a,c);else throw pl("Unknown operation type: "+r.type);const y=c.getChanges();return iA(e,d,y),{viewCache:d,changes:y}}function iA(i,e,r){const a=e.eventCache;if(a.isFullyInitialized()){const l=a.getNode().isLeafNode()||a.getNode().isEmpty(),c=qc(i);(r.length>0||!i.eventCache.isFullyInitialized()||l&&!a.getNode().equals(c)||!a.getNode().getPriority().equals(c.getPriority()))&&r.push(Ab(qc(e)))}}function Ib(i,e,r,a,l,c){const d=e.eventCache;if(Fc(a,r)!=null)return e;{let m,y;if(ye(r))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=wi(e),h=f instanceof oe?f:oe.EMPTY_NODE,_=fm(a,h);m=i.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const f=Hc(a,wi(e));m=i.filter.updateFullNode(e.eventCache.getNode(),f,c)}else{const f=me(r);if(f===".priority"){K(Gr(r)===1,"Can't have a priority with additional path components");const h=d.getNode();y=e.serverCache.getNode();const _=fv(a,r,h,y);_!=null?m=i.filter.updatePriority(h,_):m=d.getNode()}else{const h=Be(r);let _;if(d.isCompleteForChild(f)){y=e.serverCache.getNode();const v=fv(a,r,d.getNode(),y);v!=null?_=d.getNode().getImmediateChild(f).updateChild(h,v):_=d.getNode().getImmediateChild(f)}else _=hm(a,f,e.serverCache);_!=null?m=i.filter.updateChild(d.getNode(),f,_,h,l,c):m=d.getNode()}}return nl(e,m,d.isFullyInitialized()||ye(r),i.filter.filtersNodes())}}function Gc(i,e,r,a,l,c,d,m){const y=e.serverCache;let f;const h=d?i.filter:i.filter.getIndexedFilter();if(ye(r))f=h.updateFullNode(y.getNode(),a,null);else if(h.filtersNodes()&&!y.isFiltered()){const b=y.getNode().updateChild(r,a);f=h.updateFullNode(y.getNode(),b,null)}else{const b=me(r);if(!y.isCompleteForPath(r)&&Gr(r)>1)return e;const E=Be(r),A=y.getNode().getImmediateChild(b).updateChild(E,a);b===".priority"?f=h.updatePriority(y.getNode(),A):f=h.updateChild(y.getNode(),b,A,E,jb,null)}const _=Cb(e,f,y.isFullyInitialized()||ye(r),h.filtersNodes()),v=new mm(l,_,c);return Ib(i,_,r,l,v,m)}function Ph(i,e,r,a,l,c,d){const m=e.eventCache;let y,f;const h=new mm(l,e,c);if(ye(r))f=i.filter.updateFullNode(e.eventCache.getNode(),a,d),y=nl(e,f,!0,i.filter.filtersNodes());else{const _=me(r);if(_===".priority")f=i.filter.updatePriority(e.eventCache.getNode(),a),y=nl(e,f,m.isFullyInitialized(),m.isFiltered());else{const v=Be(r),b=m.getNode().getImmediateChild(_);let E;if(ye(v))E=a;else{const S=h.getCompleteChild(_);S!=null?im(v)===".priority"&&S.getChild(bb(v)).isEmpty()?E=S:E=S.updateChild(v,a):E=oe.EMPTY_NODE}if(b.equals(E))y=e;else{const S=i.filter.updateChild(m.getNode(),_,E,v,h,d);y=nl(e,S,m.isFullyInitialized(),i.filter.filtersNodes())}}}return y}function hv(i,e){return i.eventCache.isCompleteForChild(e)}function aA(i,e,r,a,l,c,d){let m=e;return a.foreach((y,f)=>{const h=Ye(r,y);hv(e,me(h))&&(m=Ph(i,m,h,f,l,c,d))}),a.foreach((y,f)=>{const h=Ye(r,y);hv(e,me(h))||(m=Ph(i,m,h,f,l,c,d))}),m}function mv(i,e,r){return r.foreach((a,l)=>{e=e.updateChild(a,l)}),e}function zh(i,e,r,a,l,c,d,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,f;ye(r)?f=a:f=new qe(null).setTree(r,a);const h=e.serverCache.getNode();return f.children.inorderTraversal((_,v)=>{if(h.hasChild(_)){const b=e.serverCache.getNode().getImmediateChild(_),E=mv(i,b,v);y=Gc(i,y,new Me(_),E,l,c,d,m)}}),f.children.inorderTraversal((_,v)=>{const b=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!h.hasChild(_)&&!b){const E=e.serverCache.getNode().getImmediateChild(_),S=mv(i,E,v);y=Gc(i,y,new Me(_),S,l,c,d,m)}}),y}function sA(i,e,r,a,l,c,d){if(Fc(l,r)!=null)return e;const m=e.serverCache.isFiltered(),y=e.serverCache;if(a.value!=null){if(ye(r)&&y.isFullyInitialized()||y.isCompleteForPath(r))return Gc(i,e,r,y.getNode().getChild(r),l,c,m,d);if(ye(r)){let f=new qe(null);return y.getNode().forEachChild(Oa,(h,_)=>{f=f.set(new Me(h),_)}),zh(i,e,r,f,l,c,m,d)}else return e}else{let f=new qe(null);return a.foreach((h,_)=>{const v=Ye(r,h);y.isCompleteForPath(v)&&(f=f.set(h,y.getNode().getChild(v)))}),zh(i,e,r,f,l,c,m,d)}}function lA(i,e,r,a,l){const c=e.serverCache,d=Cb(e,c.getNode(),c.isFullyInitialized()||ye(r),c.isFiltered());return Ib(i,d,r,a,jb,l)}function oA(i,e,r,a,l,c){let d;if(Fc(a,r)!=null)return e;{const m=new mm(a,e,l),y=e.eventCache.getNode();let f;if(ye(r)||me(r)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Hc(a,wi(e));else{const _=e.serverCache.getNode();K(_ instanceof oe,"serverChildren would be complete if leaf node"),h=fm(a,_)}h=h,f=i.filter.updateFullNode(y,h,c)}else{const h=me(r);let _=hm(a,h,e.serverCache);_==null&&e.serverCache.isCompleteForChild(h)&&(_=y.getImmediateChild(h)),_!=null?f=i.filter.updateChild(y,h,_,Be(r),m,c):e.eventCache.getNode().hasChild(h)?f=i.filter.updateChild(y,h,oe.EMPTY_NODE,Be(r),m,c):f=y,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Hc(a,wi(e)),d.isLeafNode()&&(f=i.filter.updateFullNode(f,d,c)))}return d=e.serverCache.isFullyInitialized()||Fc(a,Te())!=null,nl(e,f,d,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const a=this.query_._queryParams,l=new om(a.getIndex()),c=AN(a);this.processor_=tA(c);const d=r.serverCache,m=r.eventCache,y=l.updateFullNode(oe.EMPTY_NODE,d.getNode(),null),f=c.updateFullNode(oe.EMPTY_NODE,m.getNode(),null),h=new Vr(y,d.isFullyInitialized(),l.filtersNodes()),_=new Vr(f,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=iu(_,h),this.eventGenerator_=new jN(this.query_)}get query(){return this.query_}}function uA(i){return i.viewCache_.serverCache.getNode()}function dA(i){return qc(i.viewCache_)}function fA(i,e){const r=wi(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!ye(e)&&!r.getImmediateChild(me(e)).isEmpty())?r.getChild(e):null}function gv(i){return i.eventRegistrations_.length===0}function hA(i,e){i.eventRegistrations_.push(e)}function pv(i,e,r){const a=[];if(r){K(e==null,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(r,l);d&&a.push(d)})}if(e){let l=[];for(let c=0;c<i.eventRegistrations_.length;++c){const d=i.eventRegistrations_[c];if(!d.matches(e))l.push(d);else if(e.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(c+1));break}}i.eventRegistrations_=l}else i.eventRegistrations_=[];return a}function yv(i,e,r,a){e.type===An.MERGE&&e.source.queryId!==null&&(K(wi(i.viewCache_),"We should always have a full cache before handling merges"),K(qc(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,c=rA(i.processor_,l,e,r,a);return nA(i.processor_,c.viewCache),K(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,Lb(i,c.changes,c.viewCache.eventCache.getNode(),null)}function mA(i,e){const r=i.viewCache_.eventCache,a=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ge,(c,d)=>{a.push(Ma(c,d))}),r.isFullyInitialized()&&a.push(Ab(r.getNode())),Lb(i,a,r.getNode(),e)}function Lb(i,e,r,a){const l=a?[a]:i.eventRegistrations_;return IN(i.eventGenerator_,e,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc;class Ub{constructor(){this.views=new Map}}function gA(i){K(!Vc,"__referenceConstructor has already been defined"),Vc=i}function pA(){return K(Vc,"Reference.ts has not been loaded"),Vc}function yA(i){return i.views.size===0}function gm(i,e,r,a){const l=e.source.queryId;if(l!==null){const c=i.views.get(l);return K(c!=null,"SyncTree gave us an op for an invalid query."),yv(c,e,r,a)}else{let c=[];for(const d of i.views.values())c=c.concat(yv(d,e,r,a));return c}}function Bb(i,e,r,a,l){const c=e._queryIdentifier,d=i.views.get(c);if(!d){let m=Hc(r,l?a:null),y=!1;m?y=!0:a instanceof oe?(m=fm(r,a),y=!1):(m=oe.EMPTY_NODE,y=!1);const f=iu(new Vr(m,y,!1),new Vr(a,l,!1));return new cA(e,f)}return d}function vA(i,e,r,a,l,c){const d=Bb(i,e,a,l,c);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),hA(d,r),mA(d,r)}function _A(i,e,r,a){const l=e._queryIdentifier,c=[];let d=[];const m=$r(i);if(l==="default")for(const[y,f]of i.views.entries())d=d.concat(pv(f,r,a)),gv(f)&&(i.views.delete(y),f.query._queryParams.loadsAllData()||c.push(f.query));else{const y=i.views.get(l);y&&(d=d.concat(pv(y,r,a)),gv(y)&&(i.views.delete(l),y.query._queryParams.loadsAllData()||c.push(y.query)))}return m&&!$r(i)&&c.push(new(pA())(e._repo,e._path)),{removed:c,events:d}}function Pb(i){const e=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function qr(i,e){let r=null;for(const a of i.views.values())r=r||fA(a,e);return r}function zb(i,e){if(e._queryParams.loadsAllData())return su(i);{const a=e._queryIdentifier;return i.views.get(a)}}function qb(i,e){return zb(i,e)!=null}function $r(i){return su(i)!=null}function su(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c;function bA(i){K(!$c,"__referenceConstructor has already been defined"),$c=i}function xA(){return K($c,"Reference.ts has not been loaded"),$c}let EA=1;class vv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qe(null),this.pendingWriteTree_=WN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pm(i,e,r,a,l){return PN(i.pendingWriteTree_,e,r,a,l),l?Ba(i,new Ei(cm(),e,r)):[]}function wA(i,e,r,a){zN(i.pendingWriteTree_,e,r,a);const l=qe.fromObject(r);return Ba(i,new ka(cm(),e,l))}function Br(i,e,r=!1){const a=qN(i.pendingWriteTree_,e);if(HN(i.pendingWriteTree_,e)){let c=new qe(null);return a.snap!=null?c=c.set(Te(),!0):mt(a.children,d=>{c=c.set(new Me(d),!0)}),Ba(i,new zc(a.path,c,r))}else return[]}function bl(i,e,r){return Ba(i,new Ei(um(),e,r))}function SA(i,e,r){const a=qe.fromObject(r);return Ba(i,new ka(um(),e,a))}function TA(i,e){return Ba(i,new dl(um(),e))}function NA(i,e,r){const a=ym(i,r);if(a){const l=vm(a),c=l.path,d=l.queryId,m=Nt(c,e),y=new dl(dm(d),m);return _m(i,c,y)}else return[]}function Yc(i,e,r,a,l=!1){const c=e._path,d=i.syncPointTree_.get(c);let m=[];if(d&&(e._queryIdentifier==="default"||qb(d,e))){const y=_A(d,e,r,a);yA(d)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const f=y.removed;if(m=y.events,!l){const h=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=i.syncPointTree_.findOnPath(c,(v,b)=>$r(b));if(h&&!_){const v=i.syncPointTree_.subtree(c);if(!v.isEmpty()){const b=OA(v);for(let E=0;E<b.length;++E){const S=b[E],A=S.query,k=Vb(i,S);i.listenProvider_.startListening(il(A),fl(i,A),k.hashFn,k.onComplete)}}}!_&&f.length>0&&!a&&(h?i.listenProvider_.stopListening(il(e),null):f.forEach(v=>{const b=i.queryToTagMap.get(ou(v));i.listenProvider_.stopListening(il(v),b)}))}RA(i,f)}return m}function Hb(i,e,r,a){const l=ym(i,a);if(l!=null){const c=vm(l),d=c.path,m=c.queryId,y=Nt(d,e),f=new Ei(dm(m),y,r);return _m(i,d,f)}else return[]}function AA(i,e,r,a){const l=ym(i,a);if(l){const c=vm(l),d=c.path,m=c.queryId,y=Nt(d,e),f=qe.fromObject(r),h=new ka(dm(m),y,f);return _m(i,d,h)}else return[]}function qh(i,e,r,a=!1){const l=e._path;let c=null,d=!1;i.syncPointTree_.foreachOnPath(l,(v,b)=>{const E=Nt(v,l);c=c||qr(b,E),d=d||$r(b)});let m=i.syncPointTree_.get(l);m?(d=d||$r(m),c=c||qr(m,Te())):(m=new Ub,i.syncPointTree_=i.syncPointTree_.set(l,m));let y;c!=null?y=!0:(y=!1,c=oe.EMPTY_NODE,i.syncPointTree_.subtree(l).foreachChild((b,E)=>{const S=qr(E,Te());S&&(c=c.updateImmediateChild(b,S))}));const f=qb(m,e);if(!f&&!e._queryParams.loadsAllData()){const v=ou(e);K(!i.queryToTagMap.has(v),"View does not exist, but we have a tag");const b=DA();i.queryToTagMap.set(v,b),i.tagToQueryMap.set(b,v)}const h=au(i.pendingWriteTree_,l);let _=vA(m,e,r,h,c,y);if(!f&&!d&&!a){const v=zb(m,e);_=_.concat(MA(i,e,v))}return _}function lu(i,e,r){const l=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(e,(d,m)=>{const y=Nt(d,e),f=qr(m,y);if(f)return f});return Db(l,e,c,r,!0)}function CA(i,e){const r=e._path;let a=null;i.syncPointTree_.foreachOnPath(r,(f,h)=>{const _=Nt(f,r);a=a||qr(h,_)});let l=i.syncPointTree_.get(r);l?a=a||qr(l,Te()):(l=new Ub,i.syncPointTree_=i.syncPointTree_.set(r,l));const c=a!=null,d=c?new Vr(a,!0,!1):null,m=au(i.pendingWriteTree_,e._path),y=Bb(l,e,m,c?d.getNode():oe.EMPTY_NODE,c);return dA(y)}function Ba(i,e){return Fb(e,i.syncPointTree_,null,au(i.pendingWriteTree_,Te()))}function Fb(i,e,r,a){if(ye(i.path))return Gb(i,e,r,a);{const l=e.get(Te());r==null&&l!=null&&(r=qr(l,Te()));let c=[];const d=me(i.path),m=i.operationForChild(d),y=e.children.get(d);if(y&&m){const f=r?r.getImmediateChild(d):null,h=Mb(a,d);c=c.concat(Fb(m,y,f,h))}return l&&(c=c.concat(gm(l,i,a,r))),c}}function Gb(i,e,r,a){const l=e.get(Te());r==null&&l!=null&&(r=qr(l,Te()));let c=[];return e.children.inorderTraversal((d,m)=>{const y=r?r.getImmediateChild(d):null,f=Mb(a,d),h=i.operationForChild(d);h&&(c=c.concat(Gb(h,m,y,f)))}),l&&(c=c.concat(gm(l,i,a,r))),c}function Vb(i,e){const r=e.query,a=fl(i,r);return{hashFn:()=>(uA(e)||oe.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return a?NA(i,r._path,a):TA(i,r._path);{const c=TT(l,r);return Yc(i,r,null,c)}}}}function fl(i,e){const r=ou(e);return i.queryToTagMap.get(r)}function ou(i){return i._path.toString()+"$"+i._queryIdentifier}function ym(i,e){return i.tagToQueryMap.get(e)}function vm(i){const e=i.indexOf("$");return K(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new Me(i.substr(0,e))}}function _m(i,e,r){const a=i.syncPointTree_.get(e);K(a,"Missing sync point for query tag that we're tracking");const l=au(i.pendingWriteTree_,e);return gm(a,r,l,null)}function OA(i){return i.fold((e,r,a)=>{if(r&&$r(r))return[su(r)];{let l=[];return r&&(l=Pb(r)),mt(a,(c,d)=>{l=l.concat(d)}),l}})}function il(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(xA())(i._repo,i._path):i}function RA(i,e){for(let r=0;r<e.length;++r){const a=e[r];if(!a._queryParams.loadsAllData()){const l=ou(a),c=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(c)}}}function DA(){return EA++}function MA(i,e,r){const a=e._path,l=fl(i,e),c=Vb(i,r),d=i.listenProvider_.startListening(il(e),l,c.hashFn,c.onComplete),m=i.syncPointTree_.subtree(a);if(l)K(!$r(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((f,h,_)=>{if(!ye(f)&&h&&$r(h))return[su(h).query];{let v=[];return h&&(v=v.concat(Pb(h).map(b=>b.query))),mt(_,(b,E)=>{v=v.concat(E)}),v}});for(let f=0;f<y.length;++f){const h=y[f];i.listenProvider_.stopListening(il(h),fl(i,h))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new bm(r)}node(){return this.node_}}class xm{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Ye(this.path_,e);return new xm(this.syncTree_,r)}node(){return lu(this.syncTree_,this.path_)}}const kA=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},_v=function(i,e,r){if(!i||typeof i!="object")return i;if(K(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return jA(i[".sv"],e,r);if(typeof i[".sv"]=="object")return IA(i[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},jA=function(i,e,r){switch(i){case"timestamp":return r.timestamp;default:K(!1,"Unexpected server value: "+i)}},IA=function(i,e,r){i.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const a=i.increment;typeof a!="number"&&K(!1,"Unexpected increment value: "+a);const l=e.node();if(K(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return a;const d=l.getValue();return typeof d!="number"?a:d+a},$b=function(i,e,r,a){return wm(e,new xm(r,i),a)},Em=function(i,e,r){return wm(i,new bm(e),r)};function wm(i,e,r){const a=i.getPriority().val(),l=_v(a,e.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const d=i,m=_v(d.getValue(),e,r);return m!==d.getValue()||l!==d.getPriority().val()?new ut(m,$e(l)):i}else{const d=i;return c=d,l!==d.getPriority().val()&&(c=c.updatePriority(new ut(l))),d.forEachChild(Ge,(m,y)=>{const f=wm(y,e.getImmediateChild(m),r);f!==y&&(c=c.updateImmediateChild(m,f))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e="",r=null,a={children:{},childCount:0}){this.name=e,this.parent=r,this.node=a}}function cu(i,e){let r=e instanceof Me?e:new Me(e),a=i,l=me(r);for(;l!==null;){const c=bi(a.node.children,l)||{children:{},childCount:0};a=new Sm(l,a,c),r=Be(r),l=me(r)}return a}function Oi(i){return i.node.value}function Tm(i,e){i.node.value=e,Hh(i)}function Yb(i){return i.node.childCount>0}function LA(i){return Oi(i)===void 0&&!Yb(i)}function uu(i,e){mt(i.node.children,(r,a)=>{e(new Sm(r,i,a))})}function Qb(i,e,r,a){r&&e(i),uu(i,l=>{Qb(l,e,!0)})}function UA(i,e,r){let a=i.parent;for(;a!==null;){if(e(a))return!0;a=a.parent}return!1}function xl(i){return new Me(i.parent===null?i.name:xl(i.parent)+"/"+i.name)}function Hh(i){i.parent!==null&&BA(i.parent,i.name,i)}function BA(i,e,r){const a=LA(r),l=Rn(i.node.children,e);a&&l?(delete i.node.children[e],i.node.childCount--,Hh(i)):!a&&!l&&(i.node.children[e]=r.node,i.node.childCount++,Hh(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=/[\[\].#$\/\u0000-\u001F\u007F]/,zA=/[\[\].#$\u0000-\u001F\u007F]/,Vf=10*1024*1024,Nm=function(i){return typeof i=="string"&&i.length!==0&&!PA.test(i)},Kb=function(i){return typeof i=="string"&&i.length!==0&&!zA.test(i)},qA=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Kb(i)},Am=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!tu(i)||i&&typeof i=="object"&&Rn(i,".sv")},Fh=function(i,e,r,a){El(Ra(i,"value"),e,r)},El=function(i,e,r){const a=r instanceof Me?new aN(r,i):r;if(e===void 0)throw new Error(i+"contains undefined "+pi(a));if(typeof e=="function")throw new Error(i+"contains a function "+pi(a)+" with contents = "+e.toString());if(tu(e))throw new Error(i+"contains "+e.toString()+" "+pi(a));if(typeof e=="string"&&e.length>Vf/3&&Jc(e)>Vf)throw new Error(i+"contains a string greater than "+Vf+" utf8 bytes "+pi(a)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,c=!1;if(mt(e,(d,m)=>{if(d===".value")l=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!Nm(d)))throw new Error(i+" contains an invalid key ("+d+") "+pi(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sN(a,d),El(i,m,a),lN(a)}),l&&c)throw new Error(i+' contains ".value" child '+pi(a)+" in addition to actual children.")}},HA=function(i,e){let r,a;for(r=0;r<e.length;r++){a=e[r];const c=ll(a);for(let d=0;d<c.length;d++)if(!(c[d]===".priority"&&d===c.length-1)){if(!Nm(c[d]))throw new Error(i+"contains an invalid key ("+c[d]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(iN);let l=null;for(r=0;r<e.length;r++){if(a=e[r],l!==null&&yn(l,a))throw new Error(i+"contains a path "+l.toString()+" that is ancestor of another path "+a.toString());l=a}},Xb=function(i,e,r,a){const l=Ra(i,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const c=[];mt(e,(d,m)=>{const y=new Me(d);if(El(l,m,Ye(r,y)),im(y)===".priority"&&!Am(m))throw new Error(l+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),HA(l,c)},FA=function(i,e,r){if(tu(e))throw new Error(Ra(i,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Am(e))throw new Error(Ra(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Cm=function(i,e,r,a){if(!Kb(r))throw new Error(Ra(i,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},GA=function(i,e,r,a){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Cm(i,e,r)},vi=function(i,e){if(me(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},VA=function(i,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Nm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!qA(r))throw new Error(Ra(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function du(i,e){let r=null;for(let a=0;a<e.length;a++){const l=e[a],c=l.getPath();r!==null&&!am(c,r.path)&&(i.eventLists_.push(r),r=null),r===null&&(r={events:[],path:c}),r.events.push(l)}r&&i.eventLists_.push(r)}function Wb(i,e,r){du(i,r),Zb(i,a=>am(a,e))}function Jt(i,e,r){du(i,r),Zb(i,a=>yn(a,e)||yn(e,a))}function Zb(i,e){i.recursionDepth_++;let r=!0;for(let a=0;a<i.eventLists_.length;a++){const l=i.eventLists_[a];if(l){const c=l.path;e(c)?(YA(i.eventLists_[a]),i.eventLists_[a]=null):r=!1}}r&&(i.eventLists_=[]),i.recursionDepth_--}function YA(i){for(let e=0;e<i.events.length;e++){const r=i.events[e];if(r!==null){i.events[e]=null;const a=r.getEventRunner();el&&ht("event: "+r.toString()),La(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="repo_interrupt",QA=25;class KA{constructor(e,r,a,l){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=a,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $A,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pc(),this.transactionQueueTree_=new Sm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XA(i,e,r){if(i.stats_=nm(i.repoInfo_),i.forceRestClient_||OT())i.server_=new Bc(i.repoInfo_,(a,l,c,d)=>{bv(i,a,l,c,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>xv(i,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{at(r)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}i.persistentConnection_=new or(i.repoInfo_,e,(a,l,c,d)=>{bv(i,a,l,c,d)},a=>{xv(i,a)},a=>{ZA(i,a)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(a=>{i.server_.refreshAuthToken(a)}),i.appCheckProvider_.addTokenChangeListener(a=>{i.server_.refreshAppCheckToken(a.token)}),i.statsReporter_=jT(i.repoInfo_,()=>new kN(i.stats_,i.server_)),i.infoData_=new CN,i.infoSyncTree_=new vv({startListening:(a,l,c,d)=>{let m=[];const y=i.infoData_.getNode(a._path);return y.isEmpty()||(m=bl(i.infoSyncTree_,a._path,y),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),Om(i,"connected",!1),i.serverSyncTree_=new vv({startListening:(a,l,c,d)=>(i.server_.listen(a,c,l,(m,y)=>{const f=d(m,y);Jt(i.eventQueue_,a._path,f)}),[]),stopListening:(a,l)=>{i.server_.unlisten(a,l)}})}function WA(i){const r=i.infoData_.getNode(new Me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function wl(i){return kA({timestamp:WA(i)})}function bv(i,e,r,a,l){i.dataUpdateCount++;const c=new Me(e);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,r):r;let d=[];if(l)if(a){const y=jc(r,f=>$e(f));d=AA(i.serverSyncTree_,c,y,l)}else{const y=$e(r);d=Hb(i.serverSyncTree_,c,y,l)}else if(a){const y=jc(r,f=>$e(f));d=SA(i.serverSyncTree_,c,y)}else{const y=$e(r);d=bl(i.serverSyncTree_,c,y)}let m=c;d.length>0&&(m=Ia(i,c)),Jt(i.eventQueue_,m,d)}function xv(i,e){Om(i,"connected",e),e===!1&&n2(i)}function ZA(i,e){mt(e,(r,a)=>{Om(i,r,a)})}function Om(i,e,r){const a=new Me("/.info/"+e),l=$e(r);i.infoData_.updateSnapshot(a,l);const c=bl(i.infoSyncTree_,a,l);Jt(i.eventQueue_,a,c)}function fu(i){return i.nextWriteId_++}function JA(i,e,r){const a=CA(i.serverSyncTree_,e);return a!=null?Promise.resolve(a):i.server_.get(e).then(l=>{const c=$e(l).withIndex(e._queryParams.getIndex());qh(i.serverSyncTree_,e,r,!0);let d;if(e._queryParams.loadsAllData())d=bl(i.serverSyncTree_,e._path,c);else{const m=fl(i.serverSyncTree_,e);d=Hb(i.serverSyncTree_,e._path,c,m)}return Jt(i.eventQueue_,e._path,d),Yc(i.serverSyncTree_,e,r,null,!0),c},l=>(Pa(i,"get for query "+at(e)+" failed: "+l),Promise.reject(new Error(l))))}function e2(i,e,r,a,l){Pa(i,"set",{path:e.toString(),value:r,priority:a});const c=wl(i),d=$e(r,a),m=lu(i.serverSyncTree_,e),y=Em(d,m,c),f=fu(i),h=pm(i.serverSyncTree_,e,y,f,!0);du(i.eventQueue_,h),i.server_.put(e.toString(),d.val(!0),(v,b)=>{const E=v==="ok";E||At("set at "+e+" failed: "+v);const S=Br(i.serverSyncTree_,f,!E);Jt(i.eventQueue_,e,S),Yr(i,l,v,b)});const _=Dm(i,e);Ia(i,_),Jt(i.eventQueue_,_,[])}function t2(i,e,r,a){Pa(i,"update",{path:e.toString(),value:r});let l=!0;const c=wl(i),d={};if(mt(r,(m,y)=>{l=!1,d[m]=$b(Ye(e,m),$e(y),i.serverSyncTree_,c)}),l)ht("update() called with empty data.  Don't do anything."),Yr(i,a,"ok",void 0);else{const m=fu(i),y=wA(i.serverSyncTree_,e,d,m);du(i.eventQueue_,y),i.server_.merge(e.toString(),r,(f,h)=>{const _=f==="ok";_||At("update at "+e+" failed: "+f);const v=Br(i.serverSyncTree_,m,!_),b=v.length>0?Ia(i,e):e;Jt(i.eventQueue_,b,v),Yr(i,a,f,h)}),mt(r,f=>{const h=Dm(i,Ye(e,f));Ia(i,h)}),Jt(i.eventQueue_,e,[])}}function n2(i){Pa(i,"onDisconnectEvents");const e=wl(i),r=Pc();Ih(i.onDisconnect_,Te(),(l,c)=>{const d=$b(l,c,i.serverSyncTree_,e);Ua(r,l,d)});let a=[];Ih(r,Te(),(l,c)=>{a=a.concat(bl(i.serverSyncTree_,l,c));const d=Dm(i,l);Ia(i,d)}),i.onDisconnect_=Pc(),Jt(i.eventQueue_,Te(),a)}function r2(i,e,r){i.server_.onDisconnectCancel(e.toString(),(a,l)=>{a==="ok"&&jh(i.onDisconnect_,e),Yr(i,r,a,l)})}function Ev(i,e,r,a){const l=$e(r);i.server_.onDisconnectPut(e.toString(),l.val(!0),(c,d)=>{c==="ok"&&Ua(i.onDisconnect_,e,l),Yr(i,a,c,d)})}function i2(i,e,r,a,l){const c=$e(r,a);i.server_.onDisconnectPut(e.toString(),c.val(!0),(d,m)=>{d==="ok"&&Ua(i.onDisconnect_,e,c),Yr(i,l,d,m)})}function a2(i,e,r,a){if(Oh(r)){ht("onDisconnect().update() called with empty data.  Don't do anything."),Yr(i,a,"ok",void 0);return}i.server_.onDisconnectMerge(e.toString(),r,(l,c)=>{l==="ok"&&mt(r,(d,m)=>{const y=$e(m);Ua(i.onDisconnect_,Ye(e,d),y)}),Yr(i,a,l,c)})}function s2(i,e,r){let a;me(e._path)===".info"?a=qh(i.infoSyncTree_,e,r):a=qh(i.serverSyncTree_,e,r),Wb(i.eventQueue_,e._path,a)}function Gh(i,e,r){let a;me(e._path)===".info"?a=Yc(i.infoSyncTree_,e,r):a=Yc(i.serverSyncTree_,e,r),Wb(i.eventQueue_,e._path,a)}function ex(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Jb)}function l2(i){i.persistentConnection_&&i.persistentConnection_.resume(Jb)}function Pa(i,...e){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),ht(r,...e)}function Yr(i,e,r,a){e&&La(()=>{if(r==="ok")e(null);else{const l=(r||"error").toUpperCase();let c=l;a&&(c+=": "+a);const d=new Error(c);d.code=l,e(d)}})}function o2(i,e,r,a,l,c){Pa(i,"transaction on "+e);const d={path:e,update:r,onComplete:a,status:null,order:Z1(),applyLocally:c,retryCount:0,unwatcher:l,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=Rm(i,e,void 0);d.currentInputSnapshot=m;const y=d.update(m.val());if(y===void 0)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{El("transaction failed: Data returned ",y,d.path),d.status=0;const f=cu(i.transactionQueueTree_,e),h=Oi(f)||[];h.push(d),Tm(f,h);let _;typeof y=="object"&&y!==null&&Rn(y,".priority")?(_=bi(y,".priority"),K(Am(_),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):_=(lu(i.serverSyncTree_,e)||oe.EMPTY_NODE).getPriority().val();const v=wl(i),b=$e(y,_),E=Em(b,m,v);d.currentOutputSnapshotRaw=b,d.currentOutputSnapshotResolved=E,d.currentWriteId=fu(i);const S=pm(i.serverSyncTree_,e,E,d.currentWriteId,d.applyLocally);Jt(i.eventQueue_,e,S),hu(i,i.transactionQueueTree_)}}function Rm(i,e,r){return lu(i.serverSyncTree_,e,r)||oe.EMPTY_NODE}function hu(i,e=i.transactionQueueTree_){if(e||mu(i,e),Oi(e)){const r=nx(i,e);K(r.length>0,"Sending zero length transaction queue"),r.every(l=>l.status===0)&&c2(i,xl(e),r)}else Yb(e)&&uu(e,r=>{hu(i,r)})}function c2(i,e,r){const a=r.map(f=>f.currentWriteId),l=Rm(i,e,a);let c=l;const d=l.hash();for(let f=0;f<r.length;f++){const h=r[f];K(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const _=Nt(e,h.path);c=c.updateChild(_,h.currentOutputSnapshotRaw)}const m=c.val(!0),y=e;i.server_.put(y.toString(),m,f=>{Pa(i,"transaction put response",{path:y.toString(),status:f});let h=[];if(f==="ok"){const _=[];for(let v=0;v<r.length;v++)r[v].status=2,h=h.concat(Br(i.serverSyncTree_,r[v].currentWriteId)),r[v].onComplete&&_.push(()=>r[v].onComplete(null,!0,r[v].currentOutputSnapshotResolved)),r[v].unwatcher();mu(i,cu(i.transactionQueueTree_,e)),hu(i,i.transactionQueueTree_),Jt(i.eventQueue_,e,h);for(let v=0;v<_.length;v++)La(_[v])}else{if(f==="datastale")for(let _=0;_<r.length;_++)r[_].status===3?r[_].status=4:r[_].status=0;else{At("transaction at "+y.toString()+" failed: "+f);for(let _=0;_<r.length;_++)r[_].status=4,r[_].abortReason=f}Ia(i,e)}},d)}function Ia(i,e){const r=tx(i,e),a=xl(r),l=nx(i,r);return u2(i,l,a),a}function u2(i,e,r){if(e.length===0)return;const a=[];let l=[];const d=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const y=e[m],f=Nt(r,y.path);let h=!1,_;if(K(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)h=!0,_=y.abortReason,l=l.concat(Br(i.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=QA)h=!0,_="maxretry",l=l.concat(Br(i.serverSyncTree_,y.currentWriteId,!0));else{const v=Rm(i,y.path,d);y.currentInputSnapshot=v;const b=e[m].update(v.val());if(b!==void 0){El("transaction failed: Data returned ",b,y.path);let E=$e(b);typeof b=="object"&&b!=null&&Rn(b,".priority")||(E=E.updatePriority(v.getPriority()));const A=y.currentWriteId,k=wl(i),L=Em(E,v,k);y.currentOutputSnapshotRaw=E,y.currentOutputSnapshotResolved=L,y.currentWriteId=fu(i),d.splice(d.indexOf(A),1),l=l.concat(pm(i.serverSyncTree_,y.path,L,y.currentWriteId,y.applyLocally)),l=l.concat(Br(i.serverSyncTree_,A,!0))}else h=!0,_="nodata",l=l.concat(Br(i.serverSyncTree_,y.currentWriteId,!0))}Jt(i.eventQueue_,r,l),l=[],h&&(e[m].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[m].unwatcher),e[m].onComplete&&(_==="nodata"?a.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):a.push(()=>e[m].onComplete(new Error(_),!1,null))))}mu(i,i.transactionQueueTree_);for(let m=0;m<a.length;m++)La(a[m]);hu(i,i.transactionQueueTree_)}function tx(i,e){let r,a=i.transactionQueueTree_;for(r=me(e);r!==null&&Oi(a)===void 0;)a=cu(a,r),e=Be(e),r=me(e);return a}function nx(i,e){const r=[];return rx(i,e,r),r.sort((a,l)=>a.order-l.order),r}function rx(i,e,r){const a=Oi(e);if(a)for(let l=0;l<a.length;l++)r.push(a[l]);uu(e,l=>{rx(i,l,r)})}function mu(i,e){const r=Oi(e);if(r){let a=0;for(let l=0;l<r.length;l++)r[l].status!==2&&(r[a]=r[l],a++);r.length=a,Tm(e,r.length>0?r:void 0)}uu(e,a=>{mu(i,a)})}function Dm(i,e){const r=xl(tx(i,e)),a=cu(i.transactionQueueTree_,e);return UA(a,l=>{$f(i,l)}),$f(i,a),Qb(a,l=>{$f(i,l)}),r}function $f(i,e){const r=Oi(e);if(r){const a=[];let l=[],c=-1;for(let d=0;d<r.length;d++)r[d].status===3||(r[d].status===1?(K(c===d-1,"All SENT items should be at beginning of queue."),c=d,r[d].status=3,r[d].abortReason="set"):(K(r[d].status===0,"Unexpected transaction status in abort"),r[d].unwatcher(),l=l.concat(Br(i.serverSyncTree_,r[d].currentWriteId,!0)),r[d].onComplete&&a.push(r[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Tm(e,void 0):r.length=c+1,Jt(i.eventQueue_,xl(e),l);for(let d=0;d<a.length;d++)La(a[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(i){let e="";const r=i.split("/");for(let a=0;a<r.length;a++)if(r[a].length>0){let l=r[a];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function f2(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const r of i.split("&")){if(r.length===0)continue;const a=r.split("=");a.length===2?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):At(`Invalid query segment '${r}' in query '${i}'`)}return e}const wv=function(i,e){const r=h2(i),a=r.namespace;r.domain==="firebase.com"&&cr(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&r.domain!=="localhost"&&cr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||bT();const l=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new db(r.host,r.secure,a,l,e,"",a!==r.subdomain),path:new Me(r.pathString)}},h2=function(i){let e="",r="",a="",l="",c="",d=!0,m="https",y=443;if(typeof i=="string"){let f=i.indexOf("//");f>=0&&(m=i.substring(0,f-1),i=i.substring(f+2));let h=i.indexOf("/");h===-1&&(h=i.length);let _=i.indexOf("?");_===-1&&(_=i.length),e=i.substring(0,Math.min(h,_)),h<_&&(l=d2(i.substring(h,_)));const v=f2(i.substring(Math.min(i.length,_)));f=e.indexOf(":"),f>=0?(d=m==="https"||m==="wss",y=parseInt(e.substring(f+1),10)):f=e.length;const b=e.slice(0,f);if(b.toLowerCase()==="localhost")r="localhost";else if(b.split(".").length<=2)r=b;else{const E=e.indexOf(".");a=e.substring(0,E).toLowerCase(),r=e.substring(E+1),c=a}"ns"in v&&(c=v.ns)}return{host:e,port:y,domain:r,subdomain:a,secure:d,scheme:m,pathString:l,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,r,a,l){this.eventType=e,this.eventRegistration=r,this.snapshot=a,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+at(this.snapshot.exportVal())}}class ax{constructor(e,r,a){this.eventRegistration=e,this.error=r,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,r){this._repo=e,this._path=r}cancel(){const e=new Bn;return r2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vi("OnDisconnect.remove",this._path);const e=new Bn;return Ev(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vi("OnDisconnect.set",this._path),Fh("OnDisconnect.set",e,this._path);const r=new Bn;return Ev(this._repo,this._path,e,r.wrapCallback(()=>{})),r.promise}setWithPriority(e,r){vi("OnDisconnect.setWithPriority",this._path),Fh("OnDisconnect.setWithPriority",e,this._path),FA("OnDisconnect.setWithPriority",r);const a=new Bn;return i2(this._repo,this._path,e,r,a.wrapCallback(()=>{})),a.promise}update(e){vi("OnDisconnect.update",this._path),Xb("OnDisconnect.update",e,this._path);const r=new Bn;return a2(this._repo,this._path,e,r.wrapCallback(()=>{})),r.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,r,a,l){this._repo=e,this._path=r,this._queryParams=a,this._orderByCalled=l}get key(){return ye(this._path)?null:im(this._path)}get ref(){return new vn(this._repo,this._path)}get _queryIdentifier(){const e=ov(this._queryParams),r=em(e);return r==="{}"?"default":r}get _queryObject(){return ov(this._queryParams)}isEqual(e){if(e=Pt(e),!(e instanceof gu))return!1;const r=this._repo===e._repo,a=am(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return r&&a&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+rN(this._path)}}class vn extends gu{constructor(e,r){super(e,r,new ru,!1)}get parent(){const e=bb(this._path);return e===null?null:new vn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qr{constructor(e,r,a){this._node=e,this.ref=r,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new Me(e),a=hl(this.ref,e);return new Qr(this._node.getChild(r),a,Ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,l)=>e(new Qr(l,hl(this.ref,a),Ge)))}hasChild(e){const r=new Me(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gn(i,e){return i=Pt(i),i._checkNotDeleted("ref"),e!==void 0?hl(i._root,e):i._root}function hl(i,e){return i=Pt(i),me(i._path)===null?GA("child","path",e):Cm("child","path",e),new vn(i._repo,Ye(i._path,e))}function lx(i){return i=Pt(i),new sx(i._repo,i._path)}function hn(i,e){i=Pt(i),vi("set",i._path),Fh("set",e,i._path);const r=new Bn;return e2(i._repo,i._path,e,null,r.wrapCallback(()=>{})),r.promise}function m2(i,e){Xb("update",e,i._path);const r=new Bn;return t2(i._repo,i._path,e,r.wrapCallback(()=>{})),r.promise}function g2(i){i=Pt(i);const e=new Mm(()=>{}),r=new Sl(e);return JA(i._repo,i,r).then(a=>new Qr(a,new vn(i._repo,i._path),i._queryParams.getIndex()))}class Sl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const a=r._queryParams.getIndex();return new ix("value",this,new Qr(e.snapshotNode,new vn(r._repo,r._path),a))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new ax(this,e,r):null}matches(e){return e instanceof Sl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class km{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new ax(this,e,r):null}createEvent(e,r){K(e.childName!=null,"Child events should have a childName.");const a=hl(new vn(r._repo,r._path),e.childName),l=r._queryParams.getIndex();return new ix(e.type,this,new Qr(e.snapshotNode,a,l),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof km?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function p2(i,e,r,a,l){let c;if(typeof a=="object"&&(c=void 0,l=a),typeof a=="function"&&(c=a),l&&l.onlyOnce){const y=r,f=(h,_)=>{Gh(i._repo,i,m),y(h,_)};f.userCallback=r.userCallback,f.context=r.context,r=f}const d=new Mm(r,c||void 0),m=new Sl(d);return s2(i._repo,i,m),()=>Gh(i._repo,i,m)}function Pr(i,e,r,a){return p2(i,"value",e,r,a)}function ox(i,e,r){let a=null;const l=r?new Mm(r):null;e==="value"?a=new Sl(l):e&&(a=new km(e,l)),Gh(i._repo,i,a)}gA(vn);bA(vn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="FIREBASE_DATABASE_EMULATOR_HOST",Vh={};let v2=!1;function _2(i,e,r,a){const l=e.lastIndexOf(":"),c=e.substring(0,l),d=Kh(c);i.repoInfo_=new db(e,d,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,r),a&&(i.authTokenProvider_=a)}function cx(i,e,r,a,l){let c=a||i.options.databaseURL;c===void 0&&(i.options.projectId||cr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ht("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=wv(c,l),m=d.repoInfo,y;typeof process<"u"&&Gy&&(y=Gy[y2]),y?(c=`http://${y}?ns=${m.namespace}`,d=wv(c,l),m=d.repoInfo):d.repoInfo.secure;const f=new DT(i.name,i.options,e);VA("Invalid Firebase Database URL",d),ye(d.path)||cr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=x2(m,i,f,new RT(i,r));return new ux(h,i)}function b2(i,e){const r=Vh[e];(!r||r[i.key]!==i)&&cr(`Database ${e}(${i.repoInfo_}) has already been deleted.`),ex(i),delete r[i.key]}function x2(i,e,r,a){let l=Vh[e.name];l||(l={},Vh[e.name]=l);let c=l[i.toURLString()];return c&&cr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new KA(i,v2,r,a),l[i.toURLString()]=c,c}class ux{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(XA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vn(this._repo,Te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(b2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&cr("Cannot call "+e+" on a deleted database.")}}function jm(i=eu(),e){const r=Ni(i,"database").getImmediate({identifier:e});if(!r._instanceStarted){const a=L1("database");a&&dx(r,...a)}return r}function dx(i,e,r,a={}){i=Pt(i),i._checkNotDeleted("useEmulator");const l=`${e}:${r}`,c=i._repoInternal;if(i._instanceStarted){if(l===i._repoInternal.repoInfo_.host&&U1(a,c.repoInfo_.emulatorOptions))return;cr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)a.mockUserToken&&cr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Mc(Mc.OWNER);else if(a.mockUserToken){const m=typeof a.mockUserToken=="string"?a.mockUserToken:B1(a.mockUserToken,i.app.options.projectId);d=new Mc(m)}Kh(e)&&(P1(e),z1("Database",!0)),_2(c,l,a,d)}function E2(i){i=Pt(i),i._checkNotDeleted("goOffline"),ex(i._repo)}function w2(i){i=Pt(i),i._checkNotDeleted("goOnline"),l2(i._repo)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(i){X1(q1),Hr(new Fr("database",(e,{instanceIdentifier:r})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return cx(a,l,c,r)},"PUBLIC").setMultipleInstances(!0)),Pn(Vy,$y,i),Pn(Vy,$y,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={".sv":"timestamp"};function mn(){return T2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,r){this.committed=e,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function N2(i,e,r){if(i=Pt(i),vi("Reference.transaction",i._path),i.key===".length"||i.key===".keys")throw"Reference.transaction failed: "+i.key+" is a read-only object.";const a=!0,l=new Bn,c=(m,y,f)=>{let h=null;m?l.reject(m):(h=new Qr(f,new vn(i._repo,i._path),Ge),l.resolve(new fx(y,h)))},d=Pr(i,()=>{});return o2(i._repo,i._path,e,c,d,a),l.promise}or.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};or.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};S2();const A2=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Qr,Database:ux,OnDisconnect:sx,TransactionResult:fx,_QueryImpl:gu,_QueryParams:ru,_ReferenceImpl:vn,_repoManagerDatabaseFromApp:cx,_setSDKVersion:X1,_validatePathString:Cm,_validateWritablePath:vi,child:hl,connectDatabaseEmulator:dx,get:g2,getDatabase:jm,goOffline:E2,goOnline:w2,off:ox,onDisconnect:lx,onValue:Pr,ref:gn,runTransaction:N2,serverTimestamp:mn,set:hn,update:m2},Symbol.toStringTag,{value:"Module"})),hx="@firebase/installations",Im="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=1e4,gx=`w:${Im}`,px="FIS_v2",C2="https://firebaseinstallations.googleapis.com/v1",O2=3600*1e3,R2="installations",D2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Si=new Xh(R2,D2,M2);function yx(i){return i instanceof Zh&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx({projectId:i}){return`${C2}/projects/${i}/installations`}function _x(i){return{token:i.token,requestStatus:2,expiresIn:j2(i.expiresIn),creationTime:Date.now()}}async function bx(i,e){const a=(await e.json()).error;return Si.create("request-failed",{requestName:i,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function xx({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function k2(i,{refreshToken:e}){const r=xx(i);return r.append("Authorization",I2(e)),r}async function Ex(i){const e=await i();return e.status>=500&&e.status<600?i():e}function j2(i){return Number(i.replace("s","000"))}function I2(i){return`${px} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2({appConfig:i,heartbeatServiceProvider:e},{fid:r}){const a=vx(i),l=xx(i),c=e.getImmediate({optional:!0});if(c){const f=await c.getHeartbeatsHeader();f&&l.append("x-firebase-client",f)}const d={fid:r,authVersion:px,appId:i.appId,sdkVersion:gx},m={method:"POST",headers:l,body:JSON.stringify(d)},y=await Ex(()=>fetch(a,m));if(y.ok){const f=await y.json();return{fid:f.fid||r,registrationStatus:2,refreshToken:f.refreshToken,authToken:_x(f.authToken)}}else throw await bx("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^[cdef][\w-]{21}$/,$h="";function P2(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const r=z2(i);return B2.test(r)?r:$h}catch{return $h}}function z2(i){return U2(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Map;function Tx(i,e){const r=pu(i);Nx(r,e),q2(r,e)}function Nx(i,e){const r=Sx.get(i);if(r)for(const a of r)a(e)}function q2(i,e){const r=H2();r&&r.postMessage({key:i,fid:e}),F2()}let _i=null;function H2(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=i=>{Nx(i.data.key,i.data.fid)}),_i}function F2(){Sx.size===0&&_i&&(_i.close(),_i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="firebase-installations-database",V2=1,Ti="firebase-installations-store";let Yf=null;function Lm(){return Yf||(Yf=Wh(G2,V2,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Ti)}}})),Yf}async function Qc(i,e){const r=pu(i),l=(await Lm()).transaction(Ti,"readwrite"),c=l.objectStore(Ti),d=await c.get(r);return await c.put(e,r),await l.done,(!d||d.fid!==e.fid)&&Tx(i,e.fid),e}async function Ax(i){const e=pu(i),a=(await Lm()).transaction(Ti,"readwrite");await a.objectStore(Ti).delete(e),await a.done}async function yu(i,e){const r=pu(i),l=(await Lm()).transaction(Ti,"readwrite"),c=l.objectStore(Ti),d=await c.get(r),m=e(d);return m===void 0?await c.delete(r):await c.put(m,r),await l.done,m&&(!d||d.fid!==m.fid)&&Tx(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Um(i){let e;const r=await yu(i.appConfig,a=>{const l=$2(a),c=Y2(i,l);return e=c.registrationPromise,c.installationEntry});return r.fid===$h?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function $2(i){const e=i||{fid:P2(),registrationStatus:0};return Cx(e)}function Y2(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Si.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=Q2(i,r);return{installationEntry:r,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:K2(i)}:{installationEntry:e}}async function Q2(i,e){try{const r=await L2(i,e);return Qc(i.appConfig,r)}catch(r){throw yx(r)&&r.customData.serverCode===409?await Ax(i.appConfig):await Qc(i.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function K2(i){let e=await Sv(i.appConfig);for(;e.registrationStatus===1;)await wx(100),e=await Sv(i.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await Um(i);return a||r}return e}function Sv(i){return yu(i,e=>{if(!e)throw Si.create("installation-not-found");return Cx(e)})}function Cx(i){return X2(i)?{fid:i.fid,registrationStatus:0}:i}function X2(i){return i.registrationStatus===1&&i.registrationTime+mx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2({appConfig:i,heartbeatServiceProvider:e},r){const a=Z2(i,r),l=k2(i,r),c=e.getImmediate({optional:!0});if(c){const f=await c.getHeartbeatsHeader();f&&l.append("x-firebase-client",f)}const d={installation:{sdkVersion:gx,appId:i.appId}},m={method:"POST",headers:l,body:JSON.stringify(d)},y=await Ex(()=>fetch(a,m));if(y.ok){const f=await y.json();return _x(f)}else throw await bx("Generate Auth Token",y)}function Z2(i,{fid:e}){return`${vx(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(i,e=!1){let r;const a=await yu(i.appConfig,c=>{if(!Ox(c))throw Si.create("not-registered");const d=c.authToken;if(!e&&tC(d))return c;if(d.requestStatus===1)return r=J2(i,e),c;{if(!navigator.onLine)throw Si.create("app-offline");const m=rC(c);return r=eC(i,m),m}});return r?await r:a.authToken}async function J2(i,e){let r=await Tv(i.appConfig);for(;r.authToken.requestStatus===1;)await wx(100),r=await Tv(i.appConfig);const a=r.authToken;return a.requestStatus===0?Bm(i,e):a}function Tv(i){return yu(i,e=>{if(!Ox(e))throw Si.create("not-registered");const r=e.authToken;return iC(r)?{...e,authToken:{requestStatus:0}}:e})}async function eC(i,e){try{const r=await W2(i,e),a={...e,authToken:r};return await Qc(i.appConfig,a),r}catch(r){if(yx(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Ax(i.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Qc(i.appConfig,a)}throw r}}function Ox(i){return i!==void 0&&i.registrationStatus===2}function tC(i){return i.requestStatus===2&&!nC(i)}function nC(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+O2}function rC(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function iC(i){return i.requestStatus===1&&i.requestTime+mx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(i){const e=i,{installationEntry:r,registrationPromise:a}=await Um(e);return a?a.catch(console.error):Bm(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(i,e=!1){const r=i;return await lC(r),(await Bm(r,e)).token}async function lC(i){const{registrationPromise:e}=await Um(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(i){if(!i||!i.options)throw Qf("App Configuration");if(!i.name)throw Qf("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!i.options[r])throw Qf(r);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Qf(i){return Si.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="installations",cC="installations-internal",uC=i=>{const e=i.getProvider("app").getImmediate(),r=oC(e),a=Ni(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},dC=i=>{const e=i.getProvider("app").getImmediate(),r=Ni(e,Rx).getImmediate();return{getId:()=>aC(r),getToken:l=>sC(r,l)}};function fC(){Hr(new Fr(Rx,uC,"PUBLIC")),Hr(new Fr(cC,dC,"PRIVATE"))}fC();Pn(hx,Im);Pn(hx,Im,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="/firebase-messaging-sw.js",mC="/firebase-cloud-messaging-push-scope",Dx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gC="https://fcmregistrations.googleapis.com/v1",Mx="google.c.a.c_id",pC="google.c.a.c_l",yC="google.c.a.ts",vC="google.c.a.e",Nv=1e4;var Av;(function(i){i[i.DATA_MESSAGE=1]="DATA_MESSAGE",i[i.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Av||(Av={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ml;(function(i){i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked"})(ml||(ml={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(i){const e=new Uint8Array(i);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _C(i){const e="=".repeat((4-i.length%4)%4),r=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(r),l=new Uint8Array(a.length);for(let c=0;c<a.length;++c)l[c]=a.charCodeAt(c);return l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="fcm_token_details_db",bC=5,Cv="fcm_token_object_Store";async function xC(i){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(Kf))return null;let e=null;return(await Wh(Kf,bC,{upgrade:async(a,l,c,d)=>{if(l<2||!a.objectStoreNames.contains(Cv))return;const m=d.objectStore(Cv),y=await m.index("fcmSenderId").get(i);if(await m.clear(),!!y){if(l===2){const f=y;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:f.createTime??Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:ir(f.vapidKey)}}}else if(l===3){const f=y;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ir(f.auth),p256dh:ir(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ir(f.vapidKey)}}}else if(l===4){const f=y;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ir(f.auth),p256dh:ir(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ir(f.vapidKey)}}}}}})).close(),await If(Kf),await If("fcm_vapid_details_db"),await If("undefined"),EC(e)?e:null}function EC(i){if(!i||!i.subscriptionOptions)return!1;const{subscriptionOptions:e}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebase-messaging-database",SC=1,gl="firebase-messaging-store";let Xf=null;function kx(){return Xf||(Xf=Wh(wC,SC,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(gl)}}})),Xf}async function TC(i){const e=jx(i),a=await(await kx()).transaction(gl).objectStore(gl).get(e);if(a)return a;{const l=await xC(i.appConfig.senderId);if(l)return await Pm(i,l),l}}async function Pm(i,e){const r=jx(i),l=(await kx()).transaction(gl,"readwrite");return await l.objectStore(gl).put(e,r),await l.done,e}function jx({appConfig:i}){return i.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ct=new Xh("messaging","Messaging",NC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(i,e){const r=await qm(i),a=Ix(e),l={method:"POST",headers:r,body:JSON.stringify(a)};let c;try{c=await(await fetch(zm(i.appConfig),l)).json()}catch(d){throw Ct.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(c.error){const d=c.error.message;throw Ct.create("token-subscribe-failed",{errorInfo:d})}if(!c.token)throw Ct.create("token-subscribe-no-token");return c.token}async function CC(i,e){const r=await qm(i),a=Ix(e.subscriptionOptions),l={method:"PATCH",headers:r,body:JSON.stringify(a)};let c;try{c=await(await fetch(`${zm(i.appConfig)}/${e.token}`,l)).json()}catch(d){throw Ct.create("token-update-failed",{errorInfo:d?.toString()})}if(c.error){const d=c.error.message;throw Ct.create("token-update-failed",{errorInfo:d})}if(!c.token)throw Ct.create("token-update-no-token");return c.token}async function OC(i,e){const a={method:"DELETE",headers:await qm(i)};try{const c=await(await fetch(`${zm(i.appConfig)}/${e}`,a)).json();if(c.error){const d=c.error.message;throw Ct.create("token-unsubscribe-failed",{errorInfo:d})}}catch(l){throw Ct.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function zm({projectId:i}){return`${gC}/projects/${i}/registrations`}async function qm({appConfig:i,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function Ix({p256dh:i,auth:e,endpoint:r,vapidKey:a}){const l={web:{endpoint:r,auth:e,p256dh:i}};return a!==Dx&&(l.web.applicationPubKey=a),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=10080*60*1e3;async function DC(i){const e=await kC(i.swRegistration,i.vapidKey),r={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:e.endpoint,auth:ir(e.getKey("auth")),p256dh:ir(e.getKey("p256dh"))},a=await TC(i.firebaseDependencies);if(a){if(jC(a.subscriptionOptions,r))return Date.now()>=a.createTime+RC?MC(i,{token:a.token,createTime:Date.now(),subscriptionOptions:r}):a.token;try{await OC(i.firebaseDependencies,a.token)}catch(l){console.warn(l)}return Ov(i.firebaseDependencies,r)}else return Ov(i.firebaseDependencies,r)}async function MC(i,e){try{const r=await CC(i.firebaseDependencies,e),a={...e,token:r,createTime:Date.now()};return await Pm(i.firebaseDependencies,a),r}catch(r){throw r}}async function Ov(i,e){const a={token:await AC(i,e),createTime:Date.now(),subscriptionOptions:e};return await Pm(i,a),a.token}async function kC(i,e){const r=await i.pushManager.getSubscription();return r||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_C(e)})}function jC(i,e){const r=e.vapidKey===i.vapidKey,a=e.endpoint===i.endpoint,l=e.auth===i.auth,c=e.p256dh===i.p256dh;return r&&a&&l&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(i){const e={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return IC(e,i),LC(e,i),UC(e,i),e}function IC(i,e){if(!e.notification)return;i.notification={};const r=e.notification.title;r&&(i.notification.title=r);const a=e.notification.body;a&&(i.notification.body=a);const l=e.notification.image;l&&(i.notification.image=l);const c=e.notification.icon;c&&(i.notification.icon=c)}function LC(i,e){e.data&&(i.data=e.data)}function UC(i,e){if(!e.fcmOptions&&!e.notification?.click_action)return;i.fcmOptions={};const r=e.fcmOptions?.link??e.notification?.click_action;r&&(i.fcmOptions.link=r);const a=e.fcmOptions?.analytics_label;a&&(i.fcmOptions.analyticsLabel=a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(i){return typeof i=="object"&&!!i&&Mx in i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(i){if(!i||!i.options)throw Wf("App Configuration Object");if(!i.name)throw Wf("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=i;for(const a of e)if(!r[a])throw Wf(a);return{appName:i.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function Wf(i){return Ct.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,r,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=PC(e);this.firebaseDependencies={app:e,appConfig:l,installations:r,analyticsProvider:a}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(i){try{i.swRegistration=await navigator.serviceWorker.register(hC,{scope:mC}),i.swRegistration.update().catch(()=>{}),await HC(i.swRegistration)}catch(e){throw Ct.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function HC(i){return new Promise((e,r)=>{const a=setTimeout(()=>r(new Error(`Service worker not registered after ${Nv} ms`)),Nv),l=i.installing||i.waiting;i.active?(clearTimeout(a),e()):l?l.onstatechange=c=>{c.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),r(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(i,e){if(!e&&!i.swRegistration&&await qC(i),!(!e&&i.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ct.create("invalid-sw-registration");i.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(i,e){e?i.vapidKey=e:i.vapidKey||(i.vapidKey=Dx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(i,e){if(!navigator)throw Ct.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ct.create("permission-blocked");return await GC(i,e?.vapidKey),await FC(i,e?.serviceWorkerRegistration),DC(i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(i,e,r){const a=YC(e);(await i.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:r[Mx],message_name:r[pC],message_time:r[yC],message_device_time:Math.floor(Date.now()/1e3)})}function YC(i){switch(i){case ml.NOTIFICATION_CLICKED:return"notification_open";case ml.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(i,e){const r=e.data;if(!r.isFirebaseMessaging)return;i.onMessageHandler&&r.messageType===ml.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(Rv(r)):i.onMessageHandler.next(Rv(r)));const a=r.data;BC(a)&&a[vC]==="1"&&await $C(i,r.messageType,a)}const Dv="@firebase/messaging",Mv="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=i=>{const e=new zC(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>QC(e,r)),e},XC=i=>{const e=i.getProvider("messaging").getImmediate();return{getToken:a=>VC(e,a)}};function WC(){Hr(new Fr("messaging",KC,"PUBLIC")),Hr(new Fr("messaging-internal",XC,"PRIVATE")),Pn(Dv,Mv),Pn(Dv,Mv,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(){try{await H1()}catch{return!1}return typeof window<"u"&&F1()&&G1()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(i=eu()){return Lx().then(e=>{if(!e)throw Ct.create("unsupported-browser")},e=>{throw Ct.create("indexed-db-unsupported")}),Ni(Pt(i),"messaging").getImmediate()}WC();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebasestorage.googleapis.com",JC="storageBucket",eO=120*1e3,tO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Zh{constructor(e,r,a=0){super(Zf(e),`Firebase Storage: ${r} (${Zf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zn;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zn||(zn={}));function Zf(i){return"storage/"+i}function nO(){const i="An unknown error occurred, please check the error payload for server response.";return new qn(zn.UNKNOWN,i)}function rO(){return new qn(zn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iO(){return new qn(zn.CANCELED,"User canceled the upload/download.")}function aO(i){return new qn(zn.INVALID_URL,"Invalid URL '"+i+"'.")}function sO(i){return new qn(zn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function kv(i){return new qn(zn.INVALID_ARGUMENT,i)}function Bx(){return new qn(zn.APP_DELETED,"The Firebase app was deleted.")}function lO(i){return new qn(zn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let a;try{a=Cn.makeFromUrl(e,r)}catch{return new Cn(e,"")}if(a.path==="")return a;throw sO(e)}static makeFromUrl(e,r){let a=null;const l="([A-Za-z0-9.\\-_]+)";function c(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+l+d,"i"),y={bucket:1,path:3};function f(Q){Q.path_=decodeURIComponent(Q.path)}const h="v[A-Za-z0-9_]+",_=r.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${_}/${h}/b/${l}/o${v}`,"i"),E={bucket:1,path:3},S=r===Ux?"(?:storage.googleapis.com|storage.cloud.google.com)":r,A="([^?#]*)",k=new RegExp(`^https?://${S}/${l}/${A}`,"i"),V=[{regex:m,indices:y,postModify:c},{regex:b,indices:E,postModify:f},{regex:k,indices:{bucket:1,path:2},postModify:f}];for(let Q=0;Q<V.length;Q++){const ae=V[Q],X=ae.regex.exec(e);if(X){const ee=X[ae.indices.bucket];let J=X[ae.indices.path];J||(J=""),a=new Cn(ee,J),ae.postModify(a);break}}if(a==null)throw aO(e);return a}}class oO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(i,e,r){let a=1,l=null,c=null,d=!1,m=0;function y(){return m===2}let f=!1;function h(...A){f||(f=!0,e.apply(null,A))}function _(A){l=setTimeout(()=>{l=null,i(b,y())},A)}function v(){c&&clearTimeout(c)}function b(A,...k){if(f){v();return}if(A){v(),h.call(null,A,...k);return}if(y()||d){v(),h.call(null,A,...k);return}a<64&&(a*=2);let V;m===1?(m=2,V=0):V=(a+Math.random())*1e3,_(V)}let E=!1;function S(A){E||(E=!0,v(),!f&&(l!==null?(A||(m=2),clearTimeout(l),_(0)):A||(m=1)))}return _(0),c=setTimeout(()=>{d=!0,S(!0)},r),S}function uO(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(i){return i!==void 0}function jv(i,e,r,a){if(a<e)throw kv(`Invalid value for '${i}'. Expected ${e} or greater.`);if(a>r)throw kv(`Invalid value for '${i}'. Expected ${r} or less.`)}function fO(i){const e=encodeURIComponent;let r="?";for(const a in i)if(i.hasOwnProperty(a)){const l=e(a)+"="+e(i[a]);r=r+l+"&"}return r=r.slice(0,-1),r}var Kc;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Kc||(Kc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(i,e){const r=i>=500&&i<600,l=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return r||l||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,r,a,l,c,d,m,y,f,h,_,v=!0,b=!1){this.url_=e,this.method_=r,this.headers_=a,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=_,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new Yo(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const y=m.loaded,f=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,f)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Kc.NO_ERROR,y=c.getStatus();if(!m||hO(y,this.additionalRetryCodes_)&&this.retry){const h=c.getErrorCode()===Kc.ABORT;a(!1,new Yo(!1,null,h));return}const f=this.successCodes_.indexOf(y)!==-1;a(!0,new Yo(f,c))})},r=(a,l)=>{const c=this.resolve_,d=this.reject_,m=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());dO(y)?c(y):c()}catch(y){d(y)}else if(m!==null){const y=nO();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(l.canceled){const y=this.appDelete_?Bx():iO();d(y)}else{const y=rO();d(y)}};this.canceled_?r(!1,new Yo(!1,null,!0)):this.backoffId_=cO(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yo{constructor(e,r,a){this.wasSuccessCode=e,this.connection=r,this.canceled=!!a}}function gO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function pO(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yO(i,e){e&&(i["X-Firebase-GMPID"]=e)}function vO(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function _O(i,e,r,a,l,c,d=!0,m=!1){const y=fO(i.urlParams),f=i.url+y,h=Object.assign({},i.headers);return yO(h,e),gO(h,r),pO(h,c),vO(h,a),new mO(f,i.method,h,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,l,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function xO(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,r){this._service=e,r instanceof Cn?this._location=r:this._location=Cn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Xc(e,r)}get root(){const e=new Cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xO(this._location.path)}get storage(){return this._service}get parent(){const e=bO(this._location.path);if(e===null)return null;const r=new Cn(this._location.bucket,e);return new Xc(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw lO(e)}}function Iv(i,e){const r=e?.[JC];return r==null?null:Cn.makeFromBucketSpec(r,i)}function EO(i,e,r,a={}){i.host=`${e}:${r}`;const l=Kh(e);l&&(P1(`https://${i.host}/b`),z1("Storage",!0)),i._isUsingEmulator=!0,i._protocol=l?"https":"http";const{mockUserToken:c}=a;c&&(i._overrideAuthToken=typeof c=="string"?c:B1(c,i.app.options.projectId))}class wO{constructor(e,r,a,l,c,d=!1){this.app=e,this._authProvider=r,this._appCheckProvider=a,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=Ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eO,this._maxUploadRetryTime=tO,this._requests=new Set,l!=null?this._bucket=Cn.makeFromBucketSpec(l,this._host):this._bucket=Iv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cn.makeFromBucketSpec(this._url,e):this._bucket=Iv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(j1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xc(this,e)}_makeRequest(e,r,a,l,c=!0){if(this._deleted)return new oO(Bx());{const d=_O(e,this._appId,a,l,r,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,r){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,a,l).getPromise()}}const Lv="@firebase/storage",Uv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="storage";function SO(i=eu(),e){i=Pt(i);const a=Ni(i,Px).getImmediate({identifier:e}),l=L1("storage");return l&&TO(a,...l),a}function TO(i,e,r,a={}){EO(i,e,r,a)}function NO(i,{instanceIdentifier:e}){const r=i.getProvider("app").getImmediate(),a=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal");return new wO(r,a,l,e,q1)}function AO(){Hr(new Fr(Px,NO,"PUBLIC").setMultipleInstances(!0)),Pn(Lv,Uv,""),Pn(Lv,Uv,"esm2020")}AO();const CO=()=>{const i="production",e=i==="development";return{environment:i,isDevelopment:e,isProduction:i==="production",isTesting:i==="testing",firebase:{apiKey:"AIzaSyB8Z4GdoLZsBW6bfmAh_BSTftpTRUXPZMw",authDomain:"erp-for-tsa.firebaseapp.com",databaseURL:"https://erp-for-tsa-default-rtdb.firebaseio.com",projectId:"erp-for-tsa",storageBucket:"erp-for-tsa.firebasestorage.app",messagingSenderId:"271232983905",appId:"1:271232983905:web:7d06c8f5ec269824759b20",measurementId:"G-6CYWPS4N0G"},api:{baseUrl:"https://erp-for-tsa.web.app/api",timeout:3e4,retries:3},app:{name:"TSA Production ERP",version:"1.0.0",enableMockData:e,autoRefreshInterval:parseInt("60000")},features:{enableDevTools:e,enablePWA:!0,enableAnalytics:!0,enableOfflineMode:!0,enablePushNotifications:!0,enableErrorReporting:!0,enablePerformanceMonitoring:!0,enableHotReload:e,useFirebaseEmulators:!1},logging:{level:"error",debugMode:e},build:{legacySupport:!0,sourcemap:e}}},wn=CO(),OO=()=>{const i=[];return{valid:i.length===0,errors:i}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="analytics",RO="firebase_id",DO="origin",MO=60*1e3,kO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt=new k1("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zt=new Xh("analytics","Analytics",jO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(i){if(!i.startsWith(Hm)){const e=Zt.create("invalid-gtag-resource",{gtagURL:i});return Bt.warn(e.message),""}return i}function zx(i){return Promise.all(i.map(e=>e.catch(r=>r)))}function LO(i,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(i,e)),r}function UO(i,e){const r=LO("firebase-js-sdk-policy",{createScriptURL:IO}),a=document.createElement("script"),l=`${Hm}?l=${i}&id=${e}`;a.src=r?r?.createScriptURL(l):l,a.async=!0,document.head.appendChild(a)}function BO(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function PO(i,e,r,a,l,c){const d=a[l];try{if(d)await e[d];else{const y=(await zx(r)).find(f=>f.measurementId===l);y&&await e[y.appId]}}catch(m){Bt.error(m)}i("config",l,c)}async function zO(i,e,r,a,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const m=await zx(r);for(const y of d){const f=m.find(_=>_.measurementId===y),h=f&&e[f.appId];if(h)c.push(h);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",a,l||{})}catch(c){Bt.error(c)}}function qO(i,e,r,a){async function l(c,...d){try{if(c==="event"){const[m,y]=d;await zO(i,e,r,m,y)}else if(c==="config"){const[m,y]=d;await PO(i,e,r,a,m,y)}else if(c==="consent"){const[m,y]=d;i("consent",m,y)}else if(c==="get"){const[m,y,f]=d;i("get",m,y,f)}else if(c==="set"){const[m]=d;i("set",m)}else i(c,...d)}catch(m){Bt.error(m)}}return l}function HO(i,e,r,a,l){let c=function(...d){window[a].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=qO(c,i,e,r),{gtagCore:c,wrappedGtag:window[l]}}function FO(i){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(Hm)&&r.src.includes(i))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=30,VO=1e3;class $O{constructor(e={},r=VO){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qx=new $O;function YO(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function QO(i){const{appId:e,apiKey:r}=i,a={method:"GET",headers:YO(r)},l=kO.replace("{app-id}",e),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();m.error?.message&&(d=m.error.message)}catch{}throw Zt.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function KO(i,e=qx,r){const{appId:a,apiKey:l,measurementId:c}=i.options;if(!a)throw Zt.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:a};throw Zt.create("no-api-key")}const d=e.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new ZO;return setTimeout(async()=>{m.abort()},MO),Hx({appId:a,apiKey:l,measurementId:c},d,m,e)}async function Hx(i,{throttleEndTimeMillis:e,backoffCount:r},a,l=qx){const{appId:c,measurementId:d}=i;try{await XO(a,e)}catch(m){if(d)return Bt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{const m=await QO(i);return l.deleteThrottleMetadata(c),m}catch(m){const y=m;if(!WO(y)){if(l.deleteThrottleMetadata(c),d)return Bt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:c,measurementId:d};throw m}const f=Number(y?.customData?.httpStatus)===503?Ly(r,l.intervalMillis,GO):Ly(r,l.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return l.setThrottleMetadata(c,h),Bt.debug(`Calling attemptFetch again in ${f} millis`),Hx(i,h,a,l)}}function XO(i,e){return new Promise((r,a)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(r,l);i.addEventListener(()=>{clearTimeout(c),a(Zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function WO(i){if(!(i instanceof Zh)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class ZO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function JO(i,e,r,a,l){if(l&&l.global){i("event",r,a);return}else{const c=await e,d={...a,send_to:c};i("event",r,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(){if(F1())try{await H1()}catch(i){return Bt.warn(Zt.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return Bt.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tR(i,e,r,a,l,c,d){const m=KO(i);m.then(v=>{r[v.measurementId]=v.appId,i.options.measurementId&&v.measurementId!==i.options.measurementId&&Bt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Bt.error(v)),e.push(m);const y=eR().then(v=>{if(v)return a.getId()}),[f,h]=await Promise.all([m,y]);FO(c)||UO(c,f.measurementId),l("js",new Date);const _=d?.config??{};return _[DO]="firebase",_.update=!0,h!=null&&(_[RO]=h),l("config",f.measurementId,_),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.app=e}_delete(){return delete al[this.app.options.appId],Promise.resolve()}}let al={},Bv=[];const Pv={};let Jf="dataLayer",rR="gtag",zv,Fx,qv=!1;function iR(){const i=[];if(JS()&&i.push("This is a browser extension environment."),G1()||i.push("Cookies are not available."),i.length>0){const e=i.map((a,l)=>`(${l+1}) ${a}`).join(" "),r=Zt.create("invalid-analytics-context",{errorInfo:e});Bt.warn(r.message)}}function aR(i,e,r){iR();const a=i.options.appId;if(!a)throw Zt.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Bt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zt.create("no-api-key");if(al[a]!=null)throw Zt.create("already-exists",{id:a});if(!qv){BO(Jf);const{wrappedGtag:c,gtagCore:d}=HO(al,Bv,Pv,Jf,rR);Fx=c,zv=d,qv=!0}return al[a]=tR(i,Bv,Pv,e,zv,Jf,r),new nR(i)}function Gx(i=eu()){i=Pt(i);const e=Ni(i,Wc);return e.isInitialized()?e.getImmediate():sR(i)}function sR(i,e={}){const r=Ni(i,Wc);if(r.isInitialized()){const l=r.getImmediate();if(U1(e,r.getOptions()))return l;throw Zt.create("already-initialized")}return r.initialize({options:e})}function lR(i,e,r,a){i=Pt(i),JO(Fx,al[i.app.options.appId],e,r,a).catch(l=>Bt.error(l))}const Hv="@firebase/analytics",Fv="0.10.18";function oR(){Hr(new Fr(Wc,(e,{options:r})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return aR(a,l,r)},"PUBLIC")),Hr(new Fr("analytics-internal",i,"PRIVATE")),Pn(Hv,Fv),Pn(Hv,Fv,"esm2020");function i(e){try{const r=e.getProvider(Wc).getImmediate();return{logEvent:(a,l,c)=>lR(r,a,l,c)}}catch(r){throw Zt.create("interop-component-reg-failed",{reason:r})}}}oR();const eh=OO();if(!eh.valid)throw console.error(" Environment Configuration Errors:",eh.errors),new Error(`Invalid production configuration: ${eh.errors.join(", ")}`);const cR={apiKey:wn.firebase.apiKey,authDomain:wn.firebase.authDomain,databaseURL:wn.firebase.databaseURL,projectId:wn.firebase.projectId,storageBucket:wn.firebase.storageBucket,messagingSenderId:wn.firebase.messagingSenderId,appId:wn.firebase.appId,measurementId:wn.firebase.measurementId},za=V1(cR),dt=$1(za),uR=Y1(za),pn=jm(za);SO(za);typeof window<"u"&&Gx(za);typeof window<"u"&&Lx().then(i=>{i&&ZC(za)});const Zs={OPERATORS:"operators",SUPERVISORS:"supervisors",MANAGEMENT:"management",BUNDLES:"bundles",WORK_ASSIGNMENTS:"workAssignments",WORK_ITEMS:"workItems",WORK_COMPLETIONS:"workCompletions",WIP_ENTRIES:"wipEntries",WIP_ROLLS:"wipRolls",ASSIGNMENT_HISTORY:"assignmentHistory",QUALITY_ISSUES:"qualityIssues",PRODUCTION_STATS:"productionStats",EFFICIENCY_LOGS:"efficiencyLogs",OPERATOR_EARNINGS:"operatorEarnings",NOTIFICATIONS:"notifications",DAILY_REPORTS:"dailyReports",LINE_STATUS:"lineStatus",SIZE_CONFIGS:"sizeConfigs",MACHINE_CONFIGS:"machineConfigs",ARTICLE_TEMPLATES:"articleTemplates",DELETED_TEMPLATES:"deletedTemplates",SYSTEM_SETTINGS:"systemSettings",WAGE_RECORDS:"wageRecords",USERS:"users",USER_ACTIVITIES:"user_activities",SYSTEM_ACTIVITIES:"system_activities",DAMAGE_REPORTS:"damage_reports",DAMAGE_NOTIFICATIONS:"damage_notifications",OPERATOR_WALLETS:"operatorWallets",PRODUCTION_BUNDLES:"production_bundles",BUNDLE_OPERATIONS:"bundle_operations",PARTS_COMPLAINTS:"parts_complaints",BUNDLE_TRACKING:"bundle_tracking"},Sn={OPERATOR_STATUS:"operator_status",WORK_PROGRESS:"work_progress",STATION_STATUS:"station_status",LIVE_METRICS:"live_metrics",NOTIFICATIONS:"notifications",SYSTEM_HEALTH:"system_health",ACTIVE_SESSIONS:"active_sessions",AVAILABLE_WORK:"available_work",LINE_BALANCING:"line_balancing"},dR={retryDelay:2e3,heartbeatInterval:3e4};console.log(" Using live Firebase services in production mode");const Gv=Object.freeze(Object.defineProperty({__proto__:null,COLLECTIONS:Zs,REALTIME_CONFIG:dR,RT_PATHS:Sn,auth:uR,db:dt,rtdb:pn},Symbol.toStringTag,{value:"Module"}));class fR{collectionName="trusted_devices";deviceKey="tsaerp_device_id";minLoginCount=3;maxTrustedDevices=5;trustExpireDays=30;generateDeviceFingerprint(){return{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,localStorage:typeof Storage<"u"}}getCurrentDeviceId(){let e=localStorage.getItem(this.deviceKey);return e||(e="device_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem(this.deviceKey,e)),e}async getTrustedDevices(){const e=vt.get("trusted_devices_all");if(e)return console.log(" Retrieved trusted devices from cache"),e;try{const r=Ir(dt,this.collectionName),l=(await Lr(Et(r,Js("lastLoginDate","desc")))).docs.map(c=>({id:c.id,...c.data(),firstSeenDate:c.data().firstSeenDate?.toDate()||new Date,lastLoginDate:c.data().lastLoginDate?.toDate()||new Date,loginHistory:c.data().loginHistory?.map(d=>({...d,timestamp:d.timestamp?.toDate()||new Date}))||[]}));return vt.set("trusted_devices_all",l,300*1e3,"high"),console.log(" Loaded trusted devices from Firebase and cached"),l}catch(r){return console.error("Error loading trusted devices from Firebase:",r),[]}}async getTrustedDevicesForOperator(e){const r=vt.get("trusted_devices_operator",{operatorId:e});if(r)return console.log(` Retrieved trusted devices for ${e} from cache`),r;try{const a=Ir(dt,this.collectionName),l=Et(a,jt("operatorId","==",e),jt("isActive","==",!0),Js("lastLoginDate","desc")),d=(await Lr(l)).docs.map(m=>({id:m.id,...m.data(),firstSeenDate:m.data().firstSeenDate?.toDate()||new Date,lastLoginDate:m.data().lastLoginDate?.toDate()||new Date,loginHistory:m.data().loginHistory?.map(y=>({...y,timestamp:y.timestamp?.toDate()||new Date}))||[]}));return vt.set("trusted_devices_operator",d,180*1e3,"medium",{operatorId:e}),console.log(` Loaded trusted devices for ${e} from Firebase and cached`),d}catch(a){return console.error("Error loading trusted devices for operator:",a),[]}}async isDeviceTrusted(e){try{const r=this.getCurrentDeviceId(),a=Ir(dt,this.collectionName),l=Et(a,jt("deviceId","==",r),jt("operatorId","==",e),jt("isTrusted","==",!0),jt("isActive","==",!0)),c=await Lr(l);if(c.empty)return!1;const d=c.docs[0].data();return(Date.now()-(d.lastLoginDate?.toDate?.()||d.lastLoginDate).getTime())/(1e3*60*60*24)>this.trustExpireDays?(await this.revokeTrust(e,r),!1):!0}catch(r){return console.error("Error checking device trust:",r),!1}}async getTrustedDevice(e){try{const r=this.getCurrentDeviceId(),a=Ir(dt,this.collectionName),l=Et(a,jt("deviceId","==",r),jt("operatorId","==",e)),c=await Lr(l);if(c.empty)return null;const d=c.docs[0];return{id:d.id,...d.data(),firstSeenDate:d.data().firstSeenDate?.toDate()||new Date,lastLoginDate:d.data().lastLoginDate?.toDate()||new Date,loginHistory:d.data().loginHistory?.map(m=>({...m,timestamp:m.timestamp?.toDate()||new Date}))||[]}}catch(r){return console.error("Error getting trusted device:",r),null}}async recordLogin(e,r,a,l){try{const c=this.getCurrentDeviceId(),d={timestamp:new Date,success:a,ipAddress:l,operatorId:e},m=await this.getTrustedDevice(e);if(m&&m.id){const y=[...m.loginHistory||[],d],f=m.loginCount+(a?1:0),h=a&&f>=this.minLoginCount;await Aa(Wt(dt,this.collectionName,m.id),{lastLoginDate:lr(),loginCount:f,loginHistory:y.map(_=>({..._,timestamp:Tn.fromDate(_.timestamp)})),isTrusted:h||m.isTrusted,isActive:!0}),vt.invalidatePattern("trusted_devices_*"),console.log(` Updated existing device for ${r}. Trusted: ${h||m.isTrusted}`)}else{const y=this.generateDeviceFingerprint(),f=this.parseUserAgent(navigator.userAgent),h={deviceId:c,operatorId:e,operatorName:r,deviceFingerprint:y,deviceInfo:f,firstSeenDate:new Date,lastLoginDate:new Date,loginCount:a?1:0,loginHistory:[d],isTrusted:!1,isActive:!0};await eT(Ir(dt,this.collectionName),{...h,firstSeenDate:lr(),lastLoginDate:lr(),loginHistory:h.loginHistory.map(_=>({..._,timestamp:Tn.fromDate(_.timestamp)}))}),vt.invalidatePattern("trusted_devices_*"),console.log(` Created new device entry for ${r}`)}}catch(c){console.error("Error recording login:",c)}}async grantTrust(e){try{const r=await this.getTrustedDevice(e);return!r||!r.id?!1:(await Aa(Wt(dt,this.collectionName,r.id),{isTrusted:!0,isActive:!0}),vt.invalidatePattern("trusted_devices_*"),console.log(` Granted trust to device for operator ${e}`),!0)}catch(r){return console.error("Error granting trust:",r),!1}}async revokeTrust(e,r){try{let a,l;r?(a=e,l=r):(a=e,l=this.getCurrentDeviceId());const c=Ir(dt,this.collectionName),d=Et(c,jt("deviceId","==",l),jt("operatorId","==",a)),m=await Lr(d);if(m.empty)return!1;const y=m.docs[0];return await Aa(y.ref,{isTrusted:!1}),vt.invalidatePattern("trusted_devices_*"),console.log(` Revoked trust from device for operator ${a}`),!0}catch(a){return console.error("Error revoking trust:",a),!1}}async removeDevice(e,r){try{const a=Ir(dt,this.collectionName),l=Et(a,jt("deviceId","==",e),jt("operatorId","==",r)),c=await Lr(l);return c.empty?!1:(await Q1(c.docs[0].ref),vt.invalidatePattern("trusted_devices_*"),console.log(` Removed device ${e} for operator ${r}`),!0)}catch(a){return console.error("Error removing device:",a),!1}}parseUserAgent(e){const r=this.detectBrowser(e),a=this.detectOS(e),l=this.detectDevice(e);return{browser:r,os:a,device:l}}detectBrowser(e){return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":e.includes("Opera")?"Opera":"Unknown"}detectOS(e){return e.includes("Windows")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":"Unknown"}detectDevice(e){return e.includes("Mobile")?"Mobile":e.includes("Tablet")?"Tablet":"Desktop"}async getDeviceStatistics(){try{const e=await this.getTrustedDevices(),r=new Date,a=new Date(r.getTime()-1440*60*1e3);return{totalDevices:e.length,trustedDevices:e.filter(l=>l.isTrusted).length,activeDevices:e.filter(l=>l.isActive).length,recentLogins:e.filter(l=>l.lastLoginDate>a).length}}catch(e){return console.error("Error getting device statistics:",e),{totalDevices:0,trustedDevices:0,activeDevices:0,recentLogins:0}}}async getDeviceStats(e){try{const r=await this.getTrustedDevice(e);if(!r)return{isTrusted:!1,successfulLogins:0,loginCount:0,lastLoginDate:null,deviceExists:!1};const a=r.loginHistory.filter(l=>l.success).length;return{isTrusted:r.isTrusted,successfulLogins:a,loginCount:r.loginCount,lastLoginDate:r.lastLoginDate,deviceExists:!0}}catch(r){return console.error("Error getting device stats:",r),null}}async recordLoginAttempt(e,r,a,l){return this.recordLogin(e,r,a,l)}async performTrustedLogin(e){try{if(!await this.isDeviceTrusted(e))return console.log(` Device not trusted for operator ${e}`),!1;const a=await this.getTrustedDevice(e);return a?(await this.recordLogin(e,a.operatorName,!0),console.log(` Auto-login successful for trusted device - ${a.operatorName}`),!0):!1}catch(r){return console.error("Error performing trusted login:",r),!1}}}const Yh=new fR,hR=Object.freeze(Object.defineProperty({__proto__:null,trustedDeviceService:Yh},Symbol.toStringTag,{value:"Module"}));class mR{pendingUpdates=new Map;confirmedUpdates=new Map;failedUpdates=new Map;callbacks=new Map;retryTimeouts=new Map;async applyOptimisticUpdate(e,r,a,l,c,d,m,y){const f={id:e,type:r,collection:a,documentId:l,data:c,originalData:d,timestamp:Date.now(),retryCount:0,maxRetries:3,status:"pending"};this.pendingUpdates.set(e,f),y&&this.callbacks.set(e,y);try{const h=await m();this.confirmUpdate(e,h)}catch(h){this.handleUpdateError(e,h)}}confirmUpdate(e,r){const a=this.pendingUpdates.get(e);if(!a)return;a.status="confirmed",this.pendingUpdates.delete(e),this.confirmedUpdates.set(e,a),this.clearRetryTimeout(e),this.callbacks.get(e)?.onSuccess?.(a),setTimeout(()=>{this.confirmedUpdates.delete(e),this.callbacks.delete(e)},3e4),console.log(`Optimistic update confirmed: ${e}`)}handleUpdateError(e,r){const a=this.pendingUpdates.get(e);if(a)if(a.retryCount++,a.retryCount<=a.maxRetries){const l=1e3*Math.pow(2,a.retryCount-1),c=setTimeout(async()=>{console.log(`Retrying optimistic update: ${e} (attempt ${a.retryCount})`);try{this.markUpdateAsFailed(e,r)}catch(d){this.handleUpdateError(e,d)}},l);this.retryTimeouts.set(e,c)}else this.markUpdateAsFailed(e,r)}markUpdateAsFailed(e,r){const a=this.pendingUpdates.get(e);if(!a)return;a.status="failed",this.pendingUpdates.delete(e),this.failedUpdates.set(e,a),this.clearRetryTimeout(e),this.callbacks.get(e)?.onError?.(a,r),setTimeout(()=>{this.failedUpdates.has(e)&&this.revertUpdate(e)},1e4),console.error(`Optimistic update failed: ${e}`,r)}revertUpdate(e){const r=this.failedUpdates.get(e)||this.pendingUpdates.get(e);return r?(r.status="reverted",this.failedUpdates.delete(e),this.pendingUpdates.delete(e),this.clearRetryTimeout(e),this.callbacks.get(e)?.onRevert?.(r),setTimeout(()=>{this.callbacks.delete(e)},1e3),console.log(`Optimistic update reverted: ${e}`),!0):!1}getUpdateStatus(e){return this.pendingUpdates.get(e)||this.confirmedUpdates.get(e)||this.failedUpdates.get(e)||null}getPendingUpdates(){return Array.from(this.pendingUpdates.values())}getFailedUpdates(){return Array.from(this.failedUpdates.values())}hasPendingUpdates(){return this.pendingUpdates.size>0}getStats(){return{pending:this.pendingUpdates.size,confirmed:this.confirmedUpdates.size,failed:this.failedUpdates.size,totalRetries:Array.from(this.pendingUpdates.values()).reduce((e,r)=>e+r.retryCount,0)}}clearRetryTimeout(e){const r=this.retryTimeouts.get(e);r&&(clearTimeout(r),this.retryTimeouts.delete(e))}cancelUpdate(e){return this.pendingUpdates.get(e)?(this.pendingUpdates.delete(e),this.clearRetryTimeout(e),this.callbacks.delete(e),console.log(`Optimistic update cancelled: ${e}`),!0):!1}async retryFailedUpdate(e){const r=this.failedUpdates.get(e);return r?(this.failedUpdates.delete(e),r.status="pending",r.retryCount=0,this.pendingUpdates.set(e,r),console.log(`Manually retrying update: ${e}`),!0):!1}clearFailedUpdates(){this.failedUpdates.clear(),console.log("All failed updates cleared")}cleanup(){for(const e of this.retryTimeouts.values())clearTimeout(e);this.pendingUpdates.clear(),this.confirmedUpdates.clear(),this.failedUpdates.clear(),this.callbacks.clear(),this.retryTimeouts.clear(),console.log("Optimistic updates service cleaned up")}subscribeToStatusChanges(e,r){return()=>{}}generateUpdateId(e="opt"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const Vv=new mR;class gR{userId=null;connectionRef=null;status={isOnline:!1,lastSeen:0,reconnectAttempts:0,latency:null};callbacks={};heartbeatInterval=null;latencyCheckInterval=null;reconnectTimeouts=[];initialize(e,r={}){this.userId=e,this.callbacks=r,this.setupConnectionMonitoring(),this.setupHeartbeat(),this.setupLatencyMonitoring(),console.log(`Connection monitor initialized for user: ${e}`)}setupConnectionMonitoring(){if(!this.userId)return;const e=gn(pn,".info/connected");Pr(e,r=>{r.val()===!0?this.handleConnection():this.handleDisconnection()}),this.connectionRef=gn(pn,`${Sn.ACTIVE_SESSIONS}/${this.userId}`),hn(this.connectionRef,{status:"online",lastSeen:mn(),userAgent:navigator.userAgent,timestamp:Date.now()}),lx(this.connectionRef).set({status:"offline",lastSeen:mn(),timestamp:Date.now()})}handleConnection(){this.status.isOnline=!0,this.status.reconnectAttempts=0,this.reconnectTimeouts.forEach(e=>clearTimeout(e)),this.reconnectTimeouts=[],this.connectionRef&&this.userId&&hn(this.connectionRef,{status:"online",lastSeen:mn(),timestamp:Date.now()}),this.callbacks.onConnectionChange?.(this.status),this.callbacks.onReconnect?.(),console.log("Firebase connection established")}handleDisconnection(){this.status.isOnline=!1,this.status.lastSeen=Date.now(),this.callbacks.onConnectionChange?.(this.status),this.callbacks.onDisconnect?.(),this.attemptReconnection(),console.log("Firebase connection lost")}attemptReconnection(){if(this.status.reconnectAttempts>=10){console.log("Max reconnection attempts reached");return}const a=1e3*Math.pow(2,this.status.reconnectAttempts);this.status.reconnectAttempts++;const l=setTimeout(()=>{this.status.isOnline||(console.log(`Reconnection attempt ${this.status.reconnectAttempts}`),this.callbacks.onConnectionChange?.(this.status),this.attemptReconnection())},a);this.reconnectTimeouts.push(l)}setupHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.status.isOnline&&this.connectionRef&&hn(this.connectionRef,{status:"online",lastSeen:mn(),timestamp:Date.now()}).catch(e=>{console.warn("Heartbeat failed:",e)})},3e4)}setupLatencyMonitoring(){this.latencyCheckInterval=setInterval(()=>{this.measureLatency()},6e4)}async measureLatency(){if(!this.status.isOnline)return this.status.latency=null,-1;try{const e=Date.now(),r=gn(pn,`${Sn.SYSTEM_HEALTH}/latency_test`);return await hn(r,e),new Promise(a=>{const l=Pr(r,c=>{if(c.val()===e){const m=Date.now()-e;this.status.latency=m,this.callbacks.onConnectionChange?.(this.status),l(),a(m)}});setTimeout(()=>{this.status.latency=null,l(),a(-1)},1e4)})}catch(e){return console.warn("Latency measurement failed:",e),this.status.latency=null,-1}}getStatus(){return{...this.status}}isOnline(){return this.status.isOnline}async checkConnection(){try{return await this.measureLatency(),this.status.isOnline&&this.status.latency!==null}catch{return!1}}updateActivity(){this.status.isOnline&&this.connectionRef&&hn(this.connectionRef,{status:"online",lastSeen:mn(),lastActivity:Date.now(),timestamp:Date.now()}).catch(e=>{console.warn("Failed to update activity:",e)})}setUserStatus(e){this.connectionRef&&hn(this.connectionRef,{status:e,lastSeen:mn(),timestamp:Date.now()}).catch(r=>{console.warn("Failed to set user status:",r)})}cleanup(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.latencyCheckInterval&&(clearInterval(this.latencyCheckInterval),this.latencyCheckInterval=null),this.reconnectTimeouts.forEach(e=>clearTimeout(e)),this.reconnectTimeouts=[],this.connectionRef&&hn(this.connectionRef,{status:"offline",lastSeen:mn(),timestamp:Date.now()}).catch(()=>{}),console.log("Connection monitor cleaned up")}subscribeToUserStatus(e,r){const a=gn(pn,`${Sn.ACTIVE_SESSIONS}/${e}`);return Pr(a,c=>{const d=c.exists()?c.val():null;r(d)})}subscribeToOnlineUsers(e){const r=gn(pn,Sn.ACTIVE_SESSIONS);return Pr(r,l=>{const c=l.val()||{},d=Object.entries(c).filter(([m,y])=>y?.status==="online").map(([m,y])=>({userId:m,...y}));e(d)})}}const pR=new gR;class Ur{collectionName;cache;cacheTimeout=300*1e3;constructor(e){this.collectionName=e,this.cache=new Map}getCollection(){return Ir(dt,this.collectionName)}getDocRef(e){return Wt(dt,this.collectionName,e)}async create(e,r){try{const a={...e,createdAt:Tn.now(),updatedAt:Tn.now()},l=r?this.getDocRef(r):Wt(this.getCollection());return await tT(l,a),this.invalidateCache(),{success:!0,data:{...a,id:l.id},id:l.id}}catch(a){return console.error(`Error creating document in ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async getById(e,r=!0){try{if(r){const c=this.getFromCache(e);if(c)return{success:!0,data:c}}const a=this.getDocRef(e),l=await Ws(a);if(l.exists()){const c={id:l.id,...l.data()};return r&&this.setCache(e,c),{success:!0,data:c}}else return{success:!1,error:"Document not found"}}catch(a){return console.error(`Error getting document ${e} from ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async update(e,r){try{const a=this.getDocRef(e),l={...r,updatedAt:Tn.now()};return await Aa(a,l),this.cache.delete(e),await this.getById(e,!1)}catch(a){return console.error(`Error updating document ${e} in ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async delete(e){try{const r=this.getDocRef(e);return await Q1(r),this.cache.delete(e),this.invalidateCache(),{success:!0}}catch(r){return console.error(`Error deleting document ${e} from ${this.collectionName}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getAll(e){try{let r=Et(this.getCollection());return e?.orderByField&&(r=Et(r,Js(e.orderByField,e.orderDirection||"asc"))),e?.limitCount&&(r=Et(r,Lf(e.limitCount))),{success:!0,data:(await Lr(r)).docs.map(c=>({id:c.id,...c.data()}))}}catch(r){return console.error(`Error getting all documents from ${this.collectionName}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getWhere(e,r){try{let a=Et(this.getCollection(),jt(e.field,e.operator,e.value));return r?.orderByField&&(a=Et(a,Js(r.orderByField,r.orderDirection||"asc"))),r?.limitCount&&(a=Et(a,Lf(r.limitCount))),{success:!0,data:(await Lr(a)).docs.map(d=>({id:d.id,...d.data()}))}}catch(a){return console.error(`Error querying documents from ${this.collectionName}:`,a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async batchCreate(e){try{const r=Rh(dt);return e.forEach(({id:a,data:l})=>{const c={...l,createdAt:Tn.now(),updatedAt:Tn.now()},d=a?this.getDocRef(a):Wt(this.getCollection());r.set(d,c)}),await r.commit(),this.invalidateCache(),{success:!0}}catch(r){return console.error(`Error batch creating documents in ${this.collectionName}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}subscribeToDocument(e,r){const a=this.getDocRef(e);return Uy(a,l=>{if(l.exists()){const c={id:l.id,...l.data()};this.setCache(e,c),r(c)}else r(null)},l=>{console.error(`Error subscribing to document ${e}:`,l),r(null)})}subscribeToCollection(e,r,a){let l=Et(this.getCollection());return r&&(l=Et(l,jt(r.field,r.operator,r.value))),a?.orderByField&&(l=Et(l,Js(a.orderByField,a.orderDirection||"asc"))),a?.limitCount&&(l=Et(l,Lf(a.limitCount))),Uy(l,c=>{const d=c.docs.map(m=>({id:m.id,...m.data()}));e(d)},c=>{console.error(`Error subscribing to collection ${this.collectionName}:`,c),e([])})}getFromCache(e){const r=this.cache.get(e);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.data:(r&&this.cache.delete(e),null)}setCache(e,r){this.cache.set(e,{data:r,timestamp:Date.now()})}invalidateCache(e){if(e)for(const r of this.cache.keys())r.includes(e)&&this.cache.delete(r);else this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}async atomicUpdate(e,r,a=3){try{const l=this.getDocRef(e),c=await nT(dt,async d=>{const m=await d.get(l),y=m.exists()?{id:m.id,...m.data()}:null,f=r(y);if(f===null)return null;const h={...f,updatedAt:lr()};return d.set(l,h),f});return c?(this.cache.delete(e),{success:!0,data:c,message:"Atomic update successful"}):{success:!1,error:"Transaction aborted",code:"TRANSACTION_ABORTED"}}catch(l){return a>0&&l instanceof Error&&l.message.includes("aborted")?(await new Promise(c=>setTimeout(c,100*(4-a))),this.atomicUpdate(e,r,a-1)):(console.error(`Atomic update failed for ${e}:`,l),{success:!1,error:l instanceof Error?l.message:"Transaction failed",code:"ATOMIC_UPDATE_FAILED"})}}async optimisticUpdate(e,r,a){const l=Vv.generateUpdateId("service");try{const c=await this.getById(e,!1),d=c.success?c.data:void 0;await Vv.applyOptimisticUpdate(l,"update",this.collectionName,e,r,d,a);const m={...d,...r};return this.setCache(e,m),{success:!0,data:m,message:"Optimistic update applied"}}catch(c){return console.error(`Optimistic update failed for ${e}:`,c),{success:!1,error:c instanceof Error?c.message:"Optimistic update failed",code:"OPTIMISTIC_UPDATE_FAILED"}}}async withRetry(e,r=3,a=1e3){let l;for(let c=0;c<=r;c++)try{return await e()}catch(d){if(l=d instanceof Error?d:new Error("Unknown error"),c===r)break;const m=a*Math.pow(2,c);await new Promise(y=>setTimeout(y,m)),console.warn(`Retry attempt ${c+1}/${r} after ${m}ms`)}throw l}async ensureConnection(){return pR.isOnline()?!0:(console.warn("Offline mode - operation queued"),!1)}async createWithValidation(e,r,a){if(r){const c=r(e);if(!c.isValid)return{success:!1,error:c.errors.join(", "),code:"VALIDATION_ERROR"}}return await this.ensureConnection()?this.create(e,a):{success:!1,error:"No network connection",code:"NETWORK_ERROR"}}}const _a=(i,e="")=>i==null?e:typeof i=="string"?i:typeof i=="number"||typeof i=="boolean"?i.toString():e,$v=(i,e=0)=>{if(i==null)return e;if(typeof i=="number"&&!isNaN(i))return i;const r=parseFloat(i);return isNaN(r)?e:r},th=(i,e=[])=>Array.isArray(i)?i:(i==null,e),yR=(i,e)=>i!=null&&typeof i=="object"&&!Array.isArray(i)?i:e,Yv=(i,e=new Date)=>{if(i instanceof Date)return i;if(i?.toDate&&typeof i.toDate=="function")return i.toDate();if(i?.seconds)return new Date(i.seconds*1e3);const r=new Date(i);return isNaN(r.getTime())?e:r},vR=(i,e=!1)=>typeof i=="boolean"?i:i==null?e:typeof i=="string"?i.toLowerCase()==="true":typeof i=="number"?i!==0:e,_R=i=>({id:_a(i?.id),name:_a(i?.name,"Unknown Operator"),employeeId:_a(i?.employeeId,"N/A"),email:_a(i?.email,""),phone:_a(i?.phone,""),machineTypes:th(i?.machineTypes,[]),specializations:th(i?.specializations,[]),isActive:vR(i?.isActive,!0),availabilityStatus:_a(i?.availabilityStatus,"unknown"),averageEfficiency:$v(i?.averageEfficiency,0),qualityScore:$v(i?.qualityScore,0),currentAssignments:th(i?.currentAssignments,[]),avatar:yR(i?.avatar,{type:"initials",value:"OP",backgroundColor:"#3B82F6"}),createdAt:Yv(i?.createdAt),updatedAt:Yv(i?.updatedAt)});class Vx extends Ur{constructor(){super(Zs.OPERATORS)}async createOperator(e){try{const r=this.validateOperatorData(e);if(!r.isValid)return{success:!1,error:r.errors.join(", "),code:"VALIDATION_ERROR"};let a=e.employeeId;if(!a){const{IDGenerationService:v}=await ue(async()=>{const{IDGenerationService:b}=await import("./id-generation-service._PtYBQ4s.js");return{IDGenerationService:b}},__vite__mapDeps([0,1,2,3,4,5]));a=await v.generateEmployeeId()}const l=await this.checkDuplicates(e.username,a);if(!l.isValid)return{success:!1,error:l.error,code:"DUPLICATE_ERROR"};const c=Object.fromEntries(Object.entries(e).filter(([v,b])=>b!==void 0)),d={type:"initials",value:(e.name||e.username||"OP").slice(0,2).toUpperCase(),backgroundColor:"#3B82F6"};let m=d;e.avatar&&(m={type:e.avatar.type||d.type,value:e.avatar.value||d.value,backgroundColor:e.avatar.backgroundColor||d.backgroundColor});const y={...c,employeeId:a,email:e.email||"",phone:e.phone||"",address:e.address||"",avatar:m,role:"operator",averageEfficiency:0,qualityScore:0,completedBundles:0,totalPieces:0,totalEarnings:0,isActive:!0,availabilityStatus:"available",currentAssignments:[],maxConcurrentWork:e.maxConcurrentWork||3,createdAt:Tn.now(),updatedAt:Tn.now()};console.log(" Creating operator with avatar data:",m);const f=JSON.parse(JSON.stringify(y,(v,b)=>b===void 0?null:b)),h=Object.fromEntries(Object.entries(f).filter(([v,b])=>b!==null));console.log(" Final operator data being saved:",h);const _=await this.create(h);return _.success&&_.data&&(await this.initializeOperatorStatus(_.data.id,e.primaryMachine),await this.logActivity(_.data.id,"operator_created","Operator account created")),_}catch(r){return console.error("Error creating operator:",r),{success:!1,error:r instanceof Error?r.message:"Failed to create operator",code:"CREATION_FAILED"}}}async getOperatorWithStatus(e){try{const r=await this.getById(e);if(!r.success||!r.data)return r;const a=await this.getOperatorRealtimeStatus(e);return{success:!0,data:{...r.data,realtimeStatus:a}}}catch(r){return console.error("Error getting operator with status:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get operator",code:"FETCH_FAILED"}}}async getAllOperators(){try{const e=await this.getAll();return e.success&&e.data?{success:!0,data:(Array.isArray(e.data)?e.data:[e.data]).filter(l=>l!=null).map(l=>_R(l))}:{success:!0,data:[]}}catch(e){return console.error("Error getting all operators:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get operators",code:"FETCH_ERROR",data:[]}}}async getOperatorsSummary(){try{const e=await this.getAll();return!e.success||!e.data?e:{success:!0,data:await Promise.all(e.data.map(async a=>{const l=await this.getOperatorRealtimeStatus(a.id);return{id:a.id,name:a.name,employeeId:a.employeeId,primaryMachine:a.primaryMachine,currentStatus:l.status,efficiency:a.averageEfficiency,qualityScore:a.qualityScore,currentWork:l.currentWork,avatar:a.avatar}}))}}catch(e){return console.error("Error getting operators summary:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get operators",code:"FETCH_FAILED"}}}async updateOperator(e,r){try{if(r.username||r.employeeId){const l=await this.checkDuplicates(r.username,r.employeeId,e);if(!l.isValid)return{success:!1,error:l.error,code:"DUPLICATE_ERROR"}}const a=await this.update(e,{...r,updatedAt:Tn.now()});return a.success&&await this.logActivity(e,"profile_updated",`Profile updated: ${Object.keys(r).join(", ")}`),a}catch(a){return console.error("Error updating operator:",a),{success:!1,error:a instanceof Error?a.message:"Failed to update operator",code:"UPDATE_FAILED"}}}async updateOperatorStats(e,r){try{const a={};r.efficiency!==void 0&&(a.averageEfficiency=r.efficiency),r.qualityScore!==void 0&&(a.qualityScore=r.qualityScore),r.completedPieces!==void 0&&(a.totalPieces=Bs(r.completedPieces),a.completedBundles=Bs(1)),r.earnings!==void 0&&(a.totalEarnings=Bs(r.earnings)),a.updatedAt=lr();const l=await this.update(e,a);return l.success&&await this.logActivity(e,"stats_updated",`Statistics updated: ${Object.keys(r).join(", ")}`),l}catch(a){return console.error("Error updating operator stats:",a),{success:!1,error:a instanceof Error?a.message:"Failed to update statistics",code:"STATS_UPDATE_FAILED"}}}async assignWork(e,r){try{const a=await this.getById(e);if(!a.success||!a.data)return{success:!1,error:"Operator not found",code:"OPERATOR_NOT_FOUND"};if(a.data.currentAssignments.length>=a.data.maxConcurrentWork)return{success:!1,error:`Operator at maximum capacity (${a.data.maxConcurrentWork} assignments)`,code:"CAPACITY_EXCEEDED"};const l=Rh(dt),c=Wt(dt,Zs.OPERATORS,e);l.update(c,{currentAssignments:rT(r.bundleId),updatedAt:lr()});const d=gn(pn,`${Sn.OPERATOR_STATUS}/${e}`);return await hn(d,{status:"working",currentWork:r.workItemId,lastActivity:mn(),machineStatus:"running"}),await l.commit(),await this.logActivity(e,"work_assigned",`Work assigned: ${r.bundleId} (${r.assignmentMethod})`),{success:!0,message:"Work assigned successfully"}}catch(a){return console.error("Error assigning work:",a),{success:!1,error:a instanceof Error?a.message:"Failed to assign work",code:"ASSIGNMENT_FAILED"}}}async completeWork(e,r){try{const a=Rh(dt),l=Wt(dt,Zs.OPERATORS,e);a.update(l,{currentAssignments:iT(r.bundleId),totalPieces:Bs(r.completedPieces),completedBundles:Bs(1),updatedAt:lr()});const c=gn(pn,`${Sn.OPERATOR_STATUS}/${e}`);return await hn(c,{status:"idle",currentWork:null,lastActivity:mn(),machineStatus:"stopped"}),await a.commit(),await this.updateOperatorStats(e,{efficiency:r.efficiency,qualityScore:r.qualityScore,completedPieces:r.completedPieces}),await this.logActivity(e,"work_completed",`Work completed: ${r.bundleId}, Pieces: ${r.completedPieces}, Quality: ${r.qualityScore}%`),{success:!0,message:"Work completed successfully"}}catch(a){return console.error("Error completing work:",a),{success:!1,error:a instanceof Error?a.message:"Failed to complete work",code:"COMPLETION_FAILED"}}}async getOperatorsByMachine(e){try{const r={field:"machineTypes",operator:"array-contains",value:e};return await this.getWhere(r,{orderByField:"averageEfficiency",orderDirection:"desc"})}catch(r){return console.error("Error getting operators by machine:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get operators",code:"FETCH_FAILED"}}}async getOperatorsBySkill(e){try{const r={field:"skillLevel",operator:"==",value:e};return await this.getWhere(r,{orderByField:"qualityScore",orderDirection:"desc"})}catch(r){return console.error("Error getting operators by skill:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get operators",code:"FETCH_FAILED"}}}async updateOperatorStatus(e,r){try{const a=gn(pn,`${Sn.OPERATOR_STATUS}/${e}`);return await hn(a,{...r,lastActivity:mn()}),{success:!0,message:"Status updated successfully"}}catch(a){return console.error("Error updating operator status:",a),{success:!1,error:a instanceof Error?a.message:"Failed to update status",code:"STATUS_UPDATE_FAILED"}}}subscribeToOperatorStatus(e,r){const a=gn(pn,`${Sn.OPERATOR_STATUS}/${e}`);return Pr(a,l=>{const c=l.exists()?l.val():null;r(c)},l=>{console.error("Error subscribing to operator status:",l),r(null)}),()=>ox(a)}async getOperatorRealtimeStatus(e){return new Promise(r=>{const a=gn(pn,`${Sn.OPERATOR_STATUS}/${e}`);Pr(a,l=>{const c=l.exists()?l.val():{status:"offline",currentWork:null,lastActivity:Date.now(),machineStatus:"stopped"};r(c)},{onlyOnce:!0})})}async initializeOperatorStatus(e,r){const a=gn(pn,`${Sn.OPERATOR_STATUS}/${e}`);await hn(a,{status:"offline",currentWork:null,lastActivity:mn(),machineStatus:"stopped",primaryMachine:r})}validateOperatorData(e){const r=[];return(!e.username||e.username.length<3)&&r.push("Username must be at least 3 characters"),/^[a-zA-Z0-9_]+$/.test(e.username)||r.push("Username can only contain letters, numbers, and underscores"),(!e.name||e.name.length<2)&&r.push("Name must be at least 2 characters"),(!e.employeeId||!/^TSA-EMP-\d{4}$/.test(e.employeeId))&&r.push("Employee ID must follow format: TSA-EMP-XXXX (e.g., TSA-EMP-0001)"),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&r.push("Invalid email format"),e.primaryMachine||r.push("Primary machine is required"),(!e.machineTypes||e.machineTypes.length===0)&&r.push("At least one machine type is required"),e.skillLevel||r.push("Skill level is required"),e.shift||r.push("Shift is required"),{isValid:r.length===0,errors:r}}async checkDuplicates(e,r,a){try{const l=await this.getWhere({field:"username",operator:"==",value:e});if(l.success&&l.data&&l.data.length>0){const d=l.data[0];if(!a||d.id!==a)return{isValid:!1,error:"Username already exists"}}const c=await this.getWhere({field:"employeeId",operator:"==",value:r});if(c.success&&c.data&&c.data.length>0){const d=c.data[0];if(!a||d.id!==a)return{isValid:!1,error:"Employee ID already exists"}}return{isValid:!0}}catch(l){return console.error("Error checking duplicates:",l),{isValid:!1,error:"Validation error"}}}async logActivity(e,r,a,l){try{const c=new Ur(Zs.USER_ACTIVITIES),d={operatorId:e,activityType:r,description:a,metadata:l,timestamp:Tn.now()};await c.create(d)}catch(c){console.error("Error logging activity:",c)}}}const $x=new Vx,Qv=Object.freeze(Object.defineProperty({__proto__:null,OperatorService:Vx,operatorService:$x},Symbol.toStringTag,{value:"Module"}));class bR{localStorage_keys_to_remove=["tsa_operators","tsa_bundles","tsa_work_assignments","tsa_production_data","tsa_demo_data","tsa_mock_operators","tsa_sample_data","tsaerp_trusted_devices","tsa_cached_data","tsa_temp_data"];scanLocalStorageUsage(){const e=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith("tsa"))try{const l=localStorage.getItem(a);e.push({key:a,value:l&&JSON.parse(l)})}catch{e.push({key:a,value:localStorage.getItem(a)})}}return e}cleanupMockData(){const e=[],r=[],a=["tsa_auth_token","tsa_user_role","tsa_username","tsaerp_remembered_username","tsaerp_remember_me","tsa_user_preferences","tsaerp_cache"];for(let l=localStorage.length-1;l>=0;l--){const c=localStorage.key(l);c&&c.startsWith("tsa")&&(a.includes(c)?r.push(c):(localStorage.removeItem(c),e.push(c)))}return{removed:e,kept:r}}async validateFirebaseConnection(){const e={firestore:!1,realtimeDatabase:!1,auth:!1};try{const{operatorService:r}=await ue(async()=>{const{operatorService:a}=await Promise.resolve().then(()=>Qv);return{operatorService:a}},void 0);await r.getAllOperators(),e.firestore=!0}catch(r){console.warn("Firestore connection test failed:",r)}try{const{rtdb:r}=await ue(async()=>{const{rtdb:y}=await Promise.resolve().then(()=>Gv);return{rtdb:y}},void 0),{ref:a,onValue:l,off:c}=await ue(async()=>{const{ref:y,onValue:f,off:h}=await Promise.resolve().then(()=>A2);return{ref:y,onValue:f,off:h}},void 0),d=a(r,"system_health"),m=()=>new Promise(y=>{const f=l(d,()=>{c(d),y(!0)},h=>{y(!1)})});e.realtimeDatabase=await m()}catch(r){console.warn("Realtime Database connection test failed:",r)}try{const{auth:r}=await ue(async()=>{const{auth:a}=await Promise.resolve().then(()=>Gv);return{auth:a}},void 0);e.auth=r!=null}catch(r){console.warn("Auth connection test failed:",r)}return e}async migrateToFirebaseOnly(){console.log(" Starting Firebase-only migration...");const e=[];try{const r=await this.validateFirebaseConnection();if(!r.firestore)throw new Error(" Firestore connection failed - cannot proceed with migration");const{removed:a,kept:l}=this.cleanupMockData();return console.log(` Cleaned ${a.length} mock data keys:`,a),console.log(` Kept ${l.length} essential keys:`,l),vt.clear(),console.log(" Cache system reset for Firebase operations"),this.validateNoMockDataUsage(),console.log(" Firebase-only migration completed successfully"),{success:!0,cleaned:a,errors:e,firebaseStatus:r}}catch(r){const a=r instanceof Error?r.message:"Unknown error";return e.push(a),console.error(" Firebase migration failed:",r),{success:!1,cleaned:[],errors:e,firebaseStatus:await this.validateFirebaseConnection()}}}validateNoMockDataUsage(){["mockOperators","demoData","sampleData","mockBundles"].forEach(r=>{window[r]&&console.warn(` Found suspicious mock data global: ${r}`)})}createFirebaseOnlyLoader(){return{loadOperators:async()=>{const{operatorService:e}=await ue(async()=>{const{operatorService:r}=await Promise.resolve().then(()=>Qv);return{operatorService:r}},void 0);return e.getAllOperators()},loadBundles:async()=>(console.warn("Bundle service not yet fully migrated to Firebase"),{success:!1,error:"Bundle service migration pending"}),loadWorkAssignments:async()=>(console.warn("Work assignment service not yet fully migrated to Firebase"),{success:!1,error:"Work assignment service migration pending"})}}async getMigrationReport(){const e=this.scanLocalStorageUsage(),r=await this.validateFirebaseConnection(),a=vt.getStats(),l=[];return e.length>10&&l.push("Consider cleaning up unused localStorage keys"),r.firestore||l.push("Fix Firestore connection issues"),a.hitRate<70&&l.push("Optimize cache performance for better Firebase data access"),{localStorageKeys:e,firebaseStatus:r,cacheStatus:a,recommendations:l}}}const xR=new bR;class ER{config={enableCacheWarming:!0,enableOfflineSupport:!0,preloadCriticalData:!0,enablePerformanceMonitoring:!0};async initialize(){console.log(" TSA Intelligence Hub - Initializing Advanced Systems...");const e=performance.now();try{console.log(" Running Firebase migration...");const r=await xR.migrateToFirebaseOnly();r.success?console.log(` Firebase migration complete - cleaned ${r.cleaned.length} mock data keys`):console.warn(" Firebase migration had issues:",r.errors),await this.initializeCacheSystem(),this.config.preloadCriticalData&&await this.preloadCriticalData(),this.config.enableCacheWarming&&await this.warmUpCaches(),this.config.enablePerformanceMonitoring&&this.setupPerformanceMonitoring();const a=performance.now(),l=Math.round(a-e);console.log(` TSA Intelligence Hub initialized in ${l}ms`),console.log(" Ready for Smart Manufacturing Operations"),this.displayCacheStatistics()}catch(r){console.error(" App initialization failed:",r)}}async initializeCacheSystem(){console.log(" Initializing Intelligent Cache System...");const e=vt.getStats();console.log(` Cache Status - Hit Rate: ${e.hitRate}% | Utilization: ${e.utilization}%`),e.health==="poor"&&(console.log(" Cache performance poor - Clearing and optimizing..."),vt.clear())}async preloadCriticalData(){console.log(" Preloading Critical Manufacturing Data...");const e=[{name:"Active Operators",task:async()=>{try{const l=await $x.getAllOperators();return Go.set("active_operators",l,600*1e3,"high"),l.length}catch(l){return console.warn("Failed to preload operators:",l),0}}},{name:"Trusted Devices",task:async()=>{try{const l=await Yh.getTrustedDevices();return Go.set("trusted_devices_summary",l,300*1e3,"high"),l.length}catch(l){return console.warn("Failed to preload trusted devices:",l),0}}},{name:"System Statistics",task:async()=>{try{const l=await Yh.getDeviceStatistics();return Go.set("system_stats",l,120*1e3,"medium"),Object.keys(l).length}catch(l){return console.warn("Failed to preload system statistics:",l),0}}}],a=(await Promise.allSettled(e.map(async({name:l,task:c})=>{const d=performance.now(),m=await c(),y=performance.now(),f=Math.round(y-d);return console.log(`   ${l}: ${m} records loaded in ${f}ms`),{name:l,result:m,duration:f}}))).filter(l=>l.status==="fulfilled").length;console.log(` Preloaded ${a}/${e.length} critical datasets`)}async warmUpCaches(){console.log(" Warming Up Intelligent Caches...");try{await vt.warm([{namespace:"user_preferences",loader:async()=>{const e=localStorage.getItem("tsa_user_preferences");return e?JSON.parse(e):{}},ttl:1800*1e3,priority:"medium"},{namespace:"app_config",loader:async()=>({version:"2.0.0",features:["smart_manufacturing","ai_analytics","real_time_monitoring"],theme:"production-optimized",cache_enabled:!0,performance_mode:"enhanced"}),ttl:3600*1e3,priority:"high"}]),console.log(" Cache warming completed successfully")}catch(e){console.warn("Cache warming partially failed:",e)}}setupPerformanceMonitoring(){if(console.log(" Setting Up Performance Intelligence..."),setInterval(()=>{const e=vt.getStats();e.hitRate<70&&console.warn(` Cache hit rate low: ${e.hitRate}% - Consider optimization`)},300*1e3),"memory"in performance){const e=performance.memory,r=Math.round(e.usedJSHeapSize/1024/1024),a=Math.round(e.totalJSHeapSize/1024/1024);console.log(` Memory Usage: ${r}MB / ${a}MB`)}if("PerformanceObserver"in window)try{new PerformanceObserver(r=>{r.getEntries().forEach(l=>{l.duration>1e3&&console.warn(` Slow operation detected: ${l.name} took ${Math.round(l.duration)}ms`)})}).observe({entryTypes:["measure","navigation"]}),console.log(" Performance monitoring active")}catch(e){console.warn("Performance observer setup failed:",e)}}displayCacheStatistics(){const e=vt.getStats(),r=Go.getStats();console.log(`
 TSA Intelligence Hub - Cache Performance Report`),console.log(""),console.log(" Application Cache:"),console.log(`   Hit Rate: ${e.hitRate}% | Health: ${e.health.toUpperCase()}`),console.log(`   Size: ${e.size}/${e.maxSize} | Utilization: ${e.utilization}%`),console.log(`   Hits: ${e.hits} | Misses: ${e.misses} | Evictions: ${e.evictions}`),console.log(" Memory Cache:"),console.log(`   Hit Rate: ${r.hitRate}% | Health: ${r.health.toUpperCase()}`),console.log(`   Size: ${r.size}/${r.maxSize} | Utilization: ${r.utilization}%`),console.log(`   Hits: ${r.hits} | Misses: ${r.misses} | Evictions: ${r.evictions}`),console.log(`
`);const a=e.hitRate>80&&r.hitRate>80?"excellent":e.hitRate>60&&r.hitRate>60?"good":"needs-optimization";console.log(` Overall Performance: ${a.toUpperCase()}`),a==="needs-optimization"&&console.log(" Tip: Consider clearing cache or adjusting TTL values for better performance")}getReadinessStatus(){const e=vt.getStats(),r=e.hitRate>85?"A":e.hitRate>70?"B":e.hitRate>50?"C":"D";return{ready:!0,cacheHealth:e.health,preloadedData:this.config.preloadCriticalData,performanceGrade:r}}}const Kv=new ER;class wR{apiEndpoint="/api/errors";performanceEndpoint="/api/performance";sessionId;userId;userRole;errorQueue=[];performanceQueue=[];isOnline=!0;maxQueueSize=100;flushInterval=1e4;errorEndpointAvailable=!0;performanceEndpointAvailable=!0;constructor(){this.sessionId=this.generateSessionId(),this.setupGlobalErrorHandlers(),this.setupPerformanceMonitoring(),this.setupNetworkStatusListener(),this.startPeriodicFlush()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setUser(e){this.userId=e.id,this.userRole=e.role}async captureException(e,r){const a=`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l={id:a,message:e.message,name:e.name,stack:e.stack,timestamp:new Date().toISOString(),sessionId:this.sessionId,url:window.location.href,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},user:{id:this.userId,role:this.userRole},level:r?.level||"error",contexts:{browser:{name:this.getBrowserName(),version:this.getBrowserVersion(),language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine},os:{platform:navigator.platform},device:{pixelRatio:window.devicePixelRatio,memory:navigator.deviceMemory,cores:navigator.hardwareConcurrency},performance:this.getPerformanceSnapshot(),...r?.contexts},tags:{environment:"production",version:"1.0.0",component:"frontend",...r?.tags},fingerprint:r?.fingerprint||[e.name,e.message],extra:r?.extra||{}};return this.queueError(l),a}captureMessage(e,r="info",a){const l={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,message:e,level:r,timestamp:new Date().toISOString(),sessionId:this.sessionId,url:window.location.href,user:{id:this.userId,role:this.userRole},contexts:a?.contexts||{},tags:{environment:"production",version:"1.0.0",...a?.tags},extra:a?.extra||{}};this.queueError(l)}trackUserAction(e){const r={...e,sessionId:this.sessionId,userId:this.userId,userRole:this.userRole};this.sendUserAction(r)}recordPerformanceMetric(e){this.performanceQueue.push({...e,timestamp:new Date,tags:{sessionId:this.sessionId,userId:this.userId||"anonymous",...e.tags}}),this.performanceQueue.length>=this.maxQueueSize&&this.flushPerformanceMetrics()}recordWebVitals(){if(!("web-vital"in window)){if(window["web-vital"]=!0,"PerformanceObserver"in window)try{new PerformanceObserver(c=>{const d=c.getEntries(),m=d[d.length-1];this.recordPerformanceMetric({name:"largest-contentful-paint",value:m.startTime,unit:"ms",timestamp:new Date,tags:{metric:"core-web-vital"}})}).observe({type:"largest-contentful-paint",buffered:!0}),new PerformanceObserver(c=>{c.getEntries().forEach(m=>{this.recordPerformanceMetric({name:"first-input-delay",value:m.processingStart-m.startTime,unit:"ms",timestamp:new Date,tags:{metric:"core-web-vital"}})})}).observe({type:"first-input",buffered:!0});let a=0;new PerformanceObserver(c=>{c.getEntries().forEach(m=>{m.hadRecentInput||(a+=m.value)}),this.recordPerformanceMetric({name:"cumulative-layout-shift",value:a,unit:"score",timestamp:new Date,tags:{metric:"core-web-vital"}})}).observe({type:"layout-shift",buffered:!0})}catch(e){console.warn("Failed to set up Performance Observer:",e)}window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(this.recordPerformanceMetric({name:"page-load-time",value:e.loadEventEnd-e.loadEventStart,unit:"ms",timestamp:new Date}),this.recordPerformanceMetric({name:"dom-content-loaded",value:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,unit:"ms",timestamp:new Date}),this.recordPerformanceMetric({name:"time-to-first-byte",value:e.responseStart-e.requestStart,unit:"ms",timestamp:new Date}))},0)})}}trackNetworkError(e,r,a,l){this.captureMessage(`Network Error: ${a} ${e} - ${r}`,"warning",{tags:{type:"network-error",url:e,method:a,status:r.toString()},extra:{error:l?.message,stack:l?.stack}})}setupGlobalErrorHandlers(){window.addEventListener("error",r=>{this.captureException(r.error||new Error(r.message),{contexts:{error_event:{filename:r.filename,lineno:r.lineno,colno:r.colno}},tags:{source:"window.onerror"}})}),window.addEventListener("unhandledrejection",r=>{const a=r.reason instanceof Error?r.reason:new Error(r.reason);this.captureException(a,{tags:{source:"unhandled-promise-rejection"},extra:{reason:r.reason}})});const e=window.fetch;window.fetch=async(...r)=>{const a=performance.now();try{const l=await e(...r),d=performance.now()-a;return this.recordPerformanceMetric({name:"api-call-duration",value:d,unit:"ms",timestamp:new Date,tags:{url:typeof r[0]=="string"?r[0]:r[0].url,method:r[1]?.method||"GET",status:l.status.toString()}}),l.ok||this.trackNetworkError(typeof r[0]=="string"?r[0]:r[0].url,l.status,r[1]?.method||"GET"),l}catch(l){const d=performance.now()-a;throw this.recordPerformanceMetric({name:"api-call-duration",value:d,unit:"ms",timestamp:new Date,tags:{url:typeof r[0]=="string"?r[0]:r[0].url,method:r[1]?.method||"GET",status:"error"}}),this.trackNetworkError(typeof r[0]=="string"?r[0]:r[0].url,0,r[1]?.method||"GET",l),l}}}setupPerformanceMonitoring(){if("PerformanceObserver"in window)try{new PerformanceObserver(r=>{r.getEntries().forEach(l=>{this.recordPerformanceMetric({name:"long-task",value:l.duration,unit:"ms",timestamp:new Date,tags:{type:"performance-issue"}})})}).observe({type:"longtask",buffered:!0})}catch(e){console.warn("Long task monitoring not supported:",e)}this.recordWebVitals()}setupNetworkStatusListener(){window.addEventListener("online",()=>{this.isOnline=!0,this.flushAllQueues()}),window.addEventListener("offline",()=>{this.isOnline=!1})}startPeriodicFlush(){setInterval(()=>{this.isOnline&&this.flushAllQueues()},this.flushInterval)}queueError(e){this.errorQueue.push(e),this.errorQueue.length>=this.maxQueueSize&&this.flushErrors()}async flushErrors(){if(this.errorQueue.length===0||!this.isOnline||!this.errorEndpointAvailable)return;const e=this.errorQueue.splice(0,this.maxQueueSize);try{const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errors:e})});if(r.status===404){this.errorEndpointAvailable=!1,wn.logging.debugMode;return}if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch(r){r instanceof TypeError||r?.message?.includes("fetch")?(this.errorQueue.unshift(...e),console.error("Failed to send error reports (network error):",r)):this.errorEndpointAvailable=!1}}async flushPerformanceMetrics(){if(this.performanceQueue.length===0||!this.isOnline||!this.performanceEndpointAvailable)return;const e=this.performanceQueue.splice(0,this.maxQueueSize);try{const r=await fetch(this.performanceEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:e})});if(r.status===404){this.performanceEndpointAvailable=!1,wn.logging.debugMode;return}if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch(r){r instanceof TypeError||r?.message?.includes("fetch")?(this.performanceQueue.unshift(...e),console.error("Failed to send performance metrics (network error):",r)):this.performanceEndpointAvailable=!1}}async sendUserAction(e){if(this.isOnline)try{const r=await fetch("/api/analytics/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.status===404&&wn.logging.debugMode,!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch{}}flushAllQueues(){this.flushErrors(),this.flushPerformanceMetrics()}getBrowserName(){const e=navigator.userAgent;return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Unknown"}getBrowserVersion(){const r=navigator.userAgent.match(/(?:Chrome|Firefox|Safari|Edge)\/(\d+)/);return r?r[1]:"Unknown"}getPerformanceSnapshot(){return performance.memory?{memory:{used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit},timing:performance.timing,navigation:performance.navigation}:{}}destroy(){this.flushAllQueues()}}const _e=new wR;typeof window<"u"&&window.addEventListener("beforeunload",()=>{_e.destroy()});function wt(...i){return lT(oT(i))}const SR={default:["bg-white border border-secondary-200 shadow-sm","dark:bg-secondary-900 dark:border-secondary-700"],outlined:["bg-white border-2 border-secondary-200 shadow-none","dark:bg-secondary-900 dark:border-secondary-700"],elevated:["bg-white border-0 shadow-lg","dark:bg-secondary-900"],filled:["bg-secondary-50 border border-secondary-200 shadow-none","dark:bg-secondary-800 dark:border-secondary-700"],glass:["bg-white/70 backdrop-blur-md border border-white/20 shadow-lg shadow-black/5","dark:bg-secondary-900/70 dark:border-secondary-700/30 dark:shadow-black/20"],neu:["bg-secondary-50 border-0","shadow-[8px_8px_16px_#d1d5db,-8px_-8px_16px_#ffffff]","dark:bg-secondary-800","dark:shadow-[8px_8px_16px_#111827,-8px_-8px_16px_#374151]"]},TR={sm:"p-4",md:"p-6",lg:"p-8"},It=de.forwardRef(({className:i,variant:e="default",size:r="md",hoverable:a=!1,interactive:l=!1,children:c,...d},m)=>p.jsx("div",{ref:m,className:wt("rounded-lg transition-all duration-200",SR[e],TR[r],a&&["cursor-pointer","hover:shadow-md hover:scale-[1.02]",e==="outlined"&&"hover:border-primary-300",e==="elevated"&&"hover:shadow-xl",e==="glass"&&"glass-hover dark:glass-hover-dark",e==="neu"&&"hover:shadow-[4px_4px_8px_#d1d5db,-4px_-4px_8px_#ffffff] dark:hover:shadow-[4px_4px_8px_#111827,-4px_-4px_8px_#374151]"],l&&["card-hover","transform-gpu"],"focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-offset-2",i),...d,children:c}));It.displayName="Card";const Yx=({className:i,children:e,...r})=>p.jsx("div",{className:wt("mb-4 pb-4 border-b border-secondary-200 dark:border-secondary-700",i),...r,children:e}),NR=({className:i,children:e,...r})=>p.jsx("div",{className:i,...r,children:e}),Qx=NR,l3=({className:i,children:e,...r})=>p.jsx("p",{className:wt("text-sm text-secondary-600 dark:text-secondary-400",i),...r,children:e}),Kx=({className:i,children:e,...r})=>p.jsx("h3",{className:wt("text-lg font-semibold text-secondary-900 dark:text-secondary-100",i),...r,children:e}),AR={primary:["bg-primary-500 text-white border-primary-500","hover:bg-primary-600 hover:border-primary-600","focus:ring-primary-500 focus:border-primary-600","active:bg-primary-700 active:border-primary-700","disabled:bg-primary-300 disabled:border-primary-300 disabled:cursor-not-allowed","dark:bg-primary-600 dark:border-primary-600","dark:hover:bg-primary-700 dark:hover:border-primary-700"],secondary:["bg-secondary-100 text-secondary-900 border-secondary-200","hover:bg-secondary-200 hover:border-secondary-300","focus:ring-secondary-500 focus:border-secondary-400","active:bg-secondary-300 active:border-secondary-400","disabled:bg-secondary-50 disabled:text-secondary-400 disabled:cursor-not-allowed","dark:bg-secondary-800 dark:text-secondary-100 dark:border-secondary-700","dark:hover:bg-secondary-700 dark:hover:border-secondary-600"],success:["bg-success-500 text-white border-success-500","hover:bg-success-600 hover:border-success-600","focus:ring-success-500 focus:border-success-600","active:bg-success-700 active:border-success-700","disabled:bg-success-300 disabled:border-success-300 disabled:cursor-not-allowed"],warning:["bg-warning-500 text-white border-warning-500","hover:bg-warning-600 hover:border-warning-600","focus:ring-warning-500 focus:border-warning-600","active:bg-warning-700 active:border-warning-700","disabled:bg-warning-300 disabled:border-warning-300 disabled:cursor-not-allowed"],danger:["bg-danger-500 text-white border-danger-500","hover:bg-danger-600 hover:border-danger-600","focus:ring-danger-500 focus:border-danger-600","active:bg-danger-700 active:border-danger-700","disabled:bg-danger-300 disabled:border-danger-300 disabled:cursor-not-allowed"],info:["bg-blue-500 text-white border-blue-500","hover:bg-blue-600 hover:border-blue-600","focus:ring-blue-500 focus:border-blue-600","active:bg-blue-700 active:border-blue-700","disabled:bg-blue-300 disabled:border-blue-300 disabled:cursor-not-allowed"],back:["bg-gray-500 text-white border-gray-500","hover:bg-gray-600 hover:border-gray-600","focus:ring-gray-500 focus:border-gray-600","active:bg-gray-700 active:border-gray-700","disabled:bg-gray-300 disabled:border-gray-300 disabled:cursor-not-allowed"],ghost:["bg-transparent text-secondary-700 border-transparent","hover:bg-secondary-100 hover:text-secondary-900","focus:ring-secondary-500 focus:bg-secondary-100","active:bg-secondary-200","disabled:text-secondary-400 disabled:cursor-not-allowed","dark:text-secondary-300","dark:hover:bg-secondary-800 dark:hover:text-secondary-100"],outline:["bg-transparent text-secondary-700 border-secondary-300","hover:bg-secondary-50 hover:border-secondary-400","focus:ring-secondary-500 focus:border-secondary-500","active:bg-secondary-100 active:border-secondary-500","disabled:text-secondary-400 disabled:border-secondary-200 disabled:cursor-not-allowed","dark:text-secondary-300 dark:border-secondary-600","dark:hover:bg-secondary-800 dark:hover:border-secondary-500"],link:["bg-transparent text-primary-600 border-transparent p-0","hover:text-primary-700 hover:underline","focus:ring-primary-500 focus:underline","active:text-primary-800","disabled:text-primary-400 disabled:cursor-not-allowed disabled:no-underline","dark:text-primary-400","dark:hover:text-primary-300"],glass:["bg-white/10 text-secondary-800 border border-white/20 backdrop-blur-md","hover:bg-white/20 hover:border-white/30","focus:ring-primary-500/50 focus:border-primary-300/50","active:bg-white/30","disabled:bg-white/5 disabled:text-secondary-400 disabled:cursor-not-allowed","dark:bg-secondary-900/30 dark:text-secondary-200 dark:border-secondary-700/30","dark:hover:bg-secondary-900/40"],neu:["bg-secondary-50 text-secondary-700 border-0","shadow-[4px_4px_8px_#d1d5db,-4px_-4px_8px_#ffffff]","hover:shadow-[2px_2px_4px_#d1d5db,-2px_-2px_4px_#ffffff]","active:shadow-[inset_2px_2px_4px_#d1d5db,inset_-2px_-2px_4px_#ffffff]","focus:ring-primary-500/30","disabled:text-secondary-400 disabled:cursor-not-allowed disabled:shadow-none","dark:bg-secondary-800 dark:text-secondary-300","dark:shadow-[4px_4px_8px_#111827,-4px_-4px_8px_#374151]","dark:hover:shadow-[2px_2px_4px_#111827,-2px_-2px_4px_#374151]","dark:active:shadow-[inset_2px_2px_4px_#111827,inset_-2px_-2px_4px_#374151]"]},CR={xs:"px-2 py-1 text-xs font-medium",sm:"px-3 py-1.5 text-sm font-medium",md:"px-4 py-2 text-sm font-medium",lg:"px-6 py-3 text-base font-medium",xl:"px-8 py-4 text-lg font-medium"},Ze=de.forwardRef(({className:i,variant:e="primary",size:r="md",loading:a=!1,disabled:l=!1,leftIcon:c,rightIcon:d,fullWidth:m=!1,rounded:y=!1,interactive:f=!1,children:h,..._},v)=>{const b=l||a;return p.jsxs("button",{className:wt("inline-flex items-center justify-center","border font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","select-none",CR[r],AR[e],y?"rounded-full":"rounded-md",m&&"w-full",a&&"cursor-wait",f&&!b&&["button-press",e!=="neu"&&"hover-lift"],"min-h-[44px] md:min-h-[auto]","focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",i),disabled:b,ref:v,..._,children:[a&&p.jsx(PS,{className:wt("animate-spin",r==="xs"&&"w-3 h-3",r==="sm"&&"w-3 h-3",r==="md"&&"w-4 h-4",r==="lg"&&"w-4 h-4",r==="xl"&&"w-5 h-5",(c||h)&&"mr-2")}),c&&!a&&p.jsx("span",{className:wt("flex-shrink-0",h&&"mr-2"),children:c}),h&&p.jsx("span",{className:"truncate",children:h}),d&&!a&&p.jsx("span",{className:wt("flex-shrink-0",h&&"ml-2"),children:d})]})});Ze.displayName="Button";const Qo={default:{solid:"bg-secondary-100 text-secondary-800 dark:bg-secondary-800 dark:text-secondary-300",outline:"border border-secondary-300 text-secondary-700 bg-transparent dark:border-secondary-600 dark:text-secondary-400"},primary:{solid:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-300",outline:"border border-primary-300 text-primary-700 bg-transparent dark:border-primary-600 dark:text-primary-400"},secondary:{solid:"bg-secondary-200 text-secondary-800 dark:bg-secondary-700 dark:text-secondary-300",outline:"border border-secondary-400 text-secondary-700 bg-transparent dark:border-secondary-500 dark:text-secondary-400"},success:{solid:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-300",outline:"border border-success-300 text-success-700 bg-transparent dark:border-success-600 dark:text-success-400"},warning:{solid:"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-300",outline:"border border-warning-300 text-warning-700 bg-transparent dark:border-warning-600 dark:text-warning-400"},danger:{solid:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-300",outline:"border border-danger-300 text-danger-700 bg-transparent dark:border-danger-600 dark:text-danger-400"},info:{solid:"bg-info-100 text-info-800 dark:bg-info-900 dark:text-info-300",outline:"border border-info-300 text-info-700 bg-transparent dark:border-info-600 dark:text-info-400"},blue:{solid:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",outline:"border border-blue-300 text-blue-700 bg-transparent dark:border-blue-600 dark:text-blue-400"},green:{solid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",outline:"border border-green-300 text-green-700 bg-transparent dark:border-green-600 dark:text-green-400"},red:{solid:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",outline:"border border-red-300 text-red-700 bg-transparent dark:border-red-600 dark:text-red-400"},purple:{solid:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",outline:"border border-purple-300 text-purple-700 bg-transparent dark:border-purple-600 dark:text-purple-400"},gray:{solid:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",outline:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400"},outline:{solid:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400",outline:"border border-gray-300 text-gray-700 bg-transparent dark:border-gray-600 dark:text-gray-400"},destructive:{solid:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",outline:"border border-red-300 text-red-700 bg-transparent dark:border-red-600 dark:text-red-400"}},OR={xs:"px-1.5 py-0.5 text-xs font-medium",sm:"px-2 py-0.5 text-xs font-medium",md:"px-2.5 py-1 text-xs font-medium",lg:"px-3 py-1.5 text-sm font-medium"},RR={rounded:"rounded",pill:"rounded-full",square:"rounded-none"},Lt=de.forwardRef(({className:i,variant:e="default",size:r="md",shape:a="rounded",outline:l=!1,dismissible:c=!1,onDismiss:d,children:m,...y},f)=>p.jsxs("span",{ref:f,className:wt("inline-flex items-center justify-center","font-medium whitespace-nowrap","transition-colors duration-200",OR[r],RR[a],l?Qo[e]?.outline||Qo.default.outline:Qo[e]?.solid||Qo.default.solid,i),...y,children:[p.jsx("span",{className:"truncate",children:m}),c&&p.jsx("button",{onClick:d,className:wt("ml-1 -mr-1 flex-shrink-0","hover:bg-black hover:bg-opacity-10 rounded-full","focus:outline-none focus:bg-black focus:bg-opacity-20","transition-colors duration-150",r==="xs"&&"w-2 h-2",r==="sm"&&"w-3 h-3",r==="md"&&"w-4 h-4",r==="lg"&&"w-5 h-5"),children:p.jsx(M1,{className:"w-full h-full"})})]}));Lt.displayName="Badge";function DR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const MR=U.forwardRef(DR);function kR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const jR=U.forwardRef(kR);function IR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const Xv=U.forwardRef(IR);function LR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const kc=U.forwardRef(LR);function UR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const BR=U.forwardRef(UR);function PR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const zR=U.forwardRef(PR);function qR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const HR=U.forwardRef(qR);function FR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Wv=U.forwardRef(FR);function GR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const VR=U.forwardRef(GR);function $R({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Zv=U.forwardRef($R);function YR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const QR=U.forwardRef(YR);function KR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Xx=U.forwardRef(KR);function XR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const WR=U.forwardRef(XR);function ZR({title:i,titleId:e,...r},a){return U.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),i?U.createElement("title",{id:e},i):null,U.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Zc=U.forwardRef(ZR);var Ko={},Gs={},Xo={},Jv;function en(){if(Jv)return Xo;Jv=1,Object.defineProperty(Xo,"__esModule",{value:!0});function i(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function r(a,l){i(this,r),this.data=a,this.text=l.text||a,this.options=l};return Xo.default=e,Xo}var e_;function JR(){if(e_)return Gs;e_=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.CODE39=void 0;var i=(function(){function S(A,k){for(var L=0;L<k.length;L++){var V=k[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(A,V.key,V)}}return function(A,k,L){return k&&S(A.prototype,k),L&&S(A,L),A}})(),e=en(),r=a(e);function a(S){return S&&S.__esModule?S:{default:S}}function l(S,A){if(!(S instanceof A))throw new TypeError("Cannot call a class as a function")}function c(S,A){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:S}function d(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);S.prototype=Object.create(A&&A.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(S,A):S.__proto__=A)}var m=(function(S){d(A,S);function A(k,L){return l(this,A),k=k.toUpperCase(),L.mod43&&(k+=v(E(k))),c(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k,L))}return i(A,[{key:"encode",value:function(){for(var L=h("*"),V=0;V<this.data.length;V++)L+=h(this.data[V])+"0";return L+=h("*"),{data:L,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),A})(r.default),y=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],f=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function h(S){return _(b(S))}function _(S){return f[S].toString(2)}function v(S){return y[S]}function b(S){return y.indexOf(S)}function E(S){for(var A=0,k=0;k<S.length;k++)A+=b(S[k]);return A=A%43,A}return Gs.CODE39=m,Gs}var En={},Wo={},Zo={},We={},t_;function Tl(){if(t_)return We;t_=1,Object.defineProperty(We,"__esModule",{value:!0});var i;function e(y,f,h){return f in y?Object.defineProperty(y,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):y[f]=h,y}var r=We.SET_A=0,a=We.SET_B=1,l=We.SET_C=2;We.SHIFT=98;var c=We.START_A=103,d=We.START_B=104,m=We.START_C=105;return We.MODULO=103,We.STOP=106,We.FNC1=207,We.SET_BY_CODE=(i={},e(i,c,r),e(i,d,a),e(i,m,l),i),We.SWAP={101:r,100:a,99:l},We.A_START_CHAR="",We.B_START_CHAR="",We.C_START_CHAR="",We.A_CHARS="[\0-_-]",We.B_CHARS="[ --]",We.C_CHARS="(*[0-9]{2}*)",We.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],We}var n_;function vu(){if(n_)return Zo;n_=1,Object.defineProperty(Zo,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=en(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){c(this,h);var b=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_.substring(1),v));return b.bytes=_.split("").map(function(E){return E.charCodeAt(0)}),b}return i(h,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var v=this.bytes,b=v.shift()-105,E=a.SET_BY_CODE[b];if(E===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&v.unshift(a.FNC1);var S=h.next(v,1,E);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:h.getBar(b)+S.result+h.getBar((S.checksum+b)%a.MODULO)+h.getBar(a.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var v=this.options.ean128||!1;return typeof v=="string"&&(v=v.toLowerCase()==="true"),v}}],[{key:"getBar",value:function(v){return a.BARS[v]?a.BARS[v].toString():""}},{key:"correctIndex",value:function(v,b){if(b===a.SET_A){var E=v.shift();return E<32?E+64:E-32}else return b===a.SET_B?v.shift()-32:(v.shift()-48)*10+v.shift()-48}},{key:"next",value:function(v,b,E){if(!v.length)return{result:"",checksum:0};var S=void 0,A=void 0;if(v[0]>=200){A=v.shift()-105;var k=a.SWAP[A];k!==void 0?S=h.next(v,b+1,k):((E===a.SET_A||E===a.SET_B)&&A===a.SHIFT&&(v[0]=E===a.SET_A?v[0]>95?v[0]-96:v[0]:v[0]<32?v[0]+96:v[0]),S=h.next(v,b+1,E))}else A=h.correctIndex(v,E),S=h.next(v,b+1,E);var L=h.getBar(A),V=A*b;return{result:L+S.result,checksum:V+S.checksum}}}]),h})(r.default);return Zo.default=y,Zo}var Jo={},r_;function eD(){if(r_)return Jo;r_=1,Object.defineProperty(Jo,"__esModule",{value:!0});var i=Tl(),e=function(m){return m.match(new RegExp("^"+i.A_CHARS+"*"))[0].length},r=function(m){return m.match(new RegExp("^"+i.B_CHARS+"*"))[0].length},a=function(m){return m.match(new RegExp("^"+i.C_CHARS+"*"))[0]};function l(d,m){var y=m?i.A_CHARS:i.B_CHARS,f=d.match(new RegExp("^("+y+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(f)return f[1]+""+c(d.substring(f[1].length));var h=d.match(new RegExp("^"+y+"+"))[0];return h.length===d.length?d:h+String.fromCharCode(m?205:206)+l(d.substring(h.length),!m)}function c(d){var m=a(d),y=m.length;if(y===d.length)return d;d=d.substring(y);var f=e(d)>=r(d);return m+String.fromCharCode(f?206:205)+l(d,f)}return Jo.default=function(d){var m=void 0,y=a(d).length;if(y>=2)m=i.C_START_CHAR+c(d);else{var f=e(d)>r(d);m=(f?i.A_START_CHAR:i.B_START_CHAR)+l(d,f)}return m.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(h,_){return""+_})},Jo}var i_;function tD(){if(i_)return Wo;i_=1,Object.defineProperty(Wo,"__esModule",{value:!0});var i=vu(),e=l(i),r=eD(),a=l(r);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){if(c(this,h),/^[\x00-\x7F\xC8-\xD3]+$/.test(_))var b=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,(0,a.default)(_),v));else var b=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v));return d(b)}return h})(e.default);return Wo.default=y,Wo}var ec={},a_;function nD(){if(a_)return ec;a_=1,Object.defineProperty(ec,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=vu(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a.A_START_CHAR+_,v))}return i(h,[{key:"valid",value:function(){return new RegExp("^"+a.A_CHARS+"+$").test(this.data)}}]),h})(r.default);return ec.default=y,ec}var tc={},s_;function rD(){if(s_)return tc;s_=1,Object.defineProperty(tc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=vu(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a.B_START_CHAR+_,v))}return i(h,[{key:"valid",value:function(){return new RegExp("^"+a.B_CHARS+"+$").test(this.data)}}]),h})(r.default);return tc.default=y,tc}var nc={},l_;function iD(){if(l_)return nc;l_=1,Object.defineProperty(nc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=vu(),r=l(e),a=Tl();function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a.C_START_CHAR+_,v))}return i(h,[{key:"valid",value:function(){return new RegExp("^"+a.C_CHARS+"+$").test(this.data)}}]),h})(r.default);return nc.default=y,nc}var o_;function aD(){if(o_)return En;o_=1,Object.defineProperty(En,"__esModule",{value:!0}),En.CODE128C=En.CODE128B=En.CODE128A=En.CODE128=void 0;var i=tD(),e=y(i),r=nD(),a=y(r),l=rD(),c=y(l),d=iD(),m=y(d);function y(f){return f&&f.__esModule?f:{default:f}}return En.CODE128=e.default,En.CODE128A=a.default,En.CODE128B=c.default,En.CODE128C=m.default,En}var Tt={},rc={},rr={},c_;function Nl(){return c_||(c_=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.SIDE_BIN="101",rr.MIDDLE_BIN="01010",rr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},rr.EAN2_STRUCTURE=["LL","LG","GL","GG"],rr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],rr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),rr}var ic={},ac={},u_;function Al(){if(u_)return ac;u_=1,Object.defineProperty(ac,"__esModule",{value:!0});var i=Nl(),e=function(a,l,c){var d=a.split("").map(function(y,f){return i.BINARIES[l[f]]}).map(function(y,f){return y?y[a[f]]:""});if(c){var m=a.length-1;d=d.map(function(y,f){return f<m?y+c:y})}return d.join("")};return ac.default=e,ac}var d_;function Wx(){if(d_)return ic;d_=1,Object.defineProperty(ic,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),e=Nl(),r=Al(),a=d(r),l=en(),c=d(l);function d(_){return _&&_.__esModule?_:{default:_}}function m(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function y(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var h=(function(_){f(v,_);function v(b,E){m(this,v);var S=y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,E));return S.fontSize=!E.flat&&E.fontSize>E.width*10?E.width*10:E.fontSize,S.guardHeight=E.height+S.fontSize/2+E.textMargin,S}return i(v,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(E,S){return this.text.substr(E,S)}},{key:"leftEncode",value:function(E,S){return(0,a.default)(E,S)}},{key:"rightText",value:function(E,S){return this.text.substr(E,S)}},{key:"rightEncode",value:function(E,S){return(0,a.default)(E,S)}},{key:"encodeGuarded",value:function(){var E={fontSize:this.fontSize},S={height:this.guardHeight};return[{data:e.SIDE_BIN,options:S},{data:this.leftEncode(),text:this.leftText(),options:E},{data:e.MIDDLE_BIN,options:S},{data:this.rightEncode(),text:this.rightText(),options:E},{data:e.SIDE_BIN,options:S}]}},{key:"encodeFlat",value:function(){var E=[e.SIDE_BIN,this.leftEncode(),e.MIDDLE_BIN,this.rightEncode(),e.SIDE_BIN];return{data:E.join(""),text:this.text}}}]),v})(c.default);return ic.default=h,ic}var f_;function sD(){if(f_)return rc;f_=1,Object.defineProperty(rc,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),e=function _(v,b,E){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,b);if(S===void 0){var A=Object.getPrototypeOf(v);return A===null?void 0:_(A,b,E)}else{if("value"in S)return S.value;var k=S.get;return k===void 0?void 0:k.call(E)}},r=Nl(),a=Wx(),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function m(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function y(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var f=function(v){var b=v.substr(0,12).split("").map(function(E){return+E}).reduce(function(E,S,A){return A%2?E+S*3:E+S},0);return(10-b%10)%10},h=(function(_){y(v,_);function v(b,E){d(this,v),b.search(/^[0-9]{12}$/)!==-1&&(b+=f(b));var S=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,E));return S.lastChar=E.lastChar,S}return i(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===f(this.data)}},{key:"leftText",value:function(){return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var E=this.data.substr(1,6),S=r.EAN13_STRUCTURE[this.data[0]];return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftEncode",this).call(this,E,S)}},{key:"rightText",value:function(){return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var E=this.data.substr(7,6);return e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightEncode",this).call(this,E,"RRRRRR")}},{key:"encodeGuarded",value:function(){var E=e(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(E.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(E.push({data:"00"}),E.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),E}}]),v})(l.default);return rc.default=h,rc}var sc={},h_;function lD(){if(h_)return sc;h_=1,Object.defineProperty(sc,"__esModule",{value:!0});var i=(function(){function h(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&h(_.prototype,v),b&&h(_,b),_}})(),e=function h(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:h(S,v,b)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(b)}},r=Wx(),a=l(r);function l(h){return h&&h.__esModule?h:{default:h}}function c(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function d(h,_){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:h}function m(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);h.prototype=Object.create(_&&_.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(h,_):h.__proto__=_)}var y=function(_){var v=_.substr(0,7).split("").map(function(b){return+b}).reduce(function(b,E,S){return S%2?b+E:b+E*3},0);return(10-v%10)%10},f=(function(h){m(_,h);function _(v,b){return c(this,_),v.search(/^[0-9]{7}$/)!==-1&&(v+=y(v)),d(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,v,b))}return i(_,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===y(this.data)}},{key:"leftText",value:function(){return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var b=this.data.substr(0,4);return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftEncode",this).call(this,b,"LLLL")}},{key:"rightText",value:function(){return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var b=this.data.substr(4,4);return e(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightEncode",this).call(this,b,"RRRR")}}]),_})(a.default);return sc.default=f,sc}var lc={},m_;function oD(){if(m_)return lc;m_=1,Object.defineProperty(lc,"__esModule",{value:!0});var i=(function(){function v(b,E){for(var S=0;S<E.length;S++){var A=E[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(b,A.key,A)}}return function(b,E,S){return E&&v(b.prototype,E),S&&v(b,S),b}})(),e=Nl(),r=Al(),a=d(r),l=en(),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function m(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function y(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var h=function(b){var E=b.split("").map(function(S){return+S}).reduce(function(S,A,k){return k%2?S+A*9:S+A*3},0);return E%10},_=(function(v){f(b,v);function b(E,S){return m(this,b),y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,E,S))}return i(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var S=e.EAN5_STRUCTURE[h(this.data)];return{data:"1011"+(0,a.default)(this.data,S,"01"),text:this.text}}}]),b})(c.default);return lc.default=_,lc}var oc={},g_;function cD(){if(g_)return oc;g_=1,Object.defineProperty(oc,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),e=Nl(),r=Al(),a=d(r),l=en(),c=d(l);function d(_){return _&&_.__esModule?_:{default:_}}function m(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function y(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var h=(function(_){f(v,_);function v(b,E){return m(this,v),y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,E))}return i(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var E=e.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,a.default)(this.data,E,"01"),text:this.text}}}]),v})(c.default);return oc.default=h,oc}var Vs={},p_;function Zx(){if(p_)return Vs;p_=1,Object.defineProperty(Vs,"__esModule",{value:!0});var i=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})();Vs.checksum=h;var e=Al(),r=c(e),a=en(),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function m(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function y(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var f=(function(_){y(v,_);function v(b,E){d(this,v),b.search(/^[0-9]{11}$/)!==-1&&(b+=h(b));var S=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,E));return S.displayValue=E.displayValue,E.fontSize>E.width*10?S.fontSize=E.width*10:S.fontSize=E.fontSize,S.guardHeight=E.height+S.fontSize/2+E.textMargin,S}return i(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==h(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var E="";return E+="101",E+=(0,r.default)(this.data.substr(0,6),"LLLLLL"),E+="01010",E+=(0,r.default)(this.data.substr(6,6),"RRRRRR"),E+="101",{data:E,text:this.text}}},{key:"guardedEncoding",value:function(){var E=[];return this.displayValue&&E.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),E.push({data:"101"+(0,r.default)(this.data[0],"L"),options:{height:this.guardHeight}}),E.push({data:(0,r.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),E.push({data:"01010",options:{height:this.guardHeight}}),E.push({data:(0,r.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),E.push({data:(0,r.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&E.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),E}}]),v})(l.default);function h(_){var v=0,b;for(b=1;b<11;b+=2)v+=parseInt(_[b]);for(b=0;b<11;b+=2)v+=parseInt(_[b])*3;return(10-v%10)%10}return Vs.default=f,Vs}var cc={},y_;function uD(){if(y_)return cc;y_=1,Object.defineProperty(cc,"__esModule",{value:!0});var i=(function(){function E(S,A){for(var k=0;k<A.length;k++){var L=A[k];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(S,L.key,L)}}return function(S,A,k){return A&&E(S.prototype,A),k&&E(S,k),S}})(),e=Al(),r=d(e),a=en(),l=d(a),c=Zx();function d(E){return E&&E.__esModule?E:{default:E}}function m(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function y(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function f(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var h=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],_=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],v=(function(E){f(S,E);function S(A,k){m(this,S);var L=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,A,k));if(L.isValid=!1,A.search(/^[0-9]{6}$/)!==-1)L.middleDigits=A,L.upcA=b(A,"0"),L.text=k.text||""+L.upcA[0]+A+L.upcA[L.upcA.length-1],L.isValid=!0;else if(A.search(/^[01][0-9]{7}$/)!==-1)if(L.middleDigits=A.substring(1,A.length-1),L.upcA=b(L.middleDigits,A[0]),L.upcA[L.upcA.length-1]===A[A.length-1])L.isValid=!0;else return y(L);else return y(L);return L.displayValue=k.displayValue,k.fontSize>k.width*10?L.fontSize=k.width*10:L.fontSize=k.fontSize,L.guardHeight=k.height+L.fontSize/2+k.textMargin,L}return i(S,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var k="";return k+="101",k+=this.encodeMiddleDigits(),k+="010101",{data:k,text:this.text}}},{key:"guardedEncoding",value:function(){var k=[];return this.displayValue&&k.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),k.push({data:"101",options:{height:this.guardHeight}}),k.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),k.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&k.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),k}},{key:"encodeMiddleDigits",value:function(){var k=this.upcA[0],L=this.upcA[this.upcA.length-1],V=_[parseInt(L)][parseInt(k)];return(0,r.default)(this.middleDigits,V)}}]),S})(l.default);function b(E,S){for(var A=parseInt(E[E.length-1]),k=h[A],L="",V=0,Q=0;Q<k.length;Q++){var ae=k[Q];ae==="X"?L+=E[V++]:L+=ae}return L=""+S+L,""+L+(0,c.checksum)(L)}return cc.default=v,cc}var v_;function dD(){if(v_)return Tt;v_=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.UPCE=Tt.UPC=Tt.EAN2=Tt.EAN5=Tt.EAN8=Tt.EAN13=void 0;var i=sD(),e=v(i),r=lD(),a=v(r),l=oD(),c=v(l),d=cD(),m=v(d),y=Zx(),f=v(y),h=uD(),_=v(h);function v(b){return b&&b.__esModule?b:{default:b}}return Tt.EAN13=e.default,Tt.EAN8=a.default,Tt.EAN5=c.default,Tt.EAN2=m.default,Tt.UPC=f.default,Tt.UPCE=_.default,Tt}var mi={},uc={},ba={},__;function fD(){return __||(__=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.START_BIN="1010",ba.END_BIN="11101",ba.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),ba}var b_;function Jx(){if(b_)return uc;b_=1,Object.defineProperty(uc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=fD(),r=en(),a=l(r);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var v=this,b=this.data.match(/.{2}/g).map(function(E){return v.encodePair(E)}).join("");return{data:e.START_BIN+b+e.END_BIN,text:this.text}}},{key:"encodePair",value:function(v){var b=e.BINARIES[v[1]];return e.BINARIES[v[0]].split("").map(function(E,S){return(E==="1"?"111":"1")+(b[S]==="1"?"000":"0")}).join("")}}]),h})(a.default);return uc.default=y,uc}var dc={},x_;function hD(){if(x_)return dc;x_=1,Object.defineProperty(dc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=Jx(),r=a(e);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function c(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function d(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var m=function(h){var _=h.substr(0,13).split("").map(function(v){return parseInt(v,10)}).reduce(function(v,b,E){return v+b*(3-E%2*2)},0);return Math.ceil(_/10)*10-_},y=(function(f){d(h,f);function h(_,v){return l(this,h),_.search(/^[0-9]{13}$/)!==-1&&(_+=m(_)),c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v))}return i(h,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===m(this.data)}}]),h})(r.default);return dc.default=y,dc}var E_;function mD(){if(E_)return mi;E_=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.ITF14=mi.ITF=void 0;var i=Jx(),e=l(i),r=hD(),a=l(r);function l(c){return c&&c.__esModule?c:{default:c}}return mi.ITF=e.default,mi.ITF14=a.default,mi}var Kt={},fc={},w_;function Cl(){if(w_)return fc;w_=1,Object.defineProperty(fc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=en(),r=a(e);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function c(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function d(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var m=(function(f){d(h,f);function h(_,v){return l(this,h),c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v))}return i(h,[{key:"encode",value:function(){for(var v="110",b=0;b<this.data.length;b++){var E=parseInt(this.data[b]),S=E.toString(2);S=y(S,4-S.length);for(var A=0;A<S.length;A++)v+=S[A]=="0"?"100":"110"}return v+="1001",{data:v,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),h})(r.default);function y(f,h){for(var _=0;_<h;_++)f="0"+f;return f}return fc.default=m,fc}var hc={},$s={},S_;function _u(){if(S_)return $s;S_=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.mod10=i,$s.mod11=e;function i(r){for(var a=0,l=0;l<r.length;l++){var c=parseInt(r[l]);(l+r.length)%2===0?a+=c:a+=c*2%10+Math.floor(c*2/10)}return(10-a%10)%10}function e(r){for(var a=0,l=[2,3,4,5,6,7],c=0;c<r.length;c++){var d=parseInt(r[r.length-1-c]);a+=l[c%l.length]*d}return(11-a%11)%11}return $s}var T_;function gD(){if(T_)return hc;T_=1,Object.defineProperty(hc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=_u();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h+(0,r.mod10)(h),_))}return f})(e.default);return hc.default=m,hc}var mc={},N_;function pD(){if(N_)return mc;N_=1,Object.defineProperty(mc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=_u();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h+(0,r.mod11)(h),_))}return f})(e.default);return mc.default=m,mc}var gc={},A_;function yD(){if(A_)return gc;A_=1,Object.defineProperty(gc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=_u();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),h+=(0,r.mod10)(h),h+=(0,r.mod10)(h),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return f})(e.default);return gc.default=m,gc}var pc={},C_;function vD(){if(C_)return pc;C_=1,Object.defineProperty(pc,"__esModule",{value:!0});var i=Cl(),e=a(i),r=_u();function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),h+=(0,r.mod11)(h),h+=(0,r.mod10)(h),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return f})(e.default);return pc.default=m,pc}var O_;function _D(){if(O_)return Kt;O_=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.MSI1110=Kt.MSI1010=Kt.MSI11=Kt.MSI10=Kt.MSI=void 0;var i=Cl(),e=h(i),r=gD(),a=h(r),l=pD(),c=h(l),d=yD(),m=h(d),y=vD(),f=h(y);function h(_){return _&&_.__esModule?_:{default:_}}return Kt.MSI=e.default,Kt.MSI10=a.default,Kt.MSI11=c.default,Kt.MSI1010=m.default,Kt.MSI1110=f.default,Kt}var Ys={},R_;function bD(){if(R_)return Ys;R_=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.pharmacode=void 0;var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=en(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){l(this,f);var v=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_));return v.number=parseInt(h,10),v}return i(f,[{key:"encode",value:function(){for(var _=this.number,v="";!isNaN(_)&&_!=0;)_%2===0?(v="11100"+v,_=(_-2)/2):(v="100"+v,_=(_-1)/2);return v=v.slice(0,-2),{data:v,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),f})(r.default);return Ys.pharmacode=m,Ys}var Qs={},D_;function xD(){if(D_)return Qs;D_=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.codabar=void 0;var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=en(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){l(this,f),h.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(h="A"+h+"A");var v=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h.toUpperCase(),_));return v.text=v.options.text||v.text.replace(/[A-D]/g,""),v}return i(f,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var _=[],v=this.getEncodings(),b=0;b<this.data.length;b++)_.push(v[this.data.charAt(b)]),b!==this.data.length-1&&_.push("0");return{text:this.text,data:_.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),f})(r.default);return Qs.codabar=m,Qs}var gi={},yc={},xa={},M_;function ED(){return M_||(M_=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""],xa.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],xa.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),xa}var k_;function eE(){if(k_)return yc;k_=1,Object.defineProperty(yc,"__esModule",{value:!0});var i=(function(){function f(h,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,_,v){return _&&f(h.prototype,_),v&&f(h,v),h}})(),e=ED(),r=en(),a=l(r);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function d(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}function m(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}var y=(function(f){m(h,f);function h(_,v){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,_,v))}return i(h,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var v=this.data.split("").flatMap(function(A){return e.MULTI_SYMBOLS[A]||A}),b=v.map(function(A){return h.getEncoding(A)}).join(""),E=h.checksum(v,20),S=h.checksum(v.concat(E),15);return{text:this.text,data:h.getEncoding("")+b+h.getEncoding(E)+h.getEncoding(S)+h.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(v){return e.BINARIES[h.symbolValue(v)]}},{key:"getSymbol",value:function(v){return e.SYMBOLS[v]}},{key:"symbolValue",value:function(v){return e.SYMBOLS.indexOf(v)}},{key:"checksum",value:function(v,b){var E=v.slice().reverse().reduce(function(S,A,k){var L=k%b+1;return S+h.symbolValue(A)*L},0);return h.getSymbol(E%47)}}]),h})(a.default);return yc.default=y,yc}var vc={},j_;function wD(){if(j_)return vc;j_=1,Object.defineProperty(vc,"__esModule",{value:!0});var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=eE(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return i(f,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),f})(r.default);return vc.default=m,vc}var I_;function SD(){if(I_)return gi;I_=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.CODE93FullASCII=gi.CODE93=void 0;var i=eE(),e=l(i),r=wD(),a=l(r);function l(c){return c&&c.__esModule?c:{default:c}}return gi.CODE93=e.default,gi.CODE93FullASCII=a.default,gi}var Ks={},L_;function TD(){if(L_)return Ks;L_=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.GenericBarcode=void 0;var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=en(),r=a(e);function a(y){return y&&y.__esModule?y:{default:y}}function l(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function c(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function d(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var m=(function(y){d(f,y);function f(h,_){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h,_))}return i(f,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),f})(r.default);return Ks.GenericBarcode=m,Ks}var U_;function ND(){if(U_)return Ko;U_=1,Object.defineProperty(Ko,"__esModule",{value:!0});var i=JR(),e=aD(),r=dD(),a=mD(),l=_D(),c=bD(),d=xD(),m=SD(),y=TD();return Ko.default={CODE39:i.CODE39,CODE128:e.CODE128,CODE128A:e.CODE128A,CODE128B:e.CODE128B,CODE128C:e.CODE128C,EAN13:r.EAN13,EAN8:r.EAN8,EAN5:r.EAN5,EAN2:r.EAN2,UPC:r.UPC,UPCE:r.UPCE,ITF14:a.ITF14,ITF:a.ITF,MSI:l.MSI,MSI10:l.MSI10,MSI11:l.MSI11,MSI1010:l.MSI1010,MSI1110:l.MSI1110,pharmacode:c.pharmacode,codabar:d.codabar,CODE93:m.CODE93,CODE93FullASCII:m.CODE93FullASCII,GenericBarcode:y.GenericBarcode},Ko}var _c={},B_;function bu(){if(B_)return _c;B_=1,Object.defineProperty(_c,"__esModule",{value:!0});var i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e};return _c.default=function(e,r){return i({},e,r)},_c}var bc={},P_;function AD(){if(P_)return bc;P_=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.default=i;function i(e){var r=[];function a(l){if(Array.isArray(l))for(var c=0;c<l.length;c++)a(l[c]);else l.text=l.text||"",l.data=l.data||"",r.push(l)}return a(e),r}return bc}var xc={},z_;function CD(){if(z_)return xc;z_=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.default=i;function i(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}return xc}var Ec={},wc={},Sc={},q_;function tE(){if(q_)return Sc;q_=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.default=i;function i(e){var r=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var a in r)r.hasOwnProperty(a)&&(a=r[a],typeof e[a]=="string"&&(e[a]=parseInt(e[a],10)));return typeof e.displayValue=="string"&&(e.displayValue=e.displayValue!="false"),e}return Sc}var Tc={},H_;function nE(){if(H_)return Tc;H_=1,Object.defineProperty(Tc,"__esModule",{value:!0});var i={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return Tc.default=i,Tc}var F_;function OD(){if(F_)return wc;F_=1,Object.defineProperty(wc,"__esModule",{value:!0});var i=tE(),e=l(i),r=nE(),a=l(r);function l(d){return d&&d.__esModule?d:{default:d}}function c(d){var m={};for(var y in a.default)a.default.hasOwnProperty(y)&&(d.hasAttribute("jsbarcode-"+y.toLowerCase())&&(m[y]=d.getAttribute("jsbarcode-"+y.toLowerCase())),d.hasAttribute("data-"+y.toLowerCase())&&(m[y]=d.getAttribute("data-"+y.toLowerCase())));return m.value=d.getAttribute("jsbarcode-value")||d.getAttribute("data-value"),m=(0,e.default)(m),m}return wc.default=c,wc}var Nc={},Ac={},Xt={},G_;function rE(){if(G_)return Xt;G_=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.getTotalWidthOfEncodings=Xt.calculateEncodingAttributes=Xt.getBarcodePadding=Xt.getEncodingHeight=Xt.getMaximumHeightOfEncodings=void 0;var i=bu(),e=r(i);function r(f){return f&&f.__esModule?f:{default:f}}function a(f,h){return h.height+(h.displayValue&&f.text.length>0?h.fontSize+h.textMargin:0)+h.marginTop+h.marginBottom}function l(f,h,_){if(_.displayValue&&h<f){if(_.textAlign=="center")return Math.floor((f-h)/2);if(_.textAlign=="left")return 0;if(_.textAlign=="right")return Math.floor(f-h)}return 0}function c(f,h,_){for(var v=0;v<f.length;v++){var b=f[v],E=(0,e.default)(h,b.options),S;E.displayValue?S=y(b.text,E,_):S=0;var A=b.data.length*E.width;b.width=Math.ceil(Math.max(S,A)),b.height=a(b,E),b.barcodePadding=l(S,A,E)}}function d(f){for(var h=0,_=0;_<f.length;_++)h+=f[_].width;return h}function m(f){for(var h=0,_=0;_<f.length;_++)f[_].height>h&&(h=f[_].height);return h}function y(f,h,_){var v;if(_)v=_;else if(typeof document<"u")v=document.createElement("canvas").getContext("2d");else return 0;v.font=h.fontOptions+" "+h.fontSize+"px "+h.font;var b=v.measureText(f);if(!b)return 0;var E=b.width;return E}return Xt.getMaximumHeightOfEncodings=m,Xt.getEncodingHeight=a,Xt.getBarcodePadding=l,Xt.calculateEncodingAttributes=c,Xt.getTotalWidthOfEncodings=d,Xt}var V_;function RD(){if(V_)return Ac;V_=1,Object.defineProperty(Ac,"__esModule",{value:!0});var i=(function(){function m(y,f){for(var h=0;h<f.length;h++){var _=f[h];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,f,h){return f&&m(y.prototype,f),h&&m(y,h),y}})(),e=bu(),r=l(e),a=rE();function l(m){return m&&m.__esModule?m:{default:m}}function c(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}var d=(function(){function m(y,f,h){c(this,m),this.canvas=y,this.encodings=f,this.options=h}return i(m,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var f=0;f<this.encodings.length;f++){var h=(0,r.default)(this.options,this.encodings[f].options);this.drawCanvasBarcode(h,this.encodings[f]),this.drawCanvasText(h,this.encodings[f]),this.moveCanvasDrawing(this.encodings[f])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var f=this.canvas.getContext("2d");f.save(),(0,a.calculateEncodingAttributes)(this.encodings,this.options,f);var h=(0,a.getTotalWidthOfEncodings)(this.encodings),_=(0,a.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=h+this.options.marginLeft+this.options.marginRight,this.canvas.height=_,f.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(f.fillStyle=this.options.background,f.fillRect(0,0,this.canvas.width,this.canvas.height)),f.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(f,h){var _=this.canvas.getContext("2d"),v=h.data,b;f.textPosition=="top"?b=f.marginTop+f.fontSize+f.textMargin:b=f.marginTop,_.fillStyle=f.lineColor;for(var E=0;E<v.length;E++){var S=E*f.width+h.barcodePadding;v[E]==="1"?_.fillRect(S,b,f.width,f.height):v[E]&&_.fillRect(S,b,f.width,f.height*v[E])}}},{key:"drawCanvasText",value:function(f,h){var _=this.canvas.getContext("2d"),v=f.fontOptions+" "+f.fontSize+"px "+f.font;if(f.displayValue){var b,E;f.textPosition=="top"?E=f.marginTop+f.fontSize-f.textMargin:E=f.height+f.textMargin+f.marginTop+f.fontSize,_.font=v,f.textAlign=="left"||h.barcodePadding>0?(b=0,_.textAlign="left"):f.textAlign=="right"?(b=h.width-1,_.textAlign="right"):(b=h.width/2,_.textAlign="center"),_.fillText(h.text,b,E)}}},{key:"moveCanvasDrawing",value:function(f){var h=this.canvas.getContext("2d");h.translate(f.width,0)}},{key:"restoreCanvas",value:function(){var f=this.canvas.getContext("2d");f.restore()}}]),m})();return Ac.default=d,Ac}var Cc={},$_;function DD(){if($_)return Cc;$_=1,Object.defineProperty(Cc,"__esModule",{value:!0});var i=(function(){function y(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&y(f.prototype,h),_&&y(f,_),f}})(),e=bu(),r=l(e),a=rE();function l(y){return y&&y.__esModule?y:{default:y}}function c(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}var d="http://www.w3.org/2000/svg",m=(function(){function y(f,h,_){c(this,y),this.svg=f,this.encodings=h,this.options=_,this.document=_.xmlDocument||document}return i(y,[{key:"render",value:function(){var h=this.options.marginLeft;this.prepareSVG();for(var _=0;_<this.encodings.length;_++){var v=this.encodings[_],b=(0,r.default)(this.options,v.options),E=this.createGroup(h,b.marginTop,this.svg);this.setGroupOptions(E,b),this.drawSvgBarcode(E,b,v),this.drawSVGText(E,b,v),h+=v.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,a.calculateEncodingAttributes)(this.encodings,this.options);var h=(0,a.getTotalWidthOfEncodings)(this.encodings),_=(0,a.getMaximumHeightOfEncodings)(this.encodings),v=h+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(v,_),this.options.background&&this.drawRect(0,0,v,_,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(h,_,v){var b=v.data,E;_.textPosition=="top"?E=_.fontSize+_.textMargin:E=0;for(var S=0,A=0,k=0;k<b.length;k++)A=k*_.width+v.barcodePadding,b[k]==="1"?S++:S>0&&(this.drawRect(A-_.width*S,E,_.width*S,_.height,h),S=0);S>0&&this.drawRect(A-_.width*(S-1),E,_.width*S,_.height,h)}},{key:"drawSVGText",value:function(h,_,v){var b=this.document.createElementNS(d,"text");if(_.displayValue){var E,S;b.setAttribute("style","font:"+_.fontOptions+" "+_.fontSize+"px "+_.font),_.textPosition=="top"?S=_.fontSize-_.textMargin:S=_.height+_.textMargin+_.fontSize,_.textAlign=="left"||v.barcodePadding>0?(E=0,b.setAttribute("text-anchor","start")):_.textAlign=="right"?(E=v.width-1,b.setAttribute("text-anchor","end")):(E=v.width/2,b.setAttribute("text-anchor","middle")),b.setAttribute("x",E),b.setAttribute("y",S),b.appendChild(this.document.createTextNode(v.text)),h.appendChild(b)}}},{key:"setSvgAttributes",value:function(h,_){var v=this.svg;v.setAttribute("width",h+"px"),v.setAttribute("height",_+"px"),v.setAttribute("x","0px"),v.setAttribute("y","0px"),v.setAttribute("viewBox","0 0 "+h+" "+_),v.setAttribute("xmlns",d),v.setAttribute("version","1.1"),v.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(h,_,v){var b=this.document.createElementNS(d,"g");return b.setAttribute("transform","translate("+h+", "+_+")"),v.appendChild(b),b}},{key:"setGroupOptions",value:function(h,_){h.setAttribute("style","fill:"+_.lineColor+";")}},{key:"drawRect",value:function(h,_,v,b,E){var S=this.document.createElementNS(d,"rect");return S.setAttribute("x",h),S.setAttribute("y",_),S.setAttribute("width",v),S.setAttribute("height",b),E.appendChild(S),S}}]),y})();return Cc.default=m,Cc}var Oc={},Y_;function MD(){if(Y_)return Oc;Y_=1,Object.defineProperty(Oc,"__esModule",{value:!0});var i=(function(){function a(l,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}return function(l,c,d){return c&&a(l.prototype,c),d&&a(l,d),l}})();function e(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var r=(function(){function a(l,c,d){e(this,a),this.object=l,this.encodings=c,this.options=d}return i(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a})();return Oc.default=r,Oc}var Q_;function kD(){if(Q_)return Nc;Q_=1,Object.defineProperty(Nc,"__esModule",{value:!0});var i=RD(),e=d(i),r=DD(),a=d(r),l=MD(),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}return Nc.default={CanvasRenderer:e.default,SVGRenderer:a.default,ObjectRenderer:c.default},Nc}var Ea={},K_;function iE(){if(K_)return Ea;K_=1,Object.defineProperty(Ea,"__esModule",{value:!0});function i(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function e(d,m){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:d}function r(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(d,m):d.__proto__=m)}var a=(function(d){r(m,d);function m(y,f){i(this,m);var h=e(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return h.name="InvalidInputException",h.symbology=y,h.input=f,h.message='"'+h.input+'" is not a valid input for '+h.symbology,h}return m})(Error),l=(function(d){r(m,d);function m(){i(this,m);var y=e(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return y.name="InvalidElementException",y.message="Not supported type to render on",y}return m})(Error),c=(function(d){r(m,d);function m(){i(this,m);var y=e(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return y.name="NoElementException",y.message="No element to render on.",y}return m})(Error);return Ea.InvalidInputException=a,Ea.InvalidElementException=l,Ea.NoElementException=c,Ea}var X_;function jD(){if(X_)return Ec;X_=1,Object.defineProperty(Ec,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},e=OD(),r=d(e),a=kD(),l=d(a),c=iE();function d(h){return h&&h.__esModule?h:{default:h}}function m(h){if(typeof h=="string")return y(h);if(Array.isArray(h)){for(var _=[],v=0;v<h.length;v++)_.push(m(h[v]));return _}else{if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLImageElement)return f(h);if(h&&h.nodeName&&h.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&h instanceof SVGElement)return{element:h,options:(0,r.default)(h),renderer:l.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement)return{element:h,options:(0,r.default)(h),renderer:l.default.CanvasRenderer};if(h&&h.getContext)return{element:h,renderer:l.default.CanvasRenderer};if(h&&(typeof h>"u"?"undefined":i(h))==="object"&&!h.nodeName)return{element:h,renderer:l.default.ObjectRenderer};throw new c.InvalidElementException}}function y(h){var _=document.querySelectorAll(h);if(_.length!==0){for(var v=[],b=0;b<_.length;b++)v.push(m(_[b]));return v}}function f(h){var _=document.createElement("canvas");return{element:_,options:(0,r.default)(h),renderer:l.default.CanvasRenderer,afterRender:function(){h.setAttribute("src",_.toDataURL())}}}return Ec.default=m,Ec}var Rc={},W_;function ID(){if(W_)return Rc;W_=1,Object.defineProperty(Rc,"__esModule",{value:!0});var i=(function(){function a(l,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}return function(l,c,d){return c&&a(l.prototype,c),d&&a(l,d),l}})();function e(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var r=(function(){function a(l){e(this,a),this.api=l}return i(a,[{key:"handleCatch",value:function(c){if(c.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw c.message;else throw c;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(c){try{var d=c.apply(void 0,arguments);return this.api._options.valid(!0),d}catch(m){return this.handleCatch(m),this.api}}}]),a})();return Rc.default=r,Rc}var nh,Z_;function LD(){if(Z_)return nh;Z_=1;var i=ND(),e=k(i),r=bu(),a=k(r),l=AD(),c=k(l),d=CD(),m=k(d),y=jD(),f=k(y),h=tE(),_=k(h),v=ID(),b=k(v),E=iE(),S=nE(),A=k(S);function k(G){return G&&G.__esModule?G:{default:G}}var L=function(){},V=function(F,$,Y){var Z=new L;if(typeof F>"u")throw Error("No element to render on was provided.");return Z._renderProperties=(0,f.default)(F),Z._encodings=[],Z._options=A.default,Z._errorHandler=new b.default(Z),typeof $<"u"&&(Y=Y||{},Y.format||(Y.format=ee()),Z.options(Y)[Y.format]($,Y).render()),Z};V.getModule=function(G){return e.default[G]};for(var Q in e.default)e.default.hasOwnProperty(Q)&&ae(e.default,Q);function ae(G,F){L.prototype[F]=L.prototype[F.toUpperCase()]=L.prototype[F.toLowerCase()]=function($,Y){var Z=this;return Z._errorHandler.wrapBarcodeCall(function(){Y.text=typeof Y.text>"u"?void 0:""+Y.text;var q=(0,a.default)(Z._options,Y);q=(0,_.default)(q);var ge=G[F],B=X($,ge,q);return Z._encodings.push(B),Z})}}function X(G,F,$){G=""+G;var Y=new F(G,$);if(!Y.valid())throw new E.InvalidInputException(Y.constructor.name,G);var Z=Y.encode();Z=(0,c.default)(Z);for(var q=0;q<Z.length;q++)Z[q].options=(0,a.default)($,Z[q].options);return Z}function ee(){return e.default.CODE128?"CODE128":Object.keys(e.default)[0]}L.prototype.options=function(G){return this._options=(0,a.default)(this._options,G),this},L.prototype.blank=function(G){var F=new Array(G+1).join("0");return this._encodings.push({data:F}),this},L.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var G;for(var F in this._renderProperties){G=this._renderProperties[F];var $=(0,a.default)(this._options,G.options);$.format=="auto"&&($.format=ee()),this._errorHandler.wrapBarcodeCall(function(){var Y=$.value,Z=e.default[$.format.toUpperCase()],q=X(Y,Z,$);J(G,q,$)})}}},L.prototype.render=function(){if(!this._renderProperties)throw new E.NoElementException;if(Array.isArray(this._renderProperties))for(var G=0;G<this._renderProperties.length;G++)J(this._renderProperties[G],this._encodings,this._options);else J(this._renderProperties,this._encodings,this._options);return this},L.prototype._defaults=A.default;function J(G,F,$){F=(0,c.default)(F);for(var Y=0;Y<F.length;Y++)F[Y].options=(0,a.default)($,F[Y].options),(0,m.default)(F[Y].options);(0,m.default)($);var Z=G.renderer,q=new Z(G.element,F,$);q.render(),G.afterRender&&G.afterRender()}return typeof window<"u"&&(window.JsBarcode=V),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(G,F){var $=[];return jQuery(this).each(function(){$.push(this)}),V($,G,F)}),nh=V,nh}var UD=LD();const J_=D1(UD);var wa={},rh,e1;function BD(){return e1||(e1=1,rh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),rh}var ih={},jr={},t1;function Ri(){if(t1)return jr;t1=1;let i;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return jr.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17},jr.getSymbolTotalCodewords=function(a){return e[a]},jr.getBCHDigit=function(r){let a=0;for(;r!==0;)a++,r>>>=1;return a},jr.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');i=a},jr.isKanjiModeEnabled=function(){return typeof i<"u"},jr.toSJIS=function(a){return i(a)},jr}var ah={},n1;function Fm(){return n1||(n1=1,(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+r)}}i.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},i.from=function(a,l){if(i.isValid(a))return a;try{return e(a)}catch{return l}}})(ah)),ah}var sh,r1;function PD(){if(r1)return sh;r1=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)===1},put:function(e,r){for(let a=0;a<r;a++)this.putBit((e>>>r-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},sh=i,sh}var lh,i1;function zD(){if(i1)return lh;i1=1;function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return i.prototype.set=function(e,r,a,l){const c=e*this.size+r;this.data[c]=a,l&&(this.reservedBit[c]=!0)},i.prototype.get=function(e,r){return this.data[e*this.size+r]},i.prototype.xor=function(e,r,a){this.data[e*this.size+r]^=a},i.prototype.isReserved=function(e,r){return this.reservedBit[e*this.size+r]},lh=i,lh}var oh={},a1;function qD(){return a1||(a1=1,(function(i){const e=Ri().getSymbolSize;i.getRowColCoords=function(a){if(a===1)return[];const l=Math.floor(a/7)+2,c=e(a),d=c===145?26:Math.ceil((c-13)/(2*l-2))*2,m=[c-7];for(let y=1;y<l-1;y++)m[y]=m[y-1]-d;return m.push(6),m.reverse()},i.getPositions=function(a){const l=[],c=i.getRowColCoords(a),d=c.length;for(let m=0;m<d;m++)for(let y=0;y<d;y++)m===0&&y===0||m===0&&y===d-1||m===d-1&&y===0||l.push([c[m],c[y]]);return l}})(oh)),oh}var ch={},s1;function HD(){if(s1)return ch;s1=1;const i=Ri().getSymbolSize,e=7;return ch.getPositions=function(a){const l=i(a);return[[0,0],[l-e,0],[0,l-e]]},ch}var uh={},l1;function FD(){return l1||(l1=1,(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};i.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},i.from=function(l){return i.isValid(l)?parseInt(l,10):void 0},i.getPenaltyN1=function(l){const c=l.size;let d=0,m=0,y=0,f=null,h=null;for(let _=0;_<c;_++){m=y=0,f=h=null;for(let v=0;v<c;v++){let b=l.get(_,v);b===f?m++:(m>=5&&(d+=e.N1+(m-5)),f=b,m=1),b=l.get(v,_),b===h?y++:(y>=5&&(d+=e.N1+(y-5)),h=b,y=1)}m>=5&&(d+=e.N1+(m-5)),y>=5&&(d+=e.N1+(y-5))}return d},i.getPenaltyN2=function(l){const c=l.size;let d=0;for(let m=0;m<c-1;m++)for(let y=0;y<c-1;y++){const f=l.get(m,y)+l.get(m,y+1)+l.get(m+1,y)+l.get(m+1,y+1);(f===4||f===0)&&d++}return d*e.N2},i.getPenaltyN3=function(l){const c=l.size;let d=0,m=0,y=0;for(let f=0;f<c;f++){m=y=0;for(let h=0;h<c;h++)m=m<<1&2047|l.get(f,h),h>=10&&(m===1488||m===93)&&d++,y=y<<1&2047|l.get(h,f),h>=10&&(y===1488||y===93)&&d++}return d*e.N3},i.getPenaltyN4=function(l){let c=0;const d=l.data.length;for(let y=0;y<d;y++)c+=l.data[y];return Math.abs(Math.ceil(c*100/d/5)-10)*e.N4};function r(a,l,c){switch(a){case i.Patterns.PATTERN000:return(l+c)%2===0;case i.Patterns.PATTERN001:return l%2===0;case i.Patterns.PATTERN010:return c%3===0;case i.Patterns.PATTERN011:return(l+c)%3===0;case i.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(c/3))%2===0;case i.Patterns.PATTERN101:return l*c%2+l*c%3===0;case i.Patterns.PATTERN110:return(l*c%2+l*c%3)%2===0;case i.Patterns.PATTERN111:return(l*c%3+(l+c)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}i.applyMask=function(l,c){const d=c.size;for(let m=0;m<d;m++)for(let y=0;y<d;y++)c.isReserved(y,m)||c.xor(y,m,r(l,y,m))},i.getBestMask=function(l,c){const d=Object.keys(i.Patterns).length;let m=0,y=1/0;for(let f=0;f<d;f++){c(f),i.applyMask(f,l);const h=i.getPenaltyN1(l)+i.getPenaltyN2(l)+i.getPenaltyN3(l)+i.getPenaltyN4(l);i.applyMask(f,l),h<y&&(y=h,m=f)}return m}})(uh)),uh}var Dc={},o1;function aE(){if(o1)return Dc;o1=1;const i=Fm(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Dc.getBlocksCount=function(l,c){switch(c){case i.L:return e[(l-1)*4+0];case i.M:return e[(l-1)*4+1];case i.Q:return e[(l-1)*4+2];case i.H:return e[(l-1)*4+3];default:return}},Dc.getTotalCodewordsCount=function(l,c){switch(c){case i.L:return r[(l-1)*4+0];case i.M:return r[(l-1)*4+1];case i.Q:return r[(l-1)*4+2];case i.H:return r[(l-1)*4+3];default:return}},Dc}var dh={},Xs={},c1;function GD(){if(c1)return Xs;c1=1;const i=new Uint8Array(512),e=new Uint8Array(256);return(function(){let a=1;for(let l=0;l<255;l++)i[l]=a,e[a]=l,a<<=1,a&256&&(a^=285);for(let l=255;l<512;l++)i[l]=i[l-255]})(),Xs.log=function(a){if(a<1)throw new Error("log("+a+")");return e[a]},Xs.exp=function(a){return i[a]},Xs.mul=function(a,l){return a===0||l===0?0:i[e[a]+e[l]]},Xs}var u1;function VD(){return u1||(u1=1,(function(i){const e=GD();i.mul=function(a,l){const c=new Uint8Array(a.length+l.length-1);for(let d=0;d<a.length;d++)for(let m=0;m<l.length;m++)c[d+m]^=e.mul(a[d],l[m]);return c},i.mod=function(a,l){let c=new Uint8Array(a);for(;c.length-l.length>=0;){const d=c[0];for(let y=0;y<l.length;y++)c[y]^=e.mul(l[y],d);let m=0;for(;m<c.length&&c[m]===0;)m++;c=c.slice(m)}return c},i.generateECPolynomial=function(a){let l=new Uint8Array([1]);for(let c=0;c<a;c++)l=i.mul(l,new Uint8Array([1,e.exp(c)]));return l}})(dh)),dh}var fh,d1;function $D(){if(d1)return fh;d1=1;const i=VD();function e(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(a){this.degree=a,this.genPoly=i.generateECPolynomial(this.degree)},e.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(a.length+this.degree);l.set(a);const c=i.mod(l,this.genPoly),d=this.degree-c.length;if(d>0){const m=new Uint8Array(this.degree);return m.set(c,d),m}return c},fh=e,fh}var hh={},mh={},gh={},f1;function sE(){return f1||(f1=1,gh.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),gh}var Un={},h1;function lE(){if(h1)return Un;h1=1;const i="[0-9]+",e="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Un.KANJI=new RegExp(r,"g"),Un.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Un.BYTE=new RegExp(a,"g"),Un.NUMERIC=new RegExp(i,"g"),Un.ALPHANUMERIC=new RegExp(e,"g");const l=new RegExp("^"+r+"$"),c=new RegExp("^"+i+"$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Un.testKanji=function(y){return l.test(y)},Un.testNumeric=function(y){return c.test(y)},Un.testAlphanumeric=function(y){return d.test(y)},Un}var m1;function Di(){return m1||(m1=1,(function(i){const e=sE(),r=lE();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(c,d){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!e.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?c.ccBits[0]:d<27?c.ccBits[1]:c.ccBits[2]},i.getBestModeForData=function(c){return r.testNumeric(c)?i.NUMERIC:r.testAlphanumeric(c)?i.ALPHANUMERIC:r.testKanji(c)?i.KANJI:i.BYTE},i.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},i.isValid=function(c){return c&&c.bit&&c.ccBits};function a(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+l)}}i.from=function(c,d){if(i.isValid(c))return c;try{return a(c)}catch{return d}}})(mh)),mh}var g1;function YD(){return g1||(g1=1,(function(i){const e=Ri(),r=aE(),a=Fm(),l=Di(),c=sE(),d=7973,m=e.getBCHDigit(d);function y(v,b,E){for(let S=1;S<=40;S++)if(b<=i.getCapacity(S,E,v))return S}function f(v,b){return l.getCharCountIndicator(v,b)+4}function h(v,b){let E=0;return v.forEach(function(S){const A=f(S.mode,b);E+=A+S.getBitsLength()}),E}function _(v,b){for(let E=1;E<=40;E++)if(h(v,E)<=i.getCapacity(E,b,l.MIXED))return E}i.from=function(b,E){return c.isValid(b)?parseInt(b,10):E},i.getCapacity=function(b,E,S){if(!c.isValid(b))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=l.BYTE);const A=e.getSymbolTotalCodewords(b),k=r.getTotalCodewordsCount(b,E),L=(A-k)*8;if(S===l.MIXED)return L;const V=L-f(S,b);switch(S){case l.NUMERIC:return Math.floor(V/10*3);case l.ALPHANUMERIC:return Math.floor(V/11*2);case l.KANJI:return Math.floor(V/13);case l.BYTE:default:return Math.floor(V/8)}},i.getBestVersionForData=function(b,E){let S;const A=a.from(E,a.M);if(Array.isArray(b)){if(b.length>1)return _(b,A);if(b.length===0)return 1;S=b[0]}else S=b;return y(S.mode,S.getLength(),A)},i.getEncodedBits=function(b){if(!c.isValid(b)||b<7)throw new Error("Invalid QR Code version");let E=b<<12;for(;e.getBCHDigit(E)-m>=0;)E^=d<<e.getBCHDigit(E)-m;return b<<12|E}})(hh)),hh}var ph={},p1;function QD(){if(p1)return ph;p1=1;const i=Ri(),e=1335,r=21522,a=i.getBCHDigit(e);return ph.getEncodedBits=function(c,d){const m=c.bit<<3|d;let y=m<<10;for(;i.getBCHDigit(y)-a>=0;)y^=e<<i.getBCHDigit(y)-a;return(m<<10|y)^r},ph}var yh={},vh,y1;function KD(){if(y1)return vh;y1=1;const i=Di();function e(r){this.mode=i.NUMERIC,this.data=r.toString()}return e.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){let l,c,d;for(l=0;l+3<=this.data.length;l+=3)c=this.data.substr(l,3),d=parseInt(c,10),a.put(d,10);const m=this.data.length-l;m>0&&(c=this.data.substr(l),d=parseInt(c,10),a.put(d,m*3+1))},vh=e,vh}var _h,v1;function XD(){if(v1)return _h;v1=1;const i=Di(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(a){this.mode=i.ALPHANUMERIC,this.data=a}return r.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){let c;for(c=0;c+2<=this.data.length;c+=2){let d=e.indexOf(this.data[c])*45;d+=e.indexOf(this.data[c+1]),l.put(d,11)}this.data.length%2&&l.put(e.indexOf(this.data[c]),6)},_h=r,_h}var bh,_1;function WD(){if(_1)return bh;_1=1;const i=Di();function e(r){this.mode=i.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return e.getBitsLength=function(a){return a*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let a=0,l=this.data.length;a<l;a++)r.put(this.data[a],8)},bh=e,bh}var xh,b1;function ZD(){if(b1)return xh;b1=1;const i=Di(),e=Ri();function r(a){this.mode=i.KANJI,this.data=a}return r.getBitsLength=function(l){return l*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(a){let l;for(l=0;l<this.data.length;l++){let c=e.toSJIS(this.data[l]);if(c>=33088&&c<=40956)c-=33088;else if(c>=57408&&c<=60351)c-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);c=(c>>>8&255)*192+(c&255),a.put(c,13)}},xh=r,xh}var Eh={exports:{}},x1;function JD(){return x1||(x1=1,(function(i){var e={single_source_shortest_paths:function(r,a,l){var c={},d={};d[a]=0;var m=e.PriorityQueue.make();m.push(a,0);for(var y,f,h,_,v,b,E,S,A;!m.empty();){y=m.pop(),f=y.value,_=y.cost,v=r[f]||{};for(h in v)v.hasOwnProperty(h)&&(b=v[h],E=_+b,S=d[h],A=typeof d[h]>"u",(A||S>E)&&(d[h]=E,m.push(h,E),c[h]=f))}if(typeof l<"u"&&typeof d[l]>"u"){var k=["Could not find a path from ",a," to ",l,"."].join("");throw new Error(k)}return c},extract_shortest_path_from_predecessor_list:function(r,a){for(var l=[],c=a;c;)l.push(c),r[c],c=r[c];return l.reverse(),l},find_path:function(r,a,l){var c=e.single_source_shortest_paths(r,a,l);return e.extract_shortest_path_from_predecessor_list(c,l)},PriorityQueue:{make:function(r){var a=e.PriorityQueue,l={},c;r=r||{};for(c in a)a.hasOwnProperty(c)&&(l[c]=a[c]);return l.queue=[],l.sorter=r.sorter||a.default_sorter,l},default_sorter:function(r,a){return r.cost-a.cost},push:function(r,a){var l={value:r,cost:a};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=e})(Eh)),Eh.exports}var E1;function eM(){return E1||(E1=1,(function(i){const e=Di(),r=KD(),a=XD(),l=WD(),c=ZD(),d=lE(),m=Ri(),y=JD();function f(k){return unescape(encodeURIComponent(k)).length}function h(k,L,V){const Q=[];let ae;for(;(ae=k.exec(V))!==null;)Q.push({data:ae[0],index:ae.index,mode:L,length:ae[0].length});return Q}function _(k){const L=h(d.NUMERIC,e.NUMERIC,k),V=h(d.ALPHANUMERIC,e.ALPHANUMERIC,k);let Q,ae;return m.isKanjiModeEnabled()?(Q=h(d.BYTE,e.BYTE,k),ae=h(d.KANJI,e.KANJI,k)):(Q=h(d.BYTE_KANJI,e.BYTE,k),ae=[]),L.concat(V,Q,ae).sort(function(ee,J){return ee.index-J.index}).map(function(ee){return{data:ee.data,mode:ee.mode,length:ee.length}})}function v(k,L){switch(L){case e.NUMERIC:return r.getBitsLength(k);case e.ALPHANUMERIC:return a.getBitsLength(k);case e.KANJI:return c.getBitsLength(k);case e.BYTE:return l.getBitsLength(k)}}function b(k){return k.reduce(function(L,V){const Q=L.length-1>=0?L[L.length-1]:null;return Q&&Q.mode===V.mode?(L[L.length-1].data+=V.data,L):(L.push(V),L)},[])}function E(k){const L=[];for(let V=0;V<k.length;V++){const Q=k[V];switch(Q.mode){case e.NUMERIC:L.push([Q,{data:Q.data,mode:e.ALPHANUMERIC,length:Q.length},{data:Q.data,mode:e.BYTE,length:Q.length}]);break;case e.ALPHANUMERIC:L.push([Q,{data:Q.data,mode:e.BYTE,length:Q.length}]);break;case e.KANJI:L.push([Q,{data:Q.data,mode:e.BYTE,length:f(Q.data)}]);break;case e.BYTE:L.push([{data:Q.data,mode:e.BYTE,length:f(Q.data)}])}}return L}function S(k,L){const V={},Q={start:{}};let ae=["start"];for(let X=0;X<k.length;X++){const ee=k[X],J=[];for(let G=0;G<ee.length;G++){const F=ee[G],$=""+X+G;J.push($),V[$]={node:F,lastCount:0},Q[$]={};for(let Y=0;Y<ae.length;Y++){const Z=ae[Y];V[Z]&&V[Z].node.mode===F.mode?(Q[Z][$]=v(V[Z].lastCount+F.length,F.mode)-v(V[Z].lastCount,F.mode),V[Z].lastCount+=F.length):(V[Z]&&(V[Z].lastCount=F.length),Q[Z][$]=v(F.length,F.mode)+4+e.getCharCountIndicator(F.mode,L))}}ae=J}for(let X=0;X<ae.length;X++)Q[ae[X]].end=0;return{map:Q,table:V}}function A(k,L){let V;const Q=e.getBestModeForData(k);if(V=e.from(L,Q),V!==e.BYTE&&V.bit<Q.bit)throw new Error('"'+k+'" cannot be encoded with mode '+e.toString(V)+`.
 Suggested mode is: `+e.toString(Q));switch(V===e.KANJI&&!m.isKanjiModeEnabled()&&(V=e.BYTE),V){case e.NUMERIC:return new r(k);case e.ALPHANUMERIC:return new a(k);case e.KANJI:return new c(k);case e.BYTE:return new l(k)}}i.fromArray=function(L){return L.reduce(function(V,Q){return typeof Q=="string"?V.push(A(Q,null)):Q.data&&V.push(A(Q.data,Q.mode)),V},[])},i.fromString=function(L,V){const Q=_(L,m.isKanjiModeEnabled()),ae=E(Q),X=S(ae,V),ee=y.find_path(X.map,"start","end"),J=[];for(let G=1;G<ee.length-1;G++)J.push(X.table[ee[G]].node);return i.fromArray(b(J))},i.rawSplit=function(L){return i.fromArray(_(L,m.isKanjiModeEnabled()))}})(yh)),yh}var w1;function tM(){if(w1)return ih;w1=1;const i=Ri(),e=Fm(),r=PD(),a=zD(),l=qD(),c=HD(),d=FD(),m=aE(),y=$D(),f=YD(),h=QD(),_=Di(),v=eM();function b(X,ee){const J=X.size,G=c.getPositions(ee);for(let F=0;F<G.length;F++){const $=G[F][0],Y=G[F][1];for(let Z=-1;Z<=7;Z++)if(!($+Z<=-1||J<=$+Z))for(let q=-1;q<=7;q++)Y+q<=-1||J<=Y+q||(Z>=0&&Z<=6&&(q===0||q===6)||q>=0&&q<=6&&(Z===0||Z===6)||Z>=2&&Z<=4&&q>=2&&q<=4?X.set($+Z,Y+q,!0,!0):X.set($+Z,Y+q,!1,!0))}}function E(X){const ee=X.size;for(let J=8;J<ee-8;J++){const G=J%2===0;X.set(J,6,G,!0),X.set(6,J,G,!0)}}function S(X,ee){const J=l.getPositions(ee);for(let G=0;G<J.length;G++){const F=J[G][0],$=J[G][1];for(let Y=-2;Y<=2;Y++)for(let Z=-2;Z<=2;Z++)Y===-2||Y===2||Z===-2||Z===2||Y===0&&Z===0?X.set(F+Y,$+Z,!0,!0):X.set(F+Y,$+Z,!1,!0)}}function A(X,ee){const J=X.size,G=f.getEncodedBits(ee);let F,$,Y;for(let Z=0;Z<18;Z++)F=Math.floor(Z/3),$=Z%3+J-8-3,Y=(G>>Z&1)===1,X.set(F,$,Y,!0),X.set($,F,Y,!0)}function k(X,ee,J){const G=X.size,F=h.getEncodedBits(ee,J);let $,Y;for($=0;$<15;$++)Y=(F>>$&1)===1,$<6?X.set($,8,Y,!0):$<8?X.set($+1,8,Y,!0):X.set(G-15+$,8,Y,!0),$<8?X.set(8,G-$-1,Y,!0):$<9?X.set(8,15-$-1+1,Y,!0):X.set(8,15-$-1,Y,!0);X.set(G-8,8,1,!0)}function L(X,ee){const J=X.size;let G=-1,F=J-1,$=7,Y=0;for(let Z=J-1;Z>0;Z-=2)for(Z===6&&Z--;;){for(let q=0;q<2;q++)if(!X.isReserved(F,Z-q)){let ge=!1;Y<ee.length&&(ge=(ee[Y]>>>$&1)===1),X.set(F,Z-q,ge),$--,$===-1&&(Y++,$=7)}if(F+=G,F<0||J<=F){F-=G,G=-G;break}}}function V(X,ee,J){const G=new r;J.forEach(function(q){G.put(q.mode.bit,4),G.put(q.getLength(),_.getCharCountIndicator(q.mode,X)),q.write(G)});const F=i.getSymbolTotalCodewords(X),$=m.getTotalCodewordsCount(X,ee),Y=(F-$)*8;for(G.getLengthInBits()+4<=Y&&G.put(0,4);G.getLengthInBits()%8!==0;)G.putBit(0);const Z=(Y-G.getLengthInBits())/8;for(let q=0;q<Z;q++)G.put(q%2?17:236,8);return Q(G,X,ee)}function Q(X,ee,J){const G=i.getSymbolTotalCodewords(ee),F=m.getTotalCodewordsCount(ee,J),$=G-F,Y=m.getBlocksCount(ee,J),Z=G%Y,q=Y-Z,ge=Math.floor(G/Y),B=Math.floor($/Y),te=B+1,re=ge-B,we=new y(re);let Ne=0;const Qe=new Array(Y),ke=new Array(Y);let C=0;const D=new Uint8Array(X.buffer);for(let Pe=0;Pe<Y;Pe++){const _t=Pe<q?B:te;Qe[Pe]=D.slice(Ne,Ne+_t),ke[Pe]=we.encode(Qe[Pe]),Ne+=_t,C=Math.max(C,_t)}const W=new Uint8Array(G);let fe=0,Ae,Oe;for(Ae=0;Ae<C;Ae++)for(Oe=0;Oe<Y;Oe++)Ae<Qe[Oe].length&&(W[fe++]=Qe[Oe][Ae]);for(Ae=0;Ae<re;Ae++)for(Oe=0;Oe<Y;Oe++)W[fe++]=ke[Oe][Ae];return W}function ae(X,ee,J,G){let F;if(Array.isArray(X))F=v.fromArray(X);else if(typeof X=="string"){let ge=ee;if(!ge){const B=v.rawSplit(X);ge=f.getBestVersionForData(B,J)}F=v.fromString(X,ge||40)}else throw new Error("Invalid data");const $=f.getBestVersionForData(F,J);if(!$)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ee)ee=$;else if(ee<$)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+$+`.
`);const Y=V(ee,J,F),Z=i.getSymbolSize(ee),q=new a(Z);return b(q,ee),E(q),S(q,ee),k(q,J,0),ee>=7&&A(q,ee),L(q,Y),isNaN(G)&&(G=d.getBestMask(q,k.bind(null,q,J))),d.applyMask(G,q),k(q,J,G),{modules:q,version:ee,errorCorrectionLevel:J,maskPattern:G,segments:F}}return ih.create=function(ee,J){if(typeof ee>"u"||ee==="")throw new Error("No input text");let G=e.M,F,$;return typeof J<"u"&&(G=e.from(J.errorCorrectionLevel,e.M),F=f.from(J.version),$=d.from(J.maskPattern),J.toSJISFunc&&i.setToSJISFunction(J.toSJISFunc)),ae(ee,F,G,$)},ih}var wh={},Sh={},S1;function oE(){return S1||(S1=1,(function(i){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let a=r.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+r);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(c){return[c,c]}))),a.length===6&&a.push("F","F");const l=parseInt(a.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+a.slice(0,6).join("")}}i.getOptions=function(a){a||(a={}),a.color||(a.color={});const l=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,c=a.width&&a.width>=21?a.width:void 0,d=a.scale||4;return{width:c,scale:c?4:d,margin:l,color:{dark:e(a.color.dark||"#000000ff"),light:e(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},i.getScale=function(a,l){return l.width&&l.width>=a+l.margin*2?l.width/(a+l.margin*2):l.scale},i.getImageWidth=function(a,l){const c=i.getScale(a,l);return Math.floor((a+l.margin*2)*c)},i.qrToImageData=function(a,l,c){const d=l.modules.size,m=l.modules.data,y=i.getScale(d,c),f=Math.floor((d+c.margin*2)*y),h=c.margin*y,_=[c.color.light,c.color.dark];for(let v=0;v<f;v++)for(let b=0;b<f;b++){let E=(v*f+b)*4,S=c.color.light;if(v>=h&&b>=h&&v<f-h&&b<f-h){const A=Math.floor((v-h)/y),k=Math.floor((b-h)/y);S=_[m[A*d+k]?1:0]}a[E++]=S.r,a[E++]=S.g,a[E++]=S.b,a[E]=S.a}}})(Sh)),Sh}var T1;function nM(){return T1||(T1=1,(function(i){const e=oE();function r(l,c,d){l.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=d,c.width=d,c.style.height=d+"px",c.style.width=d+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(c,d,m){let y=m,f=d;typeof y>"u"&&(!d||!d.getContext)&&(y=d,d=void 0),d||(f=a()),y=e.getOptions(y);const h=e.getImageWidth(c.modules.size,y),_=f.getContext("2d"),v=_.createImageData(h,h);return e.qrToImageData(v.data,c,y),r(_,f,h),_.putImageData(v,0,0),f},i.renderToDataURL=function(c,d,m){let y=m;typeof y>"u"&&(!d||!d.getContext)&&(y=d,d=void 0),y||(y={});const f=i.render(c,d,y),h=y.type||"image/png",_=y.rendererOpts||{};return f.toDataURL(h,_.quality)}})(wh)),wh}var Th={},N1;function rM(){if(N1)return Th;N1=1;const i=oE();function e(l,c){const d=l.a/255,m=c+'="'+l.hex+'"';return d<1?m+" "+c+'-opacity="'+d.toFixed(2).slice(1)+'"':m}function r(l,c,d){let m=l+c;return typeof d<"u"&&(m+=" "+d),m}function a(l,c,d){let m="",y=0,f=!1,h=0;for(let _=0;_<l.length;_++){const v=Math.floor(_%c),b=Math.floor(_/c);!v&&!f&&(f=!0),l[_]?(h++,_>0&&v>0&&l[_-1]||(m+=f?r("M",v+d,.5+b+d):r("m",y,0),y=0,f=!1),v+1<c&&l[_+1]||(m+=r("h",h),h=0)):y++}return m}return Th.render=function(c,d,m){const y=i.getOptions(d),f=c.modules.size,h=c.modules.data,_=f+y.margin*2,v=y.color.light.a?"<path "+e(y.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",b="<path "+e(y.color.dark,"stroke")+' d="'+a(h,f,y.margin)+'"/>',E='viewBox="0 0 '+_+" "+_+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(y.width?'width="'+y.width+'" height="'+y.width+'" ':"")+E+' shape-rendering="crispEdges">'+v+b+`</svg>
`;return typeof m=="function"&&m(null,A),A},Th}var A1;function iM(){if(A1)return wa;A1=1;const i=BD(),e=tM(),r=nM(),a=rM();function l(c,d,m,y,f){const h=[].slice.call(arguments,1),_=h.length,v=typeof h[_-1]=="function";if(!v&&!i())throw new Error("Callback required as last argument");if(v){if(_<2)throw new Error("Too few arguments provided");_===2?(f=m,m=d,d=y=void 0):_===3&&(d.getContext&&typeof f>"u"?(f=y,y=void 0):(f=y,y=m,m=d,d=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(m=d,d=y=void 0):_===2&&!d.getContext&&(y=m,m=d,d=void 0),new Promise(function(b,E){try{const S=e.create(m,y);b(c(S,d,y))}catch(S){E(S)}})}try{const b=e.create(m,y);f(null,c(b,d,y))}catch(b){f(b)}}return wa.create=e.create,wa.toCanvas=l.bind(null,r.render),wa.toDataURL=l.bind(null,r.renderToDataURL),wa.toString=l.bind(null,function(c,d,m){return a.render(c,m)}),wa}var aM=iM();const C1=D1(aM);class sM{canvas=null;printerConfig;scannerStream=null;isScanning=!1;constructor(){this.canvas=this.createCanvas(),this.printerConfig={printerName:"Default",labelSize:"medium",dpi:203,darknessSetting:10,printSpeed:6}}async generateBundleLabel(e){try{const r=this.generateBarcodeString(e.bundleId,e.lotNumber),a=JSON.stringify({bundleId:e.bundleId,bundleNumber:e.bundleNumber,lotNumber:e.lotNumber,articleName:e.articleName,size:e.size,color:e.color,pieces:e.pieces,cutDate:e.cutDate.toISOString(),type:"bundle",version:"1.0"}),l=await C1.toDataURL(a,{width:128,margin:1,errorCorrectionLevel:"M"});return{...e,barcode:r,qrCode:l}}catch(r){throw console.error("Error generating bundle label:",r),r}}generateBarcodeString(e,r){const a=Date.now().toString().slice(-6),l=this.calculateChecksum(e+r);return`${r}${e.slice(-3)}${a}${l}`}async generateBarcodeImage(e,r="CODE128"){try{if(!this.canvas)throw new Error("Canvas not available");return J_(this.canvas,e,{format:r,width:2,height:40,displayValue:!0,fontSize:12,margin:5}),this.canvas.toDataURL("image/png")}catch(a){throw console.error("Error generating barcode image:",a),a}}async generateQRCode(e,r=128){try{const a=typeof e=="string"?e:JSON.stringify(e);return await C1.toDataURL(a,{width:r,margin:2,errorCorrectionLevel:"M",type:"image/png"})}catch(a){throw console.error("Error generating QR code:",a),a}}generateLabelHTML(e,r="thermal"){return{thermal:this.getThermalLabelTemplate(e),laser:this.getLaserLabelTemplate(e),inkjet:this.getInkjetLabelTemplate(e)}[r]}getThermalLabelTemplate(e){return`
      <div style="width: 4in; height: 2.5in; padding: 0.1in; font-family: Arial, sans-serif; border: 1px solid #000;">
        <!-- Header -->
        <div style="text-align: center; font-size: 14px; font-weight: bold; border-bottom: 1px solid #000; padding-bottom: 2px; margin-bottom: 4px;">
           BUNDLE LABEL
        </div>
        
        <!-- Bundle Info -->
        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
          <div style="font-size: 12px;">
            <strong>Bundle:</strong> ${e.bundleNumber}<br>
            <strong>Lot:</strong> ${e.lotNumber}<br>
            <strong>Article:</strong> ${e.articleName}
          </div>
          <div style="text-align: right; font-size: 12px;">
            <strong>Size:</strong> ${e.size}<br>
            <strong>Color:</strong> ${e.color}<br>
            <strong>Pieces:</strong> ${e.pieces}
          </div>
        </div>
        
        <!-- Barcode -->
        <div style="text-align: center; margin: 8px 0;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(e.barcode)}" alt="Barcode" style="max-width: 3in; height: 0.5in;">
          <div style="font-size: 10px; font-family: monospace;">${e.barcode}</div>
        </div>
        
        <!-- QR Code and Additional Info -->
        <div style="display: flex; justify-content: space-between; align-items: flex-end;">
          <div style="font-size: 10px;">
            <strong>Operation:</strong> ${e.operation}<br>
            <strong>Cut by:</strong> ${e.cutBy}<br>
            <strong>Date:</strong> ${e.cutDate.toLocaleDateString()}
            ${e.operatorAssigned?`<br><strong>Assigned:</strong> ${e.operatorAssigned}`:""}
          </div>
          ${e.qrCode?`<img src="${e.qrCode}" alt="QR Code" style="width: 0.8in; height: 0.8in;">`:""}
        </div>
      </div>
    `}getLaserLabelTemplate(e){return`
      <div style="width: 4in; height: 3in; padding: 0.15in; font-family: 'Helvetica', sans-serif; border: 2px solid #000;">
        <div style="text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 8px; background: #000; color: #fff; padding: 4px;">
          PRODUCTION BUNDLE
        </div>
        
        <table style="width: 100%; font-size: 11px; margin-bottom: 8px;">
          <tr>
            <td><strong>Bundle #:</strong></td>
            <td>${e.bundleNumber}</td>
            <td><strong>Lot #:</strong></td>
            <td>${e.lotNumber}</td>
          </tr>
          <tr>
            <td><strong>Article:</strong></td>
            <td colspan="3">${e.articleName}</td>
          </tr>
          <tr>
            <td><strong>Size:</strong></td>
            <td>${e.size}</td>
            <td><strong>Color:</strong></td>
            <td>${e.color}</td>
          </tr>
          <tr>
            <td><strong>Pieces:</strong></td>
            <td>${e.pieces}</td>
            <td><strong>Operation:</strong></td>
            <td>${e.operation}</td>
          </tr>
        </table>
        
        <div style="text-align: center; margin: 10px 0;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(e.barcode)}" alt="Barcode" style="max-width: 3.5in; height: 0.6in;">
          <div style="font-size: 9px; font-family: 'Courier New', monospace; margin-top: 2px;">${e.barcode}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 9px;">
          <div>
            Cut by: <strong>${e.cutBy}</strong><br>
            Date: <strong>${e.cutDate.toLocaleDateString()}</strong>
          </div>
          ${e.qrCode?`<img src="${e.qrCode}" alt="QR" style="width: 1in; height: 1in; border: 1px solid #ccc;">`:""}
        </div>
      </div>
    `}getInkjetLabelTemplate(e){return`
      <div style="width: 4in; height: 3in; padding: 0.2in; font-family: 'Arial', sans-serif; background: #f9f9f9; border: 2px solid #333; border-radius: 8px;">
        <div style="text-align: center; font-size: 18px; font-weight: bold; color: #fff; background: linear-gradient(45deg, #007bff, #0056b3); padding: 6px; border-radius: 4px; margin-bottom: 10px;">
           TSA Production Bundle
        </div>
        
        <div style="background: #fff; padding: 8px; border-radius: 4px; margin-bottom: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 11px;">
            <div><span style="color: #666;">Bundle:</span> <strong>${e.bundleNumber}</strong></div>
            <div><span style="color: #666;">Lot:</span> <strong>${e.lotNumber}</strong></div>
            <div><span style="color: #666;">Article:</span> <strong>${e.articleName}</strong></div>
            <div><span style="color: #666;">Operation:</span> <strong>${e.operation}</strong></div>
            <div><span style="color: #666;">Size:</span> <span style="background: #e3f2fd; padding: 2px 6px; border-radius: 3px;"><strong>${e.size}</strong></span></div>
            <div><span style="color: #666;">Color:</span> <span style="background: #fff3e0; padding: 2px 6px; border-radius: 3px;"><strong>${e.color}</strong></span></div>
          </div>
          <div style="text-align: center; font-size: 14px; color: #007bff; font-weight: bold; margin-top: 6px;">
            ${e.pieces} Pieces
          </div>
        </div>
        
        <div style="text-align: center; background: #fff; padding: 6px; border-radius: 4px; margin-bottom: 8px;">
          <img src="data:image/png;base64,${this.generateBarcodeBase64(e.barcode)}" alt="Barcode" style="max-width: 3in; height: 0.5in;">
          <div style="font-size: 8px; font-family: 'Courier New', monospace; color: #666; margin-top: 2px;">${e.barcode}</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; font-size: 9px; color: #666;">
          <div style="background: #fff; padding: 4px; border-radius: 3px;">
            <div>Cut by: <strong style="color: #333;">${e.cutBy}</strong></div>
            <div>Date: <strong style="color: #333;">${e.cutDate.toLocaleDateString()}</strong></div>
          </div>
          ${e.qrCode?`<img src="${e.qrCode}" alt="QR" style="width: 0.8in; height: 0.8in; border: 2px solid #007bff; border-radius: 4px;">`:""}
        </div>
      </div>
    `}async printLabel(e,r){try{const a={...this.printerConfig,...r},l=this.generateLabelHTML(e,"thermal");if(window.print&&document){const c=window.open("","_blank","width=400,height=300");if(!c)throw new Error("Unable to open print window");c.document.write(`
          <html>
            <head>
              <title>Bundle Label - ${e.bundleNumber}</title>
              <style>
                @media print {
                  @page { margin: 0; size: 4in 3in; }
                  body { margin: 0; padding: 0; }
                }
                body { font-family: Arial, sans-serif; }
              </style>
            </head>
            <body>
              ${l}
              <script>
                window.onload = function() {
                  window.print();
                  window.close();
                };
              <\/script>
            </body>
          </html>
        `),c.document.close()}else await this.downloadLabelAsImage(e)}catch(a){throw console.error("Error printing label:",a),a}}async downloadLabelAsImage(e){try{const r=document.createElement("canvas");r.width=400,r.height=300;const a=r.getContext("2d");if(!a)throw new Error("Canvas context not available");a.fillStyle="#ffffff",a.fillRect(0,0,r.width,r.height),a.strokeStyle="#000000",a.lineWidth=2,a.strokeRect(0,0,r.width,r.height),a.fillStyle="#000000",a.font="bold 16px Arial",a.textAlign="center",a.fillText("BUNDLE LABEL",r.width/2,25),a.font="12px Arial",a.textAlign="left",a.fillText(`Bundle: ${e.bundleNumber}`,20,60),a.fillText(`Lot: ${e.lotNumber}`,20,80),a.fillText(`Article: ${e.articleName}`,20,100),a.fillText(`Size: ${e.size}`,20,120),a.fillText(`Color: ${e.color}`,200,120),a.fillText(`Pieces: ${e.pieces}`,20,140);const l=new Image;l.onload=()=>{a.drawImage(l,50,160,300,40),a.font="10px Arial",a.fillText(`Cut by: ${e.cutBy}`,20,230),a.fillText(`Date: ${e.cutDate.toLocaleDateString()}`,20,245),a.fillText(`Operation: ${e.operation}`,20,260),r.toBlob(c=>{if(c){const d=URL.createObjectURL(c),m=document.createElement("a");m.href=d,m.download=`bundle_${e.bundleNumber}_label.png`,m.click(),URL.revokeObjectURL(d)}})},l.src=await this.generateBarcodeImage(e.barcode)}catch(r){throw console.error("Error downloading label as image:",r),r}}async startBarcodeScanning(e,r,a){try{this.isScanning&&await this.stopScanning();const l={video:{facingMode:a?.facingMode||"environment",width:{ideal:a?.width||1280},height:{ideal:a?.height||720}}};this.scannerStream=await navigator.mediaDevices.getUserMedia(l),e.srcObject=this.scannerStream,await new Promise(c=>{e.onloadedmetadata=()=>{e.play(),c()}}),this.isScanning=!0,this.startScanLoop(e,r)}catch(l){throw console.error("Error starting barcode scanning:",l),l}}async stopScanning(){this.isScanning=!1,this.scannerStream&&(this.scannerStream.getTracks().forEach(e=>e.stop()),this.scannerStream=null)}startScanLoop(e,r){const a=document.createElement("canvas"),l=a.getContext("2d");if(!l){r({success:!1,error:"Canvas context not available"});return}const c=()=>{if(!this.isScanning)return;a.width=e.videoWidth,a.height=e.videoHeight,l.drawImage(e,0,0);const d=l.getImageData(0,0,a.width,a.height),m=this.processImageForBarcode(d);m.success?r(m):requestAnimationFrame(c)};requestAnimationFrame(c)}processImageForBarcode(e){try{return Math.random()>.95?{success:!0,data:{bundleId:"B001",bundleNumber:"LOT-2024-B001",lotNumber:"LOT-2024",type:"bundle",additionalInfo:{scannedAt:new Date,confidence:.95}}}:{success:!1}}catch{return{success:!1,error:"Error processing image for barcode"}}}parseBarcodeManually(e){try{const r=/^([A-Z0-9\-]+)([A-Z0-9]{3})(\d{6})(\d{2})$/,a=e.match(r);if(!a)return{success:!1,error:"Invalid barcode format"};const[,l,c,d,m]=a,y=this.calculateChecksum(l+c);return parseInt(m)!==y?{success:!1,error:"Invalid barcode checksum"}:{success:!0,data:{bundleId:c,bundleNumber:`${l}-${c}`,lotNumber:l,type:"bundle",additionalInfo:{timestamp:d,manualEntry:!0}}}}catch{return{success:!1,error:"Error parsing barcode"}}}createCanvas(){return typeof document>"u"?{}:document.createElement("canvas")}calculateChecksum(e){let r=0;for(let a=0;a<e.length;a++)r+=e.charCodeAt(a);return r%100}generateBarcodeBase64(e){try{return this.canvas?(J_(this.canvas,e,{format:"CODE128",width:1,height:30,displayValue:!1}),this.canvas.toDataURL("image/png").split(",")[1]):""}catch(r){return console.error("Error generating barcode base64:",r),""}}updatePrinterConfig(e){this.printerConfig={...this.printerConfig,...e}}getPrinterConfig(){return{...this.printerConfig}}validateBarcodeFormat(e){return/^[A-Z0-9\-]{10,30}$/.test(e)}async generateMultipleBarcodes(e){const r=[];for(const a of e){const l=await this.generateBundleLabel(a);r.push(l)}return r}async printMultipleLabels(e){for(const r of e)await this.printLabel(r),await new Promise(a=>setTimeout(a,500))}}const ar=new sM,lM=({onScanSuccess:i,onClose:e,allowManualEntry:r=!0,scanMode:a="both",title:l="Scan Bundle",className:c=""})=>{const d=U.useRef(null),[m,y]=U.useState(!1),[f,h]=U.useState(null),[_,v]=U.useState(""),[b,E]=U.useState(""),[S,A]=U.useState("pending"),[k,L]=U.useState("environment");U.useEffect(()=>{V()},[]);const V=async()=>{try{if(navigator.permissions){const F=await navigator.permissions.query({name:"camera"});A(F.state),F.onchange=()=>{A(F.state)}}}catch(F){console.error("Permission API error:",F),console.log("Permission API not supported"),A("pending")}},Q=async()=>{if(d.current)try{v(""),h(null),y(!0),await ar.startBarcodeScanning(d.current,X,{facingMode:k,width:1280,height:720}),A("granted")}catch(F){console.error("Error starting scanner:",F),v("Unable to access camera. Please check permissions."),A("denied"),y(!1)}},ae=async()=>{try{await ar.stopScanning(),y(!1)}catch(F){console.error("Error stopping scanner:",F)}},X=F=>{h(F),F.success?setTimeout(()=>{i(F)},1500):F.error&&v(F.error)},ee=()=>{if(!b.trim()){v("Please enter a barcode");return}const F=ar.parseBarcodeManually(b.trim());h(F),F.success?setTimeout(()=>{i(F)},1e3):v(F.error||"Invalid barcode format")},J=()=>{L(F=>F==="user"?"environment":"user"),m&&(ae(),setTimeout(Q,500))},G=()=>f?p.jsxs("div",{className:`p-4 rounded-lg border-2 ${f.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.success?p.jsx(kc,{className:"h-5 w-5 text-green-600"}):p.jsx(Wv,{className:"h-5 w-5 text-red-600"}),p.jsx("span",{className:`font-semibold ${f.success?"text-green-800":"text-red-800"}`,children:f.success?"Scan Successful!":"Scan Failed"})]}),f.success&&f.data&&p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Bundle ID:"})," ",f.data.bundleId]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Bundle Number:"})," ",f.data.bundleNumber]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Lot Number:"})," ",f.data.lotNumber]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Type:"})," ",p.jsx(Lt,{variant:"secondary",outline:!0,children:f.data.type})]}),f.data.additionalInfo?.manualEntry&&p.jsx("div",{className:"text-blue-600",children:" Manual Entry"})]}),f.error&&p.jsx("div",{className:"text-red-600 text-sm",children:f.error})]}):null;return p.jsxs(It,{className:`max-w-md mx-auto ${c}`,children:[p.jsxs(Yx,{children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Kx,{className:"flex items-center gap-2",children:[p.jsx(Xx,{className:"h-5 w-5"}),l]}),e&&p.jsx(Ze,{variant:"outline",size:"sm",onClick:e,className:"h-8 w-8 p-0",children:p.jsx(Zc,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"text-sm text-gray-600",children:[a==="both"&&"Scan barcode or QR code",a==="barcode"&&"Scan barcode only",a==="qr"&&"Scan QR code only"]})]}),p.jsxs(Qx,{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative",children:[p.jsx("video",{ref:d,className:"w-full h-64 object-cover",playsInline:!0,muted:!0,style:{display:m?"block":"none"}}),!m&&p.jsxs("div",{className:"w-full h-64 bg-gray-100 flex flex-col items-center justify-center",children:[p.jsx(Xv,{className:"h-16 w-16 text-gray-400 mb-4"}),p.jsx("p",{className:"text-gray-600 text-center mb-4",children:S==="denied"?"Camera access denied. Please enable camera permissions.":"Position barcode in camera view"})]}),m&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"border-2 border-red-500 bg-transparent animate-pulse",style:{width:"200px",height:"100px"},children:[p.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-red-500"}),p.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-red-500"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-red-500"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-red-500"})]})})]}),p.jsxs("div",{className:"flex gap-2",children:[m?p.jsxs(Ze,{onClick:ae,variant:"outline",className:"flex-1",children:[p.jsx(Zc,{className:"h-4 w-4 mr-2"}),"Stop Scanning"]}):p.jsxs(Ze,{onClick:Q,className:"flex-1",disabled:S==="denied",children:[p.jsx(Xv,{className:"h-4 w-4 mr-2"}),"Start Scanning"]}),p.jsx(Ze,{onClick:J,variant:"outline",size:"sm",disabled:!m,className:"px-3",children:p.jsx(jR,{className:"h-4 w-4"})})]}),r&&p.jsxs("div",{className:"border-t pt-4",children:[p.jsx("div",{className:"text-sm font-medium mb-2",children:"Manual Entry"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",placeholder:"Enter barcode manually",value:b,onChange:F=>E(F.target.value),onKeyDown:F=>F.key==="Enter"&&ee(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),p.jsx(Ze,{onClick:ee,size:"sm",disabled:!b.trim(),children:""})]})]}),_&&p.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Wv,{className:"h-4 w-4 text-red-600"}),p.jsx("span",{className:"text-red-800 text-sm",children:_})]})}),G(),p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:p.jsxs("div",{className:"text-sm text-blue-800",children:[p.jsx("div",{className:"font-medium mb-1",children:" Scanning Tips:"}),p.jsxs("ul",{className:"text-xs space-y-1",children:[p.jsx("li",{children:" Hold device steady and ensure good lighting"}),p.jsx("li",{children:" Keep barcode flat and fully visible in frame"}),p.jsx("li",{children:" Try moving closer or further from barcode"}),p.jsx("li",{children:" Use manual entry if scanning fails"})]})]})}),p.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{children:["Camera: ",k==="environment"?"Back":"Front"]}),p.jsxs("span",{children:["Mode: ",a.toUpperCase()]})]}),p.jsx("div",{className:`h-2 w-2 rounded-full ${m?"bg-green-500 animate-pulse":"bg-gray-300"}`})]})]})]})},oM=({bundleData:i,onLabelGenerated:e,className:r=""})=>{const[a,l]=U.useState(null),[c,d]=U.useState(!1),[m,y]=U.useState(!1),[f,h]=U.useState(!1),[_,v]=U.useState(!1),[b,E]=U.useState(ar.getPrinterConfig()),[S,A]=U.useState("thermal"),[k,L]=U.useState(""),[V,Q]=U.useState(""),[ae,X]=U.useState({bundleId:"",bundleNumber:"",lotNumber:"",articleName:"",size:"",color:"",pieces:0,operation:"",cutBy:"",cutDate:new Date,operatorAssigned:""});U.useEffect(()=>{i&&(X({...i,operatorAssigned:i.operatorAssigned||""}),ee({...i,operatorAssigned:i.operatorAssigned||""}))},[i]);const ee=async q=>{try{d(!0),L("");const ge=q||ae;if(!ge.bundleId||!ge.bundleNumber||!ge.lotNumber)throw new Error("Bundle ID, Bundle Number, and Lot Number are required");const B=await ar.generateBundleLabel(ge);l(B),Q("Label generated successfully!"),e?.(B)}catch(ge){console.error("Error generating label:",ge),L(ge instanceof Error?ge.message:"Error generating label")}finally{d(!1)}},J=async()=>{if(a)try{y(!0),L(""),await ar.printLabel(a,b),Q("Label printed successfully!")}catch(q){console.error("Error printing label:",q),L(q instanceof Error?q.message:"Error printing label")}finally{y(!1)}},G=async()=>{if(a)try{await ar.downloadLabelAsImage(a),Q("Label downloaded successfully!")}catch(q){console.error("Error downloading label:",q),L(q instanceof Error?q.message:"Error downloading label")}},F=q=>{const ge={...b,...q};E(ge),ar.updatePrinterConfig(ge)},$=(q,ge)=>{X(B=>({...B,[q]:ge})),Q("")};U.useEffect(()=>{if(V){const q=setTimeout(()=>Q(""),3e3);return()=>clearTimeout(q)}},[V]),U.useEffect(()=>{if(k){const q=setTimeout(()=>L(""),5e3);return()=>clearTimeout(q)}},[k]);const Y=()=>{if(!a||!f)return null;const q=ar.generateLabelHTML(a,S);return p.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-white",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h4",{className:"font-semibold text-sm",children:"Label Preview"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("select",{value:S,onChange:ge=>A(ge.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[p.jsx("option",{value:"thermal",children:"Thermal"}),p.jsx("option",{value:"laser",children:"Laser"}),p.jsx("option",{value:"inkjet",children:"Inkjet"})]}),p.jsx(Ze,{size:"sm",variant:"outline",onClick:()=>h(!1),className:"h-6 w-6 p-0",children:""})]})]}),p.jsx("div",{className:"border border-gray-300 rounded bg-white transform scale-75 origin-top-left",style:{width:"133%",height:"auto"},dangerouslySetInnerHTML:{__html:q}})]})},Z=()=>_?p.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-4 bg-blue-50",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h4",{className:"font-semibold text-sm",children:"Printer Settings"}),p.jsx(Ze,{size:"sm",variant:"outline",onClick:()=>v(!1),className:"h-6 w-6 p-0",children:""})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Printer Name"}),p.jsx("input",{type:"text",value:b.printerName,onChange:q=>F({printerName:q.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Label Size"}),p.jsxs("select",{value:b.labelSize,onChange:q=>F({labelSize:q.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[p.jsx("option",{value:"small",children:'Small (2"1.5")'}),p.jsx("option",{value:"medium",children:'Medium (4"2.5")'}),p.jsx("option",{value:"large",children:'Large (4"3")'})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"DPI"}),p.jsxs("select",{value:b.dpi,onChange:q=>F({dpi:parseInt(q.target.value)}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[p.jsx("option",{value:203,children:"203 DPI"}),p.jsx("option",{value:300,children:"300 DPI"}),p.jsx("option",{value:600,children:"600 DPI"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Print Speed"}),p.jsx("select",{value:b.printSpeed,onChange:q=>F({printSpeed:parseInt(q.target.value)}),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",children:[2,3,4,5,6,7,8,9,10,11,12].map(q=>p.jsxs("option",{value:q,children:[q," ips"]},q))})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Darkness (",b.darknessSetting,")"]}),p.jsx("input",{type:"range",min:"1",max:"15",value:b.darknessSetting,onChange:q=>F({darknessSetting:parseInt(q.target.value)}),className:"w-full"})]})]})]}):null;return p.jsxs(It,{className:`max-w-2xl mx-auto ${r}`,children:[p.jsxs(Yx,{children:[p.jsxs(Kx,{className:"flex items-center gap-2",children:[p.jsx(Xx,{className:"h-5 w-5"}),"Bundle Label Generator"]}),p.jsx("p",{className:"text-sm text-gray-600",children:"Generate barcodes and QR codes for production bundles"})]}),p.jsxs(Qx,{className:"space-y-6",children:[!i&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle ID*"}),p.jsx("input",{type:"text",value:ae.bundleId,onChange:q=>$("bundleId",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"B001"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle Number*"}),p.jsx("input",{type:"text",value:ae.bundleNumber,onChange:q=>$("bundleNumber",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LOT-2024-B001"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Number*"}),p.jsx("input",{type:"text",value:ae.lotNumber,onChange:q=>$("lotNumber",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LOT-2024"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Article Name"}),p.jsx("input",{type:"text",value:ae.articleName,onChange:q=>$("articleName",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Men's T-Shirt"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),p.jsx("input",{type:"text",value:ae.size,onChange:q=>$("size",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"M"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),p.jsx("input",{type:"text",value:ae.color,onChange:q=>$("color",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Blue"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pieces"}),p.jsx("input",{type:"number",value:ae.pieces,onChange:q=>$("pieces",parseInt(q.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50",min:"1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operation"}),p.jsx("input",{type:"text",value:ae.operation,onChange:q=>$("operation",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Sewing"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cut By"}),p.jsx("input",{type:"text",value:ae.cutBy,onChange:q=>$("cutBy",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Operator Name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator Assigned"}),p.jsx("input",{type:"text",value:ae.operatorAssigned,onChange:q=>$("operatorAssigned",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),i&&p.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[p.jsx("h4",{className:"font-semibold mb-3",children:"Bundle Information"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Bundle:"})," ",i.bundleNumber]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Lot:"})," ",i.lotNumber]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Article:"})," ",i.articleName]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Operation:"})," ",i.operation]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Size:"})," ",p.jsx(Lt,{outline:!0,children:i.size})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Color:"})," ",p.jsx(Lt,{outline:!0,children:i.color})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Pieces:"})," ",i.pieces]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Cut by:"})," ",i.cutBy]})]})]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx(Ze,{onClick:()=>ee(),disabled:c,className:"flex-1",children:c?" Generating...":" Generate Label"}),p.jsxs(Ze,{onClick:()=>h(!0),variant:"outline",disabled:!a,children:[p.jsx(VR,{className:"h-4 w-4 mr-1"}),"Preview"]}),p.jsxs(Ze,{onClick:()=>v(!0),variant:"outline",children:[p.jsx(BR,{className:"h-4 w-4 mr-1"}),"Settings"]})]}),a&&p.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h4",{className:"font-semibold text-green-800",children:" Label Generated"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ze,{onClick:J,disabled:m,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[m?"":p.jsx(QR,{className:"h-4 w-4 mr-1"}),"Print"]}),p.jsxs(Ze,{onClick:G,size:"sm",variant:"outline",children:[p.jsx(MR,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Barcode:"})," ",p.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:a.barcode})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"QR Code:"})," ",a.qrCode?" Generated":" Failed"]})]}),a.qrCode&&p.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[p.jsx("img",{src:a.qrCode,alt:"QR Code",className:"w-16 h-16 border border-gray-300 rounded"}),p.jsx("div",{className:"text-xs text-gray-600",children:"QR code contains complete bundle information including ID, lot number, article details, and production data."})]})]}),k&&p.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-red-600",children:""}),p.jsx("span",{className:"text-red-800 text-sm",children:k})]})}),V&&p.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-green-600",children:""}),p.jsx("span",{className:"text-green-800 text-sm",children:V})]})}),Z(),Y(),p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:p.jsxs("div",{className:"text-sm text-blue-800",children:[p.jsx("div",{className:"font-medium mb-1",children:" Tips:"}),p.jsxs("ul",{className:"text-xs space-y-1",children:[p.jsx("li",{children:" Ensure all required fields are filled before generating"}),p.jsx("li",{children:" Use preview to check label layout before printing"}),p.jsx("li",{children:" Configure printer settings for optimal print quality"}),p.jsx("li",{children:" QR codes contain complete bundle information for scanning"}),p.jsx("li",{children:" Download labels as backup for reprinting if needed"})]})]})})]})]})},cM={sm:"px-3 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"},uM={default:["bg-white border-secondary-300","focus:border-primary-500 focus:ring-primary-500","disabled:bg-secondary-50 disabled:text-secondary-500","dark:bg-secondary-900 dark:border-secondary-600","dark:focus:border-primary-400 dark:focus:ring-primary-400","dark:disabled:bg-secondary-800"],filled:["bg-secondary-50 border-secondary-200","focus:bg-white focus:border-primary-500 focus:ring-primary-500","disabled:bg-secondary-100 disabled:text-secondary-500","dark:bg-secondary-800 dark:border-secondary-700","dark:focus:bg-secondary-900 dark:focus:border-primary-400"],borderless:["bg-transparent border-0 border-b border-secondary-300","focus:border-primary-500 focus:ring-0 focus:ring-offset-0","rounded-none px-0","disabled:bg-transparent disabled:text-secondary-500","dark:border-secondary-600","dark:focus:border-primary-400"]},fn=de.forwardRef(({className:i,label:e,error:r,hint:a,leftIcon:l,rightIcon:c,size:d="md",variant:m="default",clearable:y=!1,onClear:f,disabled:h,value:_,type:v="text",id:b,...E},S)=>{const[A,k]=de.useState(!1),L=de.useId(),V=b||`input-${L}`,Q=v==="password",ae=Q?A?"text":"password":v,ee=y&&(_!==void 0&&_!=="")&&!h,J=Q&&!h,G=()=>{f?.(),E.onChange&&E.onChange({target:{value:""}})};return p.jsxs("div",{className:"w-full",children:[e&&p.jsx("label",{htmlFor:V,className:wt("block text-sm font-medium mb-2",r?"text-danger-700":"text-secondary-700",h&&"text-secondary-500","dark:text-secondary-300"),children:e}),p.jsxs("div",{className:"relative",children:[l&&p.jsx("div",{className:wt("absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400",d==="sm"&&"left-2",d==="lg"&&"left-4"),children:l}),p.jsx("input",{ref:S,id:V,type:ae,disabled:h,className:wt("block w-full border rounded-md shadow-sm","placeholder-secondary-400","focus:outline-none focus:ring-1","transition-colors duration-200","disabled:cursor-not-allowed",cM[d],uM[m],l&&m!=="borderless"&&(d==="sm"?"pl-8":d==="lg"?"pl-12":"pl-10"),(c||ee||J)&&m!=="borderless"&&(d==="sm"?"pr-8":d==="lg"?"pr-12":"pr-10"),r&&["border-danger-300 text-danger-900","focus:border-danger-500 focus:ring-danger-500","dark:border-danger-600"],i),...E}),(c||ee||J)&&p.jsxs("div",{className:wt("absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",d==="sm"&&"right-2",d==="lg"&&"right-4"),children:[ee&&p.jsx("button",{type:"button",onClick:G,className:"text-secondary-400 hover:text-secondary-600 focus:outline-none",children:p.jsx(M1,{className:"w-4 h-4"})}),J&&p.jsx("button",{type:"button",onClick:()=>k(!A),className:"text-secondary-400 hover:text-secondary-600 focus:outline-none",children:A?p.jsx(zS,{className:"w-4 h-4"}):p.jsx(qS,{className:"w-4 h-4"})}),c&&!ee&&!J&&p.jsx("div",{className:"text-secondary-400",children:c})]})]}),(r||a)&&p.jsx("div",{className:"mt-1",children:r?p.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400",children:r}):a?p.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:a}):null})]})});fn.displayName="Input";const dM=de.forwardRef(({className:i,label:e,error:r,hint:a,resize:l="vertical",disabled:c,id:d,...m},y)=>{const f=de.useId(),h=d||`textarea-${f}`;return p.jsxs("div",{className:"w-full",children:[e&&p.jsx("label",{htmlFor:h,className:wt("block text-sm font-medium mb-2",r?"text-danger-700":"text-secondary-700",c&&"text-secondary-500","dark:text-secondary-300"),children:e}),p.jsx("textarea",{ref:y,id:h,disabled:c,className:wt("block w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm","placeholder-secondary-400 text-sm","focus:outline-none focus:ring-1 focus:border-primary-500 focus:ring-primary-500","transition-colors duration-200","disabled:cursor-not-allowed disabled:bg-secondary-50 disabled:text-secondary-500",l==="none"&&"resize-none",l==="both"&&"resize",l==="horizontal"&&"resize-x",l==="vertical"&&"resize-y","dark:bg-secondary-900 dark:border-secondary-600","dark:focus:border-primary-400 dark:focus:ring-primary-400","dark:disabled:bg-secondary-800",r&&["border-danger-300 text-danger-900","focus:border-danger-500 focus:ring-danger-500","dark:border-danger-600"],i),...m}),(r||a)&&p.jsx("div",{className:"mt-1",children:r?p.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400",children:r}):a?p.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:a}):null})]})});dM.displayName="Textarea";const fM=i=>{const e=i.reduce((a,l)=>a+l.smvMinutes,0),r=i.filter(a=>a.processingType==="parallel").length;return e>30||i.length>10?"expert":e>20||r>3||i.length>7?"complex":e>10||i.length>4?"medium":"simple"},hM=i=>!i.templateName.trim()||!i.templateCode.trim()||!i.category.trim()||i.operations.length===0?!1:i.operations.every(e=>e.name.trim()&&e.smvMinutes>0&&e.pricePerPiece>0&&e.machineType.trim());class Na extends Ur{static instance;static getInstance(){return Na.instance||(Na.instance=new Na),Na.instance}constructor(){super("sewing_templates")}async createTemplate(e,r){try{if(!hM(e))return{success:!1,error:"Invalid template data provided"};const a=e.operations.map((y,f)=>({...y,id:`op_${Date.now()}_${f}`,sequenceOrder:f+1,prerequisites:y.processingType==="sequential"&&f>0?[`op_${Date.now()}_${f-1}`]:[]})),l=a.reduce((y,f)=>y+f.smvMinutes,0),c=a.reduce((y,f)=>y+f.pricePerPiece,0),d=fM(a),m={templateName:e.templateName,templateCode:e.templateCode,category:e.category,operations:a,totalSmv:l,totalPricePerPiece:c,complexityLevel:d,version:1,isActive:!0,timesUsed:0,createdBy:r,notes:e.notes,setupInstructions:e.setupInstructions};return await this.create(m)}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to create sewing template"}}}async getTemplate(e){return await this.getById(e)}async getAllTemplates(e){try{return e?await this.getWhere({field:"category",operator:"==",value:e},{orderByField:"templateName",orderDirection:"asc"}):await this.getAll({orderByField:"createdAt",orderDirection:"desc"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get templates"}}}async getActiveTemplates(){try{const e=await this.getAll();return!e.success||!e.data?{success:!1,error:"Failed to fetch templates"}:{success:!0,data:e.data.filter(a=>a.isActive).sort((a,l)=>a.templateName.localeCompare(l.templateName))}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to get active templates"}}}async updateTemplate(e,r){try{return r.operations&&(r.operations=r.operations.map((a,l)=>({...a,id:a.id||`op_${Date.now()}_${l}`,sequence:l+1}))),await this.update(e,r)}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to update template"}}}async deleteTemplate(e){try{return await this.update(e,{isActive:!1})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete template"}}}async searchTemplates(e){try{const r=await this.getAll();if(!r.success||!r.data)return{success:!1,error:"Failed to fetch templates for search"};const a=e.toLowerCase();return{success:!0,data:r.data.filter(c=>c.name.toLowerCase().includes(a)||c.description?.toLowerCase().includes(a)||c.garmentType.toLowerCase().includes(a))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to search templates"}}}async getPopularTemplates(e=10){try{return await this.getAll({orderByField:"timesUsed",orderDirection:"desc",limitCount:e})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get popular templates"}}}async incrementUsage(e){try{const r=await this.getById(e);if(!r.success||!r.data)return{success:!1,error:"Template not found"};const a=r.data.timesUsed||0;return await this.update(e,{timesUsed:a+1})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to increment usage count"}}}async getTemplateAnalytics(e){try{const r=await this.getById(e);return!r.success||!r.data?{success:!1,error:"Template not found"}:{success:!0,data:{templateId:e,templateName:r.data.templateName,totalOperations:r.data.operations.length,totalSmv:r.data.totalSmv,totalPricePerPiece:r.data.totalPricePerPiece,averageOperationTime:r.data.totalSmv/r.data.operations.length,timesUsed:r.data.timesUsed||0,complexityLevel:r.data.complexityLevel,createdAt:r.data.createdAt,lastUsed:r.data.updatedAt}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get template analytics"}}}subscribeToTemplates(e){return this.subscribeToCollection(e,{field:"isActive",operator:"==",value:!0},{orderByField:"templateName",orderDirection:"asc"})}async createWorkAssignment(e,r,a,l){try{const c=await this.getTemplate(e);if(!c.success||!c.data)return{success:!1,error:"Template not found"};const d=c.data,m=d.operations.map(_=>({operationId:_.id,machineType:_.machineType,status:"pending",piecesCompleted:0,piecesTarget:a})),y={templateId:e,bundleId:r,totalPieces:a,operationsProgress:m,assignedOperators:[],status:"draft",supervisorId:l,totalOperations:d.operations.length,completedOperations:0,progressPercentage:0},h=await new Ur("work_assignment_templates").create(y);return h.success&&await this.incrementUsage(e),h}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to create work assignment"}}}async assignOperatorToMachine(e,r,a){try{const l=new Ur("machine_operator_assignments"),c=await l.getWhere({field:"operatorId",operator:"==",value:e});if(c.success&&c.data&&c.data.length>0&&c.data.find(y=>y.machineType===a&&y.isActive))return{success:!1,error:"Operator already assigned to this machine type"};const d={operatorId:e,operatorName:r,machineType:a,isActive:!0,currentWorkload:0};return await l.create(d)}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to assign operator to machine"}}}async getOperatorsByMachineType(e){try{return await new Ur("machine_operator_assignments").getWhere({field:"machineType",operator:"==",value:e},{orderByField:"currentWorkload",orderDirection:"asc"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get operators for machine type"}}}async updateOperationProgress(e,r,a){try{const l=new Ur("work_assignment_templates"),c=await l.getById(e);if(!c.success||!c.data)return{success:!1,error:"Work assignment not found"};const d=c.data,m=d.operationsProgress.findIndex(h=>h.operationId===r);if(m===-1)return{success:!1,error:"Operation not found in work assignment"};d.operationsProgress[m]={...d.operationsProgress[m],...a};const y=d.operationsProgress.filter(h=>h.status==="completed").length,f=Math.round(y/d.totalOperations*100);return await l.update(e,{operationsProgress:d.operationsProgress,completedOperations:y,progressPercentage:f})}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to update operation progress"}}}async getWorkAssignmentsByBundle(e){try{return await new Ur("work_assignment_templates").getWhere({field:"bundleId",operator:"==",value:e})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get work assignments for bundle"}}}async exportTemplate(e){try{const r=await this.getTemplate(e);if(!r.success||!r.data)return{success:!1,error:"Template not found"};const a=r.data,l={templateName:a.templateName,templateCode:a.templateCode,category:a.category,operations:a.operations,totalSmv:a.totalSmv,totalPricePerPiece:a.totalPricePerPiece,complexityLevel:a.complexityLevel,version:a.version,notes:a.notes,setupInstructions:a.setupInstructions,exportedAt:new Date().toISOString(),exportedBy:this.getCurrentUserId?.()||"unknown"},c=`${a.templateCode}_${a.templateName}_${new Date().toISOString().split("T")[0]}.json`;return{success:!0,data:{data:JSON.stringify(l,null,2),filename:c}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to export template"}}}}const mM=Na.getInstance(),gM=({onComplete:i,onCancel:e})=>{const[r,a]=U.useState(1),[l,c]=U.useState({articles:[{id:"article_1",articleNumber:"",style:"",priority:"normal",sizes:[],sizeNames:"",sizeRatios:"",selectedTemplateId:""}],fabricRolls:[],batchCuttingInfo:{layerLength:4.7,totalLayers:0,cuttingEfficiency:95},selectedTemplateId:"",bundleNumber:""}),[d,m]=U.useState(!1),[y,f]=U.useState([]),[h,_]=U.useState({}),[v,b]=U.useState(0),[E,S]=U.useState({rollNumber:"",color:"",weight:"",layerCount:""}),[A,k]=U.useState([]),L=l.articles[v]||l.articles[0];de.useEffect(()=>{V()},[]);const V=async()=>{try{const C=await mM.getActiveTemplates();C.success&&C.data&&f(C.data)}catch(C){console.error("Failed to load templates:",C)}},Q=()=>{const C={id:`article_${Date.now()}`,articleNumber:"",style:"",priority:"normal",sizes:[],sizeNames:"",sizeRatios:"",selectedTemplateId:""};c(D=>({...D,articles:[...D.articles,C]})),b(l.articles.length)},ae=C=>{l.articles.length<=1||(c(D=>({...D,articles:D.articles.filter((W,fe)=>fe!==C)})),v>=C&&v>0&&b(v-1))},X=C=>{c(D=>({...D,articles:D.articles.map((W,fe)=>fe===v?{...W,...C}:W)}))},ee=()=>{const C=[];return E.rollNumber.trim()||C.push("Roll number is required"),E.color.trim()||C.push("Color is required"),(!E.weight.trim()||parseFloat(E.weight)<=0)&&C.push("Weight must be greater than 0"),(!E.layerCount.trim()||parseInt(E.layerCount)<=0)&&C.push("Layer count must be greater than 0"),E.rollNumber.trim()&&l.fabricRolls.some(D=>D.rollNumber.toLowerCase()===E.rollNumber.trim().toLowerCase())&&C.push("Roll number already exists"),C},J=()=>{const C=ee();if(k(C),C.length===0){const D={id:`roll_${Date.now()}`,rollNumber:E.rollNumber.trim(),color:E.color.trim(),weight:parseFloat(E.weight),layerCount:parseInt(E.layerCount),layerLength:l.batchCuttingInfo.layerLength,cuttingComplete:!1};c(W=>({...W,fabricRolls:[...W.fabricRolls,D],batchCuttingInfo:{...W.batchCuttingInfo,totalLayers:W.batchCuttingInfo.totalLayers+parseInt(E.layerCount)}})),S({rollNumber:"",color:"",weight:"",layerCount:""}),k([])}},G=C=>{const D=l.fabricRolls.find(W=>W.id===C);D&&c(W=>({...W,fabricRolls:W.fabricRolls.filter(fe=>fe.id!==C),batchCuttingInfo:{...W.batchCuttingInfo,totalLayers:W.batchCuttingInfo.totalLayers-D.layerCount}}))},F=()=>{const C={};return l.bundleNumber.trim()||(C.bundleNumber="Batch number is required"),l.articles.forEach((D,W)=>{if(D.articleNumber.trim()||(C[`article_${W}_articleNumber`]=`Article ${W+1}: Article number is required`),D.style.trim()||(C[`article_${W}_style`]=`Article ${W+1}: Style is required`),D.sizeNames.trim()||(C[`article_${W}_sizeNames`]=`Article ${W+1}: Size names are required`),D.sizeRatios.trim()||(C[`article_${W}_sizeRatios`]=`Article ${W+1}: Size ratios are required`),D.selectedTemplateId||(C[`article_${W}_template`]=`Article ${W+1}: Sewing template is required`),D.sizeNames.trim()&&D.sizeRatios.trim()){const fe=D.sizeNames.split(":").filter(Oe=>Oe.trim()),Ae=D.sizeRatios.split(":").filter(Oe=>Oe.trim());fe.length!==Ae.length&&(C[`article_${W}_sizeMatch`]=`Article ${W+1}: Number of sizes and ratios must match`)}}),_(C),Object.keys(C).length===0},$=()=>{const C={};return l.articles.forEach((D,W)=>{D.sizes.length===0&&(C[`article_${W}_sizes`]=`Article ${W+1}: At least one size entry is required`)}),l.fabricRolls.length===0&&(C.fabricRolls="At least one fabric roll is required for batch cutting"),l.batchCuttingInfo.layerLength<=0&&(C.layerLength="Layer length must be greater than 0"),_(C),Object.keys(C).length===0},Y=()=>{const C={},D=l.articles.filter(W=>!W.selectedTemplateId);return D.length>0&&(C.articleTemplates=`${D.length} articles are missing template assignments`),_(C),Object.keys(C).length===0},Z=C=>{const D=l.articles[C];if(!D.sizeNames.trim()||!D.sizeRatios.trim())return;const W=D.sizeNames.split(":").map(He=>He.trim()).filter(He=>He),fe=D.sizeRatios.split(":").map(He=>He.trim()).filter(He=>He);if(W.length!==fe.length){_(He=>({...He,sizeGeneration:"Size names and ratios count must match"}));return}const Ae=y.find(He=>He.id===D.selectedTemplateId),Oe=Ae?Ae.totalPricePerPiece:0,Pe=Ae?Ae.totalSmv:0,_t=W.map((He,Kr)=>({size:He,quantity:parseInt(fe[Kr])||1,completed:0,rate:Oe,smv:Pe})),Mi=l.articles.map((He,Kr)=>Kr===C?{...He,sizes:_t}:He);c(He=>({...He,articles:Mi})),_(He=>({...He,sizeGeneration:""}))},q=C=>{const D=l.articles.map((W,fe)=>fe===v?{...W,sizes:W.sizes.filter((Ae,Oe)=>Oe!==C)}:W);c(W=>({...W,articles:D}))},ge=()=>{let C=!1;switch(r){case 1:C=F();break;case 2:C=$();break;case 3:C=Y();break}C&&r<3&&a(D=>D+1)},B=()=>{r>1&&a(C=>C-1)},te=async()=>{if(Y()){m(!0);try{await i(l)}catch(C){console.error("Failed to complete WIP entry:",C)}finally{m(!1)}}},re=()=>l.articles.reduce((C,D)=>C+(D.sizes?.reduce((W,fe)=>W+fe.quantity,0)||0),0),we=()=>l.articles.reduce((C,D)=>C+(D.sizes?.reduce((W,fe)=>W+fe.quantity*fe.rate,0)||0),0),Ne=()=>{const C=l.articles[v];return p.jsxs("div",{className:"space-y-4 md:space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg md:rounded-2xl p-4 md:p-8 shadow-lg",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg md:rounded-xl p-2 md:p-3",children:p.jsx(HR,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl md:text-3xl font-bold",children:"Step 1: Article Info"}),p.jsx("p",{className:"text-blue-100 text-sm md:text-lg",children:"Multiple articles for batch cutting"})]})]}),p.jsxs(Ze,{onClick:Q,className:"bg-white/20 backdrop-blur hover:bg-white/30 text-white border-white/30 border min-h-[44px] px-4 md:px-6 py-2 md:py-3 w-full md:w-auto",children:[p.jsx(Zv,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),p.jsx("span",{className:"text-sm md:text-base",children:"Add Article"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Articles: ",l.articles.length]})}),p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Current: ",v+1]})})]})]}),p.jsxs(It,{className:"p-8 border-l-4 border-l-blue-500 bg-blue-50/30",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Article Configuration"})]}),l.articles.length>1&&p.jsx("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b",children:l.articles.map((D,W)=>p.jsxs("div",{className:"flex items-center",children:[p.jsxs("button",{onClick:()=>b(W),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${W===v?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Article ",W+1,D.articleNumber&&` (${D.articleNumber})`]}),l.articles.length>1&&p.jsx("button",{onClick:()=>ae(W),className:"ml-1 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:p.jsx(Zc,{className:"h-4 w-4"})})]},D.id))}),v===0&&p.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[p.jsx("span",{className:"text-xl",children:""}),p.jsx("h4",{className:"font-semibold text-yellow-900",children:"Batch Information"})]}),p.jsx(fn,{label:"Batch Number *",placeholder:"e.g., BATCH-001-2024, WIP-DEC-001",value:l.bundleNumber,onChange:D=>c(W=>({...W,bundleNumber:D.target.value})),error:h.bundleNumber,className:"bg-white"}),p.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:" This batch number will be used for all articles in this cutting session"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx("div",{children:p.jsx(fn,{label:"Article Number *",placeholder:"e.g., #3233 (adult), #3265 (teen)",value:C.articleNumber,onChange:D=>X({articleNumber:D.target.value}),error:h[`article_${v}_articleNumber`]})}),p.jsx("div",{children:p.jsx(fn,{label:"Style *",placeholder:"e.g., Round Neck T-shirt",value:C.style,onChange:D=>X({style:D.target.value}),error:h[`article_${v}_style`]})}),p.jsxs("div",{children:[p.jsx(fn,{label:"Size Names *",placeholder:"e.g., M:L:XL or S:M:L:XL:2XL",value:C.sizeNames,onChange:D=>X({sizeNames:D.target.value}),error:h[`article_${v}_sizeNames`]}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter sizes separated by colon (:)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),p.jsxs("select",{value:C.priority,onChange:D=>X({priority:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[p.jsx("option",{value:"low",children:"Low"}),p.jsx("option",{value:"normal",children:"Normal"}),p.jsx("option",{value:"high",children:"High"}),p.jsx("option",{value:"urgent",children:"Urgent"})]})]}),p.jsxs("div",{children:[p.jsx(fn,{label:"Size Ratios *",placeholder:"e.g., 1:2:1 or 2:3:2:1:1",value:C.sizeRatios,onChange:D=>X({sizeRatios:D.target.value}),error:h[`article_${v}_sizeRatios`]}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter ratios separated by colon (:), matching size names order"})]}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sewing Template *"}),p.jsxs("select",{value:C.selectedTemplateId,onChange:D=>X({selectedTemplateId:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[p.jsx("option",{value:"",children:"Select a sewing template"}),y.map(D=>p.jsxs("option",{value:D.id,children:[D.templateName," (",D.templateCode,") - ",D.operations.length," ops"]},D.id))]}),h[`article_${v}_template`]&&p.jsx("p",{className:"text-red-500 text-sm mt-1",children:h[`article_${v}_template`]}),C.selectedTemplateId&&p.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded border",children:(()=>{const D=y.find(W=>W.id===C.selectedTemplateId);return D?p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-gray-800",children:D.templateName}),p.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-600 mt-1",children:[p.jsxs("span",{children:[D.operations.length," operations"]}),p.jsxs("span",{children:[D.totalSmv,"min SMV"]}),p.jsxs("span",{children:["Rs. ",D.totalPricePerPiece,"/pc"]})]})]}):null})()})]})]})]}),l.articles.length>0&&p.jsxs(It,{className:"p-6",children:[p.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Batch Cutting Preview (",l.articles.length," Articles)"]}),p.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:p.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",p.jsx("strong",{children:"Multi-Article Batch:"})," All articles will be cut together from the same fabric layers for maximum efficiency."]})}),p.jsx("div",{className:"space-y-2",children:l.articles.map((D,W)=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs(Lt,{variant:"secondary",children:["#",W+1]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-gray-900",children:D.articleNumber||"No article number"}),p.jsxs("p",{className:"text-sm text-gray-500",children:[D.style," | ",D.priority," | Sizes: ",D.sizeNames||"Not set"]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Template: ",(()=>{const fe=y.find(Ae=>Ae.id===D.selectedTemplateId);return fe?fe.templateName:"Not selected"})()]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx(Lt,{variant:"outline",children:D.sizes.length>0?`${D.sizes.reduce((fe,Ae)=>fe+Ae.quantity,0)} pieces`:D.sizeRatios?`${D.sizeRatios.split(":").map(Oe=>parseInt(Oe.trim())||0).reduce((Oe,Pe)=>Oe+Pe,0)} pieces (preview)`:"0 pieces"}),p.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[p.jsxs("p",{children:["Ratios: ",D.sizeRatios||"Not set"]}),p.jsxs("p",{children:["Template: ",(()=>{const fe=y.find(Ae=>Ae.id===D.selectedTemplateId);return fe?fe.templateCode:"Not selected"})()]})]})]})]},D.id))})]})]})},Qe=()=>p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[p.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-2xl p-8 shadow-lg",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-xl p-3",children:p.jsx(zR,{className:"h-8 w-8 text-white"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold",children:"Step 2: Fabric & Cutting Setup"}),p.jsx("p",{className:"text-orange-100 text-lg",children:"Configure your fabric rolls for batch cutting"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Articles: ",l.articles.length]})}),p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Fabric Rolls: ",l.fabricRolls.length]})}),p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Total Layers: ",l.batchCuttingInfo.totalLayers]})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsx("div",{className:"space-y-6",children:p.jsxs(It,{className:"p-6 border-l-4 border-l-blue-500 bg-blue-50/30",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cutting Specifications"})]}),p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Layer Length (meters) *"}),p.jsx(fn,{type:"number",step:"0.1",value:l.batchCuttingInfo.layerLength,onChange:C=>c(D=>({...D,batchCuttingInfo:{...D.batchCuttingInfo,layerLength:parseFloat(C.target.value)||0}})),placeholder:"4.7",className:"text-lg font-semibold"}),p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:" Standard cutting table length (usually 4.5 - 5.0 meters)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cutting Efficiency (%)"}),p.jsx(fn,{type:"number",value:l.batchCuttingInfo.cuttingEfficiency,onChange:C=>c(D=>({...D,batchCuttingInfo:{...D.batchCuttingInfo,cuttingEfficiency:parseInt(C.target.value)||95}})),placeholder:"95",className:"text-lg font-semibold"}),p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:" Fabric utilization efficiency (recommended: 90-98%)"})]}),p.jsxs("div",{className:"bg-blue-100 rounded-xl p-4 border border-blue-200",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-blue-900",children:"Total Fabric Layers:"}),p.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.batchCuttingInfo.totalLayers})]}),p.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Automatically calculated from your fabric rolls"})]})]})]})}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs(It,{className:"p-6 border-l-4 border-l-green-500 bg-green-50/30",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Fabric Roll"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Roll Number *"}),p.jsx(fn,{placeholder:"R001, F-123, etc.",value:E.rollNumber,onChange:C=>{S(D=>({...D,rollNumber:C.target.value})),A.length>0&&k([])},className:"font-mono"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fabric Color *"}),p.jsx(fn,{placeholder:"Red, Blue, Navy...",value:E.color,onChange:C=>{S(D=>({...D,color:C.target.value})),A.length>0&&k([])}})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),p.jsx(fn,{type:"number",step:"0.1",placeholder:"15.5",value:E.weight,onChange:C=>{S(D=>({...D,weight:C.target.value})),A.length>0&&k([])}})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Layers Count *"}),p.jsx(fn,{type:"number",placeholder:"50",value:E.layerCount,onChange:C=>{S(D=>({...D,layerCount:C.target.value})),A.length>0&&k([])}})]})]}),p.jsxs(Ze,{onClick:J,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 py-3 font-semibold",size:"lg",children:[p.jsx(Zv,{className:"w-5 h-5 mr-2"}),"Add This Roll"]}),A.length>0&&p.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"text-red-500",children:""}),p.jsx("span",{className:"font-semibold text-red-800",children:"Please fix these errors:"})]}),p.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:A.map((C,D)=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-red-400",children:""}),p.jsx("span",{children:C})]},D))})]})]})]}),l.fabricRolls.length>0&&p.jsxs(It,{className:"p-6 border-l-4 border-l-purple-500 bg-purple-50/30",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Fabric Rolls Ready for Cutting (",l.fabricRolls.length,")"]}),p.jsxs("p",{className:"text-purple-700",children:["Total layers: ",l.batchCuttingInfo.totalLayers]})]})]}),p.jsx("div",{className:"grid gap-4",children:l.fabricRolls.map((C,D)=>p.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold text-gray-600",children:D+1}),p.jsx(Lt,{variant:"secondary",className:"font-mono text-lg px-3 py-1",children:C.rollNumber})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 shadow-sm",style:{backgroundColor:C.color.toLowerCase()}}),p.jsx("span",{className:"font-semibold text-gray-900",children:C.color})]}),p.jsxs("div",{className:"text-sm text-gray-600 space-x-6",children:[p.jsxs("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full font-medium",children:[C.weight,"kg"]}),p.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-medium",children:[p.jsx("strong",{children:C.layerCount})," layers"]}),p.jsxs("span",{className:"bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-medium",children:[C.layerLength,"m each"]})]})]}),p.jsxs(Ze,{variant:"outline",size:"sm",onClick:()=>G(C.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:[p.jsx(Zc,{className:"w-4 h-4 mr-1"}),"Remove"]})]})},C.id))})]}),h.fabricRolls&&p.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-red-500",children:""}),p.jsx("p",{className:"text-red-700 font-medium",children:h.fabricRolls})]})}),p.jsxs(It,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[p.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:p.jsx(WR,{className:"h-6 w-6 text-green-600"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Article Size Breakdown"}),p.jsx("p",{className:"text-sm text-gray-500",children:"Different cut ratios for each article type"})]})]}),l.articles.length>1&&p.jsx("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b",children:l.articles.map((C,D)=>p.jsxs("button",{onClick:()=>b(D),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${D===v?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[C.articleNumber||`Article ${D+1}`,p.jsxs("span",{className:"ml-2 text-xs bg-white px-1 rounded",children:[C.sizes.length," sizes"]})]},C.id))}),p.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-blue-900",children:L.articleNumber||`Article ${v+1}`}),p.jsx("p",{className:"text-sm text-blue-700",children:L.style})]}),p.jsxs("div",{className:"text-right text-sm",children:[p.jsxs("p",{className:"text-blue-800",children:[p.jsx("strong",{children:"Sizes:"})," ",L.sizeNames||"Not configured"]}),p.jsxs("p",{className:"text-blue-600",children:[p.jsx("strong",{children:"Ratios:"})," ",L.sizeRatios||"Not configured"]}),L.sizeNames&&L.sizeRatios&&p.jsx(Ze,{onClick:()=>Z(v),className:"mt-2 bg-blue-600 hover:bg-blue-700 text-xs px-2 py-1",children:"Generate Sizes"})]})]})}),p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[p.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" How to Add Sizes"}),p.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Sizes are automatically generated from your Step 1 configuration using the selected template's pricing."}),p.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[p.jsxs("li",{children:[" ",p.jsx("strong",{children:"Same rate & SMV"})," for all sizes (from template)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"Different quantities"})," based on your ratios"]}),p.jsx("li",{children:' Click "Generate Sizes" to create from your size names and ratios'})]}),h.sizeGeneration&&p.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.sizeGeneration})]}),L.sizes.length>0&&p.jsxs("div",{className:"space-y-4 mb-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h4",{className:"font-medium text-gray-900",children:["Article Sizes (",L.sizes.length,")"]}),(()=>{const C=y.find(D=>D.id===L.selectedTemplateId);return C?p.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded",children:["Template: ",p.jsxs("span",{className:"font-medium text-blue-700",children:["Rs. ",C.totalPricePerPiece,"/pc"]})," |",p.jsxs("span",{className:"font-medium text-blue-700",children:[" ",C.totalSmv,"min SMV"]})]}):null})()]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:L.sizes.map((C,D)=>p.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx(Lt,{variant:"secondary",className:"text-lg font-mono",children:C.size}),p.jsx(Ze,{variant:"outline",size:"sm",onClick:()=>q(D),className:"text-red-600 hover:text-red-700 text-xs px-2 py-1",children:"Remove"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Quantity:"}),p.jsxs("span",{className:"font-semibold text-gray-900",children:[C.quantity," pieces"]})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Rate:"}),p.jsxs("span",{className:"font-medium text-gray-900",children:["Rs. ",C.rate,"/pc"]})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"SMV:"}),p.jsxs("span",{className:"font-medium text-gray-900",children:[C.smv," min/pc"]})]}),p.jsx("div",{className:"pt-2 border-t",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Value:"}),p.jsxs("span",{className:"font-bold text-green-600",children:["Rs. ",(C.quantity*C.rate).toFixed(2)]})]})})]})]},D))}),p.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:p.jsxs("div",{className:"flex justify-between items-center text-sm",children:[p.jsx("span",{className:"text-green-700",children:"Article Total:"}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:"font-semibold text-green-900",children:[L.sizes.reduce((C,D)=>C+D.quantity,0)," pieces"]}),p.jsxs("div",{className:"font-bold text-green-600",children:["Rs. ",L.sizes.reduce((C,D)=>C+D.quantity*D.rate,0).toFixed(2)]})]})]})})]}),h[`article_${v}_sizes`]&&p.jsx("p",{className:"text-red-500 text-sm",children:h[`article_${v}_sizes`]})]}),p.jsxs(It,{className:"p-6",children:[p.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Multi-Article Batch Summary"}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[p.jsx("h5",{className:"font-medium text-yellow-900 mb-2",children:" Simultaneous Cutting Process"}),p.jsxs("p",{className:"text-sm text-yellow-800 mb-3",children:["All articles will be cut together using ",l.batchCuttingInfo.totalLayers," total layers at ",l.batchCuttingInfo.layerLength,"m length. Different cut ratios will be applied based on article specifications."]}),p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-yellow-700",children:"Articles:"}),p.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:l.articles.length})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-yellow-700",children:"Fabric Rolls:"}),p.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:l.fabricRolls.length})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-yellow-700",children:"Total Layers:"}),p.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:l.batchCuttingInfo.totalLayers})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-yellow-700",children:"Total Pieces:"}),p.jsx("span",{className:"font-semibold text-yellow-900 ml-1",children:re()})]})]})]}),p.jsx("div",{className:"space-y-3",children:l.articles.map(C=>p.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[p.jsx("span",{children:C.articleNumber}),p.jsx(Lt,{variant:"outline",size:"sm",children:"Article"})]}),p.jsx("p",{className:"text-sm text-gray-600",children:C.style})]}),p.jsxs("div",{className:"text-right",children:[p.jsx(Lt,{variant:C.priority==="urgent"?"danger":C.priority==="high"?"warning":"secondary",children:C.priority}),p.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Template: ",(()=>{const D=y.find(W=>W.id===C.selectedTemplateId);return D?D.templateCode:"Not set"})()]})]})]}),C.sizes.length>0?p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-3",children:C.sizes.map((D,W)=>p.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded",children:[p.jsxs("span",{className:"font-medium",children:[D.size,":"]})," ",D.quantity,"pcs"]},W))}):p.jsx("div",{className:"text-sm text-red-500 italic mb-3",children:"No sizes added"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 border-t pt-2",children:[p.jsxs("div",{children:[p.jsx("span",{children:"Article Total: "}),p.jsxs("span",{className:"font-medium text-gray-900",children:[C.sizes.reduce((D,W)=>D+W.quantity,0)," pieces"]})]}),p.jsxs("div",{children:[p.jsx("span",{children:"Article Value: "}),p.jsxs("span",{className:"font-medium text-gray-900",children:["Rs. ",C.sizes.reduce((D,W)=>D+W.quantity*W.rate,0).toFixed(2)]})]})]})]},C.id))}),p.jsx("div",{className:"border-t pt-4 mt-4",children:p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg font-semibold",children:[p.jsxs("div",{className:"text-right",children:[p.jsx("span",{className:"text-gray-600",children:"Batch Total:"}),p.jsxs("span",{className:"text-gray-900 ml-2",children:[re()," pieces"]})]}),p.jsxs("div",{className:"text-left",children:[p.jsx("span",{className:"text-gray-600",children:"Batch Value:"}),p.jsxs("span",{className:"text-gray-900 ml-2",children:["Rs. ",we().toFixed(2)]})]})]})})]})]})]})]}),ke=()=>p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[p.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl p-8 shadow-lg",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-xl p-3",children:p.jsx(kc,{className:"h-8 w-8 text-white"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold",children:"Step 3: Final Review & Confirmation"}),p.jsx("p",{className:"text-purple-100 text-lg",children:"Review all settings and complete batch setup"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Batch: ",l.bundleNumber||"Not set"]})}),p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Articles: ",l.articles.length]})}),p.jsx("div",{className:"bg-white/20 backdrop-blur rounded-lg px-4 py-2",children:p.jsxs("span",{className:"text-sm font-medium",children:["Total Pieces: ",re()]})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs(It,{className:"p-6 border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("span",{className:"text-3xl",children:""}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Production Overview"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"relative w-24 h-24 mx-auto mb-3",children:p.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:p.jsxs("div",{className:"text-white text-center",children:[p.jsx("div",{className:"text-2xl font-bold",children:re()}),p.jsx("div",{className:"text-xs",children:"PIECES"})]})})}),p.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Production"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"relative w-24 h-24 mx-auto mb-3",children:p.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:p.jsxs("div",{className:"text-white text-center",children:[p.jsxs("div",{className:"text-lg font-bold",children:["Rs.",Math.round(we())]}),p.jsx("div",{className:"text-xs",children:"VALUE"})]})})}),p.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Batch Value"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-orange-600 font-bold",children:"1"})}),p.jsx("span",{className:"font-medium text-gray-700",children:"Articles Setup"})]}),p.jsxs(Lt,{variant:"success",children:[l.articles.length," Articles"]})]}),p.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-blue-600 font-bold",children:"2"})}),p.jsx("span",{className:"font-medium text-gray-700",children:"Fabric Cutting"})]}),p.jsxs(Lt,{variant:"secondary",children:[l.batchCuttingInfo.totalLayers," Layers"]})]}),p.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-purple-600 font-bold",children:"3"})}),p.jsx("span",{className:"font-medium text-gray-700",children:"Sewing Operations"})]}),p.jsxs(Lt,{variant:"warning",children:[l.articles.reduce((C,D)=>{const W=y.find(fe=>fe.id===D.selectedTemplateId);return C+(W?.operations.length||0)},0)," Operations"]})]})]})]}),p.jsxs(It,{className:"p-6 border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-emerald-50",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("span",{className:"text-3xl",children:""}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Article Breakdown"})]}),p.jsx("div",{className:"space-y-4",children:l.articles.map((C,D)=>{const W=y.find(Pe=>Pe.id===C.selectedTemplateId),fe=C.sizes.reduce((Pe,_t)=>Pe+_t.quantity,0),Ae=C.sizes.reduce((Pe,_t)=>Pe+_t.quantity*_t.rate,0),Oe=re()>0?Math.round(fe/re()*100):0;return p.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${D%4===0?"bg-blue-500":D%4===1?"bg-green-500":D%4===2?"bg-orange-500":"bg-purple-500"}`,children:D+1}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-gray-900",children:C.articleNumber}),p.jsx("p",{className:"text-sm text-gray-600",children:C.style})]})]}),p.jsxs(Lt,{variant:"outline",className:"text-sm",children:[Oe,"%"]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:p.jsx("div",{className:`h-2 rounded-full ${D%4===0?"bg-blue-500":D%4===1?"bg-green-500":D%4===2?"bg-orange-500":"bg-purple-500"}`,style:{width:`${Oe}%`}})}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-bold text-gray-900",children:fe}),p.jsx("div",{className:"text-gray-600",children:"Pieces"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-bold text-gray-900",children:W?.operations.length||0}),p.jsx("div",{className:"text-gray-600",children:"Operations"})]}),p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"font-bold text-gray-900",children:["Rs.",Math.round(Ae)]}),p.jsx("div",{className:"text-gray-600",children:"Value"})]})]}),p.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:p.jsx("div",{className:"flex flex-wrap gap-1",children:C.sizes.map((Pe,_t)=>p.jsxs("div",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:[Pe.size,": ",Pe.quantity]},_t))})})]},C.id)})})]})]}),p.jsxs(It,{className:"p-6 border-l-4 border-l-orange-500 bg-gradient-to-br from-orange-50 to-red-50",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("span",{className:"text-3xl",children:""}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fabric & Cutting Layout"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"relative w-20 h-20 mx-auto mb-4",children:p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center shadow-lg transform rotate-45",children:p.jsxs("div",{className:"text-white text-center transform -rotate-45",children:[p.jsx("div",{className:"text-lg font-bold",children:l.fabricRolls.length}),p.jsx("div",{className:"text-xs",children:"ROLLS"})]})})}),p.jsx("p",{className:"font-medium text-gray-700",children:"Fabric Rolls"}),p.jsxs("div",{className:"mt-2 space-y-1",children:[l.fabricRolls.slice(0,3).map(C=>p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:C.color.toLowerCase()}}),p.jsx("span",{className:"text-xs text-gray-600",children:C.rollNumber})]},C.id)),l.fabricRolls.length>3&&p.jsxs("div",{className:"text-xs text-gray-500",children:["+",l.fabricRolls.length-3," more"]})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"relative w-20 h-20 mx-auto mb-4",children:p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:p.jsxs("div",{className:"text-white text-center",children:[p.jsx("div",{className:"text-lg font-bold",children:l.batchCuttingInfo.totalLayers}),p.jsx("div",{className:"text-xs",children:"LAYERS"})]})})}),p.jsx("p",{className:"font-medium text-gray-700",children:"Total Layers"}),p.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-600",children:[p.jsxs("p",{children:[l.batchCuttingInfo.layerLength,"m length"]}),p.jsxs("p",{children:[l.batchCuttingInfo.cuttingEfficiency,"% efficiency"]})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"relative w-20 h-20 mx-auto mb-4",children:p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center shadow-lg",children:p.jsxs("div",{className:"text-white text-center",children:[p.jsx("div",{className:"text-lg font-bold",children:re()}),p.jsx("div",{className:"text-xs",children:"OUTPUT"})]})})}),p.jsx("p",{className:"font-medium text-gray-700",children:"Total Pieces"}),p.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[p.jsxs("p",{children:["Across ",l.articles.length," articles"]}),p.jsxs("p",{children:["Rs. ",we().toFixed(0)," value"]})]})]})]}),p.jsxs("div",{className:"mt-6 pt-6 border-t border-orange-200",children:[p.jsx("h4",{className:"font-medium text-gray-700 mb-3 text-center",children:"Batch Cutting Process"}),p.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-orange-600 text-xs font-bold",children:"1"})}),p.jsx("span",{children:"Layer Setup"})]}),p.jsx("div",{className:"text-gray-400",children:""}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"2"})}),p.jsx("span",{children:"Multi-Article Cut"})]}),p.jsx("div",{className:"text-gray-400",children:""}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-green-600 text-xs font-bold",children:"3"})}),p.jsx("span",{children:"Bundle Ready"})]})]})]})]}),p.jsx(It,{className:"p-6 bg-gradient-to-r from-green-100 to-blue-100 border border-green-200",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[p.jsx("span",{className:"text-4xl",children:""}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Batch Ready for Production!"})]}),p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[p.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.bundleNumber}),p.jsx("div",{className:"text-sm text-gray-600",children:"Batch Number"})]}),p.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[p.jsx("div",{className:"text-2xl font-bold text-green-600",children:re()}),p.jsx("div",{className:"text-sm text-gray-600",children:"Total Pieces"})]}),p.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[p.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.articles.length}),p.jsx("div",{className:"text-sm text-gray-600",children:"Articles"})]}),p.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[p.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["Rs. ",Math.round(we())]}),p.jsx("div",{className:"text-sm text-gray-600",children:"Batch Value"})]})]}),p.jsx("p",{className:"text-gray-700 mb-4",children:"Your multi-article batch is configured and ready to proceed to cutting operations. All articles, sizes, templates, and fabric rolls have been validated."}),p.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-200 text-green-800 px-4 py-2 rounded-full",children:[p.jsx(kc,{className:"w-5 h-5"}),p.jsx("span",{className:"font-medium",children:"All systems validated - Ready to proceed!"})]})]})})]});return p.jsx("div",{className:"min-h-screen bg-gray-50 md:p-4 lg:p-6",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("div",{className:"sticky top-0 z-20 bg-white shadow-sm border-b border-gray-200 px-4 py-3 mb-4",children:p.jsx("div",{className:"flex items-center justify-between",children:[1,2,3].map(C=>p.jsxs(de.Fragment,{children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full transition-all ${C===r?"bg-blue-600 text-white shadow-md":C<r?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:C<r?p.jsx(kc,{className:"h-4 w-4 md:h-5 md:w-5"}):p.jsx("span",{className:"font-bold text-sm md:text-base",children:C})}),p.jsx("div",{className:"ml-2 hidden sm:block",children:p.jsx("p",{className:`text-xs font-medium ${C===r?"text-blue-600":C<r?"text-green-600":"text-gray-500"}`,children:C===1?"Info":C===2?"Fabric":"Review"})})]}),C<3&&p.jsx("div",{className:`flex-1 h-1 mx-2 md:mx-4 rounded-full transition-all ${C<r?"bg-green-500":"bg-gray-200"}`})]},C))})}),p.jsxs("div",{className:"px-4 md:px-6 pb-20",children:[r===1&&Ne(),r===2&&Qe(),r===3&&ke()]}),p.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-30 p-4",children:p.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[p.jsx("div",{children:r>1&&p.jsx(Ze,{variant:"outline",onClick:B,className:"min-h-[48px] px-6 text-base font-medium",children:" Back"})}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Ze,{variant:"outline",onClick:e,className:"min-h-[48px] px-6 text-base font-medium border-red-200 text-red-600 hover:bg-red-50",children:"Cancel"}),r<3?p.jsx(Ze,{onClick:ge,className:"min-h-[48px] px-8 text-base font-medium bg-blue-600 hover:bg-blue-700 text-white",children:"Next "}):p.jsx(Ze,{onClick:te,disabled:d,className:"min-h-[48px] px-8 text-base font-medium bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-400",children:d?"Creating...":" Complete"})]})]})})]})})},pM={apiKey:"AIzaSyB8Z4GdoLZsBW6bfmAh_BSTftpTRUXPZMw",authDomain:"erp-for-tsa.firebaseapp.com",databaseURL:"https://erp-for-tsa-default-rtdb.firebaseio.com",projectId:"erp-for-tsa",storageBucket:"erp-for-tsa.firebasestorage.app",messagingSenderId:"271232983905",appId:"1:271232983905:web:7d06c8f5ec269824759b20",measurementId:"G-6CYWPS4N0G"},xu=V1(pM),Sa=$1(xu),Nh=Y1(xu);jm(xu);Gx(xu);const dn={OPERATORS:"operators",SUPERVISORS:"supervisors",MANAGEMENT:"management",BUNDLES:"bundles",WORK_ASSIGNMENTS:"workAssignments",WORK_ITEMS:"workItems",WORK_COMPLETIONS:"workCompletions",WIP_ENTRIES:"wipEntries",WIP_ROLLS:"wipRolls",ASSIGNMENT_HISTORY:"assignmentHistory",QUALITY_ISSUES:"qualityIssues",NOTIFICATIONS:"notifications",DAILY_REPORTS:"dailyReports",PRODUCTION_STATS:"productionStats",EFFICIENCY_LOGS:"efficiencyLogs",SIZE_CONFIGS:"sizeConfigs",MACHINE_CONFIGS:"machineConfigs",ARTICLE_TEMPLATES:"articleTemplates",DELETED_TEMPLATES:"deletedTemplates",SYSTEM_SETTINGS:"systemSettings",WAGE_RECORDS:"wageRecords",LINE_STATUS:"lineStatus",DAMAGE_REPORTS:"damage_reports",DAMAGE_NOTIFICATIONS:"damage_notifications",OPERATOR_WALLETS:"operatorWallets"};class cE{static async findUser(e){try{const r=await Ws(Wt(Sa,dn.OPERATORS,e));if(r.exists())return{success:!0,data:{id:r.id,...r.data()}};const a=await Ws(Wt(Sa,dn.SUPERVISORS,e));if(a.exists())return{success:!0,data:{id:a.id,...a.data()}};const l=await Ws(Wt(Sa,dn.MANAGEMENT,e));return l.exists()?{success:!0,data:{id:l.id,...l.data()}}:{success:!1,error:"User not found"}}catch(r){return console.error("Error finding user:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}static async getUserById(e,r){try{let a;switch(r){case"operator":a=dn.OPERATORS;break;case"supervisor":a=dn.SUPERVISORS;break;case"management":case"admin":a=dn.MANAGEMENT;break;default:throw new Error("Invalid user role")}const l=await Ws(Wt(Sa,a,e));return l.exists()?{success:!0,data:{id:l.id,...l.data()}}:{success:!1,error:"User not found"}}catch(a){return console.error("Error getting user by ID:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}static async login(e){try{const r=await this.findUser(e.username);if(!r.success||!r.data)return{success:!1,error:"Invalid username or password"};const a=r.data;if(!a.active)return{success:!1,error:"Account is deactivated. Please contact administrator."};if(e.isTrustedDevice&&e.password==="auto_trusted_login"){const{trustedDeviceService:d}=await ue(async()=>{const{trustedDeviceService:y}=await Promise.resolve().then(()=>hR);return{trustedDeviceService:y}},void 0);if(!await d.isDeviceTrusted(e.username))return{success:!1,error:" Device trust has expired. Please login normally."};console.log(" Trusted device auto-login successful for:",a.name)}else{const d=a.passwordHash,m=btoa(e.password);if(!d||d!==m)return{success:!1,error:"Invalid username or password"}}const l=a.role==="operator"?dn.OPERATORS:a.role==="supervisor"?dn.SUPERVISORS:dn.MANAGEMENT;return await Aa(Wt(Sa,l,a.id),{lastLogin:lr()}),{success:!0,data:{...a,lastLogin:new Date}}}catch(r){return console.error("Login error:",r),{success:!1,error:r instanceof Error?r.message:"Login failed"}}}static async logout(e){try{return Nh.currentUser&&await aT(Nh),console.log("User logged out successfully"),{success:!0}}catch(r){return console.error("Logout error:",r),{success:!1,error:r instanceof Error?r.message:"Logout failed"}}}static async updateUserProfile(e,r,a){try{const l=r==="operator"?dn.OPERATORS:r==="supervisor"?dn.SUPERVISORS:dn.MANAGEMENT;return await Aa(Wt(Sa,l,e),{...a,updatedAt:lr()}),{success:!0}}catch(l){return console.error("Error updating user profile:",l),{success:!1,error:l instanceof Error?l.message:"Update failed"}}}static async changePassword(e,r,a,l){try{return console.log("Password change requested for user:",e),{success:!0}}catch(c){return console.error("Error changing password:",c),{success:!1,error:c instanceof Error?c.message:"Password change failed"}}}static hasPermission(e,r){return e?e.role==="admin"||e.permissions.includes("*")?!0:e.permissions.includes(r):!1}static async validateSession(e,r){try{return await this.getUserById(e,r)}catch(a){return console.error("Session validation error:",a),{success:!1,error:"Session validation failed"}}}static onAuthStateChanged(e){return sT(Nh,e)}}const yM=Object.freeze(Object.defineProperty({__proto__:null,AuthService:cE},Symbol.toStringTag,{value:"Module"})),Ah=U.lazy(()=>ue(()=>import("./OperatorDashboard.Bzn8MOcr.js"),__vite__mapDeps([6,2,3,7,1,8,9,10,11,12,13,4,5,14])).then(i=>({default:i.OperatorDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"OperatorDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Dashboard temporarily unavailable")}))),Ch=U.lazy(()=>ue(()=>import("./SupervisorDashboard.BdzZeFMO.js"),__vite__mapDeps([15,2,3,7,1,8,9,10,11,12,13,4,5,14])).then(i=>({default:i.SupervisorDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"SupervisorDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Supervisor Dashboard temporarily unavailable")}))),vM=U.lazy(()=>ue(()=>import("./assignment-dashboard.DWAGkBZH.js"),__vite__mapDeps([16,2,3,14,4,17,18,19,20,21,22,23,24,25,1,5])).then(i=>({default:i.AssignmentDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"AssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Assignment Dashboard temporarily unavailable")}))),_M=U.lazy(()=>ue(()=>import("./bundle-lifecycle-manager.CAbkZAmi.js"),__vite__mapDeps([26,2,3,27,28,29,30,31,5,4,32,33,1,34])).then(i=>({default:i.BundleLifecycleManager})).catch(i=>(_e.captureException(i,{tags:{component:"BundleLifecycleManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Lifecycle Manager temporarily unavailable")}))),bM=U.lazy(()=>ue(()=>import("./production-dashboard.DGxVRLQb.js"),__vite__mapDeps([35,2,3,28,34,4,36,5,1])).then(i=>({default:i.ProductionDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"ProductionDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Production Dashboard temporarily unavailable")}))),xM=U.lazy(()=>ue(()=>import("./quality-management-dashboard.CCQ6BrZp.js"),__vite__mapDeps([37,2,3,27,28,31,5,10,11,1,34,4,29,38,18])).then(i=>({default:i.QualityManagementDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"QualityManagementDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Quality Management Dashboard temporarily unavailable")}))),EM=U.lazy(()=>ue(()=>import("./earnings-dashboard.Bm2tQsDO.js"),__vite__mapDeps([39,2,3,29,11,1,34,4,5,28,30,31,32,40,22,18])).then(i=>({default:i.EarningsDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"EarningsDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Earnings Dashboard temporarily unavailable")}))),wM=U.lazy(()=>ue(()=>import("./operator-management-dashboard.B81JX-Rt.js"),__vite__mapDeps([41,2,3,14,4,17,8,1,18,24,25,42,20,43,22,44,0,5,21])).then(i=>({default:i.default||i.OperatorManagementDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"OperatorManagementDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Management Dashboard temporarily unavailable")}))),SM=U.lazy(()=>ue(()=>import("./self-assignment-interface.DzdJUvQa.js"),__vite__mapDeps([45,2,3,14,4,17,23,24,19,18,22,1,5])).then(i=>({default:i.SelfAssignmentInterface})).catch(i=>(_e.captureException(i,{tags:{component:"SelfAssignmentInterface",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Self Assignment Interface temporarily unavailable")}))),TM=U.lazy(()=>ue(()=>import("./production-timer.DGanI1S_.js"),__vite__mapDeps([46,2,3,40,32,31,5,4,1])).then(i=>({default:i.ProductionTimer})).catch(i=>(_e.captureException(i,{tags:{component:"ProductionTimer",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Production Timer temporarily unavailable")}))),NM=U.lazy(()=>ue(()=>import("./workflow-sequencer.CxLMIQG6.js"),__vite__mapDeps([47,2,3,18,48,49,4,1,5])).then(i=>({default:i.WorkflowSequencer})).catch(i=>(_e.captureException(i,{tags:{component:"WorkflowSequencer",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Workflow Sequencer temporarily unavailable")}))),AM=U.lazy(()=>ue(()=>import("./mobile-friendly-layout.v3dye4fR.js"),__vite__mapDeps([50,2,3,31,5,51,52,53,54,55,19,56,21,48,4,1])).then(i=>({default:i.MobileFriendlyLayout})).catch(i=>{throw _e.captureException(i,{tags:{component:"MobileFriendlyLayout",type:"dynamic-import"},level:"error"}),i})),CM=U.lazy(()=>ue(()=>import("./mobile-test.CZfHslKS.js"),__vite__mapDeps([57,2,3])).then(i=>({default:i.MobileTest})).catch(i=>(_e.captureException(i,{tags:{component:"MobileTest",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Mobile Test temporarily unavailable")}))),O1=U.lazy(()=>ue(()=>import("./live-production-dashboard.Ccymu9z4.js"),__vite__mapDeps([58,2,3,55,19,59,22,4,1,5])).then(i=>({default:i.LiveProductionDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"LiveProductionDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Live Production Dashboard temporarily unavailable")}))),OM=U.lazy(()=>ue(()=>import("./CuttingDropletManager.D3_fnJO4.js"),__vite__mapDeps([60,2,3,27,28,1,34,4,5])).catch(i=>(_e.captureException(i,{tags:{component:"CuttingDropletManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Cutting Droplet Manager temporarily unavailable")}))),RM=U.lazy(()=>ue(()=>import("./ProductionLotManager.BVs-j25o.js"),__vite__mapDeps([61,2,3,27,28,29,62,1,34,4,5])).catch(i=>(_e.captureException(i,{tags:{component:"ProductionLotManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Production Lot Manager temporarily unavailable")}))),DM=U.lazy(()=>ue(()=>import("./ProcessPricingManager.stvzEbCh.js"),__vite__mapDeps([63,2,3,27,28,64,31,5,34,4,1])).catch(i=>(_e.captureException(i,{tags:{component:"ProcessPricingManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Process Pricing Manager temporarily unavailable")}))),MM=U.lazy(()=>ue(()=>import("./EnhancedOperatorDashboard.Ce-q2D0a.js"),__vite__mapDeps([65,2,3,27,66,1,34,4,5])).catch(i=>(_e.captureException(i,{tags:{component:"EnhancedOperatorDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Enhanced Operator Dashboard temporarily unavailable")}))),kM=U.lazy(()=>ue(()=>import("./OperatorPieceTracker.t0Qi0IBF.js"),__vite__mapDeps([67,2,3,27,28,62,1,34,4,5])).catch(i=>(_e.captureException(i,{tags:{component:"OperatorPieceTracker",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Piece Tracker temporarily unavailable")}))),jM=U.lazy(()=>ue(()=>import("./BundleAssignmentManager.MTxhEVXu.js"),__vite__mapDeps([68,2,3,27,28,64,31,5,66,1,34,4])).catch(i=>(_e.captureException(i,{tags:{component:"BundleAssignmentManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Assignment Manager temporarily unavailable")}))),IM=U.lazy(()=>ue(()=>import("./sewing-template-manager.CvW0GB3H.js"),__vite__mapDeps([69,2,3,5,4,1])).then(i=>({default:i.default||i.SewingTemplateManager})).catch(i=>(_e.captureException(i,{tags:{component:"SewingTemplateManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Sewing Template Manager temporarily unavailable")}))),LM=U.lazy(()=>ue(()=>import("./bundle-assignment-dashboard.az_HLnGx.js"),__vite__mapDeps([70,2,3,14,4,18,71,24,1,5])).then(i=>({default:i.BundleAssignmentDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"BundleAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Assignment Dashboard temporarily unavailable")}))),R1=U.lazy(()=>ue(()=>import("./operator-work-dashboard.D472DuO8.js"),__vite__mapDeps([72,2,3,14,4,48,71,73,19,53,18,1,5])).then(i=>({default:i.OperatorWorkDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"OperatorWorkDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Work Dashboard temporarily unavailable")}))),UM=U.lazy(()=>ue(()=>import("./operator-self-assignment.fxXj4rL2.js"),__vite__mapDeps([74,2,3,14,4,21,18,43,49,1,5])).then(i=>({default:i.OperatorSelfAssignment})).catch(i=>(_e.captureException(i,{tags:{component:"OperatorSelfAssignment",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Self Assignment temporarily unavailable")}))),BM=U.lazy(()=>ue(()=>import("./supervisor-parts-dashboard.bEX945cv.js"),__vite__mapDeps([75,2,3,14,4,53,51,18,1,5])).then(i=>({default:i.SupervisorPartsDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"SupervisorPartsDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Supervisor Parts Dashboard temporarily unavailable")}))),PM=U.lazy(()=>ue(()=>import("./multi-strategy-assignment-dashboard.CcFo1p3x.js"),__vite__mapDeps([76,2,3,14,4,21,77,52,18,25,24,1,5])).then(i=>({default:i.MultiStrategyAssignmentDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"MultiStrategyAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Multi Strategy Assignment Dashboard temporarily unavailable")}))),zM=U.lazy(()=>ue(()=>import("./bundle-batch-tracking-dashboard.CsKfUYxo.js"),__vite__mapDeps([78,2,3,14,4,54,19,77,59,79,18,71,38,1,5])).then(i=>({default:i.BundleBatchTrackingDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"BundleBatchTrackingDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Bundle Batch Tracking Dashboard temporarily unavailable")}))),qM=U.lazy(()=>ue(()=>import("./drag-drop-assignment-dashboard.B0RSLtZh.js"),__vite__mapDeps([80,2,3,81,14,4,82,1,5,18,56,71,21,49])).then(i=>({default:i.DragDropAssignmentDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"DragDropAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Drag Drop Assignment Dashboard temporarily unavailable")}))),HM=U.lazy(()=>ue(()=>import("./kanban-assignment-board.Cq1Gx1tZ.js"),__vite__mapDeps([83,2,3,81,14,4,82,1,5,18,71,48,21,49])).then(i=>({default:i.KanbanAssignmentBoard})).catch(i=>(_e.captureException(i,{tags:{component:"KanbanAssignmentBoard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Kanban Assignment Board temporarily unavailable")}))),FM=U.lazy(()=>ue(()=>import("./supervisor-operator-buckets.CpHow4a8.js"),__vite__mapDeps([84,2,3,14,4,21,18,1,5])).then(i=>({default:i.default})).catch(i=>(_e.captureException(i,{tags:{component:"SupervisorOperatorBuckets",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Supervisor Operator Buckets temporarily unavailable")}))),GM=U.lazy(()=>ue(()=>import("./smart-work-assignment-dashboard._r84Z2j_.js"),__vite__mapDeps([85,2,3,14,4,1,24,79,86,71,18,21,5])).then(i=>({default:i.SmartWorkAssignmentDashboard})).catch(i=>(_e.captureException(i,{tags:{component:"SmartWorkAssignmentDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Smart Work Assignment Dashboard temporarily unavailable")}))),VM=U.lazy(()=>ue(()=>import("./operator-profile-assignment.ckg2WJf2.js"),__vite__mapDeps([87,2,3,14,4,19,18,73,21,20,43,86,56,1,5])).then(i=>({default:i.OperatorProfileAssignment})).catch(i=>(_e.captureException(i,{tags:{component:"OperatorProfileAssignment",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Operator Profile Assignment temporarily unavailable")}))),$M=U.lazy(()=>ue(()=>import("./sequential-workflow-assignment.CSq89P_x.js"),__vite__mapDeps([88,2,3,14,4,21,48,86,1,5])).then(i=>({default:i.SequentialWorkflowAssignment})).catch(i=>(_e.captureException(i,{tags:{component:"SequentialWorkflowAssignment",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Sequential Workflow Assignment temporarily unavailable")}))),YM=U.lazy(()=>ue(()=>import("./LoginAnalyticsDashboard.CTSlBmlu.js"),__vite__mapDeps([89,2,3,4,1,5])).catch(i=>(_e.captureException(i,{tags:{component:"LoginAnalyticsDashboard",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Login Analytics Dashboard temporarily unavailable")}))),QM=U.lazy(()=>ue(()=>import("./TrustedDeviceManager.iTlK_6h2.js"),__vite__mapDeps([90,2,3,34,4,1,5])).catch(i=>(_e.captureException(i,{tags:{component:"TrustedDeviceManager",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Trusted Device Manager temporarily unavailable")}))),KM=U.lazy(()=>ue(()=>import("./WorkflowNotificationDemo.ClgniE9C.js"),__vite__mapDeps([91,2,3,9,1,34,4,5])).catch(i=>(_e.captureException(i,{tags:{component:"WorkflowNotificationDemo",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Workflow Demo temporarily unavailable")}))),XM=U.lazy(()=>ue(()=>import("./AdminUserManagement.xXs2aZzL.js"),__vite__mapDeps([92,2,3,12,1,24,38,21,42,4,5])).catch(i=>(_e.captureException(i,{tags:{component:"AdminUserManagement",type:"dynamic-import"},level:"error"}),{default:()=>de.createElement("div",{className:"p-6 text-center"},"Admin User Management temporarily unavailable")}))),WM=({text:i="Loading..."})=>p.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200"}),p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent absolute top-0 left-0"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-lg text-gray-700 animate-pulse",children:i}),p.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Please wait..."})]})]}),ZM=new MS({defaultOptions:{queries:{retry:3,staleTime:300*1e3,refetchOnWindowFocus:!1}}}),JM=({onLogin:i})=>{const[e,r]=U.useState({username:"",password:""}),[a,l]=U.useState(!1),c=async d=>{d.preventDefault(),l(!0);try{const m=await cE.login({username:e.username,password:e.password});m.success&&m.data?i(m.data.username,m.data.role):alert(m.error||"Login failed")}catch(m){console.error("Login error:",m),alert("Login failed. Please try again.")}finally{l(!1)}};return p.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsxs("div",{children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("img",{src:"/logo.png",alt:"TSA",className:"h-16 w-auto"})}),p.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:" TSA Intelligence Hub"}),p.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:" Advanced Smart Manufacturing Command Center"}),p.jsx("p",{className:"text-center text-xs text-gray-500",children:"AI-Powered Analytics  Real-Time Intelligence  Predictive Operations"})]}),p.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[p.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),p.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-brand-500 focus:border-brand-500 focus:z-10 sm:text-sm",placeholder:"Username",value:e.username,onChange:d=>r({...e,username:d.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),p.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-brand-500 focus:border-brand-500 focus:z-10 sm:text-sm",placeholder:"Password",value:e.password,onChange:d=>r({...e,password:d.target.value})})]})]}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50",children:a?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign In"})}),p.jsx("div",{className:"text-center",children:p.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[p.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Login Credentials:"}),p.jsxs("div",{className:"space-y-1 text-left",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Supervisor:"})," sup / sup"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Admin:"})," admin / admin"]})]})]})})]})]})})},e3=({userRole:i="operator",onLogout:e})=>{const[r,a]=U.useState("dashboard"),l=d=>{switch(d){case"operator":return"op-maya-001";case"supervisor":return"sup-john-001";case"manager":return"mgr-admin-001";default:return"op-maya-001"}},c=()=>{const d=l(i);switch(r){case"dashboard":switch(i){case"operator":return p.jsx(Ah,{operatorId:d});case"supervisor":return p.jsx(Ch,{supervisorId:d});case"management":return p.jsx(Ch,{supervisorId:d});case"admin":return p.jsx(Ch,{supervisorId:d});default:return p.jsx(Ah,{operatorId:d})}case"work-assignment":return i==="operator"?p.jsx(R1,{operatorId:d,operatorName:"Current Operator"}):p.jsx(vM,{});case"bundles":return p.jsx(_M,{mode:"view"});case"analytics":return p.jsx(bM,{});case"quality":return p.jsx(xM,{userRole:i});case"earnings":return p.jsx(EM,{userRole:i,operatorId:i==="operator"?d:void 0});case"operators":return p.jsx(wM,{userRole:i});case"self-assignment":return p.jsx(SM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current User",operatorSkills:{skillLevel:"intermediate",machineTypes:["sewing","overlock","cutting"],primaryMachine:"sewing",specializations:["precision-work","quality-control"]},maxConcurrentWork:3});case"timer":return p.jsxs("div",{className:"p-8",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Production Timer"}),p.jsx(TM,{workItemId:"sample-work-item-001",operatorId:d,workItem:{id:"sample-work-item-001",bundleId:"bundle-001",workItemNumber:"WI-001",machineType:"sewing",operation:"Sample Production Task",operationCode:"OP-001",skillLevelRequired:"intermediate",targetPieces:50,completedPieces:0,rejectedPieces:0,reworkPieces:0,assignedOperatorId:d,assignmentMethod:"supervisor_assigned",estimatedDuration:120,status:"assigned"}})]});case"complete-wip-entry":return p.jsx(gM,{onComplete:async m=>{console.log("WIP Entry completed:",m);try{const{bundleService:y}=await ue(async()=>{const{bundleService:_}=await import("./bundle-service.CrAqiZci.js");return{bundleService:_}},__vite__mapDeps([33,1,2,3,4,5])),f={wipEntryId:`wip_${Date.now()}`,batchNumber:m.bundleNumber,articles:m.articles.map(_=>({articleId:_.id,articleNumber:_.articleNumber,articleStyle:_.style,templateId:_.selectedTemplateId,sizes:_.sizes.map(v=>({size:v.size,quantity:v.quantity}))})),fabricRolls:m.fabricRolls.map(_=>({rollId:_.id,rollNumber:_.rollNumber,color:_.color,weight:_.weight,layerCount:_.layerCount})),bundlePrefix:"BND",createdBy:i==="operator"?"Maya Patel":i==="supervisor"?"John Smith":"Admin User"},h=await y.generateBundles(f);if(h.success&&h.data){const _=h.data,v=m.articles.reduce((S,A)=>S+(A.sizes?.reduce((k,L)=>k+L.quantity,0)||0),0),b=_.reduce((S,A)=>S+A.totalValue,0),E=_.reduce((S,A)=>S+A.operations.length,0);alert(` Production Bundles Created Successfully!
                  
 Batch: ${m.bundleNumber}
 Bundles Generated: ${_.length}
 Articles: ${m.articles.length} 
 Total Pieces: ${v}
 Total Operations: ${E}
 Total Value: Rs. ${b.toFixed(2)}

Ready for supervisor assignment!`)}else alert(` Failed to generate bundles: ${h.error}`)}catch(y){console.error("Bundle generation error:",y),alert(" Failed to generate production bundles. Please try again.")}a("dashboard")},onCancel:()=>a("dashboard")});case"live-dashboard":return p.jsx(O1,{displayMode:"desktop",autoRefresh:!0,refreshInterval:5e3,showAlerts:!0});case"tv-dashboard":return p.jsx(O1,{displayMode:"tv",autoRefresh:!0,refreshInterval:3e3,showAlerts:!0});case"barcode-scanner":return p.jsx(lM,{onScanSuccess:m=>{console.log(" Barcode scan result:",m),m.success&&m.data?alert(`Bundle Scanned!
Bundle: ${m.data.bundleNumber}
Lot: ${m.data.lotNumber}`):alert("Scan failed. Please try again.")},onClose:()=>a("dashboard"),allowManualEntry:!0,scanMode:"both",title:"Scan Bundle"});case"label-generator":return p.jsx(oM,{onLabelGenerated:m=>{console.log(" Label generated:",m)}});case"sewing-templates":return p.jsx(IM,{});case"workflow":return p.jsx(NM,{operations:[],onExecutePlan:m=>console.log("Executing plan:",m),onUpdateOperationStatus:(m,y)=>console.log("Operation status updated:",m,y)});case"cutting-droplet":return p.jsx(OM,{});case"production-lots":return p.jsx(RM,{mode:"create"});case"pricing-manager":return p.jsx(DM,{});case"enhanced-operator":return p.jsx(MM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator",machineTypes:["overlock","single_needle","flatlock"]});case"piece-tracker":return p.jsx(kM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator"});case"bundle-assignment":return p.jsx(jM,{});case"bundle-assignments":return p.jsx(LM,{userRole:i});case"my-work":return p.jsx(R1,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator"});case"self-assign":return p.jsx(UM,{operatorId:d,operatorName:i==="operator"?"Maya Patel":"Current Operator",operatorMachineType:"overlock"});case"parts-issues":return p.jsx(BM,{});case"multi-assignment":return p.jsx(PM,{});case"bundle-analytics":return p.jsx(zM,{});case"drag-drop-assignment":return p.jsx(qM,{userRole:i});case"kanban-assignment":return p.jsx(HM,{userRole:i});case"operator-buckets":return p.jsx(FM,{userRole:i});case"smart-assignment":return p.jsx(GM,{userRole:i});case"operator-profile":return p.jsx(VM,{userRole:i});case"sequential-workflow":return p.jsx($M,{userRole:i});case"mobile-test":return p.jsx(CM,{});case"login-analytics":return p.jsx(YM,{});case"trusted-devices":return p.jsx(QM,{});case"user-management":return p.jsx(XM,{adminId:d});case"workflow-notifications":return p.jsx(KM,{});default:return p.jsx(Ah,{operatorId:d})}};return p.jsx(Fy,{onError:d=>{console.error("Error in MobileFriendlyLayout:",d)},children:p.jsx(AM,{currentUser:{name:i==="operator"?"Maya Patel":i==="supervisor"?"John Smith":"Admin User",role:i},currentView:r,onViewChange:a,onLogout:e,children:p.jsx(Fy,{children:c()})})})};function t3(){const[i,e]=U.useState(()=>localStorage.getItem("tsa_auth_token")==="authenticated"),[r,a]=U.useState(()=>localStorage.getItem("tsa_user_role")||"");U.useEffect(()=>{i&&r?(async()=>{await Kv.initialize();const m=localStorage.getItem("tsa_auth_token"),y=localStorage.getItem("tsa_user_role"),f=localStorage.getItem("tsa_username");if(m==="authenticated"&&y&&f)try{try{const{AuthService:h}=await ue(async()=>{const{AuthService:v}=await Promise.resolve().then(()=>yM);return{AuthService:v}},void 0);if(!(await h.validateSession(f,y)).success){console.log("Session validation failed, logging out"),c();return}console.log(" Session validated successfully via Firebase")}catch(h){console.error("Firebase session validation error:",h),console.log(" Firebase validation failed, using localStorage fallback")}}catch(h){console.error("Session validation error:",h)}})():Kv.initialize()},[i,r]),U.useEffect(()=>{const d=async m=>{if((m.ctrlKey||m.metaKey)&&m.shiftKey&&m.key==="R"){m.preventDefault();try{const{CacheManager:y}=await ue(async()=>{const{CacheManager:f}=await import("./cache-manager.CUz8vIoj.js");return{CacheManager:f}},[]);y.forceReload()}catch(y){console.error("Failed to load cache manager:",y),window.location.reload()}}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]);const l=(d,m)=>{a(m),e(!0),localStorage.setItem("tsa_auth_token","authenticated"),localStorage.setItem("tsa_user_role",m),localStorage.setItem("tsa_username",d)},c=()=>{e(!1),a(""),localStorage.removeItem("tsa_auth_token"),localStorage.removeItem("tsa_user_role"),localStorage.removeItem("tsa_username")};return p.jsx(kS,{client:ZM,children:p.jsx(LS,{children:i?p.jsx(U.Suspense,{fallback:p.jsx(WM,{text:"Loading dashboard..."}),children:p.jsx(e3,{userRole:r,onLogout:c})}):p.jsx(JM,{onLogin:l})})})}hT.createRoot(document.getElementById("root")).render(p.jsx(U.StrictMode,{children:p.jsx(t3,{})}));export{Zv as A,Ze as B,It as C,th as D,_a as E,kc as F,HR as G,Xx as H,fn as I,$x as J,dR as K,uR as L,w2 as M,E2 as N,Gv as O,Qv as P,yM as Q,Sn as R,ue as _,Lt as a,Qx as b,Yx as c,Kx as d,l3 as e,Ur as f,Zs as g,dt as h,Wv as i,BR as j,wt as k,pn as l,zR as m,WR as n,Pr as o,jR as p,VR as q,gn as r,hn as s,N2 as t,mn as u,mM as v,Yh as w,g2 as x,m2 as y,Zc as z};
