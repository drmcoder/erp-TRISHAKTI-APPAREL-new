import{u as f,j as e}from"./query-vendor.DpsghfSz.js";import{r as l}from"./react-vendor.CfKEcsXX.js";import{A as d,a as o,P as y}from"./production-timer.TYPL2y9f.js";import{C as a,b as n,B as N,c as m,d as x,a as u}from"./index.CUWf0ERd.js";import{workAssignmentService as b}from"./work-assignment-service.uP3JWO5o.js";import{R as v,a as h,C}from"./ui-vendor.D450QVBF.js";import"./progress.gceU5Vz_.js";import"./index.CgqrbJCd.js";import"./utils.k9sMftog.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.D8xw0AXf.js";const F=({operatorId:i})=>{const[t,c]=l.useState(null),{data:r,isLoading:j,error:p,refetch:g}=f({queryKey:["operator-work-items",i],queryFn:async()=>{const s=await b.getOperatorWorkItems(i);return s.success?s.data||[]:[]},enabled:!!i,refetchInterval:3e4});return l.useEffect(()=>{r&&r.length>0&&!t&&c(r[0])},[r,t]),j?e.jsx(a,{children:e.jsx(n,{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading work items..."})]})})}):p?e.jsxs(d,{variant:"destructive",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs(o,{children:["Failed to load work items. Please try again.",e.jsx(N,{variant:"outline",size:"sm",className:"ml-2",onClick:()=>g(),children:"Retry"})]})]}):!r||r.length===0?e.jsxs(a,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Production Timer"})]})}),e.jsx(n,{children:e.jsxs(d,{children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx(o,{children:"No work items assigned. Please contact your supervisor to get work assigned."})]})})]}):e.jsxs("div",{className:"space-y-4",children:[r.length>1&&e.jsxs(a,{children:[e.jsx(m,{children:e.jsx(x,{children:"Select Work Item"})}),e.jsx(n,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(s=>e.jsxs("div",{className:`p-3 border rounded cursor-pointer transition-colors ${t?.id===s.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>c(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(u,{variant:"outline",children:s.workItemNumber}),e.jsx(u,{className:s.status==="in_progress"?"bg-blue-100 text-blue-800":s.status==="assigned"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:s.status.replace("_"," ")})]}),e.jsx("p",{className:"font-medium text-sm",children:s.operation}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Bundle: ",s.bundleId]}),e.jsxs("span",{children:[s.targetPieces," pieces"]})]})]},s.id))})})]}),t&&e.jsx(y,{workItemId:t.id,operatorId:i,workItem:t})]})};export{F as ProductionTimerWrapper};
