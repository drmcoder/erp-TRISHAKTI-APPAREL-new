import{j as e}from"./query-vendor.NFs8Lf8Y.js";import{r as d}from"./react-vendor.BcnQP8kQ.js";import{B as M,c as l,J as _,n as O,F as L,z as J,b as G,m as K}from"./index.B__xpDQO.js";import{L as Y}from"./LoadingSpinner.BqqE1w83.js";import{F as Z}from"./DocumentChartBarIcon.DqzMHEQm.js";import{F as X}from"./ChartBarIcon.BgzBpEol.js";import{F as ee}from"./CalendarIcon.DeQZHRtH.js";import{F as q}from"./ArrowTrendingUpIcon.ZpLjQdky.js";import{F as V}from"./LightBulbIcon.BL5cAUDl.js";import{F as te}from"./ClockIcon.DbOxfhcH.js";import{F as Q}from"./CurrencyDollarIcon.CyMFdc0e.js";import{F as se}from"./ShieldCheckIcon.DJ7tua4m.js";import"./ui-vendor.BnTQXQPs.js";import"./utils-vendor.B0NEtgzl.js";import"./firebase-vendor.m6WcKfT_.js";function re({title:c,titleId:f,...m},j){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:j,"aria-labelledby":f},m),c?d.createElement("title",{id:f},c):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ae=d.forwardRef(re),ie=c=>{const f=[{number:"3233",style:"Adult T-shirt",sizes:["XS","S","M","L","XL"]},{number:"3265",style:"Ladies Blouse",sizes:["XS","S","M","L","XL"]},{number:"3401",style:"Kids T-shirt",sizes:["2T","3T","4T","5T"]},{number:"3502",style:"Polo Shirt",sizes:["S","M","L","XL","XXL"]},{number:"3678",style:"Tank Top",sizes:["XS","S","M","L"]}],m=["created","cutting","sewing","quality","finished","shipped"],j=["low","normal","high","urgent"],N=[];for(let h=1;h<=c;h++){const y=f[Math.floor(Math.random()*f.length)],b=y.sizes[Math.floor(Math.random()*y.sizes.length)],x=Math.floor(h/50)+1,v=Math.floor(h/500)+1,r=m[Math.floor(Math.random()*m.length)],p=j[Math.floor(Math.random()*j.length)],g=new Date(Date.now()-Math.random()*7*24*60*60*1e3),n=4+Math.random()*8,o=r!=="created"?n*(.8+Math.random()*.6):void 0,S=o?Math.min(100,n/o*100):85+Math.random()*15;N.push({id:`bundle_${h}`,bundleNumber:`BND-${y.number}-${b}-${String(h).padStart(4,"0")}`,batchId:`batch_${x}`,batchNumber:`BATCH-${String(x).padStart(3,"0")}`,lotId:`lot_${v}`,lotNumber:`LOT-${String(v).padStart(2,"0")}`,articleNumber:y.number,articleStyle:y.style,size:b,quantity:1,createdAt:g,startedAt:r!=="created"?new Date(g.getTime()+Math.random()*2*60*60*1e3):void 0,completedAt:r==="finished"||r==="shipped"?new Date(g.getTime()+o*60*60*1e3):void 0,status:r,currentOperation:r==="sewing"?["Shoulder Join","Side Seam","Sleeve Attach"][Math.floor(Math.random()*3)]:void 0,plannedDuration:n,actualDuration:o,efficiency:S,defectRate:Math.random()*5,reworkCount:Math.floor(Math.random()*3),assignedOperators:[`op_${Math.floor(Math.random()*8)+1}`],supervisorId:`supervisor_${Math.floor(Math.random()*3)+1}`,priority:p,totalCost:50+Math.random()*100,totalEarnings:80+Math.random()*150,materialCost:30+Math.random()*50,qualityScore:6+Math.random()*4,qualityIssues:Math.random()>.8?["Minor stitch issue"]:[],milestones:[{stage:"cutting",completedAt:new Date(g.getTime()+7200*1e3),plannedAt:new Date(g.getTime()+1.5*60*60*1e3),variance:.5}]})}return N},Ne=()=>{const[c,f]=d.useState([]),[m,j]=d.useState([]),[N,h]=d.useState(!0),[y,b]=d.useState("week"),[x,v]=d.useState("overview"),[r,p]=d.useState({status:"all",priority:"all",article:"all",batch:"all",lot:"all"});d.useEffect(()=>{h(!0),setTimeout(()=>{const t=ie(1200);f(t),g(t),h(!1)},2e3)},[]);const g=t=>{const i=[],F=t.reduce((s,a)=>s+a.efficiency,0)/t.length;F<80&&i.push({id:"efficiency_low",type:"efficiency",severity:"warning",title:"Below Target Efficiency",description:`Average efficiency is ${F.toFixed(1)}%, below the 85% target`,impact:"Reduced productivity and increased costs",recommendation:"Review operator training and workload distribution",data:{avgEfficiency:F,target:85},priority:8});const R=t.filter(s=>s.status==="sewing").length,$=t.filter(s=>s.status==="quality").length;R>$*3&&i.push({id:"bottleneck_quality",type:"bottleneck",severity:"critical",title:"Quality Check Bottleneck",description:`${R} bundles waiting for quality vs ${$} in quality`,impact:"Delayed shipments and increased WIP",recommendation:"Add more quality inspectors or streamline QC process",data:{sewingQueue:R,qualityQueue:$},priority:9});const A=t.reduce((s,a)=>s+a.defectRate,0)/t.length;A>3&&i.push({id:"quality_issues",type:"quality",severity:"warning",title:"High Defect Rate",description:`Average defect rate is ${A.toFixed(1)}%, above 3% threshold`,impact:"Increased rework costs and customer complaints",recommendation:"Implement additional quality training and process improvements",data:{defectRate:A,threshold:3},priority:7});const w=t.filter(s=>s.createdAt>new Date(Date.now()-720*60*60*1e3)),U=w.reduce((s,a)=>s+a.totalCost,0)/w.length,P=w.reduce((s,a)=>s+a.totalEarnings,0)/w.length,C=(P-U)/P*100;C<30&&i.push({id:"profit_margin",type:"cost",severity:"warning",title:"Low Profit Margin",description:`Profit margin is ${C.toFixed(1)}%, below 30% target`,impact:"Reduced profitability and business sustainability",recommendation:"Review pricing strategy and cost optimization",data:{margin:C,target:30},priority:6});const H=t.reduce((s,a)=>(a.assignedOperators.forEach(u=>{s[u]||(s[u]={bundles:0,totalEfficiency:0,defects:0}),s[u].bundles+=1,s[u].totalEfficiency+=a.efficiency,s[u].defects+=a.defectRate}),s),{}),T=Object.entries(H).filter(([s,a])=>a.totalEfficiency/a.bundles<75).length;T>0&&i.push({id:"operator_performance",type:"operator",severity:"warning",title:"Underperforming Operators",description:`${T} operators performing below 75% efficiency`,impact:"Reduced overall productivity",recommendation:"Provide additional training and performance coaching",data:{underperforming:T},priority:5});const k=t.filter(s=>s.createdAt>new Date(Date.now()-10080*60*1e3)),B=t.filter(s=>s.createdAt<=new Date(Date.now()-10080*60*1e3)&&s.createdAt>new Date(Date.now()-336*60*60*1e3));if(k.length>0&&B.length>0){const s=k.reduce((u,E)=>u+E.efficiency,0)/k.length,a=B.reduce((u,E)=>u+E.efficiency,0)/B.length;s<a-5&&i.push({id:"efficiency_declining",type:"trend",severity:"warning",title:"Declining Efficiency Trend",description:`Efficiency dropped from ${a.toFixed(1)}% to ${s.toFixed(1)}%`,impact:"Worsening productivity trends",recommendation:"Investigate causes and implement corrective actions",data:{recent:s,previous:a},priority:7})}j(i.sort((s,a)=>a.priority-s.priority))},n=c.filter(t=>(r.status==="all"||t.status===r.status)&&(r.priority==="all"||t.priority===r.priority)&&(r.article==="all"||t.articleNumber===r.article)&&(r.batch==="all"||t.batchNumber===r.batch)&&(r.lot==="all"||t.lotNumber===r.lot)),o={total:n.length,completed:n.filter(t=>t.status==="finished"||t.status==="shipped").length,inProgress:n.filter(t=>["cutting","sewing","quality"].includes(t.status)).length,delayed:n.filter(t=>t.actualDuration&&t.actualDuration>t.plannedDuration*1.1).length,avgEfficiency:n.length>0?n.reduce((t,i)=>t+i.efficiency,0)/n.length:0,avgDefectRate:n.length>0?n.reduce((t,i)=>t+i.defectRate,0)/n.length:0,totalValue:n.reduce((t,i)=>t+i.totalEarnings,0),totalCost:n.reduce((t,i)=>t+i.totalCost,0)},S=[...new Set(c.map(t=>t.articleNumber))],D=[...new Set(c.map(t=>t.batchNumber))],I=[...new Set(c.map(t=>t.lotNumber))],z=t=>{switch(t){case"critical":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-200"}},W=t=>{switch(t){case"efficiency":return q;case"quality":return se;case"bottleneck":return L;case"cost":return Q;case"operator":return K;case"trend":return X;default:return V}};return N?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading bundle tracking data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[e.jsx(Z,{className:"h-8 w-8 text-blue-600"}),e.jsx("span",{children:"Bundle & Batch Tracking Analytics"})]}),e.jsxs("p",{className:"text-gray-600",children:["Track and analyze production performance across ",c.length," bundles"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:y,onChange:t=>b(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"})]}),e.jsxs(M,{onClick:()=>g(c),variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsx(l,{className:"p-1",children:e.jsx("div",{className:"flex space-x-1",children:[{id:"overview",label:"Overview",icon:X},{id:"batches",label:"Batch Tracking",icon:_},{id:"lots",label:"Lot Management",icon:ee},{id:"analytics",label:"Performance Analytics",icon:q},{id:"insights",label:"AI Insights",icon:V}].map(t=>{const i=t.icon;return e.jsxs(M,{onClick:()=>v(t.id),variant:x===t.id?"primary":"ghost",className:"flex items-center space-x-2",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:t.label})]},t.id)})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(_,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bundles"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:o.total.toLocaleString()})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:o.completed})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(te,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:o.inProgress})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(L,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delayed"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:o.delayed})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(q,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Efficiency"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:[o.avgEfficiency.toFixed(1),"%"]})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(Q,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:["Rs. ",o.totalValue.toFixed(0)]})]})]})})]}),m.filter(t=>t.severity==="critical").length>0&&e.jsx(l,{className:"p-4 border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Critical Issues Detected"}),e.jsxs("p",{className:"text-red-700",children:[m.filter(t=>t.severity==="critical").length," critical issues require immediate attention"]})]}),e.jsx(M,{onClick:()=>v("insights"),className:"bg-red-600 hover:bg-red-700 ml-auto",children:"View Insights"})]})}),e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>p({status:"all",priority:"all",article:"all",batch:"all",lot:"all"}),children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("select",{value:r.status,onChange:t=>p({...r,status:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"created",children:"Created"}),e.jsx("option",{value:"cutting",children:"Cutting"}),e.jsx("option",{value:"sewing",children:"Sewing"}),e.jsx("option",{value:"quality",children:"Quality Check"}),e.jsx("option",{value:"finished",children:"Finished"}),e.jsx("option",{value:"shipped",children:"Shipped"})]}),e.jsxs("select",{value:r.priority,onChange:t=>p({...r,priority:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"ðŸ”¥ Urgent"}),e.jsx("option",{value:"high",children:"âš ï¸ High"}),e.jsx("option",{value:"normal",children:"ðŸ“‹ Normal"}),e.jsx("option",{value:"low",children:"â³ Low"})]}),e.jsxs("select",{value:r.article,onChange:t=>p({...r,article:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Articles"}),S.map(t=>e.jsxs("option",{value:t,children:["Article ",t]},t))]}),e.jsxs("select",{value:r.batch,onChange:t=>p({...r,batch:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsxs("option",{value:"all",children:["All Batches (",D.length,")"]}),D.slice(0,20).map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:r.lot,onChange:t=>p({...r,lot:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsxs("option",{value:"all",children:["All Lots (",I.length,")"]}),I.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),x==="insights"&&e.jsx("div",{className:"space-y-4",children:e.jsxs(l,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"AI-Generated Insights & Recommendations"})]}),m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(O,{className:"h-12 w-12 text-green-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"All Systems Operating Well"}),e.jsx("p",{className:"text-gray-500",children:"No critical issues detected in current data analysis"})]}):e.jsx("div",{className:"space-y-4",children:m.map(t=>{const i=W(t.type);return e.jsx(l,{className:`p-4 border ${z(t.severity)}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white",children:e.jsx(i,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.title}),e.jsx(G,{className:`${z(t.severity)} border-0`,children:t.severity.toUpperCase()})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:t.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-900",children:"Impact:"}),e.jsx("p",{className:"text-gray-600",children:t.impact})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-900",children:"Recommendation:"}),e.jsx("p",{className:"text-gray-600",children:t.recommendation})]})]})]})]})},t.id)})})]})}),x!=="insights"&&e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:[x.charAt(0).toUpperCase()+x.slice(1)," View"]}),e.jsxs("p",{className:"text-gray-500",children:["Detailed ",x," tracking and analysis coming soon."]})]})})]})};export{Ne as BundleBatchTrackingDashboard,Ne as default};
