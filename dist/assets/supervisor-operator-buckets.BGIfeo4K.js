const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.B3OoR7j1.js","assets/query-vendor.DpsghfSz.js","assets/react-vendor.CfKEcsXX.js","assets/ui-vendor.D5U9TC-3.js","assets/firebase-vendor.D8xw0AXf.js","assets/utils-vendor.B0NEtgzl.js","assets/index.CZ3Rcx0c.css","assets/work-assignment-service.LzjhYera.js"])))=>i.map(i=>d[i]);
import{_ as f,B as m,C as i,a as p}from"./index.B3OoR7j1.js";import{j as e}from"./query-vendor.DpsghfSz.js";import{r as l}from"./react-vendor.CfKEcsXX.js";import{L as E}from"./LoadingSpinner.rP8tyFue.js";import{F as j}from"./UserIcon.BzFG2rMW.js";import{F as M}from"./ClockIcon.B0z2Gpg3.js";import"./ui-vendor.D5U9TC-3.js";import"./firebase-vendor.D8xw0AXf.js";import"./utils-vendor.B0NEtgzl.js";const R=({userRole:S})=>{const[r,y]=l.useState([]),[N,d]=l.useState(!0),[x,v]=l.useState(null),[o,u]=l.useState("overview");l.useEffect(()=>{h()},[]);const h=async()=>{d(!0);try{const{operatorService:t}=await f(async()=>{const{operatorService:s}=await import("./index.B3OoR7j1.js").then(T=>T.P);return{operatorService:s}},__vite__mapDeps([0,1,2,3,4,5,6])),{workAssignmentService:a}=await f(async()=>{const{workAssignmentService:s}=await import("./work-assignment-service.LzjhYera.js");return{workAssignmentService:s}},__vite__mapDeps([7,0,1,2,3,4,5,6])),n=await t.getAllOperators(),C=new Date;let c=[];n.success&&n.data&&(c=n.data.filter(s=>s!=null&&s.isActive).map(s=>({operatorId:s.id||"",operatorName:s.name||"Unknown",machineType:s.primaryMachine||"sewing",status:s.availabilityStatus==="available"?"active":"break",shift:s.shift||"morning",currentActivity:s.currentAssignments&&s.currentAssignments.length>0?{id:`act_${s.id}_current`,operatorId:s.id||"",operatorName:s.name||"Unknown",bundleNumber:`BND-${Math.floor(Math.random()*9999).toString().padStart(4,"0")}`,operationName:"Current Work",operationNameNepali:"à¤¹à¤¾à¤²à¤•à¥‹ à¤•à¤¾à¤®",status:"in_progress",startTime:new Date(C.getTime()-60*6e4),piecesCompleted:Math.floor(Math.random()*20),targetPieces:25,pricePerPiece:2.5,earnings:Math.floor(Math.random()*50),machineType:s.primaryMachine||"sewing",efficiency:s.averageEfficiency||85,defects:Math.floor(Math.random()*2)}:null,todayCompleted:[],recentCompleted:[],totalEarningsToday:Math.floor(Math.random()*200)+100,totalPiecesToday:Math.floor(Math.random()*100)+20,averageEfficiency:s.averageEfficiency||85}))),c.length===0&&(console.log("No active operators found, creating sample data..."),c=[{operatorId:"sample_op_1",operatorName:"Sample Operator",machineType:"sewing",status:"active",shift:"morning",currentActivity:null,todayCompleted:[],recentCompleted:[],totalEarningsToday:180,totalPiecesToday:45,averageEfficiency:85}]),y(c),d(!1)}catch(t){console.error("Error loading real operator data:",t),d(!1)}},b=t=>{switch(t){case"active":return"text-green-600 bg-green-100";case"break":return"text-yellow-600 bg-yellow-100";case"offline":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=t=>{switch(t){case"in_progress":return"info";case"completed":return"success";case"paused":return"warning";case"cancelled":return"danger";default:return"secondary"}},A=t=>{if(!t)return"N/A";const a=Math.floor(t/60),n=t%60;return a>0?`${a}h ${n}m`:`${n}m`},g=(t,a)=>Math.min(100,Math.round(t/a*100));return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(E,{})}):e.jsxs("div",{className:"p-4 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:"ðŸ­ Supervisor Operator Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Monitor ",r.length," operators and their real-time activities"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-white p-2 rounded-lg border",children:[e.jsx(m,{variant:o==="overview"?"primary":"outline",size:"sm",onClick:()=>u("overview"),children:"ðŸ“Š Overview"}),e.jsx(m,{variant:o==="detailed"?"primary":"outline",size:"sm",onClick:()=>u("detailed"),children:"ðŸ“‹ Detailed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(t=>t.status==="active").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Operators"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.filter(t=>t.status==="break").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"On Break"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.filter(t=>t.status==="offline").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Offline"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",r.reduce((t,a)=>t+a.totalEarningsToday,0).toFixed(0)]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.reduce((t,a)=>t+a.totalPiecesToday,0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Pieces"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(t=>e.jsxs(i,{className:`p-4 transition-all cursor-pointer hover:shadow-lg ${x===t.operatorId?"ring-2 ring-blue-500":""}`,onClick:()=>v(x===t.operatorId?null:t.operatorId),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.operatorName}),e.jsx("p",{className:"text-sm text-gray-600",children:t.machineType})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx(p,{variant:"outline",className:b(t.status),children:t.status}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.averageEfficiency.toFixed(1),"% efficiency"]})]})]}),t.currentActivity&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Current Task"}),e.jsx(p,{variant:w(t.currentActivity.status),children:t.currentActivity.status})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bundle:"}),e.jsx("span",{className:"font-mono",children:t.currentActivity.bundleNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Operation:"}),e.jsx("span",{children:t.currentActivity.operationName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progress:"}),e.jsxs("span",{children:[t.currentActivity.piecesCompleted,"/",t.currentActivity.targetPieces]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Earnings:"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["$",t.currentActivity.earnings.toFixed(2)]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${g(t.currentActivity.piecesCompleted,t.currentActivity.targetPieces)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[g(t.currentActivity.piecesCompleted,t.currentActivity.targetPieces),"% Complete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",t.totalEarningsToday.toFixed(0)]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Today's Earnings"})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:t.totalPiecesToday}),e.jsx("p",{className:"text-xs text-gray-600",children:"Pieces Completed"})]})]}),o==="detailed"&&t.todayCompleted.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Today's Completed Tasks"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.todayCompleted.map(a=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded border text-xs",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.operationName}),e.jsx("p",{className:"text-gray-600",children:a.bundleNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-green-600 font-medium",children:["$",a.earnings.toFixed(2)]}),e.jsxs("p",{className:"text-gray-500",children:[a.piecesCompleted," pcs"]})]})]}),a.qualityScore&&e.jsxs("div",{className:"mt-1 flex justify-between",children:[e.jsxs("span",{children:["Quality: ",a.qualityScore,"/10"]}),e.jsxs("span",{children:["Duration: ",A(a.duration)]})]})]},a.id))})]}),!t.currentActivity&&t.status!=="offline"&&e.jsxs("div",{className:"text-center p-4 text-gray-500",children:[e.jsx(M,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No current activity"})]})]},t.operatorId))}),r.length===0&&e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No operators found"}),e.jsx(m,{variant:"outline",onClick:h,className:"mt-4",children:"Refresh Data"})]})]})};export{R as default};
